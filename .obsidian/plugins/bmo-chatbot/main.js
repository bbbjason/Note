/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  default: () => BMOGPT6
});
module.exports = __toCommonJS(main_exports);
var import_obsidian11 = require("obsidian");

// src/view.ts
var import_obsidian3 = require("obsidian");

// src/utils/ColorConverter.ts
function colorToHex(colorValue) {
  if (colorValue.startsWith("hsl")) {
    const match = colorValue.match(/(\d+(\.\d+)?)%?/g);
    if (match === null || match.length < 3) {
      throw new Error("Invalid HSL value");
    }
    const h = parseInt(match[0]) / 360;
    const s = parseInt(match[1]) / 100;
    const l = parseInt(match[2]) / 100;
    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    const p = 2 * l - q;
    const r = hue2rgb(p, q, h + 1 / 3);
    const g = hue2rgb(p, q, h);
    const b = hue2rgb(p, q, h - 1 / 3);
    const toHex = function(c) {
      const hex2 = Math.round(c * 255).toString(16);
      return hex2.length === 1 ? "0" + hex2 : hex2;
    };
    const hex = "#" + toHex(r) + toHex(g) + toHex(b);
    return hex;
  } else if (colorValue.startsWith("rgb")) {
    const sep = colorValue.indexOf(",") > -1 ? "," : " ";
    const rgbArray = colorValue.substr(4).split(")")[0].split(sep);
    let r = (+rgbArray[0]).toString(16), g = (+rgbArray[1]).toString(16), b = (+rgbArray[2]).toString(16);
    if (r.length == 1)
      r = "0" + r;
    if (g.length == 1)
      g = "0" + g;
    if (b.length == 1)
      b = "0" + b;
    return "#" + r + g + b;
  } else {
    return colorValue;
  }
}
function hue2rgb(p, q, t) {
  if (t < 0)
    t += 1;
  if (t > 1)
    t -= 1;
  if (t < 1 / 6)
    return p + (q - p) * 6 * t;
  if (t < 1 / 2)
    return q;
  if (t < 2 / 3)
    return p + (q - p) * (2 / 3 - t) * 6;
  return p;
}

// src/components/FetchModel.ts
var import_obsidian = require("obsidian");

// node_modules/openai/version.mjs
var VERSION = "4.6.0";

// node_modules/openai/streaming.mjs
var Stream = class {
  constructor(response, controller) {
    this.response = response;
    this.controller = controller;
    this.decoder = new SSEDecoder();
  }
  async *iterMessages() {
    if (!this.response.body) {
      this.controller.abort();
      throw new Error(`Attempted to iterate over a response with no body`);
    }
    const lineDecoder = new LineDecoder();
    const iter = readableStreamAsyncIterable(this.response.body);
    for await (const chunk of iter) {
      for (const line of lineDecoder.decode(chunk)) {
        const sse = this.decoder.decode(line);
        if (sse)
          yield sse;
      }
    }
    for (const line of lineDecoder.flush()) {
      const sse = this.decoder.decode(line);
      if (sse)
        yield sse;
    }
  }
  async *[Symbol.asyncIterator]() {
    let done = false;
    try {
      for await (const sse of this.iterMessages()) {
        if (done)
          continue;
        if (sse.data.startsWith("[DONE]")) {
          done = true;
          continue;
        }
        if (sse.event === null) {
          try {
            yield JSON.parse(sse.data);
          } catch (e) {
            console.error(`Could not parse message into JSON:`, sse.data);
            console.error(`From chunk:`, sse.raw);
            throw e;
          }
        }
      }
      done = true;
    } catch (e) {
      if (e instanceof Error && e.name === "AbortError")
        return;
      throw e;
    } finally {
      if (!done)
        this.controller.abort();
    }
  }
};
var SSEDecoder = class {
  constructor() {
    this.event = null;
    this.data = [];
    this.chunks = [];
  }
  decode(line) {
    if (line.endsWith("\r")) {
      line = line.substring(0, line.length - 1);
    }
    if (!line) {
      if (!this.event && !this.data.length)
        return null;
      const sse = {
        event: this.event,
        data: this.data.join("\n"),
        raw: this.chunks
      };
      this.event = null;
      this.data = [];
      this.chunks = [];
      return sse;
    }
    this.chunks.push(line);
    if (line.startsWith(":")) {
      return null;
    }
    let [fieldname, _, value] = partition(line, ":");
    if (value.startsWith(" ")) {
      value = value.substring(1);
    }
    if (fieldname === "event") {
      this.event = value;
    } else if (fieldname === "data") {
      this.data.push(value);
    }
    return null;
  }
};
var LineDecoder = class {
  constructor() {
    this.buffer = [];
    this.trailingCR = false;
  }
  decode(chunk) {
    let text = this.decodeText(chunk);
    if (this.trailingCR) {
      text = "\r" + text;
      this.trailingCR = false;
    }
    if (text.endsWith("\r")) {
      this.trailingCR = true;
      text = text.slice(0, -1);
    }
    if (!text) {
      return [];
    }
    const trailingNewline = LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || "");
    let lines = text.split(LineDecoder.NEWLINE_REGEXP);
    if (lines.length === 1 && !trailingNewline) {
      this.buffer.push(lines[0]);
      return [];
    }
    if (this.buffer.length > 0) {
      lines = [this.buffer.join("") + lines[0], ...lines.slice(1)];
      this.buffer = [];
    }
    if (!trailingNewline) {
      this.buffer = [lines.pop() || ""];
    }
    return lines;
  }
  decodeText(bytes) {
    var _a2;
    if (bytes == null)
      return "";
    if (typeof bytes === "string")
      return bytes;
    if (typeof Buffer !== "undefined") {
      if (bytes instanceof Buffer) {
        return bytes.toString();
      }
      if (bytes instanceof Uint8Array) {
        return Buffer.from(bytes).toString();
      }
      throw new Error(
        `Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`
      );
    }
    if (typeof TextDecoder !== "undefined") {
      if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {
        (_a2 = this.textDecoder) !== null && _a2 !== void 0 ? _a2 : this.textDecoder = new TextDecoder("utf8");
        return this.textDecoder.decode(bytes);
      }
      throw new Error(
        `Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`
      );
    }
    throw new Error(
      `Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`
    );
  }
  flush() {
    if (!this.buffer.length && !this.trailingCR) {
      return [];
    }
    const lines = [this.buffer.join("")];
    this.buffer = [];
    this.trailingCR = false;
    return lines;
  }
};
LineDecoder.NEWLINE_CHARS = /* @__PURE__ */ new Set(["\n", "\r", "\v", "\f", "", "", "", "\x85", "\u2028", "\u2029"]);
LineDecoder.NEWLINE_REGEXP = /\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;
function partition(str, delimiter) {
  const index = str.indexOf(delimiter);
  if (index !== -1) {
    return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];
  }
  return [str, "", ""];
}
function readableStreamAsyncIterable(stream) {
  if (stream[Symbol.asyncIterator])
    return stream;
  const reader = stream.getReader();
  return {
    async next() {
      try {
        const result = await reader.read();
        if (result === null || result === void 0 ? void 0 : result.done)
          reader.releaseLock();
        return result;
      } catch (e) {
        reader.releaseLock();
        throw e;
      }
    },
    async return() {
      const cancelPromise = reader.cancel();
      reader.releaseLock();
      await cancelPromise;
      return { done: true, value: void 0 };
    },
    [Symbol.asyncIterator]() {
      return this;
    }
  };
}

// node_modules/openai/error.mjs
var error_exports = {};
__export(error_exports, {
  APIConnectionError: () => APIConnectionError,
  APIConnectionTimeoutError: () => APIConnectionTimeoutError,
  APIError: () => APIError,
  APIUserAbortError: () => APIUserAbortError,
  AuthenticationError: () => AuthenticationError,
  BadRequestError: () => BadRequestError,
  ConflictError: () => ConflictError,
  InternalServerError: () => InternalServerError,
  NotFoundError: () => NotFoundError,
  PermissionDeniedError: () => PermissionDeniedError,
  RateLimitError: () => RateLimitError,
  UnprocessableEntityError: () => UnprocessableEntityError
});
var APIError = class extends Error {
  constructor(status, error, message, headers) {
    super(APIError.makeMessage(error, message));
    this.status = status;
    this.headers = headers;
    const data = error;
    this.error = data;
    this.code = data === null || data === void 0 ? void 0 : data["code"];
    this.param = data === null || data === void 0 ? void 0 : data["param"];
    this.type = data === null || data === void 0 ? void 0 : data["type"];
  }
  static makeMessage(error, message) {
    return (error === null || error === void 0 ? void 0 : error.message) ? typeof error.message === "string" ? error.message : JSON.stringify(error.message) : error ? JSON.stringify(error) : message || "Unknown error occurred";
  }
  static generate(status, errorResponse, message, headers) {
    if (!status) {
      return new APIConnectionError({ cause: castToError(errorResponse) });
    }
    const error = errorResponse === null || errorResponse === void 0 ? void 0 : errorResponse["error"];
    if (status === 400) {
      return new BadRequestError(status, error, message, headers);
    }
    if (status === 401) {
      return new AuthenticationError(status, error, message, headers);
    }
    if (status === 403) {
      return new PermissionDeniedError(status, error, message, headers);
    }
    if (status === 404) {
      return new NotFoundError(status, error, message, headers);
    }
    if (status === 409) {
      return new ConflictError(status, error, message, headers);
    }
    if (status === 422) {
      return new UnprocessableEntityError(status, error, message, headers);
    }
    if (status === 429) {
      return new RateLimitError(status, error, message, headers);
    }
    if (status >= 500) {
      return new InternalServerError(status, error, message, headers);
    }
    return new APIError(status, error, message, headers);
  }
};
var APIUserAbortError = class extends APIError {
  constructor({ message } = {}) {
    super(void 0, void 0, message || "Request was aborted.", void 0);
    this.status = void 0;
  }
};
var APIConnectionError = class extends APIError {
  constructor({ message, cause }) {
    super(void 0, void 0, message || "Connection error.", void 0);
    this.status = void 0;
    if (cause)
      this.cause = cause;
  }
};
var APIConnectionTimeoutError = class extends APIConnectionError {
  constructor({ message } = {}) {
    super({ message: message !== null && message !== void 0 ? message : "Request timed out." });
  }
};
var BadRequestError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 400;
  }
};
var AuthenticationError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 401;
  }
};
var PermissionDeniedError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 403;
  }
};
var NotFoundError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 404;
  }
};
var ConflictError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 409;
  }
};
var UnprocessableEntityError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 422;
  }
};
var RateLimitError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 429;
  }
};
var InternalServerError = class extends APIError {
};

// node_modules/openai/_shims/agent.mjs
var getDefaultAgent = (url) => {
  return void 0;
};

// node_modules/openai/_shims/fetch.mjs
var _fetch = fetch.bind(void 0);
var isPolyfilled = false;

// node_modules/openai/_shims/form-data.mjs
var _FormData = FormData;
var _File = typeof File !== "undefined" ? File : (
  // Bun doesn't implement File yet, so just make a shim that throws a helpful error message
  class File2 extends Blob {
    constructor() {
      throw new Error(`file uploads aren't supported in this environment yet as 'File' is not defined`);
    }
  }
);

// node_modules/openai/_shims/getMultipartRequestOptions.mjs
async function getMultipartRequestOptions(form, opts) {
  return { ...opts, body: new MultipartBody(form) };
}

// node_modules/openai/_shims/fileFromPath.mjs
async function fileFromPath() {
  throw new Error(
    "The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads"
  );
}

// node_modules/openai/_shims/node-readable.mjs
function isFsReadStream(value) {
  return false;
}

// node_modules/openai/uploads.mjs
var isResponseLike = (value) => value != null && typeof value === "object" && typeof value.url === "string" && typeof value.blob === "function";
var isFileLike = (value) => value != null && typeof value === "object" && typeof value.name === "string" && typeof value.lastModified === "number" && isBlobLike(value);
var isBlobLike = (value) => value != null && typeof value === "object" && typeof value.size === "number" && typeof value.type === "string" && typeof value.text === "function" && typeof value.slice === "function" && typeof value.arrayBuffer === "function";
var isUploadable = (value) => {
  return isFileLike(value) || isResponseLike(value) || isFsReadStream(value);
};
async function toFile(value, name, options2 = {}) {
  var _a2, _b, _c;
  value = await value;
  if (isResponseLike(value)) {
    const blob = await value.blob();
    name || (name = (_a2 = new URL(value.url).pathname.split(/[\\/]/).pop()) !== null && _a2 !== void 0 ? _a2 : "unknown_file");
    return new _File([blob], name, options2);
  }
  const bits = await getBytes(value);
  name || (name = (_b = getName(value)) !== null && _b !== void 0 ? _b : "unknown_file");
  if (!options2.type) {
    const type = (_c = bits[0]) === null || _c === void 0 ? void 0 : _c.type;
    if (typeof type === "string") {
      options2 = { ...options2, type };
    }
  }
  return new _File(bits, name, options2);
}
async function getBytes(value) {
  var _a2;
  let parts = [];
  if (typeof value === "string" || ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.
  value instanceof ArrayBuffer) {
    parts.push(value);
  } else if (isBlobLike(value)) {
    parts.push(await value.arrayBuffer());
  } else if (isAsyncIterableIterator(value)) {
    for await (const chunk of value) {
      parts.push(chunk);
    }
  } else {
    throw new Error(
      `Unexpected data type: ${typeof value}; constructor: ${(_a2 = value === null || value === void 0 ? void 0 : value.constructor) === null || _a2 === void 0 ? void 0 : _a2.name}; props: ${propsForError(value)}`
    );
  }
  return parts;
}
function propsForError(value) {
  const props = Object.getOwnPropertyNames(value);
  return `[${props.map((p) => `"${p}"`).join(", ")}]`;
}
function getName(value) {
  var _a2;
  return getStringFromMaybeBuffer(value.name) || getStringFromMaybeBuffer(value.filename) || // For fs.ReadStream
  ((_a2 = getStringFromMaybeBuffer(value.path)) === null || _a2 === void 0 ? void 0 : _a2.split(/[\\/]/).pop());
}
var getStringFromMaybeBuffer = (x) => {
  if (typeof x === "string")
    return x;
  if (typeof Buffer !== "undefined" && x instanceof Buffer)
    return String(x);
  return void 0;
};
var isAsyncIterableIterator = (value) => value != null && typeof value === "object" && typeof value[Symbol.asyncIterator] === "function";
var MultipartBody = class {
  constructor(body) {
    this.body = body;
  }
  get [Symbol.toStringTag]() {
    return "MultipartBody";
  }
};
var isMultipartBody = (body) => body && typeof body === "object" && body.body && body[Symbol.toStringTag] === "MultipartBody";
var multipartFormRequestOptions = async (opts) => {
  const form = await createForm(opts.body);
  return getMultipartRequestOptions(form, opts);
};
var createForm = async (body) => {
  const form = new _FormData();
  await Promise.all(Object.entries(body || {}).map(([key, value]) => addFormValue(form, key, value)));
  return form;
};
var addFormValue = async (form, key, value) => {
  if (value === void 0)
    return;
  if (value == null) {
    throw new TypeError(
      `Received null for "${key}"; to pass null in FormData, you must use the string 'null'`
    );
  }
  if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
    form.append(key, String(value));
  } else if (isUploadable(value)) {
    const file = await toFile(value);
    form.append(key, file);
  } else if (Array.isArray(value)) {
    await Promise.all(value.map((entry) => addFormValue(form, key + "[]", entry)));
  } else if (typeof value === "object") {
    await Promise.all(
      Object.entries(value).map(([name, prop]) => addFormValue(form, `${key}[${name}]`, prop))
    );
  } else {
    throw new TypeError(
      `Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${value} instead`
    );
  }
};

// node_modules/openai/core.mjs
var __classPrivateFieldSet = function(receiver, state, value, kind, f) {
  if (kind === "m")
    throw new TypeError("Private method is not writable");
  if (kind === "a" && !f)
    throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet = function(receiver, state, kind, f) {
  if (kind === "a" && !f)
    throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _AbstractPage_client;
var MAX_RETRIES = 2;
async function defaultParseResponse(props) {
  const { response } = props;
  if (props.options.stream) {
    return new Stream(response, props.controller);
  }
  const contentType = response.headers.get("content-type");
  if (contentType === null || contentType === void 0 ? void 0 : contentType.includes("application/json")) {
    const json = await response.json();
    debug("response", response.status, response.url, response.headers, json);
    return json;
  }
  const text = await response.text();
  debug("response", response.status, response.url, response.headers, text);
  return text;
}
var APIPromise = class extends Promise {
  constructor(responsePromise, parseResponse = defaultParseResponse) {
    super((resolve) => {
      resolve(null);
    });
    this.responsePromise = responsePromise;
    this.parseResponse = parseResponse;
  }
  _thenUnwrap(transform) {
    return new APIPromise(this.responsePromise, async (props) => transform(await this.parseResponse(props)));
  }
  /**
   * Gets the raw `Response` instance instead of parsing the response
   * data.
   *
   * If you want to parse the response body but still get the `Response`
   * instance, you can use {@link withResponse()}.
   */
  asResponse() {
    return this.responsePromise.then((p) => p.response);
  }
  /**
   * Gets the parsed response data and the raw `Response` instance.
   *
   * If you just want to get the raw `Response` instance without parsing it,
   * you can use {@link asResponse()}.
   */
  async withResponse() {
    const [data, response] = await Promise.all([this.parse(), this.asResponse()]);
    return { data, response };
  }
  parse() {
    if (!this.parsedPromise) {
      this.parsedPromise = this.responsePromise.then(this.parseResponse);
    }
    return this.parsedPromise;
  }
  then(onfulfilled, onrejected) {
    return this.parse().then(onfulfilled, onrejected);
  }
  catch(onrejected) {
    return this.parse().catch(onrejected);
  }
  finally(onfinally) {
    return this.parse().finally(onfinally);
  }
};
var APIClient = class {
  constructor({
    baseURL,
    maxRetries,
    timeout = 6e5,
    // 10 minutes
    httpAgent,
    fetch: overridenFetch
  }) {
    this.baseURL = baseURL;
    this.maxRetries = validatePositiveInteger(
      "maxRetries",
      maxRetries !== null && maxRetries !== void 0 ? maxRetries : MAX_RETRIES
    );
    this.timeout = validatePositiveInteger("timeout", timeout);
    this.httpAgent = httpAgent;
    this.fetch = overridenFetch !== null && overridenFetch !== void 0 ? overridenFetch : _fetch;
  }
  authHeaders(opts) {
    return {};
  }
  /**
   * Override this to add your own default headers, for example:
   *
   *  {
   *    ...super.defaultHeaders(),
   *    Authorization: 'Bearer 123',
   *  }
   */
  defaultHeaders(opts) {
    return {
      Accept: "application/json",
      "Content-Type": "application/json",
      "User-Agent": this.getUserAgent(),
      ...getPlatformHeaders(),
      ...this.authHeaders(opts)
    };
  }
  /**
   * Override this to add your own headers validation:
   */
  validateHeaders(headers, customHeaders) {
  }
  defaultIdempotencyKey() {
    return `stainless-node-retry-${uuid4()}`;
  }
  get(path, opts) {
    return this.methodRequest("get", path, opts);
  }
  post(path, opts) {
    return this.methodRequest("post", path, opts);
  }
  patch(path, opts) {
    return this.methodRequest("patch", path, opts);
  }
  put(path, opts) {
    return this.methodRequest("put", path, opts);
  }
  delete(path, opts) {
    return this.methodRequest("delete", path, opts);
  }
  methodRequest(method, path, opts) {
    return this.request(Promise.resolve(opts).then((opts2) => ({ method, path, ...opts2 })));
  }
  getAPIList(path, Page2, opts) {
    return this.requestAPIList(Page2, { method: "get", path, ...opts });
  }
  calculateContentLength(body) {
    if (typeof body === "string") {
      if (typeof Buffer !== "undefined") {
        return Buffer.byteLength(body, "utf8").toString();
      }
      if (typeof TextEncoder !== "undefined") {
        const encoder = new TextEncoder();
        const encoded = encoder.encode(body);
        return encoded.length.toString();
      }
    }
    return null;
  }
  buildRequest(options2) {
    var _a2, _b, _c, _d, _e, _f;
    const { method, path, query, headers = {} } = options2;
    const body = isMultipartBody(options2.body) ? options2.body.body : options2.body ? JSON.stringify(options2.body, null, 2) : null;
    const contentLength = this.calculateContentLength(body);
    const url = this.buildURL(path, query);
    if ("timeout" in options2)
      validatePositiveInteger("timeout", options2.timeout);
    const timeout = (_a2 = options2.timeout) !== null && _a2 !== void 0 ? _a2 : this.timeout;
    const httpAgent = (_c = (_b = options2.httpAgent) !== null && _b !== void 0 ? _b : this.httpAgent) !== null && _c !== void 0 ? _c : getDefaultAgent(url);
    const minAgentTimeout = timeout + 1e3;
    if (typeof ((_d = httpAgent === null || httpAgent === void 0 ? void 0 : httpAgent.options) === null || _d === void 0 ? void 0 : _d.timeout) === "number" && minAgentTimeout > ((_e = httpAgent.options.timeout) !== null && _e !== void 0 ? _e : 0)) {
      httpAgent.options.timeout = minAgentTimeout;
    }
    if (this.idempotencyHeader && method !== "get") {
      if (!options2.idempotencyKey)
        options2.idempotencyKey = this.defaultIdempotencyKey();
      headers[this.idempotencyHeader] = options2.idempotencyKey;
    }
    const reqHeaders = {
      ...contentLength && { "Content-Length": contentLength },
      ...this.defaultHeaders(options2),
      ...headers
    };
    if (isMultipartBody(options2.body) && !isPolyfilled) {
      delete reqHeaders["Content-Type"];
    }
    Object.keys(reqHeaders).forEach((key) => reqHeaders[key] === null && delete reqHeaders[key]);
    const req = {
      method,
      ...body && { body },
      headers: reqHeaders,
      ...httpAgent && { agent: httpAgent },
      // @ts-ignore node-fetch uses a custom AbortSignal type that is
      // not compatible with standard web types
      signal: (_f = options2.signal) !== null && _f !== void 0 ? _f : null
    };
    this.validateHeaders(reqHeaders, headers);
    return { req, url, timeout };
  }
  /**
   * Used as a callback for mutating the given `RequestInit` object.
   *
   * This is useful for cases where you want to add certain headers based off of
   * the request properties, e.g. `method` or `url`.
   */
  async prepareRequest(request, { url, options: options2 }) {
  }
  parseHeaders(headers) {
    return !headers ? {} : Symbol.iterator in headers ? Object.fromEntries(Array.from(headers).map((header) => [...header])) : { ...headers };
  }
  makeStatusError(status, error, message, headers) {
    return APIError.generate(status, error, message, headers);
  }
  request(options2, remainingRetries = null) {
    return new APIPromise(this.makeRequest(options2, remainingRetries));
  }
  async makeRequest(optionsInput, retriesRemaining) {
    var _a2, _b, _c;
    const options2 = await optionsInput;
    if (retriesRemaining == null) {
      retriesRemaining = (_a2 = options2.maxRetries) !== null && _a2 !== void 0 ? _a2 : this.maxRetries;
    }
    const { req, url, timeout } = this.buildRequest(options2);
    await this.prepareRequest(req, { url, options: options2 });
    debug("request", url, options2, req.headers);
    if ((_b = options2.signal) === null || _b === void 0 ? void 0 : _b.aborted) {
      throw new APIUserAbortError();
    }
    const controller = new AbortController();
    const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);
    if (response instanceof Error) {
      if ((_c = options2.signal) === null || _c === void 0 ? void 0 : _c.aborted) {
        throw new APIUserAbortError();
      }
      if (retriesRemaining) {
        return this.retryRequest(options2, retriesRemaining);
      }
      if (response.name === "AbortError") {
        throw new APIConnectionTimeoutError();
      }
      throw new APIConnectionError({ cause: response });
    }
    const responseHeaders = createResponseHeaders(response.headers);
    if (!response.ok) {
      if (retriesRemaining && this.shouldRetry(response)) {
        return this.retryRequest(options2, retriesRemaining, responseHeaders);
      }
      const errText = await response.text().catch(() => "Unknown");
      const errJSON = safeJSON(errText);
      const errMessage = errJSON ? void 0 : errText;
      debug("response", response.status, url, responseHeaders, errMessage);
      const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);
      throw err;
    }
    return { response, options: options2, controller };
  }
  requestAPIList(Page2, options2) {
    const request = this.makeRequest(options2, null);
    return new PagePromise(this, request, Page2);
  }
  buildURL(path, query) {
    const url = isAbsoluteURL(path) ? new URL(path) : new URL(this.baseURL + (this.baseURL.endsWith("/") && path.startsWith("/") ? path.slice(1) : path));
    const defaultQuery = this.defaultQuery();
    if (!isEmptyObj(defaultQuery)) {
      query = { ...defaultQuery, ...query };
    }
    if (query) {
      url.search = this.stringifyQuery(query);
    }
    return url.toString();
  }
  stringifyQuery(query) {
    return Object.entries(query).filter(([_, value]) => typeof value !== "undefined").map(([key, value]) => {
      if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
      }
      if (value === null) {
        return `${encodeURIComponent(key)}=`;
      }
      throw new Error(
        `Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`
      );
    }).join("&");
  }
  async fetchWithTimeout(url, init, ms, controller) {
    const { signal, ...options2 } = init || {};
    if (signal)
      signal.addEventListener("abort", () => controller.abort());
    const timeout = setTimeout(() => controller.abort(), ms);
    return this.getRequestClient().fetch(url, { signal: controller.signal, ...options2 }).finally(() => {
      clearTimeout(timeout);
    });
  }
  getRequestClient() {
    return { fetch: this.fetch };
  }
  shouldRetry(response) {
    const shouldRetryHeader = response.headers.get("x-should-retry");
    if (shouldRetryHeader === "true")
      return true;
    if (shouldRetryHeader === "false")
      return false;
    if (response.status === 409)
      return true;
    if (response.status === 429)
      return true;
    if (response.status >= 500)
      return true;
    return false;
  }
  async retryRequest(options2, retriesRemaining, responseHeaders) {
    var _a2;
    retriesRemaining -= 1;
    const retryAfter = parseInt(
      (responseHeaders === null || responseHeaders === void 0 ? void 0 : responseHeaders["retry-after"]) || ""
    );
    const maxRetries = (_a2 = options2.maxRetries) !== null && _a2 !== void 0 ? _a2 : this.maxRetries;
    const timeout = this.calculateRetryTimeoutSeconds(retriesRemaining, retryAfter, maxRetries) * 1e3;
    await sleep(timeout);
    return this.makeRequest(options2, retriesRemaining);
  }
  calculateRetryTimeoutSeconds(retriesRemaining, retryAfter, maxRetries) {
    const initialRetryDelay = 0.5;
    const maxRetryDelay = 2;
    if (Number.isInteger(retryAfter) && retryAfter <= 60) {
      return retryAfter;
    }
    const numRetries = maxRetries - retriesRemaining;
    const sleepSeconds = Math.min(initialRetryDelay * Math.pow(numRetries - 1, 2), maxRetryDelay);
    const jitter = Math.random() - 0.5;
    return sleepSeconds + jitter;
  }
  getUserAgent() {
    return `${this.constructor.name}/JS ${VERSION}`;
  }
};
var AbstractPage = class {
  constructor(client, response, body, options2) {
    _AbstractPage_client.set(this, void 0);
    __classPrivateFieldSet(this, _AbstractPage_client, client, "f");
    this.options = options2;
    this.response = response;
    this.body = body;
  }
  hasNextPage() {
    const items = this.getPaginatedItems();
    if (!items.length)
      return false;
    return this.nextPageInfo() != null;
  }
  async getNextPage() {
    const nextInfo = this.nextPageInfo();
    if (!nextInfo) {
      throw new Error(
        "No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`."
      );
    }
    const nextOptions = { ...this.options };
    if ("params" in nextInfo) {
      nextOptions.query = { ...nextOptions.query, ...nextInfo.params };
    } else if ("url" in nextInfo) {
      const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];
      for (const [key, value] of params) {
        nextInfo.url.searchParams.set(key, value);
      }
      nextOptions.query = void 0;
      nextOptions.path = nextInfo.url.toString();
    }
    return await __classPrivateFieldGet(this, _AbstractPage_client, "f").requestAPIList(
      this.constructor,
      nextOptions
    );
  }
  async *iterPages() {
    let page = this;
    yield page;
    while (page.hasNextPage()) {
      page = await page.getNextPage();
      yield page;
    }
  }
  async *[(_AbstractPage_client = /* @__PURE__ */ new WeakMap(), Symbol.asyncIterator)]() {
    for await (const page of this.iterPages()) {
      for (const item of page.getPaginatedItems()) {
        yield item;
      }
    }
  }
};
var PagePromise = class extends APIPromise {
  constructor(client, request, Page2) {
    super(
      request,
      async (props) => new Page2(client, props.response, await defaultParseResponse(props), props.options)
    );
  }
  /**
   * Allow auto-paginating iteration on an unawaited list call, eg:
   *
   *    for await (const item of client.items.list()) {
   *      console.log(item)
   *    }
   */
  async *[Symbol.asyncIterator]() {
    const page = await this;
    for await (const item of page) {
      yield item;
    }
  }
};
var createResponseHeaders = (headers) => {
  return new Proxy(
    Object.fromEntries(
      // @ts-ignore
      headers.entries()
    ),
    {
      get(target, name) {
        const key = name.toString();
        return target[key.toLowerCase()] || target[key];
      }
    }
  );
};
var requestOptionsKeys = {
  method: true,
  path: true,
  query: true,
  body: true,
  headers: true,
  maxRetries: true,
  stream: true,
  timeout: true,
  httpAgent: true,
  signal: true,
  idempotencyKey: true
};
var isRequestOptions = (obj) => {
  return typeof obj === "object" && obj !== null && !isEmptyObj(obj) && Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k));
};
var getPlatformProperties = () => {
  if (typeof Deno !== "undefined" && Deno.build != null) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(Deno.build.os),
      "X-Stainless-Arch": normalizeArch(Deno.build.arch),
      "X-Stainless-Runtime": "deno",
      "X-Stainless-Runtime-Version": Deno.version
    };
  }
  if (typeof EdgeRuntime !== "undefined") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": `other:${EdgeRuntime}`,
      "X-Stainless-Runtime": "edge",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  if (Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(process.platform),
      "X-Stainless-Arch": normalizeArch(process.arch),
      "X-Stainless-Runtime": "node",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  const browserInfo = getBrowserInfo();
  if (browserInfo) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": "unknown",
      "X-Stainless-Runtime": `browser:${browserInfo.browser}`,
      "X-Stainless-Runtime-Version": browserInfo.version
    };
  }
  return {
    "X-Stainless-Lang": "js",
    "X-Stainless-Package-Version": VERSION,
    "X-Stainless-OS": "Unknown",
    "X-Stainless-Arch": "unknown",
    "X-Stainless-Runtime": "unknown",
    "X-Stainless-Runtime-Version": "unknown"
  };
};
function getBrowserInfo() {
  if (typeof navigator === "undefined" || !navigator) {
    return null;
  }
  const browserPatterns = [
    { key: "edge", pattern: /Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "chrome", pattern: /Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "firefox", pattern: /Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "safari", pattern: /(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/ }
  ];
  for (const { key, pattern } of browserPatterns) {
    const match = pattern.exec(navigator.userAgent);
    if (match) {
      const major = match[1] || 0;
      const minor = match[2] || 0;
      const patch = match[3] || 0;
      return { browser: key, version: `${major}.${minor}.${patch}` };
    }
  }
  return null;
}
var normalizeArch = (arch) => {
  if (arch === "x32")
    return "x32";
  if (arch === "x86_64" || arch === "x64")
    return "x64";
  if (arch === "arm")
    return "arm";
  if (arch === "aarch64" || arch === "arm64")
    return "arm64";
  if (arch)
    return `other:${arch}`;
  return "unknown";
};
var normalizePlatform = (platform) => {
  platform = platform.toLowerCase();
  if (platform.includes("ios"))
    return "iOS";
  if (platform === "android")
    return "Android";
  if (platform === "darwin")
    return "MacOS";
  if (platform === "win32")
    return "Windows";
  if (platform === "freebsd")
    return "FreeBSD";
  if (platform === "openbsd")
    return "OpenBSD";
  if (platform === "linux")
    return "Linux";
  if (platform)
    return `Other:${platform}`;
  return "Unknown";
};
var _platformHeaders;
var getPlatformHeaders = () => {
  return _platformHeaders !== null && _platformHeaders !== void 0 ? _platformHeaders : _platformHeaders = getPlatformProperties();
};
var safeJSON = (text) => {
  try {
    return JSON.parse(text);
  } catch (err) {
    return void 0;
  }
};
var startsWithSchemeRegexp = new RegExp("^(?:[a-z]+:)?//", "i");
var isAbsoluteURL = (url) => {
  return startsWithSchemeRegexp.test(url);
};
var sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
var validatePositiveInteger = (name, n) => {
  if (typeof n !== "number" || !Number.isInteger(n)) {
    throw new Error(`${name} must be an integer`);
  }
  if (n < 0) {
    throw new Error(`${name} must be a positive integer`);
  }
  return n;
};
var castToError = (err) => {
  if (err instanceof Error)
    return err;
  return new Error(err);
};
var readEnv = (env) => {
  var _a2, _b, _c, _d;
  if (typeof process !== "undefined") {
    return (_b = (_a2 = process.env) === null || _a2 === void 0 ? void 0 : _a2[env]) !== null && _b !== void 0 ? _b : void 0;
  }
  if (typeof Deno !== "undefined") {
    return (_d = (_c = Deno.env) === null || _c === void 0 ? void 0 : _c.get) === null || _d === void 0 ? void 0 : _d.call(_c, env);
  }
  return void 0;
};
function isEmptyObj(obj) {
  if (!obj)
    return true;
  for (const _k in obj)
    return false;
  return true;
}
function hasOwn(obj, key) {
  return Object.prototype.hasOwnProperty.call(obj, key);
}
function debug(action, ...args) {
  if (typeof process !== "undefined" && process.env["DEBUG"] === "true") {
    console.log(`OpenAI:DEBUG:${action}`, ...args);
  }
}
var uuid4 = () => {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
    const r = Math.random() * 16 | 0;
    const v = c === "x" ? r : r & 3 | 8;
    return v.toString(16);
  });
};
var isRunningInBrowser = () => {
  return (
    // @ts-ignore
    typeof window !== "undefined" && // @ts-ignore
    typeof window.document !== "undefined" && // @ts-ignore
    typeof navigator !== "undefined"
  );
};

// node_modules/openai/pagination.mjs
var Page = class extends AbstractPage {
  constructor(client, response, body, options2) {
    super(client, response, body, options2);
    this.object = body.object;
    this.data = body.data;
  }
  getPaginatedItems() {
    return this.data;
  }
  // @deprecated Please use `nextPageInfo()` instead
  /**
   * This page represents a response that isn't actually paginated at the API level
   * so there will never be any next page params.
   */
  nextPageParams() {
    return null;
  }
  nextPageInfo() {
    return null;
  }
};
var CursorPage = class extends AbstractPage {
  constructor(client, response, body, options2) {
    super(client, response, body, options2);
    this.data = body.data;
  }
  getPaginatedItems() {
    return this.data;
  }
  // @deprecated Please use `nextPageInfo()` instead
  nextPageParams() {
    const info = this.nextPageInfo();
    if (!info)
      return null;
    if ("params" in info)
      return info.params;
    const params = Object.fromEntries(info.url.searchParams);
    if (!Object.keys(params).length)
      return null;
    return params;
  }
  nextPageInfo() {
    var _a2, _b;
    if (!((_a2 = this.data) === null || _a2 === void 0 ? void 0 : _a2.length)) {
      return null;
    }
    const next = (_b = this.data[this.data.length - 1]) === null || _b === void 0 ? void 0 : _b.id;
    if (!next)
      return null;
    return { params: { after: next } };
  }
};

// node_modules/openai/resource.mjs
var APIResource = class {
  constructor(client) {
    this.client = client;
    this.get = client.get.bind(client);
    this.post = client.post.bind(client);
    this.patch = client.patch.bind(client);
    this.put = client.put.bind(client);
    this.delete = client.delete.bind(client);
    this.getAPIList = client.getAPIList.bind(client);
  }
};

// node_modules/openai/resources/audio/transcriptions.mjs
var Transcriptions = class extends APIResource {
  /**
   * Transcribes audio into the input language.
   */
  create(body, options2) {
    return this.post("/audio/transcriptions", multipartFormRequestOptions({ body, ...options2 }));
  }
};
(function(Transcriptions2) {
})(Transcriptions || (Transcriptions = {}));

// node_modules/openai/resources/audio/translations.mjs
var Translations = class extends APIResource {
  /**
   * Translates audio into English.
   */
  create(body, options2) {
    return this.post("/audio/translations", multipartFormRequestOptions({ body, ...options2 }));
  }
};
(function(Translations2) {
})(Translations || (Translations = {}));

// node_modules/openai/resources/audio/audio.mjs
var Audio = class extends APIResource {
  constructor() {
    super(...arguments);
    this.transcriptions = new Transcriptions(this.client);
    this.translations = new Translations(this.client);
  }
};
(function(Audio2) {
  Audio2.Transcriptions = Transcriptions;
  Audio2.Translations = Translations;
})(Audio || (Audio = {}));

// node_modules/openai/resources/chat/completions.mjs
var Completions = class extends APIResource {
  create(body, options2) {
    var _a2;
    return this.post("/chat/completions", {
      body,
      ...options2,
      stream: (_a2 = body.stream) !== null && _a2 !== void 0 ? _a2 : false
    });
  }
};
(function(Completions3) {
})(Completions || (Completions = {}));

// node_modules/openai/resources/chat/chat.mjs
var Chat = class extends APIResource {
  constructor() {
    super(...arguments);
    this.completions = new Completions(this.client);
  }
};
(function(Chat2) {
  Chat2.Completions = Completions;
})(Chat || (Chat = {}));

// node_modules/openai/resources/completions.mjs
var Completions2 = class extends APIResource {
  create(body, options2) {
    var _a2;
    return this.post("/completions", {
      body,
      ...options2,
      stream: (_a2 = body.stream) !== null && _a2 !== void 0 ? _a2 : false
    });
  }
};
(function(Completions3) {
})(Completions2 || (Completions2 = {}));

// node_modules/openai/resources/embeddings.mjs
var Embeddings = class extends APIResource {
  /**
   * Creates an embedding vector representing the input text.
   */
  create(body, options2) {
    return this.post("/embeddings", { body, ...options2 });
  }
};
(function(Embeddings2) {
})(Embeddings || (Embeddings = {}));

// node_modules/openai/resources/edits.mjs
var Edits = class extends APIResource {
  /**
   * Creates a new edit for the provided input, instruction, and parameters.
   *
   * @deprecated The Edits API is deprecated; please use Chat Completions instead.
   *
   * https://openai.com/blog/gpt-4-api-general-availability#deprecation-of-the-edits-api
   */
  create(body, options2) {
    return this.post("/edits", { body, ...options2 });
  }
};
(function(Edits2) {
})(Edits || (Edits = {}));

// node_modules/openai/resources/files.mjs
var Files = class extends APIResource {
  /**
   * Upload a file that contains document(s) to be used across various
   * endpoints/features. Currently, the size of all the files uploaded by one
   * organization can be up to 1 GB. Please contact us if you need to increase the
   * storage limit.
   */
  create(body, options2) {
    return this.post("/files", multipartFormRequestOptions({ body, ...options2 }));
  }
  /**
   * Returns information about a specific file.
   */
  retrieve(fileId, options2) {
    return this.get(`/files/${fileId}`, options2);
  }
  /**
   * Returns a list of files that belong to the user's organization.
   */
  list(options2) {
    return this.getAPIList("/files", FileObjectsPage, options2);
  }
  /**
   * Delete a file.
   */
  del(fileId, options2) {
    return this.delete(`/files/${fileId}`, options2);
  }
  /**
   * Returns the contents of the specified file
   */
  retrieveContent(fileId, options2) {
    return this.get(`/files/${fileId}/content`, {
      ...options2,
      headers: {
        Accept: "application/json",
        ...options2 === null || options2 === void 0 ? void 0 : options2.headers
      }
    });
  }
  /**
   * Waits for the given file to be processed, default timeout is 30 mins.
   */
  async waitForProcessing(id, { pollInterval = 5e3, maxWait = 30 * 60 * 1e3 } = {}) {
    const TERMINAL_STATES = /* @__PURE__ */ new Set(["processed", "error", "deleted"]);
    const start = Date.now();
    let file = await this.retrieve(id);
    while (!file.status || !TERMINAL_STATES.has(file.status)) {
      await sleep(pollInterval);
      file = await this.retrieve(id);
      if (Date.now() - start > maxWait) {
        throw new APIConnectionTimeoutError({
          message: `Giving up on waiting for file ${id} to finish processing after ${maxWait} milliseconds.`
        });
      }
    }
    return file;
  }
};
var FileObjectsPage = class extends Page {
};
(function(Files2) {
})(Files || (Files = {}));

// node_modules/openai/resources/fine-tunes.mjs
var FineTunes = class extends APIResource {
  /**
   * Creates a job that fine-tunes a specified model from a given dataset.
   *
   * Response includes details of the enqueued job including job status and the name
   * of the fine-tuned models once complete.
   *
   * [Learn more about fine-tuning](/docs/guides/legacy-fine-tuning)
   */
  create(body, options2) {
    return this.post("/fine-tunes", { body, ...options2 });
  }
  /**
   * Gets info about the fine-tune job.
   *
   * [Learn more about fine-tuning](/docs/guides/legacy-fine-tuning)
   */
  retrieve(fineTuneId, options2) {
    return this.get(`/fine-tunes/${fineTuneId}`, options2);
  }
  /**
   * List your organization's fine-tuning jobs
   */
  list(options2) {
    return this.getAPIList("/fine-tunes", FineTunesPage, options2);
  }
  /**
   * Immediately cancel a fine-tune job.
   */
  cancel(fineTuneId, options2) {
    return this.post(`/fine-tunes/${fineTuneId}/cancel`, options2);
  }
  listEvents(fineTuneId, query, options2) {
    var _a2;
    return this.get(`/fine-tunes/${fineTuneId}/events`, {
      query,
      timeout: 864e5,
      ...options2,
      stream: (_a2 = query === null || query === void 0 ? void 0 : query.stream) !== null && _a2 !== void 0 ? _a2 : false
    });
  }
};
var FineTunesPage = class extends Page {
};
(function(FineTunes2) {
})(FineTunes || (FineTunes = {}));

// node_modules/openai/resources/fine-tuning/jobs.mjs
var Jobs = class extends APIResource {
  /**
   * Creates a job that fine-tunes a specified model from a given dataset.
   *
   * Response includes details of the enqueued job including job status and the name
   * of the fine-tuned models once complete.
   *
   * [Learn more about fine-tuning](/docs/guides/fine-tuning)
   */
  create(body, options2) {
    return this.post("/fine_tuning/jobs", { body, ...options2 });
  }
  /**
   * Get info about a fine-tuning job.
   *
   * [Learn more about fine-tuning](/docs/guides/fine-tuning)
   */
  retrieve(fineTuningJobId, options2) {
    return this.get(`/fine_tuning/jobs/${fineTuningJobId}`, options2);
  }
  list(query = {}, options2) {
    if (isRequestOptions(query)) {
      return this.list({}, query);
    }
    return this.getAPIList("/fine_tuning/jobs", FineTuningJobsPage, { query, ...options2 });
  }
  /**
   * Immediately cancel a fine-tune job.
   */
  cancel(fineTuningJobId, options2) {
    return this.post(`/fine_tuning/jobs/${fineTuningJobId}/cancel`, options2);
  }
  listEvents(fineTuningJobId, query = {}, options2) {
    if (isRequestOptions(query)) {
      return this.listEvents(fineTuningJobId, {}, query);
    }
    return this.getAPIList(`/fine_tuning/jobs/${fineTuningJobId}/events`, FineTuningJobEventsPage, {
      query,
      ...options2
    });
  }
};
var FineTuningJobsPage = class extends CursorPage {
};
var FineTuningJobEventsPage = class extends CursorPage {
};
(function(Jobs2) {
})(Jobs || (Jobs = {}));

// node_modules/openai/resources/fine-tuning/fine-tuning.mjs
var FineTuning = class extends APIResource {
  constructor() {
    super(...arguments);
    this.jobs = new Jobs(this.client);
  }
};
(function(FineTuning2) {
  FineTuning2.Jobs = Jobs;
  FineTuning2.FineTuningJobsPage = FineTuningJobsPage;
  FineTuning2.FineTuningJobEventsPage = FineTuningJobEventsPage;
})(FineTuning || (FineTuning = {}));

// node_modules/openai/resources/images.mjs
var Images = class extends APIResource {
  /**
   * Creates a variation of a given image.
   */
  createVariation(body, options2) {
    return this.post("/images/variations", multipartFormRequestOptions({ body, ...options2 }));
  }
  /**
   * Creates an edited or extended image given an original image and a prompt.
   */
  edit(body, options2) {
    return this.post("/images/edits", multipartFormRequestOptions({ body, ...options2 }));
  }
  /**
   * Creates an image given a prompt.
   */
  generate(body, options2) {
    return this.post("/images/generations", { body, ...options2 });
  }
};
(function(Images2) {
})(Images || (Images = {}));

// node_modules/openai/resources/models.mjs
var Models = class extends APIResource {
  /**
   * Retrieves a model instance, providing basic information about the model such as
   * the owner and permissioning.
   */
  retrieve(model, options2) {
    return this.get(`/models/${model}`, options2);
  }
  /**
   * Lists the currently available models, and provides basic information about each
   * one such as the owner and availability.
   */
  list(options2) {
    return this.getAPIList("/models", ModelsPage, options2);
  }
  /**
   * Delete a fine-tuned model. You must have the Owner role in your organization to
   * delete a model.
   */
  del(model, options2) {
    return this.delete(`/models/${model}`, options2);
  }
};
var ModelsPage = class extends Page {
};
(function(Models2) {
})(Models || (Models = {}));

// node_modules/openai/resources/moderations.mjs
var Moderations = class extends APIResource {
  /**
   * Classifies if text violates OpenAI's Content Policy
   */
  create(body, options2) {
    return this.post("/moderations", { body, ...options2 });
  }
};
(function(Moderations2) {
})(Moderations || (Moderations = {}));

// node_modules/openai/index.mjs
var _a;
var OpenAI = class extends APIClient {
  /**
   * API Client for interfacing with the OpenAI API.
   *
   * @param {string} [opts.apiKey=process.env['OPENAI_API_KEY']] - The API Key to send to the API.
   * @param {string} [opts.baseURL] - Override the default base URL for the API.
   * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.
   * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.
   * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.
   * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.
   * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.
   * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.
   * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.
   * @param {string | null} [opts.organization]
   */
  constructor(_b) {
    var _c, _d, _e;
    var {
      apiKey = readEnv("OPENAI_API_KEY"),
      organization = (_c = readEnv("OPENAI_ORG_ID")) !== null && _c !== void 0 ? _c : null,
      ...opts
    } = _b === void 0 ? {} : _b;
    if (apiKey === void 0) {
      throw new Error(
        "The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' })."
      );
    }
    const options2 = {
      apiKey,
      organization,
      ...opts,
      baseURL: (_d = opts.baseURL) !== null && _d !== void 0 ? _d : `https://api.openai.com/v1`
    };
    if (!options2.dangerouslyAllowBrowser && isRunningInBrowser()) {
      throw new Error(
        "It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n"
      );
    }
    super({
      baseURL: options2.baseURL,
      timeout: (_e = options2.timeout) !== null && _e !== void 0 ? _e : 6e5,
      httpAgent: options2.httpAgent,
      maxRetries: options2.maxRetries,
      fetch: options2.fetch
    });
    this.completions = new Completions2(this);
    this.chat = new Chat(this);
    this.edits = new Edits(this);
    this.embeddings = new Embeddings(this);
    this.files = new Files(this);
    this.images = new Images(this);
    this.audio = new Audio(this);
    this.moderations = new Moderations(this);
    this.models = new Models(this);
    this.fineTuning = new FineTuning(this);
    this.fineTunes = new FineTunes(this);
    this._options = options2;
    this.apiKey = apiKey;
    this.organization = organization;
  }
  defaultQuery() {
    return this._options.defaultQuery;
  }
  defaultHeaders(opts) {
    return {
      ...super.defaultHeaders(opts),
      "OpenAI-Organization": this.organization,
      ...this._options.defaultHeaders
    };
  }
  authHeaders(opts) {
    return { Authorization: `Bearer ${this.apiKey}` };
  }
};
_a = OpenAI;
OpenAI.OpenAI = _a;
OpenAI.APIError = APIError;
OpenAI.APIConnectionError = APIConnectionError;
OpenAI.APIConnectionTimeoutError = APIConnectionTimeoutError;
OpenAI.APIUserAbortError = APIUserAbortError;
OpenAI.NotFoundError = NotFoundError;
OpenAI.ConflictError = ConflictError;
OpenAI.RateLimitError = RateLimitError;
OpenAI.BadRequestError = BadRequestError;
OpenAI.AuthenticationError = AuthenticationError;
OpenAI.InternalServerError = InternalServerError;
OpenAI.PermissionDeniedError = PermissionDeniedError;
OpenAI.UnprocessableEntityError = UnprocessableEntityError;
var {
  APIError: APIError2,
  APIConnectionError: APIConnectionError2,
  APIConnectionTimeoutError: APIConnectionTimeoutError2,
  APIUserAbortError: APIUserAbortError2,
  NotFoundError: NotFoundError2,
  ConflictError: ConflictError2,
  RateLimitError: RateLimitError2,
  BadRequestError: BadRequestError2,
  AuthenticationError: AuthenticationError2,
  InternalServerError: InternalServerError2,
  PermissionDeniedError: PermissionDeniedError2,
  UnprocessableEntityError: UnprocessableEntityError2
} = error_exports;
(function(OpenAI2) {
  OpenAI2.toFile = toFile;
  OpenAI2.fileFromPath = fileFromPath;
  OpenAI2.Page = Page;
  OpenAI2.CursorPage = CursorPage;
  OpenAI2.Completions = Completions2;
  OpenAI2.Chat = Chat;
  OpenAI2.Edits = Edits;
  OpenAI2.Embeddings = Embeddings;
  OpenAI2.Files = Files;
  OpenAI2.FileObjectsPage = FileObjectsPage;
  OpenAI2.Images = Images;
  OpenAI2.Audio = Audio;
  OpenAI2.Moderations = Moderations;
  OpenAI2.Models = Models;
  OpenAI2.ModelsPage = ModelsPage;
  OpenAI2.FineTuning = FineTuning;
  OpenAI2.FineTunes = FineTunes;
  OpenAI2.FineTunesPage = FineTunesPage;
})(OpenAI || (OpenAI = {}));
var openai_default = OpenAI;

// node_modules/marked/lib/marked.esm.js
function getDefaults() {
  return {
    async: false,
    baseUrl: null,
    breaks: false,
    extensions: null,
    gfm: true,
    headerIds: true,
    headerPrefix: "",
    highlight: null,
    hooks: null,
    langPrefix: "language-",
    mangle: true,
    pedantic: false,
    renderer: null,
    sanitize: false,
    sanitizer: null,
    silent: false,
    smartypants: false,
    tokenizer: null,
    walkTokens: null,
    xhtml: false
  };
}
var defaults = getDefaults();
function changeDefaults(newDefaults) {
  defaults = newDefaults;
}
var escapeTest = /[&<>"']/;
var escapeReplace = new RegExp(escapeTest.source, "g");
var escapeTestNoEncode = /[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/;
var escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, "g");
var escapeReplacements = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
};
var getEscapeReplacement = (ch) => escapeReplacements[ch];
function escape(html, encode) {
  if (encode) {
    if (escapeTest.test(html)) {
      return html.replace(escapeReplace, getEscapeReplacement);
    }
  } else {
    if (escapeTestNoEncode.test(html)) {
      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);
    }
  }
  return html;
}
var unescapeTest = /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;
function unescape(html) {
  return html.replace(unescapeTest, (_, n) => {
    n = n.toLowerCase();
    if (n === "colon")
      return ":";
    if (n.charAt(0) === "#") {
      return n.charAt(1) === "x" ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));
    }
    return "";
  });
}
var caret = /(^|[^\[])\^/g;
function edit(regex, opt) {
  regex = typeof regex === "string" ? regex : regex.source;
  opt = opt || "";
  const obj = {
    replace: (name, val) => {
      val = val.source || val;
      val = val.replace(caret, "$1");
      regex = regex.replace(name, val);
      return obj;
    },
    getRegex: () => {
      return new RegExp(regex, opt);
    }
  };
  return obj;
}
var nonWordAndColonTest = /[^\w:]/g;
var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;
function cleanUrl(sanitize, base, href) {
  if (sanitize) {
    let prot;
    try {
      prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, "").toLowerCase();
    } catch (e) {
      return null;
    }
    if (prot.indexOf("javascript:") === 0 || prot.indexOf("vbscript:") === 0 || prot.indexOf("data:") === 0) {
      return null;
    }
  }
  if (base && !originIndependentUrl.test(href)) {
    href = resolveUrl(base, href);
  }
  try {
    href = encodeURI(href).replace(/%25/g, "%");
  } catch (e) {
    return null;
  }
  return href;
}
var baseUrls = {};
var justDomain = /^[^:]+:\/*[^/]*$/;
var protocol = /^([^:]+:)[\s\S]*$/;
var domain = /^([^:]+:\/*[^/]*)[\s\S]*$/;
function resolveUrl(base, href) {
  if (!baseUrls[" " + base]) {
    if (justDomain.test(base)) {
      baseUrls[" " + base] = base + "/";
    } else {
      baseUrls[" " + base] = rtrim(base, "/", true);
    }
  }
  base = baseUrls[" " + base];
  const relativeBase = base.indexOf(":") === -1;
  if (href.substring(0, 2) === "//") {
    if (relativeBase) {
      return href;
    }
    return base.replace(protocol, "$1") + href;
  } else if (href.charAt(0) === "/") {
    if (relativeBase) {
      return href;
    }
    return base.replace(domain, "$1") + href;
  } else {
    return base + href;
  }
}
var noopTest = { exec: function noopTest2() {
} };
function splitCells(tableRow, count) {
  const row = tableRow.replace(/\|/g, (match, offset, str) => {
    let escaped = false, curr = offset;
    while (--curr >= 0 && str[curr] === "\\")
      escaped = !escaped;
    if (escaped) {
      return "|";
    } else {
      return " |";
    }
  }), cells = row.split(/ \|/);
  let i = 0;
  if (!cells[0].trim()) {
    cells.shift();
  }
  if (cells.length > 0 && !cells[cells.length - 1].trim()) {
    cells.pop();
  }
  if (cells.length > count) {
    cells.splice(count);
  } else {
    while (cells.length < count)
      cells.push("");
  }
  for (; i < cells.length; i++) {
    cells[i] = cells[i].trim().replace(/\\\|/g, "|");
  }
  return cells;
}
function rtrim(str, c, invert) {
  const l = str.length;
  if (l === 0) {
    return "";
  }
  let suffLen = 0;
  while (suffLen < l) {
    const currChar = str.charAt(l - suffLen - 1);
    if (currChar === c && !invert) {
      suffLen++;
    } else if (currChar !== c && invert) {
      suffLen++;
    } else {
      break;
    }
  }
  return str.slice(0, l - suffLen);
}
function findClosingBracket(str, b) {
  if (str.indexOf(b[1]) === -1) {
    return -1;
  }
  const l = str.length;
  let level = 0, i = 0;
  for (; i < l; i++) {
    if (str[i] === "\\") {
      i++;
    } else if (str[i] === b[0]) {
      level++;
    } else if (str[i] === b[1]) {
      level--;
      if (level < 0) {
        return i;
      }
    }
  }
  return -1;
}
function checkSanitizeDeprecation(opt) {
  if (opt && opt.sanitize && !opt.silent) {
    console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options");
  }
}
function repeatString(pattern, count) {
  if (count < 1) {
    return "";
  }
  let result = "";
  while (count > 1) {
    if (count & 1) {
      result += pattern;
    }
    count >>= 1;
    pattern += pattern;
  }
  return result + pattern;
}
function outputLink(cap, link, raw, lexer2) {
  const href = link.href;
  const title = link.title ? escape(link.title) : null;
  const text = cap[1].replace(/\\([\[\]])/g, "$1");
  if (cap[0].charAt(0) !== "!") {
    lexer2.state.inLink = true;
    const token = {
      type: "link",
      raw,
      href,
      title,
      text,
      tokens: lexer2.inlineTokens(text)
    };
    lexer2.state.inLink = false;
    return token;
  }
  return {
    type: "image",
    raw,
    href,
    title,
    text: escape(text)
  };
}
function indentCodeCompensation(raw, text) {
  const matchIndentToCode = raw.match(/^(\s+)(?:```)/);
  if (matchIndentToCode === null) {
    return text;
  }
  const indentToCode = matchIndentToCode[1];
  return text.split("\n").map((node) => {
    const matchIndentInNode = node.match(/^\s+/);
    if (matchIndentInNode === null) {
      return node;
    }
    const [indentInNode] = matchIndentInNode;
    if (indentInNode.length >= indentToCode.length) {
      return node.slice(indentToCode.length);
    }
    return node;
  }).join("\n");
}
var Tokenizer = class {
  constructor(options2) {
    this.options = options2 || defaults;
  }
  space(src) {
    const cap = this.rules.block.newline.exec(src);
    if (cap && cap[0].length > 0) {
      return {
        type: "space",
        raw: cap[0]
      };
    }
  }
  code(src) {
    const cap = this.rules.block.code.exec(src);
    if (cap) {
      const text = cap[0].replace(/^ {1,4}/gm, "");
      return {
        type: "code",
        raw: cap[0],
        codeBlockStyle: "indented",
        text: !this.options.pedantic ? rtrim(text, "\n") : text
      };
    }
  }
  fences(src) {
    const cap = this.rules.block.fences.exec(src);
    if (cap) {
      const raw = cap[0];
      const text = indentCodeCompensation(raw, cap[3] || "");
      return {
        type: "code",
        raw,
        lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, "$1") : cap[2],
        text
      };
    }
  }
  heading(src) {
    const cap = this.rules.block.heading.exec(src);
    if (cap) {
      let text = cap[2].trim();
      if (/#$/.test(text)) {
        const trimmed = rtrim(text, "#");
        if (this.options.pedantic) {
          text = trimmed.trim();
        } else if (!trimmed || / $/.test(trimmed)) {
          text = trimmed.trim();
        }
      }
      return {
        type: "heading",
        raw: cap[0],
        depth: cap[1].length,
        text,
        tokens: this.lexer.inline(text)
      };
    }
  }
  hr(src) {
    const cap = this.rules.block.hr.exec(src);
    if (cap) {
      return {
        type: "hr",
        raw: cap[0]
      };
    }
  }
  blockquote(src) {
    const cap = this.rules.block.blockquote.exec(src);
    if (cap) {
      const text = cap[0].replace(/^ *>[ \t]?/gm, "");
      const top = this.lexer.state.top;
      this.lexer.state.top = true;
      const tokens = this.lexer.blockTokens(text);
      this.lexer.state.top = top;
      return {
        type: "blockquote",
        raw: cap[0],
        tokens,
        text
      };
    }
  }
  list(src) {
    let cap = this.rules.block.list.exec(src);
    if (cap) {
      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, nextLine, rawLine, itemContents, endEarly;
      let bull = cap[1].trim();
      const isordered = bull.length > 1;
      const list = {
        type: "list",
        raw: "",
        ordered: isordered,
        start: isordered ? +bull.slice(0, -1) : "",
        loose: false,
        items: []
      };
      bull = isordered ? `\\d{1,9}\\${bull.slice(-1)}` : `\\${bull}`;
      if (this.options.pedantic) {
        bull = isordered ? bull : "[*+-]";
      }
      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[	 ][^\\n]*)?(?:\\n|$))`);
      while (src) {
        endEarly = false;
        if (!(cap = itemRegex.exec(src))) {
          break;
        }
        if (this.rules.block.hr.test(src)) {
          break;
        }
        raw = cap[0];
        src = src.substring(raw.length);
        line = cap[2].split("\n", 1)[0].replace(/^\t+/, (t) => " ".repeat(3 * t.length));
        nextLine = src.split("\n", 1)[0];
        if (this.options.pedantic) {
          indent = 2;
          itemContents = line.trimLeft();
        } else {
          indent = cap[2].search(/[^ ]/);
          indent = indent > 4 ? 1 : indent;
          itemContents = line.slice(indent);
          indent += cap[1].length;
        }
        blankLine = false;
        if (!line && /^ *$/.test(nextLine)) {
          raw += nextLine + "\n";
          src = src.substring(nextLine.length + 1);
          endEarly = true;
        }
        if (!endEarly) {
          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`);
          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`);
          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\`\`\`|~~~)`);
          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);
          while (src) {
            rawLine = src.split("\n", 1)[0];
            nextLine = rawLine;
            if (this.options.pedantic) {
              nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, "  ");
            }
            if (fencesBeginRegex.test(nextLine)) {
              break;
            }
            if (headingBeginRegex.test(nextLine)) {
              break;
            }
            if (nextBulletRegex.test(nextLine)) {
              break;
            }
            if (hrRegex.test(src)) {
              break;
            }
            if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) {
              itemContents += "\n" + nextLine.slice(indent);
            } else {
              if (blankLine) {
                break;
              }
              if (line.search(/[^ ]/) >= 4) {
                break;
              }
              if (fencesBeginRegex.test(line)) {
                break;
              }
              if (headingBeginRegex.test(line)) {
                break;
              }
              if (hrRegex.test(line)) {
                break;
              }
              itemContents += "\n" + nextLine;
            }
            if (!blankLine && !nextLine.trim()) {
              blankLine = true;
            }
            raw += rawLine + "\n";
            src = src.substring(rawLine.length + 1);
            line = nextLine.slice(indent);
          }
        }
        if (!list.loose) {
          if (endsWithBlankLine) {
            list.loose = true;
          } else if (/\n *\n *$/.test(raw)) {
            endsWithBlankLine = true;
          }
        }
        if (this.options.gfm) {
          istask = /^\[[ xX]\] /.exec(itemContents);
          if (istask) {
            ischecked = istask[0] !== "[ ] ";
            itemContents = itemContents.replace(/^\[[ xX]\] +/, "");
          }
        }
        list.items.push({
          type: "list_item",
          raw,
          task: !!istask,
          checked: ischecked,
          loose: false,
          text: itemContents
        });
        list.raw += raw;
      }
      list.items[list.items.length - 1].raw = raw.trimRight();
      list.items[list.items.length - 1].text = itemContents.trimRight();
      list.raw = list.raw.trimRight();
      const l = list.items.length;
      for (i = 0; i < l; i++) {
        this.lexer.state.top = false;
        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);
        if (!list.loose) {
          const spacers = list.items[i].tokens.filter((t) => t.type === "space");
          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some((t) => /\n.*\n/.test(t.raw));
          list.loose = hasMultipleLineBreaks;
        }
      }
      if (list.loose) {
        for (i = 0; i < l; i++) {
          list.items[i].loose = true;
        }
      }
      return list;
    }
  }
  html(src) {
    const cap = this.rules.block.html.exec(src);
    if (cap) {
      const token = {
        type: "html",
        raw: cap[0],
        pre: !this.options.sanitizer && (cap[1] === "pre" || cap[1] === "script" || cap[1] === "style"),
        text: cap[0]
      };
      if (this.options.sanitize) {
        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);
        token.type = "paragraph";
        token.text = text;
        token.tokens = this.lexer.inline(text);
      }
      return token;
    }
  }
  def(src) {
    const cap = this.rules.block.def.exec(src);
    if (cap) {
      const tag = cap[1].toLowerCase().replace(/\s+/g, " ");
      const href = cap[2] ? cap[2].replace(/^<(.*)>$/, "$1").replace(this.rules.inline._escapes, "$1") : "";
      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, "$1") : cap[3];
      return {
        type: "def",
        tag,
        raw: cap[0],
        href,
        title
      };
    }
  }
  table(src) {
    const cap = this.rules.block.table.exec(src);
    if (cap) {
      const item = {
        type: "table",
        header: splitCells(cap[1]).map((c) => {
          return { text: c };
        }),
        align: cap[2].replace(/^ *|\| *$/g, "").split(/ *\| */),
        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\n[ \t]*$/, "").split("\n") : []
      };
      if (item.header.length === item.align.length) {
        item.raw = cap[0];
        let l = item.align.length;
        let i, j, k, row;
        for (i = 0; i < l; i++) {
          if (/^ *-+: *$/.test(item.align[i])) {
            item.align[i] = "right";
          } else if (/^ *:-+: *$/.test(item.align[i])) {
            item.align[i] = "center";
          } else if (/^ *:-+ *$/.test(item.align[i])) {
            item.align[i] = "left";
          } else {
            item.align[i] = null;
          }
        }
        l = item.rows.length;
        for (i = 0; i < l; i++) {
          item.rows[i] = splitCells(item.rows[i], item.header.length).map((c) => {
            return { text: c };
          });
        }
        l = item.header.length;
        for (j = 0; j < l; j++) {
          item.header[j].tokens = this.lexer.inline(item.header[j].text);
        }
        l = item.rows.length;
        for (j = 0; j < l; j++) {
          row = item.rows[j];
          for (k = 0; k < row.length; k++) {
            row[k].tokens = this.lexer.inline(row[k].text);
          }
        }
        return item;
      }
    }
  }
  lheading(src) {
    const cap = this.rules.block.lheading.exec(src);
    if (cap) {
      return {
        type: "heading",
        raw: cap[0],
        depth: cap[2].charAt(0) === "=" ? 1 : 2,
        text: cap[1],
        tokens: this.lexer.inline(cap[1])
      };
    }
  }
  paragraph(src) {
    const cap = this.rules.block.paragraph.exec(src);
    if (cap) {
      const text = cap[1].charAt(cap[1].length - 1) === "\n" ? cap[1].slice(0, -1) : cap[1];
      return {
        type: "paragraph",
        raw: cap[0],
        text,
        tokens: this.lexer.inline(text)
      };
    }
  }
  text(src) {
    const cap = this.rules.block.text.exec(src);
    if (cap) {
      return {
        type: "text",
        raw: cap[0],
        text: cap[0],
        tokens: this.lexer.inline(cap[0])
      };
    }
  }
  escape(src) {
    const cap = this.rules.inline.escape.exec(src);
    if (cap) {
      return {
        type: "escape",
        raw: cap[0],
        text: escape(cap[1])
      };
    }
  }
  tag(src) {
    const cap = this.rules.inline.tag.exec(src);
    if (cap) {
      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {
        this.lexer.state.inLink = true;
      } else if (this.lexer.state.inLink && /^<\/a>/i.test(cap[0])) {
        this.lexer.state.inLink = false;
      }
      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\s|>)/i.test(cap[0])) {
        this.lexer.state.inRawBlock = true;
      } else if (this.lexer.state.inRawBlock && /^<\/(pre|code|kbd|script)(\s|>)/i.test(cap[0])) {
        this.lexer.state.inRawBlock = false;
      }
      return {
        type: this.options.sanitize ? "text" : "html",
        raw: cap[0],
        inLink: this.lexer.state.inLink,
        inRawBlock: this.lexer.state.inRawBlock,
        text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]
      };
    }
  }
  link(src) {
    const cap = this.rules.inline.link.exec(src);
    if (cap) {
      const trimmedUrl = cap[2].trim();
      if (!this.options.pedantic && /^</.test(trimmedUrl)) {
        if (!/>$/.test(trimmedUrl)) {
          return;
        }
        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), "\\");
        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {
          return;
        }
      } else {
        const lastParenIndex = findClosingBracket(cap[2], "()");
        if (lastParenIndex > -1) {
          const start = cap[0].indexOf("!") === 0 ? 5 : 4;
          const linkLen = start + cap[1].length + lastParenIndex;
          cap[2] = cap[2].substring(0, lastParenIndex);
          cap[0] = cap[0].substring(0, linkLen).trim();
          cap[3] = "";
        }
      }
      let href = cap[2];
      let title = "";
      if (this.options.pedantic) {
        const link = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(href);
        if (link) {
          href = link[1];
          title = link[3];
        }
      } else {
        title = cap[3] ? cap[3].slice(1, -1) : "";
      }
      href = href.trim();
      if (/^</.test(href)) {
        if (this.options.pedantic && !/>$/.test(trimmedUrl)) {
          href = href.slice(1);
        } else {
          href = href.slice(1, -1);
        }
      }
      return outputLink(cap, {
        href: href ? href.replace(this.rules.inline._escapes, "$1") : href,
        title: title ? title.replace(this.rules.inline._escapes, "$1") : title
      }, cap[0], this.lexer);
    }
  }
  reflink(src, links) {
    let cap;
    if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {
      let link = (cap[2] || cap[1]).replace(/\s+/g, " ");
      link = links[link.toLowerCase()];
      if (!link) {
        const text = cap[0].charAt(0);
        return {
          type: "text",
          raw: text,
          text
        };
      }
      return outputLink(cap, link, cap[0], this.lexer);
    }
  }
  emStrong(src, maskedSrc, prevChar = "") {
    let match = this.rules.inline.emStrong.lDelim.exec(src);
    if (!match)
      return;
    if (match[3] && prevChar.match(/[\p{L}\p{N}]/u))
      return;
    const nextChar = match[1] || match[2] || "";
    if (!nextChar || nextChar && (prevChar === "" || this.rules.inline.punctuation.exec(prevChar))) {
      const lLength = match[0].length - 1;
      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;
      const endReg = match[0][0] === "*" ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;
      endReg.lastIndex = 0;
      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);
      while ((match = endReg.exec(maskedSrc)) != null) {
        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];
        if (!rDelim)
          continue;
        rLength = rDelim.length;
        if (match[3] || match[4]) {
          delimTotal += rLength;
          continue;
        } else if (match[5] || match[6]) {
          if (lLength % 3 && !((lLength + rLength) % 3)) {
            midDelimTotal += rLength;
            continue;
          }
        }
        delimTotal -= rLength;
        if (delimTotal > 0)
          continue;
        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);
        const raw = src.slice(0, lLength + match.index + (match[0].length - rDelim.length) + rLength);
        if (Math.min(lLength, rLength) % 2) {
          const text2 = raw.slice(1, -1);
          return {
            type: "em",
            raw,
            text: text2,
            tokens: this.lexer.inlineTokens(text2)
          };
        }
        const text = raw.slice(2, -2);
        return {
          type: "strong",
          raw,
          text,
          tokens: this.lexer.inlineTokens(text)
        };
      }
    }
  }
  codespan(src) {
    const cap = this.rules.inline.code.exec(src);
    if (cap) {
      let text = cap[2].replace(/\n/g, " ");
      const hasNonSpaceChars = /[^ ]/.test(text);
      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);
      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {
        text = text.substring(1, text.length - 1);
      }
      text = escape(text, true);
      return {
        type: "codespan",
        raw: cap[0],
        text
      };
    }
  }
  br(src) {
    const cap = this.rules.inline.br.exec(src);
    if (cap) {
      return {
        type: "br",
        raw: cap[0]
      };
    }
  }
  del(src) {
    const cap = this.rules.inline.del.exec(src);
    if (cap) {
      return {
        type: "del",
        raw: cap[0],
        text: cap[2],
        tokens: this.lexer.inlineTokens(cap[2])
      };
    }
  }
  autolink(src, mangle2) {
    const cap = this.rules.inline.autolink.exec(src);
    if (cap) {
      let text, href;
      if (cap[2] === "@") {
        text = escape(this.options.mangle ? mangle2(cap[1]) : cap[1]);
        href = "mailto:" + text;
      } else {
        text = escape(cap[1]);
        href = text;
      }
      return {
        type: "link",
        raw: cap[0],
        text,
        href,
        tokens: [
          {
            type: "text",
            raw: text,
            text
          }
        ]
      };
    }
  }
  url(src, mangle2) {
    let cap;
    if (cap = this.rules.inline.url.exec(src)) {
      let text, href;
      if (cap[2] === "@") {
        text = escape(this.options.mangle ? mangle2(cap[0]) : cap[0]);
        href = "mailto:" + text;
      } else {
        let prevCapZero;
        do {
          prevCapZero = cap[0];
          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];
        } while (prevCapZero !== cap[0]);
        text = escape(cap[0]);
        if (cap[1] === "www.") {
          href = "http://" + cap[0];
        } else {
          href = cap[0];
        }
      }
      return {
        type: "link",
        raw: cap[0],
        text,
        href,
        tokens: [
          {
            type: "text",
            raw: text,
            text
          }
        ]
      };
    }
  }
  inlineText(src, smartypants2) {
    const cap = this.rules.inline.text.exec(src);
    if (cap) {
      let text;
      if (this.lexer.state.inRawBlock) {
        text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];
      } else {
        text = escape(this.options.smartypants ? smartypants2(cap[0]) : cap[0]);
      }
      return {
        type: "text",
        raw: cap[0],
        text
      };
    }
  }
};
var block = {
  newline: /^(?: *(?:\n|$))+/,
  code: /^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,
  fences: /^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,
  hr: /^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,
  heading: /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,
  blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,
  list: /^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,
  html: "^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",
  def: /^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,
  table: noopTest,
  lheading: /^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  // regex template, placeholders will be replaced according to different paragraph
  // interruption rules of commonmark and the original markdown spec:
  _paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,
  text: /^[^\n]+/
};
block._label = /(?!\s*\])(?:\\.|[^\[\]\\])+/;
block._title = /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;
block.def = edit(block.def).replace("label", block._label).replace("title", block._title).getRegex();
block.bullet = /(?:[*+-]|\d{1,9}[.)])/;
block.listItemStart = edit(/^( *)(bull) */).replace("bull", block.bullet).getRegex();
block.list = edit(block.list).replace(/bull/g, block.bullet).replace("hr", "\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def", "\\n+(?=" + block.def.source + ")").getRegex();
block._tag = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";
block._comment = /<!--(?!-?>)[\s\S]*?(?:-->|$)/;
block.html = edit(block.html, "i").replace("comment", block._comment).replace("tag", block._tag).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();
block.paragraph = edit(block._paragraph).replace("hr", block.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("|table", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", block._tag).getRegex();
block.blockquote = edit(block.blockquote).replace("paragraph", block.paragraph).getRegex();
block.normal = { ...block };
block.gfm = {
  ...block.normal,
  table: "^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"
  // Cells
};
block.gfm.table = edit(block.gfm.table).replace("hr", block.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", block._tag).getRegex();
block.gfm.paragraph = edit(block._paragraph).replace("hr", block.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("table", block.gfm.table).replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", block._tag).getRegex();
block.pedantic = {
  ...block.normal,
  html: edit(
    `^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`
  ).replace("comment", block._comment).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,
  heading: /^(#{1,6})(.*)(?:\n+|$)/,
  fences: noopTest,
  // fences not supported
  lheading: /^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  paragraph: edit(block.normal._paragraph).replace("hr", block.hr).replace("heading", " *#{1,6} *[^\n]").replace("lheading", block.lheading).replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").getRegex()
};
var inline = {
  escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,
  autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/,
  url: noopTest,
  tag: "^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",
  // CDATA section
  link: /^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,
  reflink: /^!?\[(label)\]\[(ref)\]/,
  nolink: /^!?\[(ref)\](?:\[\])?/,
  reflinkSearch: "reflink|nolink(?!\\()",
  emStrong: {
    lDelim: /^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,
    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.
    //          () Skip orphan inside strong                                      () Consume to delim     (1) #***                (2) a***#, a***                             (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a
    rDelimAst: /^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,
    rDelimUnd: /^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/
    // ^- Not allowed for _
  },
  code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,
  br: /^( {2,}|\\)\n(?!\s*$)/,
  del: noopTest,
  text: /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,
  punctuation: /^([\spunctuation])/
};
inline._punctuation = "!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";
inline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();
inline.blockSkip = /\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;
inline.escapedEmSt = /(?:^|[^\\])(?:\\\\)*\\[*_]/g;
inline._comment = edit(block._comment).replace("(?:-->|$)", "-->").getRegex();
inline.emStrong.lDelim = edit(inline.emStrong.lDelim).replace(/punct/g, inline._punctuation).getRegex();
inline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, "g").replace(/punct/g, inline._punctuation).getRegex();
inline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, "g").replace(/punct/g, inline._punctuation).getRegex();
inline._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;
inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;
inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;
inline.autolink = edit(inline.autolink).replace("scheme", inline._scheme).replace("email", inline._email).getRegex();
inline._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;
inline.tag = edit(inline.tag).replace("comment", inline._comment).replace("attribute", inline._attribute).getRegex();
inline._label = /(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;
inline._href = /<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;
inline._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;
inline.link = edit(inline.link).replace("label", inline._label).replace("href", inline._href).replace("title", inline._title).getRegex();
inline.reflink = edit(inline.reflink).replace("label", inline._label).replace("ref", block._label).getRegex();
inline.nolink = edit(inline.nolink).replace("ref", block._label).getRegex();
inline.reflinkSearch = edit(inline.reflinkSearch, "g").replace("reflink", inline.reflink).replace("nolink", inline.nolink).getRegex();
inline.normal = { ...inline };
inline.pedantic = {
  ...inline.normal,
  strong: {
    start: /^__|\*\*/,
    middle: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
    endAst: /\*\*(?!\*)/g,
    endUnd: /__(?!_)/g
  },
  em: {
    start: /^_|\*/,
    middle: /^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,
    endAst: /\*(?!\*)/g,
    endUnd: /_(?!_)/g
  },
  link: edit(/^!?\[(label)\]\((.*?)\)/).replace("label", inline._label).getRegex(),
  reflink: edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", inline._label).getRegex()
};
inline.gfm = {
  ...inline.normal,
  escape: edit(inline.escape).replace("])", "~|])").getRegex(),
  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,
  url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,
  _backpedal: /(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,
  del: /^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,
  text: /^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/
};
inline.gfm.url = edit(inline.gfm.url, "i").replace("email", inline.gfm._extended_email).getRegex();
inline.breaks = {
  ...inline.gfm,
  br: edit(inline.br).replace("{2,}", "*").getRegex(),
  text: edit(inline.gfm.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex()
};
function smartypants(text) {
  return text.replace(/---/g, "\u2014").replace(/--/g, "\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g, "$1\u2018").replace(/'/g, "\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1\u201C").replace(/"/g, "\u201D").replace(/\.{3}/g, "\u2026");
}
function mangle(text) {
  let out = "", i, ch;
  const l = text.length;
  for (i = 0; i < l; i++) {
    ch = text.charCodeAt(i);
    if (Math.random() > 0.5) {
      ch = "x" + ch.toString(16);
    }
    out += "&#" + ch + ";";
  }
  return out;
}
var Lexer = class {
  constructor(options2) {
    this.tokens = [];
    this.tokens.links = /* @__PURE__ */ Object.create(null);
    this.options = options2 || defaults;
    this.options.tokenizer = this.options.tokenizer || new Tokenizer();
    this.tokenizer = this.options.tokenizer;
    this.tokenizer.options = this.options;
    this.tokenizer.lexer = this;
    this.inlineQueue = [];
    this.state = {
      inLink: false,
      inRawBlock: false,
      top: true
    };
    const rules = {
      block: block.normal,
      inline: inline.normal
    };
    if (this.options.pedantic) {
      rules.block = block.pedantic;
      rules.inline = inline.pedantic;
    } else if (this.options.gfm) {
      rules.block = block.gfm;
      if (this.options.breaks) {
        rules.inline = inline.breaks;
      } else {
        rules.inline = inline.gfm;
      }
    }
    this.tokenizer.rules = rules;
  }
  /**
   * Expose Rules
   */
  static get rules() {
    return {
      block,
      inline
    };
  }
  /**
   * Static Lex Method
   */
  static lex(src, options2) {
    const lexer2 = new Lexer(options2);
    return lexer2.lex(src);
  }
  /**
   * Static Lex Inline Method
   */
  static lexInline(src, options2) {
    const lexer2 = new Lexer(options2);
    return lexer2.inlineTokens(src);
  }
  /**
   * Preprocessing
   */
  lex(src) {
    src = src.replace(/\r\n|\r/g, "\n");
    this.blockTokens(src, this.tokens);
    let next;
    while (next = this.inlineQueue.shift()) {
      this.inlineTokens(next.src, next.tokens);
    }
    return this.tokens;
  }
  /**
   * Lexing
   */
  blockTokens(src, tokens = []) {
    if (this.options.pedantic) {
      src = src.replace(/\t/g, "    ").replace(/^ +$/gm, "");
    } else {
      src = src.replace(/^( *)(\t+)/gm, (_, leading, tabs) => {
        return leading + "    ".repeat(tabs.length);
      });
    }
    let token, lastToken, cutSrc, lastParagraphClipped;
    while (src) {
      if (this.options.extensions && this.options.extensions.block && this.options.extensions.block.some((extTokenizer) => {
        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {
          src = src.substring(token.raw.length);
          tokens.push(token);
          return true;
        }
        return false;
      })) {
        continue;
      }
      if (token = this.tokenizer.space(src)) {
        src = src.substring(token.raw.length);
        if (token.raw.length === 1 && tokens.length > 0) {
          tokens[tokens.length - 1].raw += "\n";
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.code(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && (lastToken.type === "paragraph" || lastToken.type === "text")) {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.text;
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.fences(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.heading(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.hr(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.blockquote(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.list(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.html(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.def(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && (lastToken.type === "paragraph" || lastToken.type === "text")) {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.raw;
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else if (!this.tokens.links[token.tag]) {
          this.tokens.links[token.tag] = {
            href: token.href,
            title: token.title
          };
        }
        continue;
      }
      if (token = this.tokenizer.table(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.lheading(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      cutSrc = src;
      if (this.options.extensions && this.options.extensions.startBlock) {
        let startIndex = Infinity;
        const tempSrc = src.slice(1);
        let tempStart;
        this.options.extensions.startBlock.forEach(function(getStartIndex) {
          tempStart = getStartIndex.call({ lexer: this }, tempSrc);
          if (typeof tempStart === "number" && tempStart >= 0) {
            startIndex = Math.min(startIndex, tempStart);
          }
        });
        if (startIndex < Infinity && startIndex >= 0) {
          cutSrc = src.substring(0, startIndex + 1);
        }
      }
      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {
        lastToken = tokens[tokens.length - 1];
        if (lastParagraphClipped && lastToken.type === "paragraph") {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.text;
          this.inlineQueue.pop();
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else {
          tokens.push(token);
        }
        lastParagraphClipped = cutSrc.length !== src.length;
        src = src.substring(token.raw.length);
        continue;
      }
      if (token = this.tokenizer.text(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && lastToken.type === "text") {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.text;
          this.inlineQueue.pop();
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (src) {
        const errMsg = "Infinite loop on byte: " + src.charCodeAt(0);
        if (this.options.silent) {
          console.error(errMsg);
          break;
        } else {
          throw new Error(errMsg);
        }
      }
    }
    this.state.top = true;
    return tokens;
  }
  inline(src, tokens = []) {
    this.inlineQueue.push({ src, tokens });
    return tokens;
  }
  /**
   * Lexing/Compiling
   */
  inlineTokens(src, tokens = []) {
    let token, lastToken, cutSrc;
    let maskedSrc = src;
    let match;
    let keepPrevChar, prevChar;
    if (this.tokens.links) {
      const links = Object.keys(this.tokens.links);
      if (links.length > 0) {
        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {
          if (links.includes(match[0].slice(match[0].lastIndexOf("[") + 1, -1))) {
            maskedSrc = maskedSrc.slice(0, match.index) + "[" + repeatString("a", match[0].length - 2) + "]" + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);
          }
        }
      }
    }
    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {
      maskedSrc = maskedSrc.slice(0, match.index) + "[" + repeatString("a", match[0].length - 2) + "]" + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);
    }
    while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {
      maskedSrc = maskedSrc.slice(0, match.index + match[0].length - 2) + "++" + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);
      this.tokenizer.rules.inline.escapedEmSt.lastIndex--;
    }
    while (src) {
      if (!keepPrevChar) {
        prevChar = "";
      }
      keepPrevChar = false;
      if (this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some((extTokenizer) => {
        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {
          src = src.substring(token.raw.length);
          tokens.push(token);
          return true;
        }
        return false;
      })) {
        continue;
      }
      if (token = this.tokenizer.escape(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.tag(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && token.type === "text" && lastToken.type === "text") {
          lastToken.raw += token.raw;
          lastToken.text += token.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.link(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.reflink(src, this.tokens.links)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && token.type === "text" && lastToken.type === "text") {
          lastToken.raw += token.raw;
          lastToken.text += token.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.codespan(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.br(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.del(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.autolink(src, mangle)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      cutSrc = src;
      if (this.options.extensions && this.options.extensions.startInline) {
        let startIndex = Infinity;
        const tempSrc = src.slice(1);
        let tempStart;
        this.options.extensions.startInline.forEach(function(getStartIndex) {
          tempStart = getStartIndex.call({ lexer: this }, tempSrc);
          if (typeof tempStart === "number" && tempStart >= 0) {
            startIndex = Math.min(startIndex, tempStart);
          }
        });
        if (startIndex < Infinity && startIndex >= 0) {
          cutSrc = src.substring(0, startIndex + 1);
        }
      }
      if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {
        src = src.substring(token.raw.length);
        if (token.raw.slice(-1) !== "_") {
          prevChar = token.raw.slice(-1);
        }
        keepPrevChar = true;
        lastToken = tokens[tokens.length - 1];
        if (lastToken && lastToken.type === "text") {
          lastToken.raw += token.raw;
          lastToken.text += token.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (src) {
        const errMsg = "Infinite loop on byte: " + src.charCodeAt(0);
        if (this.options.silent) {
          console.error(errMsg);
          break;
        } else {
          throw new Error(errMsg);
        }
      }
    }
    return tokens;
  }
};
var Renderer = class {
  constructor(options2) {
    this.options = options2 || defaults;
  }
  code(code, infostring, escaped) {
    const lang = (infostring || "").match(/\S*/)[0];
    if (this.options.highlight) {
      const out = this.options.highlight(code, lang);
      if (out != null && out !== code) {
        escaped = true;
        code = out;
      }
    }
    code = code.replace(/\n$/, "") + "\n";
    if (!lang) {
      return "<pre><code>" + (escaped ? code : escape(code, true)) + "</code></pre>\n";
    }
    return '<pre><code class="' + this.options.langPrefix + escape(lang) + '">' + (escaped ? code : escape(code, true)) + "</code></pre>\n";
  }
  /**
   * @param {string} quote
   */
  blockquote(quote) {
    return `<blockquote>
${quote}</blockquote>
`;
  }
  html(html) {
    return html;
  }
  /**
   * @param {string} text
   * @param {string} level
   * @param {string} raw
   * @param {any} slugger
   */
  heading(text, level, raw, slugger) {
    if (this.options.headerIds) {
      const id = this.options.headerPrefix + slugger.slug(raw);
      return `<h${level} id="${id}">${text}</h${level}>
`;
    }
    return `<h${level}>${text}</h${level}>
`;
  }
  hr() {
    return this.options.xhtml ? "<hr/>\n" : "<hr>\n";
  }
  list(body, ordered, start) {
    const type = ordered ? "ol" : "ul", startatt = ordered && start !== 1 ? ' start="' + start + '"' : "";
    return "<" + type + startatt + ">\n" + body + "</" + type + ">\n";
  }
  /**
   * @param {string} text
   */
  listitem(text) {
    return `<li>${text}</li>
`;
  }
  checkbox(checked) {
    return "<input " + (checked ? 'checked="" ' : "") + 'disabled="" type="checkbox"' + (this.options.xhtml ? " /" : "") + "> ";
  }
  /**
   * @param {string} text
   */
  paragraph(text) {
    return `<p>${text}</p>
`;
  }
  /**
   * @param {string} header
   * @param {string} body
   */
  table(header, body) {
    if (body)
      body = `<tbody>${body}</tbody>`;
    return "<table>\n<thead>\n" + header + "</thead>\n" + body + "</table>\n";
  }
  /**
   * @param {string} content
   */
  tablerow(content) {
    return `<tr>
${content}</tr>
`;
  }
  tablecell(content, flags) {
    const type = flags.header ? "th" : "td";
    const tag = flags.align ? `<${type} align="${flags.align}">` : `<${type}>`;
    return tag + content + `</${type}>
`;
  }
  /**
   * span level renderer
   * @param {string} text
   */
  strong(text) {
    return `<strong>${text}</strong>`;
  }
  /**
   * @param {string} text
   */
  em(text) {
    return `<em>${text}</em>`;
  }
  /**
   * @param {string} text
   */
  codespan(text) {
    return `<code>${text}</code>`;
  }
  br() {
    return this.options.xhtml ? "<br/>" : "<br>";
  }
  /**
   * @param {string} text
   */
  del(text) {
    return `<del>${text}</del>`;
  }
  /**
   * @param {string} href
   * @param {string} title
   * @param {string} text
   */
  link(href, title, text) {
    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);
    if (href === null) {
      return text;
    }
    let out = '<a href="' + href + '"';
    if (title) {
      out += ' title="' + title + '"';
    }
    out += ">" + text + "</a>";
    return out;
  }
  /**
   * @param {string} href
   * @param {string} title
   * @param {string} text
   */
  image(href, title, text) {
    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);
    if (href === null) {
      return text;
    }
    let out = `<img src="${href}" alt="${text}"`;
    if (title) {
      out += ` title="${title}"`;
    }
    out += this.options.xhtml ? "/>" : ">";
    return out;
  }
  text(text) {
    return text;
  }
};
var TextRenderer = class {
  // no need for block level renderers
  strong(text) {
    return text;
  }
  em(text) {
    return text;
  }
  codespan(text) {
    return text;
  }
  del(text) {
    return text;
  }
  html(text) {
    return text;
  }
  text(text) {
    return text;
  }
  link(href, title, text) {
    return "" + text;
  }
  image(href, title, text) {
    return "" + text;
  }
  br() {
    return "";
  }
};
var Slugger = class {
  constructor() {
    this.seen = {};
  }
  /**
   * @param {string} value
   */
  serialize(value) {
    return value.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig, "").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, "").replace(/\s/g, "-");
  }
  /**
   * Finds the next safe (unique) slug to use
   * @param {string} originalSlug
   * @param {boolean} isDryRun
   */
  getNextSafeSlug(originalSlug, isDryRun) {
    let slug = originalSlug;
    let occurenceAccumulator = 0;
    if (this.seen.hasOwnProperty(slug)) {
      occurenceAccumulator = this.seen[originalSlug];
      do {
        occurenceAccumulator++;
        slug = originalSlug + "-" + occurenceAccumulator;
      } while (this.seen.hasOwnProperty(slug));
    }
    if (!isDryRun) {
      this.seen[originalSlug] = occurenceAccumulator;
      this.seen[slug] = 0;
    }
    return slug;
  }
  /**
   * Convert string to unique id
   * @param {object} [options]
   * @param {boolean} [options.dryrun] Generates the next unique slug without
   * updating the internal accumulator.
   */
  slug(value, options2 = {}) {
    const slug = this.serialize(value);
    return this.getNextSafeSlug(slug, options2.dryrun);
  }
};
var Parser = class {
  constructor(options2) {
    this.options = options2 || defaults;
    this.options.renderer = this.options.renderer || new Renderer();
    this.renderer = this.options.renderer;
    this.renderer.options = this.options;
    this.textRenderer = new TextRenderer();
    this.slugger = new Slugger();
  }
  /**
   * Static Parse Method
   */
  static parse(tokens, options2) {
    const parser2 = new Parser(options2);
    return parser2.parse(tokens);
  }
  /**
   * Static Parse Inline Method
   */
  static parseInline(tokens, options2) {
    const parser2 = new Parser(options2);
    return parser2.parseInline(tokens);
  }
  /**
   * Parse Loop
   */
  parse(tokens, top = true) {
    let out = "", i, j, k, l2, l3, row, cell, header, body, token, ordered, start, loose, itemBody, item, checked, task, checkbox, ret;
    const l = tokens.length;
    for (i = 0; i < l; i++) {
      token = tokens[i];
      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {
        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);
        if (ret !== false || !["space", "hr", "heading", "code", "table", "blockquote", "list", "html", "paragraph", "text"].includes(token.type)) {
          out += ret || "";
          continue;
        }
      }
      switch (token.type) {
        case "space": {
          continue;
        }
        case "hr": {
          out += this.renderer.hr();
          continue;
        }
        case "heading": {
          out += this.renderer.heading(
            this.parseInline(token.tokens),
            token.depth,
            unescape(this.parseInline(token.tokens, this.textRenderer)),
            this.slugger
          );
          continue;
        }
        case "code": {
          out += this.renderer.code(
            token.text,
            token.lang,
            token.escaped
          );
          continue;
        }
        case "table": {
          header = "";
          cell = "";
          l2 = token.header.length;
          for (j = 0; j < l2; j++) {
            cell += this.renderer.tablecell(
              this.parseInline(token.header[j].tokens),
              { header: true, align: token.align[j] }
            );
          }
          header += this.renderer.tablerow(cell);
          body = "";
          l2 = token.rows.length;
          for (j = 0; j < l2; j++) {
            row = token.rows[j];
            cell = "";
            l3 = row.length;
            for (k = 0; k < l3; k++) {
              cell += this.renderer.tablecell(
                this.parseInline(row[k].tokens),
                { header: false, align: token.align[k] }
              );
            }
            body += this.renderer.tablerow(cell);
          }
          out += this.renderer.table(header, body);
          continue;
        }
        case "blockquote": {
          body = this.parse(token.tokens);
          out += this.renderer.blockquote(body);
          continue;
        }
        case "list": {
          ordered = token.ordered;
          start = token.start;
          loose = token.loose;
          l2 = token.items.length;
          body = "";
          for (j = 0; j < l2; j++) {
            item = token.items[j];
            checked = item.checked;
            task = item.task;
            itemBody = "";
            if (item.task) {
              checkbox = this.renderer.checkbox(checked);
              if (loose) {
                if (item.tokens.length > 0 && item.tokens[0].type === "paragraph") {
                  item.tokens[0].text = checkbox + " " + item.tokens[0].text;
                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === "text") {
                    item.tokens[0].tokens[0].text = checkbox + " " + item.tokens[0].tokens[0].text;
                  }
                } else {
                  item.tokens.unshift({
                    type: "text",
                    text: checkbox
                  });
                }
              } else {
                itemBody += checkbox;
              }
            }
            itemBody += this.parse(item.tokens, loose);
            body += this.renderer.listitem(itemBody, task, checked);
          }
          out += this.renderer.list(body, ordered, start);
          continue;
        }
        case "html": {
          out += this.renderer.html(token.text);
          continue;
        }
        case "paragraph": {
          out += this.renderer.paragraph(this.parseInline(token.tokens));
          continue;
        }
        case "text": {
          body = token.tokens ? this.parseInline(token.tokens) : token.text;
          while (i + 1 < l && tokens[i + 1].type === "text") {
            token = tokens[++i];
            body += "\n" + (token.tokens ? this.parseInline(token.tokens) : token.text);
          }
          out += top ? this.renderer.paragraph(body) : body;
          continue;
        }
        default: {
          const errMsg = 'Token with "' + token.type + '" type was not found.';
          if (this.options.silent) {
            console.error(errMsg);
            return;
          } else {
            throw new Error(errMsg);
          }
        }
      }
    }
    return out;
  }
  /**
   * Parse Inline Tokens
   */
  parseInline(tokens, renderer) {
    renderer = renderer || this.renderer;
    let out = "", i, token, ret;
    const l = tokens.length;
    for (i = 0; i < l; i++) {
      token = tokens[i];
      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {
        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);
        if (ret !== false || !["escape", "html", "link", "image", "strong", "em", "codespan", "br", "del", "text"].includes(token.type)) {
          out += ret || "";
          continue;
        }
      }
      switch (token.type) {
        case "escape": {
          out += renderer.text(token.text);
          break;
        }
        case "html": {
          out += renderer.html(token.text);
          break;
        }
        case "link": {
          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));
          break;
        }
        case "image": {
          out += renderer.image(token.href, token.title, token.text);
          break;
        }
        case "strong": {
          out += renderer.strong(this.parseInline(token.tokens, renderer));
          break;
        }
        case "em": {
          out += renderer.em(this.parseInline(token.tokens, renderer));
          break;
        }
        case "codespan": {
          out += renderer.codespan(token.text);
          break;
        }
        case "br": {
          out += renderer.br();
          break;
        }
        case "del": {
          out += renderer.del(this.parseInline(token.tokens, renderer));
          break;
        }
        case "text": {
          out += renderer.text(token.text);
          break;
        }
        default: {
          const errMsg = 'Token with "' + token.type + '" type was not found.';
          if (this.options.silent) {
            console.error(errMsg);
            return;
          } else {
            throw new Error(errMsg);
          }
        }
      }
    }
    return out;
  }
};
var Hooks = class {
  constructor(options2) {
    this.options = options2 || defaults;
  }
  /**
   * Process markdown before marked
   */
  preprocess(markdown) {
    return markdown;
  }
  /**
   * Process HTML after marked is finished
   */
  postprocess(html) {
    return html;
  }
};
__publicField(Hooks, "passThroughHooks", /* @__PURE__ */ new Set([
  "preprocess",
  "postprocess"
]));
function onError(silent, async, callback) {
  return (e) => {
    e.message += "\nPlease report this to https://github.com/markedjs/marked.";
    if (silent) {
      const msg = "<p>An error occurred:</p><pre>" + escape(e.message + "", true) + "</pre>";
      if (async) {
        return Promise.resolve(msg);
      }
      if (callback) {
        callback(null, msg);
        return;
      }
      return msg;
    }
    if (async) {
      return Promise.reject(e);
    }
    if (callback) {
      callback(e);
      return;
    }
    throw e;
  };
}
function parseMarkdown(lexer2, parser2) {
  return (src, opt, callback) => {
    if (typeof opt === "function") {
      callback = opt;
      opt = null;
    }
    const origOpt = { ...opt };
    opt = { ...marked.defaults, ...origOpt };
    const throwError = onError(opt.silent, opt.async, callback);
    if (typeof src === "undefined" || src === null) {
      return throwError(new Error("marked(): input parameter is undefined or null"));
    }
    if (typeof src !== "string") {
      return throwError(new Error("marked(): input parameter is of type " + Object.prototype.toString.call(src) + ", string expected"));
    }
    checkSanitizeDeprecation(opt);
    if (opt.hooks) {
      opt.hooks.options = opt;
    }
    if (callback) {
      const highlight = opt.highlight;
      let tokens;
      try {
        if (opt.hooks) {
          src = opt.hooks.preprocess(src);
        }
        tokens = lexer2(src, opt);
      } catch (e) {
        return throwError(e);
      }
      const done = function(err) {
        let out;
        if (!err) {
          try {
            if (opt.walkTokens) {
              marked.walkTokens(tokens, opt.walkTokens);
            }
            out = parser2(tokens, opt);
            if (opt.hooks) {
              out = opt.hooks.postprocess(out);
            }
          } catch (e) {
            err = e;
          }
        }
        opt.highlight = highlight;
        return err ? throwError(err) : callback(null, out);
      };
      if (!highlight || highlight.length < 3) {
        return done();
      }
      delete opt.highlight;
      if (!tokens.length)
        return done();
      let pending = 0;
      marked.walkTokens(tokens, function(token) {
        if (token.type === "code") {
          pending++;
          setTimeout(() => {
            highlight(token.text, token.lang, function(err, code) {
              if (err) {
                return done(err);
              }
              if (code != null && code !== token.text) {
                token.text = code;
                token.escaped = true;
              }
              pending--;
              if (pending === 0) {
                done();
              }
            });
          }, 0);
        }
      });
      if (pending === 0) {
        done();
      }
      return;
    }
    if (opt.async) {
      return Promise.resolve(opt.hooks ? opt.hooks.preprocess(src) : src).then((src2) => lexer2(src2, opt)).then((tokens) => opt.walkTokens ? Promise.all(marked.walkTokens(tokens, opt.walkTokens)).then(() => tokens) : tokens).then((tokens) => parser2(tokens, opt)).then((html) => opt.hooks ? opt.hooks.postprocess(html) : html).catch(throwError);
    }
    try {
      if (opt.hooks) {
        src = opt.hooks.preprocess(src);
      }
      const tokens = lexer2(src, opt);
      if (opt.walkTokens) {
        marked.walkTokens(tokens, opt.walkTokens);
      }
      let html = parser2(tokens, opt);
      if (opt.hooks) {
        html = opt.hooks.postprocess(html);
      }
      return html;
    } catch (e) {
      return throwError(e);
    }
  };
}
function marked(src, opt, callback) {
  return parseMarkdown(Lexer.lex, Parser.parse)(src, opt, callback);
}
marked.options = marked.setOptions = function(opt) {
  marked.defaults = { ...marked.defaults, ...opt };
  changeDefaults(marked.defaults);
  return marked;
};
marked.getDefaults = getDefaults;
marked.defaults = defaults;
marked.use = function(...args) {
  const extensions = marked.defaults.extensions || { renderers: {}, childTokens: {} };
  args.forEach((pack) => {
    const opts = { ...pack };
    opts.async = marked.defaults.async || opts.async || false;
    if (pack.extensions) {
      pack.extensions.forEach((ext) => {
        if (!ext.name) {
          throw new Error("extension name required");
        }
        if (ext.renderer) {
          const prevRenderer = extensions.renderers[ext.name];
          if (prevRenderer) {
            extensions.renderers[ext.name] = function(...args2) {
              let ret = ext.renderer.apply(this, args2);
              if (ret === false) {
                ret = prevRenderer.apply(this, args2);
              }
              return ret;
            };
          } else {
            extensions.renderers[ext.name] = ext.renderer;
          }
        }
        if (ext.tokenizer) {
          if (!ext.level || ext.level !== "block" && ext.level !== "inline") {
            throw new Error("extension level must be 'block' or 'inline'");
          }
          if (extensions[ext.level]) {
            extensions[ext.level].unshift(ext.tokenizer);
          } else {
            extensions[ext.level] = [ext.tokenizer];
          }
          if (ext.start) {
            if (ext.level === "block") {
              if (extensions.startBlock) {
                extensions.startBlock.push(ext.start);
              } else {
                extensions.startBlock = [ext.start];
              }
            } else if (ext.level === "inline") {
              if (extensions.startInline) {
                extensions.startInline.push(ext.start);
              } else {
                extensions.startInline = [ext.start];
              }
            }
          }
        }
        if (ext.childTokens) {
          extensions.childTokens[ext.name] = ext.childTokens;
        }
      });
      opts.extensions = extensions;
    }
    if (pack.renderer) {
      const renderer = marked.defaults.renderer || new Renderer();
      for (const prop in pack.renderer) {
        const prevRenderer = renderer[prop];
        renderer[prop] = (...args2) => {
          let ret = pack.renderer[prop].apply(renderer, args2);
          if (ret === false) {
            ret = prevRenderer.apply(renderer, args2);
          }
          return ret;
        };
      }
      opts.renderer = renderer;
    }
    if (pack.tokenizer) {
      const tokenizer = marked.defaults.tokenizer || new Tokenizer();
      for (const prop in pack.tokenizer) {
        const prevTokenizer = tokenizer[prop];
        tokenizer[prop] = (...args2) => {
          let ret = pack.tokenizer[prop].apply(tokenizer, args2);
          if (ret === false) {
            ret = prevTokenizer.apply(tokenizer, args2);
          }
          return ret;
        };
      }
      opts.tokenizer = tokenizer;
    }
    if (pack.hooks) {
      const hooks = marked.defaults.hooks || new Hooks();
      for (const prop in pack.hooks) {
        const prevHook = hooks[prop];
        if (Hooks.passThroughHooks.has(prop)) {
          hooks[prop] = (arg) => {
            if (marked.defaults.async) {
              return Promise.resolve(pack.hooks[prop].call(hooks, arg)).then((ret2) => {
                return prevHook.call(hooks, ret2);
              });
            }
            const ret = pack.hooks[prop].call(hooks, arg);
            return prevHook.call(hooks, ret);
          };
        } else {
          hooks[prop] = (...args2) => {
            let ret = pack.hooks[prop].apply(hooks, args2);
            if (ret === false) {
              ret = prevHook.apply(hooks, args2);
            }
            return ret;
          };
        }
      }
      opts.hooks = hooks;
    }
    if (pack.walkTokens) {
      const walkTokens2 = marked.defaults.walkTokens;
      opts.walkTokens = function(token) {
        let values = [];
        values.push(pack.walkTokens.call(this, token));
        if (walkTokens2) {
          values = values.concat(walkTokens2.call(this, token));
        }
        return values;
      };
    }
    marked.setOptions(opts);
  });
};
marked.walkTokens = function(tokens, callback) {
  let values = [];
  for (const token of tokens) {
    values = values.concat(callback.call(marked, token));
    switch (token.type) {
      case "table": {
        for (const cell of token.header) {
          values = values.concat(marked.walkTokens(cell.tokens, callback));
        }
        for (const row of token.rows) {
          for (const cell of row) {
            values = values.concat(marked.walkTokens(cell.tokens, callback));
          }
        }
        break;
      }
      case "list": {
        values = values.concat(marked.walkTokens(token.items, callback));
        break;
      }
      default: {
        if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) {
          marked.defaults.extensions.childTokens[token.type].forEach(function(childTokens) {
            values = values.concat(marked.walkTokens(token[childTokens], callback));
          });
        } else if (token.tokens) {
          values = values.concat(marked.walkTokens(token.tokens, callback));
        }
      }
    }
  }
  return values;
};
marked.parseInline = parseMarkdown(Lexer.lexInline, Parser.parseInline);
marked.Parser = Parser;
marked.parser = Parser.parse;
marked.Renderer = Renderer;
marked.TextRenderer = TextRenderer;
marked.Lexer = Lexer;
marked.lexer = Lexer.lex;
marked.Tokenizer = Tokenizer;
marked.Slugger = Slugger;
marked.Hooks = Hooks;
marked.parse = marked;
var options = marked.options;
var setOptions = marked.setOptions;
var use = marked.use;
var walkTokens = marked.walkTokens;
var parseInline = marked.parseInline;
var parser = Parser.parse;
var lexer = Lexer.lex;

// src/components/FetchModel.ts
var abortController = new AbortController();
async function fetchOpenAIAPI(settings, referenceCurrentNote) {
  var _a2, _b, _c, _d, _e, _f;
  const openai = new openai_default({
    apiKey: settings.apiKey,
    baseURL: settings.openAIBaseUrl,
    dangerouslyAllowBrowser: true
    // apiKey is stored within data.json
  });
  abortController = new AbortController();
  let message = "";
  let isScroll = false;
  const filteredMessageHistoryContent = messageHistory.filter((message2, index, array) => {
    var _a3, _b2;
    const isUserMessageWithSlash = message2.role === "user" && message2.content.includes("/") || ((_a3 = array[index - 1]) == null ? void 0 : _a3.role) === "user" && ((_b2 = array[index - 1]) == null ? void 0 : _b2.content.includes("/"));
    return !isUserMessageWithSlash;
  });
  try {
    const stream = await openai.chat.completions.create({
      model: settings.model,
      max_tokens: parseInt(settings.max_tokens),
      temperature: settings.temperature,
      messages: [
        { role: "system", content: referenceCurrentNote + settings.system_role },
        ...filteredMessageHistoryContent
      ],
      stream: true
    });
    for await (const part of stream) {
      const content = ((_b = (_a2 = part.choices[0]) == null ? void 0 : _a2.delta) == null ? void 0 : _b.content) || "";
      message += content;
      const messageContainerEl = document.querySelector("#messageContainer");
      if (messageContainerEl) {
        const botMessages = messageContainerEl.querySelectorAll(".botMessage");
        const lastBotMessage = botMessages[botMessages.length - 1];
        const messageBlock = lastBotMessage.querySelector(".messageBlock");
        const loadingEl = lastBotMessage.querySelector("#loading");
        if (messageBlock) {
          if (loadingEl) {
            loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
            lastBotMessage.removeChild(loadingEl);
          }
          messageBlock.innerHTML = marked(message);
          addParagraphBreaks(messageBlock);
          prismHighlighting(messageBlock);
          codeBlockCopyButton(messageBlock);
        }
        messageContainerEl.addEventListener("wheel", (event) => {
          if (event.deltaY < 0 || event.deltaY > 0) {
            isScroll = true;
          }
        });
        if (!isScroll) {
          lastBotMessage.scrollIntoView({ behavior: "auto", block: "start" });
        }
      }
      if (abortController.signal.aborted) {
        new import_obsidian.Notice("Error making API request: The user aborted a request.");
        break;
      }
    }
    addMessage(message, "botMessage", settings);
  } catch (error) {
    const messageContainerEl = document.querySelector("#messageContainer");
    if (messageContainerEl) {
      const botMessages = messageContainerEl.querySelectorAll(".botMessage");
      const lastBotMessage = botMessages[botMessages.length - 1];
      const messageBlock = lastBotMessage.querySelector(".messageBlock");
      if (messageBlock) {
        messageBlock.innerHTML = marked(((_d = (_c = error.response) == null ? void 0 : _c.data) == null ? void 0 : _d.error) || error.message);
        addMessage(messageBlock.innerHTML, "botMessage", settings);
      }
    }
    throw new Error(((_f = (_e = error.response) == null ? void 0 : _e.data) == null ? void 0 : _f.error) || error.message);
  }
}
async function ollamaFetchData(settings, referenceCurrentNoteContent) {
  const ollamaRestAPIUrl = settings.ollamaRestAPIUrl;
  if (!ollamaRestAPIUrl) {
    return;
  }
  try {
    const response = await (0, import_obsidian.requestUrl)({
      url: ollamaRestAPIUrl + "/api/chat",
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: settings.model,
        messages: [
          { role: "system", content: referenceCurrentNoteContent + settings.system_role },
          ...messageHistory
        ],
        stream: false,
        options: {
          temperature: settings.temperature,
          num_predict: parseInt(settings.max_tokens)
        }
      })
    });
    console.log(response);
    const message = response.json.message.content;
    const messageContainerEl = document.querySelector("#messageContainer");
    if (messageContainerEl) {
      const botMessages = messageContainerEl.querySelectorAll(".botMessage");
      const lastBotMessage = botMessages[botMessages.length - 1];
      const loadingEl = lastBotMessage.querySelector("#loading");
      if (loadingEl) {
        loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
        lastBotMessage.removeChild(loadingEl);
      }
      const messageBlock = document.createElement("p");
      const markdownContent = marked(message);
      messageBlock.innerHTML = markdownContent;
      messageBlock.classList.add("messageBlock");
      addParagraphBreaks(messageBlock);
      prismHighlighting(messageBlock);
      codeBlockCopyButton(messageBlock);
      lastBotMessage.appendChild(messageBlock);
      lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
    }
    addMessage(message, "botMessage", settings);
  } catch (error) {
    console.error("Error making API request:", error);
    throw error;
  }
}
async function ollamaFetchDataStream(settings, referenceCurrentNoteContent) {
  const ollamaRestAPIUrl = settings.ollamaRestAPIUrl;
  if (!ollamaRestAPIUrl) {
    return;
  }
  const url = ollamaRestAPIUrl + "/api/chat";
  abortController = new AbortController();
  let message = "";
  let isScroll = false;
  const filteredMessageHistoryContent = messageHistory.filter((message2, index, array) => {
    var _a2, _b;
    const isUserMessageWithSlash = message2.role === "user" && message2.content.includes("/") || ((_a2 = array[index - 1]) == null ? void 0 : _a2.role) === "user" && ((_b = array[index - 1]) == null ? void 0 : _b.content.includes("/"));
    return !isUserMessageWithSlash;
  });
  try {
    const response = await fetch(url, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: settings.model,
        messages: [
          { role: "system", content: referenceCurrentNoteContent + settings.system_role },
          ...filteredMessageHistoryContent
        ],
        stream: true,
        options: {
          temperature: settings.temperature,
          num_predict: parseInt(settings.max_tokens)
        }
      }),
      signal: abortController.signal
    });
    if (!response.ok) {
      new import_obsidian.Notice(`HTTP error! Status: ${response.status}`);
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    if (!response.body) {
      new import_obsidian.Notice(`Response body is null or undefined.`);
      throw new Error("Response body is null or undefined.");
    }
    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let reading = true;
    while (reading) {
      const { done, value } = await reader.read();
      if (done) {
        reading = false;
        break;
      }
      const chunk = decoder.decode(value, { stream: true }) || "";
      const parts = chunk.split("\n");
      for (const part of parts.filter(Boolean)) {
        let parsedChunk;
        try {
          parsedChunk = JSON.parse(part);
          if (parsedChunk.done !== true) {
            const content = parsedChunk.message.content;
            message += content;
          }
        } catch (err) {
          console.error("Error parsing JSON:", err);
          console.log("Part with error:", part);
          parsedChunk = { response: "{_e_}" };
        }
      }
      const messageContainerEl = document.querySelector("#messageContainer");
      if (messageContainerEl) {
        const botMessages = messageContainerEl.querySelectorAll(".botMessage");
        const lastBotMessage = botMessages[botMessages.length - 1];
        const messageBlock = lastBotMessage.querySelector(".messageBlock");
        const loadingEl = lastBotMessage.querySelector("#loading");
        if (messageBlock) {
          if (loadingEl) {
            loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
            lastBotMessage.removeChild(loadingEl);
          }
          messageBlock.innerHTML = marked(message, { breaks: true });
          addParagraphBreaks(messageBlock);
          prismHighlighting(messageBlock);
          codeBlockCopyButton(messageBlock);
        }
        messageContainerEl.addEventListener("wheel", (event) => {
          if (event.deltaY < 0 || event.deltaY > 0) {
            isScroll = true;
          }
        });
        if (!isScroll) {
          lastBotMessage.scrollIntoView({ behavior: "auto", block: "start" });
        }
      }
    }
    addMessage(message, "botMessage", settings);
  } catch (error) {
    addMessage(message, "botMessage", settings);
    console.error("Error making API request:", error);
    throw error;
  }
}
async function requestUrlAnthropicAPI(settings, referenceCurrentNoteContent) {
  const headers = {
    "anthropic-version": "2023-06-01",
    "content-type": "application/json",
    "x-api-key": settings.apiKey
  };
  const messageHistoryString = messageHistory.map((entry) => entry.content).join("\n");
  const requestBody = {
    model: settings.model,
    prompt: `

Human: ${referenceCurrentNoteContent}

${settings.system_role}

${messageHistoryString}

Assistant:`,
    max_tokens_to_sample: parseInt(settings.max_tokens) || 1e5,
    temperature: settings.temperature,
    stream: true
  };
  try {
    const response = await (0, import_obsidian.requestUrl)({
      url: "https://api.anthropic.com/v1/complete",
      method: "POST",
      headers,
      body: JSON.stringify(requestBody)
    });
    return response;
  } catch (error) {
    const messageContainerEl = document.querySelector("#messageContainer");
    if (messageContainerEl) {
      const botMessages = messageContainerEl.querySelectorAll(".botMessage");
      const lastBotMessage = botMessages[botMessages.length - 1];
      const messageBlock = lastBotMessage.querySelector(".messageBlock");
      if (messageBlock) {
        messageBlock.innerHTML = "Max tokens overflow. Please reduce max_tokens or clear chat messages. We recommend clearing max_tokens for best results.";
        addMessage(messageBlock.innerHTML, "botMessage", settings);
        const loadingEl = lastBotMessage.querySelector("#loading");
        if (loadingEl) {
          loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
          lastBotMessage.removeChild(loadingEl);
        }
      }
    }
    console.error("Error making API request:", error);
    throw error;
  }
}
async function requestUrlChatCompletion(url, settings, referenceCurrentNote, messageHistoryContent = [], maxTokens, temperature) {
  const messageHistory2 = messageHistoryContent.map((item) => ({
    role: item.role,
    content: item.content
  }));
  try {
    const response = await (0, import_obsidian.requestUrl)({
      url: url + "/v1/chat/completions",
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${settings.apiKey}`
      },
      body: JSON.stringify({
        model: settings.model,
        messages: [
          { role: "system", content: referenceCurrentNote + settings.system_role },
          ...messageHistory2
        ],
        max_tokens: parseInt(maxTokens),
        temperature
      })
    });
    return response;
  } catch (error) {
    console.error("Error making API request:", error);
    throw error;
  }
}
async function fetchModelRenameTitle(settings, referenceCurrentNoteContent) {
  var _a2, _b;
  const prompt = `Based on the following markdown content, create a new, suitable title.
     The title should not contain any of the following characters: backslashes, forward slashes, or colons.
     Also, please provide the title without using quotation marks. THE TITLE IS: 

`;
  try {
    if (OPENAI_MODELS.includes(settings.model)) {
      const openai = new openai_default({
        apiKey: settings.apiKey,
        baseURL: settings.openAIBaseUrl,
        dangerouslyAllowBrowser: true
        // apiKey is stored within data.json
      });
      const chatCompletion = await openai.chat.completions.create({
        model: settings.model,
        messages: [
          { role: "system", content: prompt + referenceCurrentNoteContent }
        ]
      });
      let title = chatCompletion.choices[0].message.content;
      if (title) {
        title = title.replace(/[\\/:]/g, "");
      }
      return title;
    } else if (ANTHROPIC_MODELS.includes(settings.model)) {
      const headers = {
        "anthropic-version": "2023-06-01",
        "content-type": "application/json",
        "x-api-key": settings.apiKey
      };
      const requestBody = {
        model: settings.model,
        prompt: `

Human: ${prompt}

Assistant:`,
        max_tokens_to_sample: 25,
        temperature: settings.temperature,
        stream: true
      };
      try {
        const response = await (0, import_obsidian.requestUrl)({
          url: "https://api.anthropic.com/v1/complete",
          method: "POST",
          headers,
          body: JSON.stringify(requestBody)
        });
        const message = response.text;
        const lines = message.split("\n");
        let title = "";
        for (const line of lines) {
          if (line.startsWith("data:")) {
            const eventData = JSON.parse(line.slice("data:".length));
            if (eventData.completion) {
              title += eventData.completion;
            }
          }
        }
        if (title) {
          title = title.replace(/[\\/:]/g, "");
        }
        return title;
      } catch (error) {
        new import_obsidian.Notice("Error making API request:", error);
        console.error("Error making API request:", error);
        throw error;
      }
    } else {
      if (settings.ollamaRestAPIUrl) {
        const url = settings.ollamaRestAPIUrl + "/api/generate";
        const requestBody = {
          prompt: referenceCurrentNoteContent + "\n\n" + prompt + " OUTPUT TITLE ONLY:",
          model: settings.model,
          stream: false,
          options: {
            temperature: settings.temperature,
            num_predict: 25
          }
        };
        const response = await (0, import_obsidian.requestUrl)({
          url,
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(requestBody)
        });
        const parseText = JSON.parse(response.text);
        let title = parseText.response;
        if (title) {
          title = title.replace(/[\\/:]/g, "");
        }
        return title;
      }
    }
  } catch (error) {
    console.log("ERROR");
    throw new Error(((_b = (_a2 = error.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.error) || error.message);
  }
}
function getAbortController() {
  return abortController;
}

// src/components/commands.ts
var import_obsidian2 = require("obsidian");
function executeCommand(input, settings, plugin) {
  const command = input.split(" ")[0];
  switch (command) {
    case "/commands":
    case "/help":
      commandHelp(settings);
      break;
    case "/model":
      return commandModel(input, settings, plugin);
    case "/list":
      return commandListModels(input, settings, plugin);
    case "/reference":
    case "/ref":
      commandReference(input, settings, plugin);
      break;
    case "/temp":
      commandTemperature(input, settings, plugin);
      break;
    case "/maxtokens":
      commandMaxTokens(input, settings, plugin);
      break;
    case "/system":
      commandSystem(input, settings, plugin);
      break;
    case "/append":
      commandAppend(settings);
      break;
    case "/save":
      commandSave(settings);
      break;
    case "/clear":
    case "/c":
      removeMessageThread(0);
      break;
    case "/stop":
    case "/s":
      commandStop();
      break;
    default:
      commandFalse(settings, plugin);
  }
}
function createBotMessage(currentSettings) {
  const messageContainer = document.querySelector("#messageContainer");
  const botMessage = document.createElement("div");
  botMessage.classList.add("botMessage");
  botMessage.style.backgroundColor = colorToHex(
    currentSettings.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.botMessageBackgroundColor).trim()
  );
  messageContainer == null ? void 0 : messageContainer.appendChild(botMessage);
  const botNameSpan = document.createElement("span");
  botNameSpan.textContent = currentSettings.chatbotName || DEFAULT_SETTINGS.chatbotName;
  botNameSpan.className = "chatbotName";
  botMessage.appendChild(botNameSpan);
  const messageBlock = document.createElement("div");
  messageBlock.classList.add("messageBlock");
  botMessage.appendChild(messageBlock);
  return messageBlock;
}
function displayMessage(messageBlock, messageHtml, currentSettings) {
  const messageContainer = document.querySelector("#messageContainer");
  if (messageContainer) {
    const botMessages = messageContainer.querySelectorAll(".botMessage");
    const lastBotMessage = botMessages[botMessages.length - 1];
    const messageBlock2 = lastBotMessage.querySelector(".messageBlock");
    if (messageBlock2) {
      messageBlock2.innerHTML = messageHtml;
      addMessage(messageBlock.innerHTML, "botMessage", currentSettings);
      lastBotMessage.appendChild(messageBlock2);
      lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
    }
  }
}
async function commandFalse(currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  const formattedSettings = `
      <div class="formattedSettings">
          <p><strong>Command not recognized.</strong></p>
      </div>
  `;
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
function commandHelp(currentSettings) {
  const messageBlock = createBotMessage(currentSettings);
  const formattedSettings = `
    <div class="formattedSettings">
      <h2>Commands</h2>
      <p><code>/list</code> - List models.</p>
      <p><code>/model "[MODEL-NAME]" or [VALUE]</code> - Change model.</p>
      <p><code>/system "[PROMPT]"</code> - Change system setting.</p>
      <p><code>/maxtokens [VALUE]</code> - Set max tokens.</p>
      <p><code>/temp [VALUE]</code> - Change temperature range 0 from to 1.</p>
      <p><code>/ref on | off</code> - Turn on or off "reference current note".</p>
      <p><code>/append</code> - Append current chat history to current active note.</p>
      <p><code>/save</code> - Save current chat history to a note.</p>
      <p><code>/clear</code> or <code>/c</code> - Clear chat history.</p>
      <p><code>/stop</code> or <code>/s</code> - [STREAMING MODELS ONLY]: Stop fetching response.</p>
    </div>
  `;
  displayMessage(messageBlock, formattedSettings, currentSettings);
}
async function commandModel(input, currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  if (!input.split(" ")[1]) {
    const messageHtml = `<div class="formattedSettings"><p><strong>Please select a model.</strong></p></div>`;
    displayMessage(messageBlock, messageHtml, currentSettings);
    return;
  }
  if (input.split(" ")[1] !== void 0) {
    const inputModel = input.split(" ")[1].replace(/^"(.*)"$/, "$1");
    let messageHtml = "";
    const modelAliases = {};
    for (let i = 1; i <= currentSettings.allModels.length; i++) {
      const model = currentSettings.allModels[i - 1];
      modelAliases[i] = model;
    }
    if (Object.entries(modelAliases).find(([key, val]) => key === inputModel)) {
      currentSettings.model = modelAliases[inputModel];
      messageHtml = `<div class="formattedSettings"><p><strong>Updated Model to ${currentSettings.model}</strong></p></div>`;
    } else if (Object.entries(modelAliases).find(([key, val]) => val === inputModel)) {
      currentSettings.model = modelAliases[Object.keys(modelAliases).find((key) => modelAliases[key] === inputModel) || ""];
      messageHtml = `<div class="formattedSettings"><p><strong>Updated Model to ${currentSettings.model}</strong></p></div>`;
    } else {
      messageHtml = `<div class="formattedSettings"><p><strong>Model '${inputModel}' does not exist for this API key.</strong></p></div>`;
      new import_obsidian2.Notice("Invalid model.");
    }
    displayMessage(messageBlock, messageHtml, currentSettings);
    await plugin.saveSettings();
    return currentSettings;
  }
}
async function commandListModels(input, currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  const modelListItems = currentSettings.allModels.map((model) => `<li>${model}</li>`).join("");
  const formattedSettings = `<ol>${modelListItems}</ol>`;
  displayMessage(messageBlock, formattedSettings, currentSettings);
}
async function commandReference(input, currentSettings, plugin) {
  var _a2;
  const messageBlock = createBotMessage(currentSettings);
  let formattedSettings = "";
  const referenceCurrentNoteElement = document.getElementById("referenceCurrentNote");
  const inputValue = (_a2 = input.split(" ")[1]) == null ? void 0 : _a2.toLowerCase();
  if (inputValue === "true" || inputValue === "on") {
    currentSettings.referenceCurrentNote = true;
    if (referenceCurrentNoteElement) {
      referenceCurrentNoteElement.style.display = "block";
    }
    formattedSettings += `
          <div class="formattedSettings">
            <p><strong>Reference updated: on</strong></p>
          </div>
      `;
  } else if (inputValue === "false" || inputValue === "off") {
    currentSettings.referenceCurrentNote = false;
    if (referenceCurrentNoteElement) {
      referenceCurrentNoteElement.style.display = "none";
    }
    formattedSettings += `
          <div class="formattedSettings">
            <p><strong>Reference updated: off</strong></p>
          </div>
      `;
  } else {
    formattedSettings += `
        <div class="formattedSettings">
          <p><strong>Invalid command.</strong></p>
        </div>
    `;
  }
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
async function commandTemperature(input, currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  const inputValue = input.split(" ")[1];
  const floatValue = parseFloat(inputValue);
  let temperatureSettingMessage;
  if (currentSettings && !isNaN(floatValue) && floatValue >= 0 && floatValue <= 1) {
    currentSettings.temperature = parseFloat((Math.round(floatValue / 0.05) * 0.05).toFixed(2));
    temperatureSettingMessage = `${currentSettings.temperature}`;
  } else {
    temperatureSettingMessage = "Invalid.";
  }
  const formattedSettings = `
      <div class="formattedSettings">
        <p><strong>Temperature updated: ${temperatureSettingMessage}</strong></p>
      </div>
  `;
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
async function commandMaxTokens(input, currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  let formattedSettings = "";
  const maxTokensValue = input.split(" ")[1];
  let maxTokensSettingMessage;
  if (maxTokensValue !== void 0 && maxTokensValue !== "") {
    const inputValue = parseInt(maxTokensValue);
    if (!isNaN(inputValue) && inputValue >= 0) {
      currentSettings.max_tokens = inputValue.toString();
      maxTokensSettingMessage = `Max tokens updated: ${inputValue}`;
    } else {
      maxTokensSettingMessage = "Max tokens update: invalid";
    }
  } else {
    currentSettings.max_tokens = "";
    maxTokensSettingMessage = "Max tokens cleared.";
  }
  formattedSettings += `
      <div class="formattedSettings">
          <p><strong>${maxTokensSettingMessage}</strong></p>
      </div>
  `;
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
async function commandSystem(input, currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  let formattedSettings = "";
  const systemPromptValue = input.match(/"([^"]+)"/);
  if (systemPromptValue !== null) {
    if (systemPromptValue[1]) {
      currentSettings.system_role = systemPromptValue[1];
      formattedSettings += `
              <div class="formattedSettings">
                  <p><strong>System updated: "${systemPromptValue[1]}"</strong></p>
              </div>
          `;
    }
  } else {
    currentSettings.system_role = "";
    formattedSettings += `
          <div class="formattedSettings">
              <p><strong>System cleared.</strong></p>
          </div>
      `;
  }
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
async function commandAppend(currentSettings) {
  let markdownContent = "";
  const activeFile = app.workspace.getActiveFile();
  if ((activeFile == null ? void 0 : activeFile.extension) === "md") {
    const existingContent = await app.vault.read(activeFile);
    const userNames = document.querySelectorAll(".userName");
    let userNameText = "USER";
    if (userNames.length > 0) {
      const userNameNode = userNames[0];
      Array.from(userNameNode.childNodes).forEach((node) => {
        if (node.nodeType === Node.TEXT_NODE && node.textContent) {
          userNameText = node.textContent.trim().toUpperCase();
        }
      });
    }
    const chatbotNames = document.querySelectorAll(".chatbotName");
    const chatbotNameText = chatbotNames.length > 0 && chatbotNames[0].textContent ? chatbotNames[0].textContent.toUpperCase() : "ASSISTANT";
    if (await this.app.vault.adapter.exists(filenameMessageHistoryJSON)) {
      try {
        const jsonContent = await this.app.vault.adapter.read(filenameMessageHistoryJSON);
        const messages = JSON.parse(jsonContent);
        let skipNext = false;
        markdownContent += messages.filter((message, index, array) => {
          if (skipNext && message.role === "assistant") {
            skipNext = false;
            return false;
          }
          if (message.content.startsWith("/")) {
            skipNext = index + 1 < array.length && array[index + 1].role === "assistant";
            return false;
          }
          return true;
        }).map((message) => {
          let roleText = message.role.toUpperCase();
          roleText = roleText === "USER" ? userNameText : roleText;
          roleText = roleText === "ASSISTANT" ? chatbotNameText : roleText;
          return `###### ${roleText}
${message.content}
`;
        }).join("\n");
      } catch (error) {
        console.error("Error processing message history:", error);
      }
    }
    const updatedContent = existingContent + "\n" + markdownContent;
    await app.vault.modify(activeFile, updatedContent);
    new import_obsidian2.Notice("Appended conversation.");
  } else {
    new import_obsidian2.Notice("No active note to append to.");
  }
}
async function commandSave(currentSettings) {
  let folderName = currentSettings.chatHistoryPath;
  const baseFileName = "Chat History";
  const fileExtension = ".md";
  if (folderName && !folderName.endsWith("/")) {
    folderName += "/";
  }
  const now = new Date();
  const dateTimeStamp = now.getFullYear() + "-" + (now.getMonth() + 1).toString().padStart(2, "0") + "-" + now.getDate().toString().padStart(2, "0") + " " + now.getHours().toString().padStart(2, "0") + "-" + now.getMinutes().toString().padStart(2, "0") + "-" + now.getSeconds().toString().padStart(2, "0");
  try {
    let markdownContent = "";
    const allFiles = app.vault.getFiles();
    const modelNameElement = document.querySelector("#modelName");
    let modelName = "Unknown";
    if (modelNameElement && modelNameElement.textContent) {
      modelName = modelNameElement.textContent.replace("Model: ", "").toUpperCase();
    }
    const templateFile = allFiles.find((file2) => file2.path.toLowerCase() === currentSettings.templateFilePath.toLowerCase());
    if (templateFile) {
      let fileContent = await app.vault.read(templateFile);
      if (/^---\s*[\s\S]*?---/.test(fileContent)) {
        fileContent = fileContent.replace(/^---/, `---
model: ${modelName}`);
      } else {
        fileContent = `---
  model: ${modelName}
---
` + fileContent;
      }
      markdownContent += fileContent;
    } else {
      markdownContent += `---
  model: ${modelName}
---
`;
    }
    const userNames = document.querySelectorAll(".userName");
    let userNameText = "USER";
    if (userNames.length > 0) {
      const userNameNode = userNames[0];
      Array.from(userNameNode.childNodes).forEach((node) => {
        if (node.nodeType === Node.TEXT_NODE && node.textContent) {
          userNameText = node.textContent.trim().toUpperCase();
        }
      });
    }
    const chatbotNames = document.querySelectorAll(".chatbotName");
    const chatbotNameText = chatbotNames.length > 0 && chatbotNames[0].textContent ? chatbotNames[0].textContent.toUpperCase() : "ASSISTANT";
    if (await this.app.vault.adapter.exists(filenameMessageHistoryJSON)) {
      try {
        const jsonContent = await this.app.vault.adapter.read(filenameMessageHistoryJSON);
        const messages = JSON.parse(jsonContent);
        let skipNext = false;
        markdownContent += messages.filter((message, index, array) => {
          if (skipNext && message.role === "assistant") {
            skipNext = false;
            return false;
          }
          if (message.content.startsWith("/")) {
            skipNext = index + 1 < array.length && array[index + 1].role === "assistant";
            return false;
          }
          return true;
        }).map((message) => {
          let roleText = message.role.toUpperCase();
          roleText = roleText === "USER" ? userNameText : roleText;
          roleText = roleText === "ASSISTANT" ? chatbotNameText : roleText;
          return `###### ${roleText}
${message.content}
`;
        }).join("\n");
      } catch (error) {
        console.error("Error processing message history:", error);
      }
    }
    if (!await this.app.vault.adapter.exists(folderName)) {
      await this.app.vault.createFolder(folderName);
    }
    let fileName = "";
    if (currentSettings.allowRenameNoteTitle) {
      let referenceCurrentNote = "";
      let uniqueNameFound = false;
      let modelRenameTitle;
      const activeFile = this.app.workspace.getActiveFile();
      if (activeFile) {
        if (currentSettings.referenceCurrentNote) {
          referenceCurrentNote = await getActiveFileContent(activeFile);
        }
      }
      const fileNameExists = (name) => {
        return allFiles.some((file2) => file2.path === folderName + name + fileExtension);
      };
      while (!uniqueNameFound) {
        modelRenameTitle = await fetchModelRenameTitle(currentSettings, referenceCurrentNote + markdownContent);
        if (!fileNameExists(modelRenameTitle)) {
          uniqueNameFound = true;
        }
      }
      fileName = folderName + modelRenameTitle + fileExtension;
    } else {
      fileName = folderName + baseFileName + " " + dateTimeStamp + fileExtension;
    }
    const file = await this.app.vault.create(fileName, markdownContent);
    if (file) {
      new import_obsidian2.Notice("Saved conversation.");
      this.app.workspace.openLinkText(fileName, "", true, { active: true });
    }
  } catch (error) {
    console.error("Failed to create note:", error);
  }
}
function commandStop() {
  const controller = getAbortController();
  if (controller) {
    controller.abort();
  }
}

// src/view.ts
var VIEW_TYPE_CHATBOT = "chatbot-view";
var filenameMessageHistoryJSON = "./.obsidian/plugins/bmo-chatbot/data/messageHistory.json";
var ANTHROPIC_MODELS = ["claude-instant-1.2", "claude-2.0", "claude-2.1"];
var OPENAI_MODELS = ["gpt-3.5-turbo", "gpt-3.5-turbo-1106", "gpt-4", "gpt-4-1106-preview"];
var messageHistory = [];
var BMOView = class extends import_obsidian3.ItemView {
  constructor(leaf, settings, plugin) {
    super(leaf);
    this.preventEnter = false;
    this.settings = settings;
    this.plugin = plugin;
    this.icon = "bot";
  }
  getViewType() {
    return VIEW_TYPE_CHATBOT;
  }
  getDisplayText() {
    return "BMO Chatbot";
  }
  async onOpen() {
    this.registerEvent(this.app.workspace.on("file-open", this.handleFileOpenEvent.bind(this)));
    const container = this.containerEl.children[1];
    container.empty();
    const chatbotContainer = container.createEl("div", {
      attr: {
        class: "chatbotContainer"
      }
    });
    chatbotContainer.createEl("h1", {
      text: this.settings.chatbotName || DEFAULT_SETTINGS.chatbotName,
      attr: {
        id: "chatbotNameHeading"
      }
    });
    chatbotContainer.createEl("p", {
      text: "Model: " + this.settings.model || DEFAULT_SETTINGS.model,
      attr: {
        id: "modelName"
      }
    });
    const spanElement = chatbotContainer.createEl("span", {
      attr: {
        class: "dotIndicator",
        id: "markDownBoolean"
      }
    });
    const referenceCurrentNoteElement = chatbotContainer.createEl("p", {
      text: "Reference Current Note",
      attr: {
        id: "referenceCurrentNote"
      }
    });
    referenceCurrentNoteElement.appendChild(spanElement);
    referenceCurrentNoteElement.style.display = "none";
    if (referenceCurrentNoteElement) {
      if (this.settings.referenceCurrentNote) {
        referenceCurrentNoteElement.style.display = "block";
      } else {
        referenceCurrentNoteElement.style.display = "none";
      }
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile) {
      await getActiveFileContent(activeFile);
    }
    const messageContainer = chatbotContainer.createEl("div", {
      attr: {
        id: "messageContainer"
      }
    });
    await loadData();
    messageContainer.id = "messageContainer";
    messageHistory.forEach((messageData, index) => {
      const buttonContainerDiv = document.createElement("div");
      buttonContainerDiv.className = "button-container";
      if (messageData.role == "user") {
        const userMessageDiv = document.createElement("div");
        userMessageDiv.className = "userMessage";
        userMessageDiv.style.backgroundColor = colorToHex(this.settings.userMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.userMessageBackgroundColor).trim());
        const userMessageToolBarDiv = document.createElement("div");
        userMessageToolBarDiv.className = "userMessageToolBar";
        const userNameSpan = document.createElement("span");
        userNameSpan.className = "userName";
        userNameSpan.textContent = this.settings.userName || DEFAULT_SETTINGS.userName;
        const userP = document.createElement("p");
        const copyUserButton = displayUserCopyButton(userP);
        const trashButton = displayTrash();
        userMessageToolBarDiv.appendChild(userNameSpan);
        userMessageToolBarDiv.appendChild(buttonContainerDiv);
        buttonContainerDiv.appendChild(copyUserButton);
        buttonContainerDiv.appendChild(trashButton);
        userMessageDiv.appendChild(userMessageToolBarDiv);
        userMessageDiv.appendChild(userP);
        messageContainer.appendChild(userMessageDiv);
        if (ANTHROPIC_MODELS.includes(this.settings.model)) {
          const fullString = messageData.content;
          const cleanString = fullString.split(" ").slice(1).join(" ").trim();
          userP.innerHTML = marked(cleanString);
        } else {
          userP.innerHTML = marked(messageData.content);
        }
      }
      if (messageData.role == "assistant") {
        const botMessageDiv = document.createElement("div");
        botMessageDiv.className = "botMessage";
        botMessageDiv.style.backgroundColor = colorToHex(this.settings.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.botMessageBackgroundColor).trim());
        const botMessageToolBarDiv = document.createElement("div");
        botMessageToolBarDiv.className = "botMessageToolBar";
        const botNameSpan = document.createElement("span");
        botNameSpan.textContent = this.settings.chatbotName || DEFAULT_SETTINGS.chatbotName;
        botNameSpan.className = "chatbotName";
        const messageBlockDiv = document.createElement("div");
        messageBlockDiv.className = "messageBlock";
        let botP = "";
        const messageText = messageData.content;
        if (messageHistory.length >= 2) {
          if (ANTHROPIC_MODELS.includes(this.settings.model)) {
            const cleanString = messageText.split(" ").slice(1).join(" ").trim();
            botP = marked(cleanString);
          } else if (messageData.content.includes('div class="formattedSettings"')) {
            botP = messageData.content;
          } else {
            botP = marked(messageData.content);
          }
        }
        const newBotP = document.createElement("p");
        newBotP.innerHTML = botP;
        botMessageToolBarDiv.appendChild(botNameSpan);
        botMessageToolBarDiv.appendChild(buttonContainerDiv);
        if (!messageText.includes('div class="formattedSettings"')) {
          const copyBotButton = displayBotCopyButton(messageData, this.settings);
          buttonContainerDiv.appendChild(copyBotButton);
        }
        botMessageDiv.appendChild(botMessageToolBarDiv);
        messageBlockDiv.appendChild(newBotP);
        botMessageDiv.appendChild(messageBlockDiv);
        messageContainer.appendChild(botMessageDiv);
        prismHighlighting(messageBlockDiv);
        codeBlockCopyButton(messageBlockDiv);
        if (!messageData.content.includes('div class="formattedSettings"')) {
          addParagraphBreaks(messageBlockDiv);
        }
        const botMessages = messageContainer.querySelectorAll(".botMessage");
        const lastBotMessage = botMessages[botMessages.length - 1];
        lastBotMessage.appendChild(messageBlockDiv);
        lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    });
    const parentElement = document.getElementById("parentElementId");
    parentElement == null ? void 0 : parentElement.appendChild(messageContainer);
    const chatbox = chatbotContainer.createEl("div", {
      attr: {
        class: "chatbox"
      }
    });
    const textarea = document.createElement("textarea");
    textarea.setAttribute("contenteditable", true.toString());
    textarea.setAttribute("placeholder", "Start typing...");
    chatbox.appendChild(textarea);
    this.textareaElement = textarea;
    this.addEventListeners();
  }
  addEventListeners() {
    this.textareaElement.addEventListener("keyup", this.handleKeyup.bind(this));
    this.textareaElement.addEventListener("keydown", this.handleKeydown.bind(this));
    this.textareaElement.addEventListener("input", this.handleInput.bind(this));
    this.textareaElement.addEventListener("blur", this.handleBlur.bind(this));
  }
  async handleFileOpenEvent(file) {
    await getActiveFileContent(file);
  }
  async handleKeyup(event) {
    const input = this.textareaElement.value.trim();
    if (this.settings.allowOllamaStream || !this.settings.ollamaModels.includes(this.settings.model)) {
      if ((input === "/s" || input === "/stop") && event.key === "Enter") {
        this.preventEnter = false;
        executeCommand(input, this.settings, this.plugin);
      }
    }
    if (this.preventEnter === false && !event.shiftKey && event.key === "Enter") {
      loadData();
      event.preventDefault();
      if (input.length === 0) {
        return;
      }
      if (ANTHROPIC_MODELS.includes(this.settings.model)) {
        addMessage("\n\nHuman: " + input, "userMessage", this.settings);
      } else {
        if (!(input === "/s" || input === "/stop")) {
          addMessage(input, "userMessage", this.settings);
        }
      }
      const userP = document.createElement("p");
      const markdownContent = marked(input);
      userP.innerHTML = markdownContent;
      const userMessageDiv = document.createElement("div");
      userMessageDiv.className = "userMessage";
      userMessageDiv.style.backgroundColor = colorToHex(this.settings.userMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.userMessageBackgroundColor).trim());
      const userMessageToolBarDiv = document.createElement("div");
      userMessageToolBarDiv.className = "userMessageToolBar";
      const userNameSpan = document.createElement("span");
      userNameSpan.className = "userName";
      userNameSpan.textContent = this.settings.userName || DEFAULT_SETTINGS.userName;
      const buttonContainerDiv = document.createElement("div");
      buttonContainerDiv.className = "button-container";
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const copyUserButton = displayUserCopyButton(userP);
        const trashButton = displayTrash();
        userMessageToolBarDiv.appendChild(userNameSpan);
        userMessageToolBarDiv.appendChild(buttonContainerDiv);
        buttonContainerDiv.appendChild(copyUserButton);
        buttonContainerDiv.appendChild(trashButton);
        userMessageDiv.appendChild(userMessageToolBarDiv);
        userMessageDiv.appendChild(userP);
        messageContainer.appendChild(userMessageDiv);
        if (input.startsWith("/")) {
          executeCommand(input, this.settings, this.plugin);
          const modelName = document.querySelector("#modelName");
          if (modelName) {
            modelName.textContent = "Model: " + this.settings.model.toLowerCase();
          }
        } else {
          this.preventEnter = true;
          const botMessageDiv = document.createElement("div");
          botMessageDiv.className = "botMessage";
          botMessageDiv.style.backgroundColor = colorToHex(this.settings.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.botMessageBackgroundColor).trim());
          const botMessageToolBarDiv = document.createElement("div");
          botMessageToolBarDiv.className = "botMessageToolBar";
          const botNameSpan = document.createElement("span");
          botNameSpan.textContent = this.settings.chatbotName || DEFAULT_SETTINGS.chatbotName;
          botNameSpan.className = "chatbotName";
          const messageBlockDiv = document.createElement("div");
          messageBlockDiv.className = "messageBlock";
          botMessageToolBarDiv.appendChild(botNameSpan);
          botMessageDiv.appendChild(botMessageToolBarDiv);
          botMessageDiv.appendChild(messageBlockDiv);
          messageContainer.appendChild(botMessageDiv);
          const loadingEl = document.createElement("span");
          loadingEl.setAttribute("id", "loading");
          loadingEl.style.display = "inline-block";
          loadingEl.textContent = "...";
          const updateLoadingAnimation = () => {
            var _a2;
            const loadingEl2 = document.querySelector("#loading");
            if (!loadingEl2) {
              return;
            }
            loadingEl2.textContent += ".";
            if (((_a2 = loadingEl2.textContent) == null ? void 0 : _a2.length) && loadingEl2.textContent.length > 3) {
              loadingEl2.textContent = ".";
            }
          };
          botMessageDiv.appendChild(loadingEl);
          loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
          const loadingAnimationIntervalId = setInterval(updateLoadingAnimation, 500);
          const spacer = document.createElement("div");
          spacer.setAttribute("id", "spacer");
          messageContainer.appendChild(spacer);
          userMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
          this.BMOchatbot(input).then(() => {
            const spacer2 = messageContainer.querySelector("#spacer");
            if (spacer2) {
              spacer2.remove();
            }
            this.preventEnter = false;
            clearInterval(loadingAnimationIntervalId);
          }).catch(() => {
            clearInterval(loadingAnimationIntervalId);
            const botParagraph = document.createElement("p");
            botParagraph.textContent = "Oops, something went wrong. Please try again.";
            botMessageDiv.appendChild(botParagraph);
          });
        }
      }
      this.textareaElement.value = "";
      this.textareaElement.style.height = "29px";
      this.textareaElement.value = this.textareaElement.value.replace(/^[\r\n]+|[\r\n]+$/gm, "");
      this.textareaElement.setSelectionRange(0, 0);
    }
  }
  handleKeydown(event) {
    if (event.key === "Enter" && !event.shiftKey) {
      event.preventDefault();
    }
  }
  handleInput(event) {
    this.textareaElement.style.height = "29px";
    this.textareaElement.style.height = this.textareaElement.scrollHeight + "px";
  }
  handleBlur(event) {
    if (!this.textareaElement.value) {
      this.textareaElement.style.height = "29px";
    }
  }
  exportSettings() {
    return this.settings;
  }
  cleanup() {
    this.textareaElement.removeEventListener("keyup", this.handleKeyup.bind(this));
    this.textareaElement.addEventListener("keydown", this.handleKeydown.bind(this));
    this.textareaElement.removeEventListener("input", this.handleInput.bind(this));
    this.textareaElement.removeEventListener("blur", this.handleBlur.bind(this));
    if (this.loadingAnimationIntervalId) {
      clearInterval(this.loadingAnimationIntervalId);
    }
  }
  async BMOchatbot(_input) {
    let referenceCurrentNoteContent = "";
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile) {
      if (this.settings.referenceCurrentNote) {
        referenceCurrentNoteContent = await getActiveFileContent(activeFile);
      }
    }
    const messageContainerEl = document.querySelector("#messageContainer");
    const chatbotNameHeading = document.querySelector("#chatbotNameHeading");
    const chatbox = document.querySelector(".chatbox textarea");
    if (!this.settings.apiKey && OPENAI_MODELS.includes(this.settings.model)) {
      new import_obsidian3.Notice("API key not found. Please add your OpenAI API key in the plugin settings.");
      if (chatbotNameHeading) {
        chatbotNameHeading.textContent = "ERROR";
      }
      const lastDiv = messageContainerEl == null ? void 0 : messageContainerEl.lastElementChild;
      const errorMessage = document.createElement("p");
      errorMessage.textContent = "API key not found. Please add your OpenAI API key in the plugin settings.";
      errorMessage.classList.add("errorMessage");
      const chatbotNameError = lastDiv.querySelector(".chatbotName");
      chatbotNameError.textContent = "ERROR";
      lastDiv.appendChild(errorMessage);
      chatbox.disabled = true;
    } else {
      let systemReferenceCurrentNote = "";
      if (this.settings.referenceCurrentNote) {
        systemReferenceCurrentNote = "Refer to note if asked.";
      }
      const maxTokens = this.settings.max_tokens;
      const temperature = this.settings.temperature;
      const settings = {
        apiKey: this.settings.apiKey,
        model: this.settings.model,
        system_role: systemReferenceCurrentNote + this.settings.system_role
      };
      if (OPENAI_MODELS.includes(this.settings.model)) {
        try {
          await fetchOpenAIAPI(this.settings, referenceCurrentNoteContent);
        } catch (error) {
          new import_obsidian3.Notice("Error occurred while fetching completion: " + error.message);
          console.log(error.message);
        }
      } else if (ANTHROPIC_MODELS.includes(this.settings.model)) {
        try {
          const response = await requestUrlAnthropicAPI(this.settings, referenceCurrentNoteContent);
          const message = response.text;
          const lines = message.split("\n");
          let completionText = "";
          for (const line of lines) {
            if (line.startsWith("data:")) {
              const eventData = JSON.parse(line.slice("data:".length));
              if (eventData.completion) {
                completionText += eventData.completion;
              }
            }
          }
          if (messageContainerEl) {
            const botMessages = messageContainerEl.querySelectorAll(".botMessage");
            const lastBotMessage = botMessages[botMessages.length - 1];
            const loadingEl = lastBotMessage.querySelector("#loading");
            if (loadingEl) {
              loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
              lastBotMessage.removeChild(loadingEl);
            }
            const messageBlock = lastBotMessage.querySelector(".messageBlock");
            if (messageBlock) {
              messageBlock.innerHTML = marked(completionText);
              addParagraphBreaks(messageBlock);
              prismHighlighting(messageBlock);
              codeBlockCopyButton(messageBlock);
            }
            lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
          }
          addMessage("\n\nAssistant: " + completionText, "botMessage", this.settings);
        } catch (error) {
          console.error("Error:", error);
        }
      } else {
        try {
          if (this.settings.ollamaRestAPIUrl) {
            if (this.settings.allowOllamaStream) {
              await ollamaFetchDataStream(this.settings, referenceCurrentNoteContent);
            } else {
              await ollamaFetchData(this.settings, referenceCurrentNoteContent);
            }
          } else {
            const response = await requestUrlChatCompletion(this.settings.localAIRestAPIUrl, settings, referenceCurrentNoteContent, messageHistory, maxTokens, temperature);
            const message = response.json.choices[0].message.content;
            if (messageContainerEl) {
              const botMessages = messageContainerEl.querySelectorAll(".botMessage");
              const lastBotMessage = botMessages[botMessages.length - 1];
              const loadingEl = lastBotMessage.querySelector("#loading");
              if (loadingEl) {
                loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
                lastBotMessage.removeChild(loadingEl);
              }
              const messageBlock = document.createElement("p");
              const markdownContent = marked(message);
              messageBlock.innerHTML = markdownContent;
              messageBlock.classList.add("messageBlock");
              addParagraphBreaks(messageBlock);
              prismHighlighting(messageBlock);
              codeBlockCopyButton(messageBlock);
              lastBotMessage.appendChild(messageBlock);
              lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
            }
            addMessage(message, "botMessage", this.settings);
          }
        } catch (error) {
          new import_obsidian3.Notice("Error occurred while fetching completion: " + error.message);
          console.log(error.message);
        }
      }
    }
  }
  async onClose() {
  }
};
async function loadData() {
  if (!await this.app.vault.adapter.exists("./.obsidian/plugins/bmo-chatbot/data/")) {
    this.app.vault.adapter.mkdir("./.obsidian/plugins/bmo-chatbot/data/");
  }
  if (await this.app.vault.adapter.exists(filenameMessageHistoryJSON)) {
    try {
      const fileContent = await this.app.vault.adapter.read(filenameMessageHistoryJSON);
      if (fileContent.trim() === "") {
        messageHistory = [];
      } else {
        messageHistory = JSON.parse(fileContent);
      }
    } catch (error) {
      console.error("Error processing message history:", error);
    }
  } else {
    messageHistory = [];
  }
}
async function getActiveFileContent(file) {
  const activeFile = app.workspace.getActiveFile();
  const dotElement = document.querySelector(".dotIndicator");
  let currentNote = "";
  if ((activeFile == null ? void 0 : activeFile.extension) === "md") {
    const content = await app.vault.read(activeFile);
    currentNote = "Note:```" + content + "```\n";
    if (dotElement) {
      dotElement.style.backgroundColor = "green";
    }
  } else {
    if (dotElement) {
      dotElement.style.backgroundColor = "#da2c2c";
    }
  }
  return currentNote;
}
async function addMessage(input, messageType, settings, index) {
  const messageObj = {
    role: "",
    content: ""
  };
  if (messageType === "userMessage") {
    messageObj.role = "user";
    messageObj.content = input;
  } else if (messageType === "botMessage") {
    messageObj.role = "assistant";
    messageObj.content = input;
    const botMessageToolBarDiv = document.querySelectorAll(".botMessageToolBar");
    const lastBotMessageToolBarDiv = botMessageToolBarDiv[botMessageToolBarDiv.length - 1];
    if (botMessageToolBarDiv.length > 0) {
      if (!messageObj.content.includes('div class="formattedSettings"')) {
        const copyBotButton = displayBotCopyButton(messageObj, settings);
        lastBotMessageToolBarDiv.appendChild(copyBotButton);
      }
    }
  }
  messageHistory.push(messageObj);
  const jsonString = JSON.stringify(messageHistory, null, 4);
  try {
    await this.app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
  } catch (error) {
    console.error("Error writing to message history file:", error);
  }
}
function prismHighlighting(messageBlock) {
  (0, import_obsidian3.loadPrism)().then((Prism) => {
    const codeBlocks = messageBlock == null ? void 0 : messageBlock.querySelectorAll(".messageBlock pre code");
    codeBlocks == null ? void 0 : codeBlocks.forEach((codeBlock) => {
      const language = codeBlock.className.replace("language-", "");
      const code = codeBlock.textContent;
      if (language && Prism.languages[language]) {
        const highlightedCode = Prism.highlight(code, Prism.languages[language]);
        codeBlock.innerHTML = highlightedCode;
      }
    });
  });
}
function codeBlockCopyButton(messageBlock) {
  const codeBlocks = messageBlock.querySelectorAll(".messageBlock pre code");
  codeBlocks.forEach((codeElement) => {
    const copyButton = document.createElement("button");
    copyButton.textContent = "copy";
    (0, import_obsidian3.setIcon)(copyButton, "copy");
    copyButton.classList.add("copy-button");
    copyButton.title = "copy";
    if (codeElement.parentNode) {
      codeElement.parentNode.insertBefore(copyButton, codeElement.nextSibling);
    }
    copyButton.addEventListener("click", () => {
      var _a2;
      const language = ((_a2 = codeElement.getAttribute("class")) == null ? void 0 : _a2.replace("language-", "")) || "";
      const codeText = `\`\`\`${language}
${codeElement.textContent}\`\`\``;
      if (codeText) {
        navigator.clipboard.writeText(codeText).then(() => {
          new import_obsidian3.Notice("Copied codeblock.");
        }, (err) => {
          console.error("Failed to copy code: ", err);
          new import_obsidian3.Notice("Failed to copy code: ", err);
        });
      }
    });
  });
}
function addParagraphBreaks(messageBlock) {
  const paragraphs = messageBlock.querySelectorAll("p");
  for (let i = 0; i < paragraphs.length; i++) {
    const p = paragraphs[i];
    const nextSibling = p.nextElementSibling;
    if (nextSibling && nextSibling.nodeName === "P") {
      const br = document.createElement("br");
      const parent = p.parentNode;
      if (parent) {
        parent.insertBefore(br, nextSibling);
      }
    }
  }
}
function copyMessageToClipboard(message) {
  navigator.clipboard.writeText(message).then(function() {
  }).catch(function(err) {
    console.error("Unable to copy message: ", err);
  });
}
function displayUserCopyButton(userP) {
  const copyButton = document.createElement("button");
  copyButton.textContent = "copy";
  (0, import_obsidian3.setIcon)(copyButton, "copy");
  copyButton.classList.add("copy-button");
  copyButton.title = "copy";
  copyButton.addEventListener("click", function() {
    const messageText = userP.textContent;
    if (messageText !== null) {
      copyMessageToClipboard(messageText);
      new import_obsidian3.Notice("Copied user message.");
    } else {
      console.error("Message content is null. Cannot copy.");
    }
  });
  return copyButton;
}
function displayBotCopyButton(messageObj, settings) {
  const copyButton = document.createElement("button");
  copyButton.textContent = "copy";
  (0, import_obsidian3.setIcon)(copyButton, "copy");
  copyButton.classList.add("copy-button");
  copyButton.title = "copy";
  let messageText = messageObj.content;
  if (messageText !== null) {
    if (ANTHROPIC_MODELS.includes(settings.model)) {
      const fullString = messageObj.content;
      const cleanString = fullString.split(" ").slice(1).join(" ").trim();
      messageText = cleanString;
    }
  } else {
    new import_obsidian3.Notice("Message content is null. Cannot copy.");
    console.error("Message content is null. Cannot copy.");
  }
  copyButton.addEventListener("click", function() {
    if (messageText !== null) {
      copyMessageToClipboard(messageText);
      new import_obsidian3.Notice("Copied bot message.");
    } else {
      console.error("Message content is null. Cannot copy.");
    }
  });
  return copyButton;
}
function displayTrash() {
  const trashButton = document.createElement("button");
  trashButton.textContent = "trash";
  (0, import_obsidian3.setIcon)(trashButton, "trash");
  trashButton.classList.add("trash-button");
  trashButton.title = "trash";
  let lastClickedElement = null;
  trashButton.addEventListener("click", function(event) {
    event.stopPropagation();
    lastClickedElement = event.target;
    while (lastClickedElement && !lastClickedElement.classList.contains("userMessage")) {
      lastClickedElement = lastClickedElement.parentElement;
    }
    if (lastClickedElement) {
      const userMessages = Array.from(document.querySelectorAll("#messageContainer .userMessage"));
      const index = userMessages.indexOf(lastClickedElement) * 2;
      if (index !== -1) {
        const modal = new import_obsidian3.Modal(app);
        modal.contentEl.innerHTML = `
                <div class="modal-content">
                    <h2>Delete Message Block.</h2>
                    <p>Are you sure you want to delete this message block?</p>
                    <button id="confirmDelete">Confirm Delete</button>
                </div>
                `;
        const confirmDeleteButton = modal.contentEl.querySelector("#confirmDelete");
        confirmDeleteButton == null ? void 0 : confirmDeleteButton.addEventListener("click", async function() {
          deleteMessage(index);
          new import_obsidian3.Notice("Message deleted.");
          modal.close();
        });
        modal.open();
      }
    }
  });
  return trashButton;
}
async function deleteMessage(index) {
  const messageContainer = document.querySelector("#messageContainer");
  const divElements = messageContainer == null ? void 0 : messageContainer.querySelectorAll("div.botMessage, div.userMessage");
  if (divElements && divElements.length > 0 && index >= 0 && index < divElements.length) {
    messageContainer == null ? void 0 : messageContainer.removeChild(divElements[index]);
    if (index + 1 < divElements.length) {
      const nextMessage = divElements[index + 1];
      if (nextMessage.classList.contains("botMessage")) {
        messageContainer == null ? void 0 : messageContainer.removeChild(nextMessage);
      }
    }
  }
  if (messageHistory[index + 1] && messageHistory[index + 1].role === "assistant") {
    messageHistory.splice(index, 2);
  } else {
    messageHistory.splice(index, 1);
  }
  const jsonString = JSON.stringify(messageHistory, null, 4);
  try {
    await app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
  } catch (error) {
    console.error("Error writing messageHistory.json", error);
  }
}
async function removeMessageThread(index) {
  const messageContainer = document.querySelector("#messageContainer");
  const divElements = messageContainer == null ? void 0 : messageContainer.querySelectorAll("div.botMessage, div.userMessage");
  if (divElements && divElements.length > 0 && index >= 0 && index < divElements.length) {
    for (let i = index; i < divElements.length; i++) {
      messageContainer == null ? void 0 : messageContainer.removeChild(divElements[i]);
    }
  }
  messageHistory.splice(index);
  const jsonString = JSON.stringify(messageHistory, null, 4);
  try {
    await app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
  } catch (error) {
    console.error("Error writing messageHistory.json", error);
  }
}

// src/settings.ts
var import_obsidian10 = require("obsidian");

// src/components/settings/GeneralSettings.ts
var import_obsidian4 = require("obsidian");
function addGeneralSettings(containerEl, plugin, SettingTab6, localAIModels, ollamaModels) {
  containerEl.createEl("h2", { text: "General" });
  new import_obsidian4.Setting(containerEl).setName("API Key").setDesc("Insert API Key from OpenAI or Anthropic.").addText(
    (text) => text.setPlaceholder("insert-api-key").setValue(plugin.settings.apiKey ? `${plugin.settings.apiKey.slice(0, 6)}-...${plugin.settings.apiKey.slice(-4)}` : "").onChange(async (value) => {
      plugin.settings.apiKey = value;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab6.display();
    })
  );
  const addOptionsToDropdown = (dropdown, models) => {
    models.forEach((model) => {
      dropdown.addOption(model, model);
    });
  };
  new import_obsidian4.Setting(containerEl).setName("Model").setDesc("Choose a model.").addDropdown((dropdown) => {
    plugin.settings.allModels = [];
    if (plugin.settings.apiKey && !plugin.settings.apiKey.startsWith("sk-ant")) {
      addOptionsToDropdown(dropdown, OPENAI_MODELS);
      for (const model of OPENAI_MODELS) {
        if (!plugin.settings.allModels.includes(model)) {
          plugin.settings.allModels.push(model);
        }
      }
    }
    if (plugin.settings.apiKey && plugin.settings.apiKey.startsWith("sk-ant")) {
      addOptionsToDropdown(dropdown, ANTHROPIC_MODELS);
      for (const model of ANTHROPIC_MODELS) {
        if (!plugin.settings.allModels.includes(model)) {
          plugin.settings.allModels.push(model);
        }
      }
    }
    if (plugin.settings.ollamaRestAPIUrl && plugin.settings.ollamaModels && plugin.settings.ollamaModels.length > 0) {
      try {
        ollamaModels.forEach((model) => {
          dropdown.addOption(model, model);
          if (!plugin.settings.allModels.includes(model)) {
            plugin.settings.allModels.push(model);
          }
        });
      } catch (error) {
        console.error("Error:", error);
        new import_obsidian4.Notice("Ollama connection error.");
      }
    }
    if (plugin.settings.localAIRestAPIUrl && localAIModels && localAIModels.length > 0) {
      try {
        localAIModels.forEach((model) => {
          dropdown.addOption(model, model);
          if (!plugin.settings.allModels.includes(model)) {
            plugin.settings.allModels.push(model);
          }
        });
      } catch (error) {
        console.error("Error:", error);
        new import_obsidian4.Notice("LocalAI connection error.");
      }
    }
    dropdown.setValue(plugin.settings.model || DEFAULT_SETTINGS.model).onChange(async (value) => {
      plugin.settings.model = value;
      await plugin.saveSettings();
      const modelName = document.querySelector("#modelName");
      if (modelName) {
        modelName.textContent = "Model: " + plugin.settings.model.toLowerCase();
      }
    });
  });
  new import_obsidian4.Setting(containerEl).setName("System").setDesc("System role prompt.").addTextArea(
    (text) => text.setPlaceholder("You are a helpful assistant.").setValue(plugin.settings.system_role !== void 0 ? plugin.settings.system_role : "You are a helpful assistant who responds in markdown.").onChange(async (value) => {
      plugin.settings.system_role = value !== void 0 ? value : DEFAULT_SETTINGS.system_role;
      await plugin.saveSettings();
    })
  );
  new import_obsidian4.Setting(containerEl).setName("Max Tokens").setDesc(descLink("The maximum number of tokens, or words, that the model is allowed to generate in its output.", "https://platform.openai.com/tokenizer")).addText(
    (text) => text.setPlaceholder("4096").setValue(plugin.settings.max_tokens).onChange(async (value) => {
      plugin.settings.max_tokens = value;
      await plugin.saveSettings();
    })
  );
  new import_obsidian4.Setting(containerEl).setName("Temperature").setDesc("Temperature controls how random the generated output is. Lower values make the text more predictable, while higher values make it more creative and unpredictable.").addSlider(
    (slider) => slider.setLimits(0, 1, 0.05).setValue(plugin.settings.temperature !== void 0 ? plugin.settings.temperature : DEFAULT_SETTINGS.temperature).setDynamicTooltip().onChange(async (value) => {
      plugin.settings.temperature = value;
      await plugin.saveSettings();
    })
  );
  new import_obsidian4.Setting(containerEl).setName("Allow Reference Current Note").setDesc("Allow chatbot to reference current active note during conversation.").addToggle(
    (toggle) => toggle.setValue(plugin.settings.referenceCurrentNote).onChange((value) => {
      plugin.settings.referenceCurrentNote = value;
      plugin.saveSettings();
      const referenceCurrentNoteElement = document.getElementById("referenceCurrentNote");
      if (referenceCurrentNoteElement) {
        if (value) {
          referenceCurrentNoteElement.style.display = "block";
        } else {
          referenceCurrentNoteElement.style.display = "none";
        }
      }
    })
  );
  function descLink(text, link) {
    const frag = new DocumentFragment();
    const desc = document.createElement("span");
    desc.innerText = text + " ";
    frag.appendChild(desc);
    const anchor = document.createElement("a");
    anchor.href = link;
    anchor.target = "_blank";
    anchor.rel = "noopener noreferrer";
    anchor.innerText = "(https://platform.openai.com/tokenizer)";
    frag.appendChild(anchor);
    return frag;
  }
}

// src/components/settings/AppearanceSettings.ts
var import_obsidian5 = require("obsidian");
function addAppearanceSettings(containerEl, plugin, SettingTab6) {
  containerEl.createEl("h2", { text: "Appearance" });
  new import_obsidian5.Setting(containerEl).setName("User Name").setDesc("Create a username.").addText(
    (text) => text.setPlaceholder("Enter user name").setValue(plugin.settings.userName || DEFAULT_SETTINGS.userName).onChange(async (value) => {
      plugin.settings.userName = value ? value.toUpperCase() : DEFAULT_SETTINGS.userName;
      text.inputEl.maxLength = 30;
      await plugin.saveSettings();
      const userNames = document.querySelectorAll(".userName");
      userNames.forEach((userName) => {
        userName.textContent = plugin.settings.userName;
      });
    })
  );
  new import_obsidian5.Setting(containerEl).setName("Chatbot Name").setDesc("Name your chatbot.").addText(
    (text) => text.setPlaceholder("Enter chatbot name").setValue(plugin.settings.chatbotName || DEFAULT_SETTINGS.chatbotName).onChange(async (value) => {
      plugin.settings.chatbotName = value ? value.toUpperCase() : DEFAULT_SETTINGS.chatbotName;
      text.inputEl.maxLength = 30;
      await plugin.saveSettings();
      const chatbotNameHeading = document.querySelector("#chatbotNameHeading");
      const chatbotNames = document.querySelectorAll(".chatbotName");
      if (chatbotNameHeading) {
        chatbotNameHeading.textContent = plugin.settings.chatbotName;
      }
      chatbotNames.forEach((chatbotName) => {
        chatbotName.textContent = plugin.settings.chatbotName;
      });
    })
  );
  let colorPicker1;
  const defaultUserMessageBackgroundColor = getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.userMessageBackgroundColor).trim();
  new import_obsidian5.Setting(containerEl).setName("Background color for User Messages").setDesc("Modify the background color of the userMessage element.").addButton(
    (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
      const defaultValue = colorToHex(defaultUserMessageBackgroundColor);
      colorPicker1.setValue(defaultValue);
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const userMessages = messageContainer.querySelectorAll(".userMessage");
        userMessages.forEach((userMessage) => {
          const element = userMessage;
          element.style.backgroundColor = defaultValue;
        });
        await plugin.saveSettings();
      }
    })
  ).addColorPicker((color) => {
    colorPicker1 = color;
    let defaultValue = plugin.settings.userMessageBackgroundColor;
    if (plugin.settings.userMessageBackgroundColor == "--background-primary") {
      defaultValue = colorToHex(defaultUserMessageBackgroundColor);
    }
    color.setValue(defaultValue).onChange(async (value) => {
      const hexValue = colorToHex(value);
      plugin.settings.userMessageBackgroundColor = hexValue;
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const userMessages = messageContainer.querySelectorAll(".userMessage");
        userMessages.forEach((userMessage) => {
          const element = userMessage;
          element.style.backgroundColor = hexValue;
        });
      }
      await plugin.saveSettings();
    });
  });
  let colorPicker2;
  const defaultBotMessageBackgroundColor = getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.botMessageBackgroundColor).trim();
  new import_obsidian5.Setting(containerEl).setName("Background color for Bot Messages").setDesc("Modify the background color of the botMessage element.").addButton(
    (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
      const defaultValue = colorToHex(defaultBotMessageBackgroundColor);
      colorPicker2.setValue(defaultValue);
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const botMessages = messageContainer.querySelectorAll(".botMessage");
        botMessages.forEach((botMessage) => {
          const element = botMessage;
          element.style.backgroundColor = defaultValue;
        });
        await plugin.saveSettings();
      }
    })
  ).addColorPicker((color) => {
    colorPicker2 = color;
    let defaultValue = plugin.settings.botMessageBackgroundColor;
    if (plugin.settings.botMessageBackgroundColor == "--background-secondary") {
      defaultValue = colorToHex(defaultBotMessageBackgroundColor);
    }
    color.setValue(defaultValue).onChange(async (value) => {
      const hexValue = colorToHex(value);
      plugin.settings.botMessageBackgroundColor = hexValue;
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const botMessages = messageContainer.querySelectorAll(".botMessage");
        botMessages.forEach((botMessage) => {
          const element = botMessage;
          element.style.backgroundColor = hexValue;
        });
      }
      await plugin.saveSettings();
    });
  });
}

// src/components/settings/ChatHistorySettings.ts
var import_obsidian6 = require("obsidian");
function addChatHistorySettings(containerEl, plugin, SettingTab6) {
  containerEl.createEl("h2", { text: "Chat History" });
  new import_obsidian6.Setting(containerEl).setName("Chat History Folder Path").setDesc("Save your chat history in a specified folder.").addText(
    (text) => text.setPlaceholder("BMO/").setValue(plugin.settings.chatHistoryPath || DEFAULT_SETTINGS.chatHistoryPath).onChange(async (value) => {
      plugin.settings.chatHistoryPath = value ? value : DEFAULT_SETTINGS.chatHistoryPath;
      await plugin.saveSettings();
    })
  );
  new import_obsidian6.Setting(containerEl).setName("Template File Path").setDesc("Insert your template file path.").addText(
    (text) => text.setPlaceholder("templates/bmo.md").setValue(plugin.settings.templateFilePath || DEFAULT_SETTINGS.templateFilePath).onChange(async (value) => {
      plugin.settings.templateFilePath = value ? value : DEFAULT_SETTINGS.templateFilePath;
      if (value) {
        if (!plugin.settings.templateFilePath.endsWith(".md")) {
          plugin.settings.templateFilePath += ".md";
        }
        await plugin.saveSettings();
        const allFiles = app.vault.getFiles();
        const fileExists = allFiles.some((file) => file.path.toLowerCase() === plugin.settings.templateFilePath.toLowerCase());
        if (fileExists) {
          text.inputEl.style.borderColor = "";
        } else {
          text.inputEl.style.borderColor = "red";
        }
      } else {
        text.inputEl.style.borderColor = "";
        plugin.settings.templateFilePath = DEFAULT_SETTINGS.templateFilePath;
      }
    })
  );
  new import_obsidian6.Setting(containerEl).setName("Allow Rename Note Title").setDesc("Allow model to rename the note title when saving chat history.").addToggle(
    (toggle) => toggle.setValue(plugin.settings.allowRenameNoteTitle).onChange((value) => {
      plugin.settings.allowRenameNoteTitle = value;
      plugin.saveSettings();
    })
  );
}

// src/components/settings/OllamaSettings.ts
var import_obsidian7 = require("obsidian");

// src/utils/DescriptionLink.ts
function addDescriptionLink(text, link, extraWords, innerText) {
  const frag = new DocumentFragment();
  const desc = document.createElement("span");
  desc.innerText = text + " ";
  frag.appendChild(desc);
  const anchor = document.createElement("a");
  anchor.href = link;
  anchor.target = "_blank";
  anchor.rel = "noopener noreferrer";
  anchor.innerText = innerText;
  frag.appendChild(anchor);
  const extra = document.createElement("span");
  extra.innerText = " " + extraWords;
  frag.appendChild(extra);
  return frag;
}

// src/components/settings/OllamaSettings.ts
function addOllamaSettings(containerEl, plugin, SettingTab6) {
  containerEl.createEl("h2", { text: "Ollama Local LLMs" });
  new import_obsidian7.Setting(containerEl).setName("OLLAMA REST API URL").setDesc(addDescriptionLink("Enter your REST API URL using", "https://ollama.ai/", "", "Ollama")).addText(
    (text) => text.setPlaceholder("http://localhost:11434").setValue(plugin.settings.ollamaRestAPIUrl || DEFAULT_SETTINGS.ollamaRestAPIUrl).onChange(async (value) => {
      plugin.settings.ollamaRestAPIUrl = value ? value : DEFAULT_SETTINGS.ollamaRestAPIUrl;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab6.display();
    })
  );
  new import_obsidian7.Setting(containerEl).setName("Allow Stream").setDesc(addDescriptionLink("Allow Ollama models to stream response. Additional setup required: ", "https://github.com/longy2k/obsidian-bmo-chatbot/wiki", "", "[Instructions]")).addToggle(
    (toggle) => toggle.setValue(plugin.settings.allowOllamaStream).onChange((value) => {
      plugin.settings.allowOllamaStream = value;
      plugin.saveSettings();
    })
  );
}

// src/components/settings/AdvancedSettings.ts
var import_obsidian8 = require("obsidian");
function addAdvancedSettings(containerEl, plugin, SettingTab6) {
  containerEl.createEl("h2", { text: "Advanced" });
  new import_obsidian8.Setting(containerEl).setName("OPENAI BASE URL").setDesc("Enter your custom OpenAI base url.").addButton(
    (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
      plugin.settings.openAIBaseUrl = DEFAULT_SETTINGS.openAIBaseUrl;
      await plugin.saveSettings();
    })
  ).addText(
    (text) => text.setPlaceholder("https://api.openai.com/v1").setValue(plugin.settings.openAIBaseUrl || DEFAULT_SETTINGS.openAIBaseUrl).onChange(async (value) => {
      plugin.settings.openAIBaseUrl = value ? value : DEFAULT_SETTINGS.openAIBaseUrl;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab6.display();
    })
  );
  new import_obsidian8.Setting(containerEl).setName("LOCALAI REST API URL").setDesc(addDescriptionLink("Enter your REST API URL using", "https://github.com/go-skynet/LocalAI", "", "LocalAI")).addText(
    (text) => text.setPlaceholder("http://localhost:8080").setValue(plugin.settings.localAIRestAPIUrl || DEFAULT_SETTINGS.localAIRestAPIUrl).onChange(async (value) => {
      plugin.settings.localAIRestAPIUrl = value ? value : DEFAULT_SETTINGS.localAIRestAPIUrl;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab6.display();
    })
  );
}

// src/components/FetchModelList.ts
var import_obsidian9 = require("obsidian");
async function fetchOllamaModels(plugin) {
  const ollamaRestAPIUrl = plugin.settings.ollamaRestAPIUrl;
  try {
    const response = await (0, import_obsidian9.requestUrl)({
      url: ollamaRestAPIUrl + "/api/tags",
      method: "GET",
      headers: {
        "Content-Type": "application/json"
      }
    });
    const jsonData = response.json;
    const models = jsonData.models.map((model) => model.name);
    plugin.settings.ollamaModels = models;
    return models;
  } catch (error) {
    console.error("Error:", error);
  }
}
async function fetchLocalAIModels(plugin) {
  const localAIRestAPIUrl = plugin.settings.localAIRestAPIUrl;
  if (!localAIRestAPIUrl) {
    return;
  }
  const url = localAIRestAPIUrl + "/v1/models";
  try {
    const response = await (0, import_obsidian9.requestUrl)({
      url,
      method: "GET",
      headers: {
        "Content-Type": "application/json"
      }
    });
    const jsonData = response.json;
    const models = jsonData.data.map((model) => model.id);
    plugin.settings.localAIModels = models;
    return models;
  } catch (error) {
    console.error("Error:", error);
  }
}

// src/settings.ts
var BMOSettingTab = class extends import_obsidian10.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  async display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: "BMO Chatbot Settings" });
    const changeLogLink = containerEl.createEl("a", {
      text: "Changelog",
      href: "https://github.com/longy2k/obsidian-bmo-chatbot/releases"
    });
    changeLogLink.style.fontSize = "0.8rem";
    containerEl.createEl("p", { text: "Type `/help` in chat for commands." });
    const localAIModels = await fetchLocalAIModels(this.plugin);
    const ollamaModels = await fetchOllamaModels(this.plugin);
    addGeneralSettings(this.containerEl, this.plugin, this, localAIModels, ollamaModels);
    addAppearanceSettings(this.containerEl, this.plugin, this);
    addChatHistorySettings(this.containerEl, this.plugin, this);
    addOllamaSettings(this.containerEl, this.plugin, this);
    addAdvancedSettings(this.containerEl, this.plugin, this);
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  apiKey: "",
  max_tokens: "",
  model: "",
  allModels: [],
  system_role: "",
  temperature: 1,
  userName: "USER",
  chatbotName: "BMO",
  chatbotContainerBackgroundColor: "--background-secondary",
  userMessageBackgroundColor: "--background-primary",
  botMessageBackgroundColor: "--background-secondary",
  chatHistoryPath: "BMO/",
  templateFilePath: "",
  openAIBaseUrl: "https://api.openai.com/v1",
  ollamaRestAPIUrl: "http://localhost:11434",
  ollamaModels: [],
  allowOllamaStream: false,
  localAIRestAPIUrl: "",
  localAIModels: [],
  referenceCurrentNote: false,
  allowRenameNoteTitle: false
};
var BMOGPT6 = class extends import_obsidian11.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_CHATBOT,
      (leaf) => new BMOView(leaf, this.settings, this)
    );
    this.addRibbonIcon("bot", "BMO Chatbot", () => {
      this.activateView();
    });
    this.addCommand({
      id: "open-bmo-chatbot",
      name: "Open BMO Chatbot",
      callback: () => {
        this.activateView();
      },
      hotkeys: [
        {
          modifiers: ["Mod"],
          key: "0"
        }
      ]
    });
    this.addSettingTab(new BMOSettingTab(this.app, this));
  }
  async onunload() {
    this.app.workspace.getLeavesOfType(VIEW_TYPE_CHATBOT).forEach((leaf) => {
      const bmoView = leaf.view;
      if (bmoView) {
        this.saveSettings();
        bmoView.cleanup();
      }
    });
  }
  async activateView() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE_CHATBOT);
    const rightLeaf = this.app.workspace.getRightLeaf(false);
    await rightLeaf.setViewState({
      type: VIEW_TYPE_CHATBOT,
      active: true
    });
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_CHATBOT)[0]
    );
    const textarea = document.querySelector(".chatbox textarea");
    if (textarea) {
      textarea.style.opacity = "0";
      textarea.style.transition = "opacity 1s ease-in-out";
      setTimeout(() => {
        textarea.focus();
        textarea.style.opacity = "1";
      }, 50);
    }
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_CHATBOT)[0]
    );
    const messageContainer = document.querySelector("#messageContainer");
    if (messageContainer) {
      messageContainer.scroll({
        top: messageContainer.scrollHeight,
        behavior: "smooth"
      });
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3ZpZXcudHMiLCAic3JjL3V0aWxzL0NvbG9yQ29udmVydGVyLnRzIiwgInNyYy9jb21wb25lbnRzL0ZldGNoTW9kZWwudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvdmVyc2lvbi50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9zdHJlYW1pbmcudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvZXJyb3IudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvX3NoaW1zL2FnZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvX3NoaW1zL2ZldGNoLm1qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL19zaGltcy9mb3JtLWRhdGEubWpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL19zaGltcy9nZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9fc2hpbXMvZmlsZUZyb21QYXRoLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL19zaGltcy9ub2RlLXJlYWRhYmxlLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3VwbG9hZHMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvY29yZS50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9wYWdpbmF0aW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9hdWRpby90cmFuc2NyaXB0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvYXVkaW8vdHJhbnNsYXRpb25zLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9hdWRpby9hdWRpby50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvY2hhdC9jb21wbGV0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvY2hhdC9jaGF0LnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9jb21wbGV0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvZW1iZWRkaW5ncy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvZWRpdHMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2ZpbGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9maW5lLXR1bmVzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9maW5lLXR1bmluZy9qb2JzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9maW5lLXR1bmluZy9maW5lLXR1bmluZy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvaW1hZ2VzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9tb2RlbHMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL21vZGVyYXRpb25zLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL2luZGV4LnRzIiwgIm5vZGVfbW9kdWxlcy9tYXJrZWQvbGliL21hcmtlZC5lc20uanMiLCAic3JjL2NvbXBvbmVudHMvY29tbWFuZHMudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9jb21wb25lbnRzL3NldHRpbmdzL0dlbmVyYWxTZXR0aW5ncy50cyIsICJzcmMvY29tcG9uZW50cy9zZXR0aW5ncy9BcHBlYXJhbmNlU2V0dGluZ3MudHMiLCAic3JjL2NvbXBvbmVudHMvc2V0dGluZ3MvQ2hhdEhpc3RvcnlTZXR0aW5ncy50cyIsICJzcmMvY29tcG9uZW50cy9zZXR0aW5ncy9PbGxhbWFTZXR0aW5ncy50cyIsICJzcmMvdXRpbHMvRGVzY3JpcHRpb25MaW5rLnRzIiwgInNyYy9jb21wb25lbnRzL3NldHRpbmdzL0FkdmFuY2VkU2V0dGluZ3MudHMiLCAic3JjL2NvbXBvbmVudHMvRmV0Y2hNb2RlbExpc3QudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEJNT1ZpZXcsIFZJRVdfVFlQRV9DSEFUQk9UfSBmcm9tIFwiLi92aWV3XCI7XG5pbXBvcnQgeyBCTU9TZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQk1PU2V0dGluZ3Mge1xuXHRhcGlLZXk6IHN0cmluZztcblx0bWF4X3Rva2Vuczogc3RyaW5nO1xuXHRtb2RlbDogc3RyaW5nO1xuXHRhbGxNb2RlbHM6IHN0cmluZ1tdO1xuXHRzeXN0ZW1fcm9sZTogc3RyaW5nO1xuXHR0ZW1wZXJhdHVyZTogbnVtYmVyO1xuXHR1c2VyTmFtZTogc3RyaW5nO1xuXHRjaGF0Ym90TmFtZTogc3RyaW5nO1xuXHRjaGF0Ym90Q29udGFpbmVyQmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XG5cdHVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XG5cdGJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3I6IHN0cmluZztcblx0Y2hhdEhpc3RvcnlQYXRoOiBzdHJpbmc7XG5cdHRlbXBsYXRlRmlsZVBhdGg6IHN0cmluZztcblx0b3BlbkFJQmFzZVVybDogc3RyaW5nO1xuXHRvbGxhbWFSZXN0QVBJVXJsOiBzdHJpbmc7XG5cdG9sbGFtYU1vZGVsczogc3RyaW5nW107XG5cdGFsbG93T2xsYW1hU3RyZWFtOiBib29sZWFuO1xuXHRsb2NhbEFJUmVzdEFQSVVybDogc3RyaW5nO1xuXHRsb2NhbEFJTW9kZWxzOiBzdHJpbmdbXTtcblx0cmVmZXJlbmNlQ3VycmVudE5vdGU6IGJvb2xlYW47XG5cdGFsbG93UmVuYW1lTm90ZVRpdGxlOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQk1PU2V0dGluZ3MgPSB7XG5cdGFwaUtleTogJycsXG5cdG1heF90b2tlbnM6ICcnLFxuXHRtb2RlbDogJycsXG5cdGFsbE1vZGVsczogW10sXG5cdHN5c3RlbV9yb2xlOiAnJyxcblx0dGVtcGVyYXR1cmU6IDEuMDAsXG5cdHVzZXJOYW1lOiAnVVNFUicsXG5cdGNoYXRib3ROYW1lOiAnQk1PJyxcblx0Y2hhdGJvdENvbnRhaW5lckJhY2tncm91bmRDb2xvcjogJy0tYmFja2dyb3VuZC1zZWNvbmRhcnknLFxuXHR1c2VyTWVzc2FnZUJhY2tncm91bmRDb2xvcjogJy0tYmFja2dyb3VuZC1wcmltYXJ5Jyxcblx0Ym90TWVzc2FnZUJhY2tncm91bmRDb2xvcjogJy0tYmFja2dyb3VuZC1zZWNvbmRhcnknLFxuXHRjaGF0SGlzdG9yeVBhdGg6ICdCTU8vJyxcblx0dGVtcGxhdGVGaWxlUGF0aDogJycsXG5cdG9wZW5BSUJhc2VVcmw6ICdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxJyxcblx0b2xsYW1hUmVzdEFQSVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQnLFxuXHRvbGxhbWFNb2RlbHM6IFtdLFxuXHRhbGxvd09sbGFtYVN0cmVhbTogZmFsc2UsXG5cdGxvY2FsQUlSZXN0QVBJVXJsOiAnJyxcblx0bG9jYWxBSU1vZGVsczogW10sXG5cdHJlZmVyZW5jZUN1cnJlbnROb3RlOiBmYWxzZSxcblx0YWxsb3dSZW5hbWVOb3RlVGl0bGU6IGZhbHNlLFxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJNT0dQVCBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBCTU9TZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxuXHRcdFx0VklFV19UWVBFX0NIQVRCT1QsXG5cdFx0XHQobGVhZikgPT4gbmV3IEJNT1ZpZXcobGVhZiwgdGhpcy5zZXR0aW5ncywgdGhpcylcblx0XHQpO1xuXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKFwiYm90XCIsIFwiQk1PIENoYXRib3RcIiwgKCkgPT4ge1xuXHRcdFx0dGhpcy5hY3RpdmF0ZVZpZXcoKTtcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ29wZW4tYm1vLWNoYXRib3QnLFxuICAgICAgICAgICAgbmFtZTogJ09wZW4gQk1PIENoYXRib3QnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhvdGtleXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1vZGlmaWVyczogWydNb2QnXSxcblx0XHRcdFx0XHRrZXk6ICcwJyxcblx0XHRcdFx0fSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBCTU9TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cdH1cblxuXHRhc3luYyBvbnVubG9hZCgpIHtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DSEFUQk9UKS5mb3JFYWNoKChsZWFmKSA9PiB7XG5cdFx0XHRjb25zdCBibW9WaWV3ID0gbGVhZi52aWV3IGFzIEJNT1ZpZXc7XG5cdFxuXHRcdFx0aWYgKGJtb1ZpZXcpIHtcblx0XHRcdFx0dGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0Ym1vVmlldy5jbGVhbnVwKCk7XG5cdFx0XHR9IFxuXHRcdH0pO1xuXHR9XG5cblx0YXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NIQVRCT1QpO1xuXHRcblx0XHRjb25zdCByaWdodExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRhd2FpdCByaWdodExlYWYuc2V0Vmlld1N0YXRlKHtcblx0XHRcdHR5cGU6IFZJRVdfVFlQRV9DSEFUQk9ULFxuXHRcdFx0YWN0aXZlOiB0cnVlLFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DSEFUQk9UKVswXVxuXHRcdCk7XG5cdFxuXHRcdC8vIEZvY3VzIG9uIHRoZSB0ZXh0YXJlYVxuXHRcdGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3ggdGV4dGFyZWEnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuXHRcblx0XHRpZiAodGV4dGFyZWEpIHtcblx0XHRcdHRleHRhcmVhLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cdFx0XHR0ZXh0YXJlYS5zdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgMXMgZWFzZS1pbi1vdXQnO1xuXHRcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHR0ZXh0YXJlYS5mb2N1cygpO1xuXHRcdFx0XHR0ZXh0YXJlYS5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuXHRcdFx0fSwgNTApOyBcblx0XHR9XG5cdFxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0hBVEJPVClbMF1cblx0XHQpO1xuXHRcblx0XHRjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZXNzYWdlQ29udGFpbmVyXCIpO1xuXHRcdGlmIChtZXNzYWdlQ29udGFpbmVyKSB7XG5cdFx0XHRtZXNzYWdlQ29udGFpbmVyLnNjcm9sbCh7XG5cdFx0XHRcdHRvcDogbWVzc2FnZUNvbnRhaW5lci5zY3JvbGxIZWlnaHQsIFxuXHRcdFx0XHRiZWhhdmlvcjogJ3Ntb290aCcgXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgc2V0SWNvbiwgbG9hZFByaXNtLCBURmlsZSwgTW9kYWwgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7REVGQVVMVF9TRVRUSU5HUywgQk1PU2V0dGluZ3N9IGZyb20gJy4vbWFpbic7XG5pbXBvcnQgQk1PR1BUIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBjb2xvclRvSGV4IH0gZnJvbSBcIi4vdXRpbHMvQ29sb3JDb252ZXJ0ZXJcIjtcbmltcG9ydCB7IGZldGNoT3BlbkFJQVBJLCBvbGxhbWFGZXRjaERhdGEsIG9sbGFtYUZldGNoRGF0YVN0cmVhbSwgcmVxdWVzdFVybEFudGhyb3BpY0FQSSwgcmVxdWVzdFVybENoYXRDb21wbGV0aW9uIH0gZnJvbSBcIi4vY29tcG9uZW50cy9GZXRjaE1vZGVsXCI7XG5pbXBvcnQgeyBleGVjdXRlQ29tbWFuZCB9IGZyb20gXCIuL2NvbXBvbmVudHMvY29tbWFuZHNcIjtcbmltcG9ydCB7IG1hcmtlZCB9IGZyb20gXCJtYXJrZWRcIjtcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9DSEFUQk9UID0gXCJjaGF0Ym90LXZpZXdcIjtcbmV4cG9ydCBjb25zdCBmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTiA9ICcuLy5vYnNpZGlhbi9wbHVnaW5zL2Jtby1jaGF0Ym90L2RhdGEvbWVzc2FnZUhpc3RvcnkuanNvbic7XG5cbmV4cG9ydCBjb25zdCBBTlRIUk9QSUNfTU9ERUxTID0gW1wiY2xhdWRlLWluc3RhbnQtMS4yXCIsIFwiY2xhdWRlLTIuMFwiLCBcImNsYXVkZS0yLjFcIl07XG5leHBvcnQgY29uc3QgT1BFTkFJX01PREVMUyA9IFtcImdwdC0zLjUtdHVyYm9cIiwgXCJncHQtMy41LXR1cmJvLTExMDZcIiwgXCJncHQtNFwiLCBcImdwdC00LTExMDYtcHJldmlld1wiXTtcblxuZXhwb3J0IGxldCBtZXNzYWdlSGlzdG9yeTogeyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZyB9W10gPSBbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyTWVzc2FnZUhpc3RvcnkoKSB7XG4gICAgbWVzc2FnZUhpc3RvcnkgPSBbXTtcbn1cblxuZXhwb3J0IGNsYXNzIEJNT1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgcHVibGljIHNldHRpbmdzOiBCTU9TZXR0aW5ncztcbiAgICBwcml2YXRlIHRleHRhcmVhRWxlbWVudDogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICBwcml2YXRlIGxvYWRpbmdBbmltYXRpb25JbnRlcnZhbElkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBwcmV2ZW50RW50ZXIgPSBmYWxzZTtcbiAgICBwcml2YXRlIHBsdWdpbjogQk1PR1BUO1xuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5pY29uID0gJ2JvdCc7ICAgICAgXG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgICAgIHJldHVybiBWSUVXX1RZUEVfQ0hBVEJPVDtcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIFwiQk1PIENoYXRib3RcIjtcbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBvbk9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgdGhpcy5oYW5kbGVGaWxlT3BlbkV2ZW50LmJpbmQodGhpcykpKTtcblxuXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBjb25zdCBjaGF0Ym90Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBjbGFzczogXCJjaGF0Ym90Q29udGFpbmVyXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNoYXRib3RDb250YWluZXIuY3JlYXRlRWwoXCJoMVwiLCB7IFxuICAgICAgICAgICAgdGV4dDogdGhpcy5zZXR0aW5ncy5jaGF0Ym90TmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLmNoYXRib3ROYW1lLFxuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGlkOiBcImNoYXRib3ROYW1lSGVhZGluZ1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNoYXRib3RDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiTW9kZWw6IFwiICsgdGhpcy5zZXR0aW5ncy5tb2RlbCB8fCBERUZBVUxUX1NFVFRJTkdTLm1vZGVsLFxuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGlkOiBcIm1vZGVsTmFtZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHNwYW5FbGVtZW50ID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGNsYXNzOiBcImRvdEluZGljYXRvclwiLFxuICAgICAgICAgICAgICAgIGlkOiBcIm1hcmtEb3duQm9vbGVhblwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50ID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgdGV4dDogXCJSZWZlcmVuY2UgQ3VycmVudCBOb3RlXCIsXG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgaWQ6IFwicmVmZXJlbmNlQ3VycmVudE5vdGVcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3BhbkVsZW1lbnQpO1xuXG4gICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucmVmZXJlbmNlQ3VycmVudE5vdGUpIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICAgICAgYXdhaXQgZ2V0QWN0aXZlRmlsZUNvbnRlbnQoYWN0aXZlRmlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgaWQ6IFwibWVzc2FnZUNvbnRhaW5lclwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCBsb2FkRGF0YSgpO1xuICAgICAgICBcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5pZCA9IFwibWVzc2FnZUNvbnRhaW5lclwiO1xuICAgICAgICBcbiAgICAgICAgbWVzc2FnZUhpc3RvcnkuZm9yRWFjaCgobWVzc2FnZURhdGEsIGluZGV4KSA9PiB7ICAgICBcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXJEaXYuY2xhc3NOYW1lID0gXCJidXR0b24tY29udGFpbmVyXCI7XG5cbiAgICAgICAgICAgIGlmIChtZXNzYWdlRGF0YS5yb2xlID09IFwidXNlclwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlck1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlRGl2LmNsYXNzTmFtZSA9IFwidXNlck1lc3NhZ2VcIjtcbiAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclRvSGV4KHRoaXMuc2V0dGluZ3MudXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgfHwgXG4gICAgICAgICAgICAgICAgICAgIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShERUZBVUxUX1NFVFRJTkdTLnVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlVG9vbEJhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgdXNlck1lc3NhZ2VUb29sQmFyRGl2LmNsYXNzTmFtZSA9IFwidXNlck1lc3NhZ2VUb29sQmFyXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlck5hbWVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgdXNlck5hbWVTcGFuLmNsYXNzTmFtZSA9IFwidXNlck5hbWVcIjtcbiAgICAgICAgICAgICAgICB1c2VyTmFtZVNwYW4udGV4dENvbnRlbnQgPSB0aGlzLnNldHRpbmdzLnVzZXJOYW1lIHx8IERFRkFVTFRfU0VUVElOR1MudXNlck5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvcHlVc2VyQnV0dG9uID0gZGlzcGxheVVzZXJDb3B5QnV0dG9uKHVzZXJQKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IGRpc3BsYXlUcmFzaCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZCh1c2VyTmFtZVNwYW4pO1xuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXJEaXYpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChjb3B5VXNlckJ1dHRvbik7XG4gICAgICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKHRyYXNoQnV0dG9uKTtcbiAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5hcHBlbmRDaGlsZCh1c2VyTWVzc2FnZVRvb2xCYXJEaXYpO1xuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlRGl2LmFwcGVuZENoaWxkKHVzZXJQKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKHVzZXJNZXNzYWdlRGl2KTtcblxuICAgICAgICAgICAgICAgIGlmIChBTlRIUk9QSUNfTU9ERUxTLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxTdHJpbmcgPSBtZXNzYWdlRGF0YS5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhblN0cmluZyA9IGZ1bGxTdHJpbmcuc3BsaXQoJyAnKS5zbGljZSgxKS5qb2luKCcgJykudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB1c2VyUC5pbm5lckhUTUwgPSBtYXJrZWQoY2xlYW5TdHJpbmcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJQLmlubmVySFRNTCA9IG1hcmtlZChtZXNzYWdlRGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VEYXRhLnJvbGUgPT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gXCJib3RNZXNzYWdlXCI7XG4gICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclRvSGV4KHRoaXMuc2V0dGluZ3MuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgICAgICBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCkpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZVRvb2xCYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VUb29sQmFyRGl2LmNsYXNzTmFtZSA9IFwiYm90TWVzc2FnZVRvb2xCYXJcIjtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgYm90TmFtZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTsgXG4gICAgICAgICAgICAgICAgYm90TmFtZVNwYW4udGV4dENvbnRlbnQgPSB0aGlzLnNldHRpbmdzLmNoYXRib3ROYW1lIHx8IERFRkFVTFRfU0VUVElOR1MuY2hhdGJvdE5hbWU7XG4gICAgICAgICAgICAgICAgYm90TmFtZVNwYW4uY2xhc3NOYW1lID0gXCJjaGF0Ym90TmFtZVwiO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQmxvY2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9ja0Rpdi5jbGFzc05hbWUgPSBcIm1lc3NhZ2VCbG9ja1wiO1xuXG4gICAgICAgICAgICAgICAgbGV0IGJvdFAgPSAnJztcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VUZXh0ID0gbWVzc2FnZURhdGEuY29udGVudDtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUhpc3RvcnkubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFOVEhST1BJQ19NT0RFTFMuaW5jbHVkZXModGhpcy5zZXR0aW5ncy5tb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuU3RyaW5nID0gbWVzc2FnZVRleHQuc3BsaXQoJyAnKS5zbGljZSgxKS5qb2luKCcgJykudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm90UCA9IG1hcmtlZChjbGVhblN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZURhdGEuY29udGVudC5pbmNsdWRlcygnZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3RQID0gbWVzc2FnZURhdGEuY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3RQID0gbWFya2VkKG1lc3NhZ2VEYXRhLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0JvdFAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICAgICAgbmV3Qm90UC5pbm5lckhUTUwgPSBib3RQO1xuXG4gICAgICAgICAgICAgICAgYm90TWVzc2FnZVRvb2xCYXJEaXYuYXBwZW5kQ2hpbGQoYm90TmFtZVNwYW4pO1xuICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VUb29sQmFyRGl2LmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lckRpdik7XG5cbiAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2VUZXh0LmluY2x1ZGVzKCdkaXYgY2xhc3M9XCJmb3JtYXR0ZWRTZXR0aW5nc1wiJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29weUJvdEJ1dHRvbiA9IGRpc3BsYXlCb3RDb3B5QnV0dG9uKG1lc3NhZ2VEYXRhLCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGNvcHlCb3RCdXR0b24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib3RNZXNzYWdlRGl2LmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VUb29sQmFyRGl2KTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQmxvY2tEaXYuYXBwZW5kQ2hpbGQobmV3Qm90UCk7XG4gICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChtZXNzYWdlQmxvY2tEaXYpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZURpdik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcHJpc21IaWdobGlnaHRpbmcobWVzc2FnZUJsb2NrRGl2KTtcbiAgICAgICAgICAgICAgICBjb2RlQmxvY2tDb3B5QnV0dG9uKG1lc3NhZ2VCbG9ja0Rpdik7XG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlRGF0YS5jb250ZW50LmluY2x1ZGVzKCdkaXYgY2xhc3M9XCJmb3JtYXR0ZWRTZXR0aW5nc1wiJykpe1xuICAgICAgICAgICAgICAgICAgICBhZGRQYXJhZ3JhcGhCcmVha3MobWVzc2FnZUJsb2NrRGl2KTsgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5ib3RNZXNzYWdlXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RCb3RNZXNzYWdlID0gYm90TWVzc2FnZXNbYm90TWVzc2FnZXMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgICAgICAgICBsYXN0Qm90TWVzc2FnZS5hcHBlbmRDaGlsZChtZXNzYWdlQmxvY2tEaXYpO1xuICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXJlbnRFbGVtZW50SWRcIik7XG4gICAgICAgIHBhcmVudEVsZW1lbnQ/LmFwcGVuZENoaWxkKG1lc3NhZ2VDb250YWluZXIpO1xuXG4gICAgICAgIGNvbnN0IGNoYXRib3ggPSBjaGF0Ym90Q29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBjbGFzczogXCJjaGF0Ym94XCIsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgICAgICB0ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgdHJ1ZS50b1N0cmluZygpKTtcbiAgICAgICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgXCJTdGFydCB0eXBpbmcuLi5cIik7XG4gICAgICAgIGNoYXRib3guYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQgPSB0ZXh0YXJlYSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmhhbmRsZUtleXVwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZUtleWRvd24uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmhhbmRsZUlucHV0LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmhhbmRsZUJsdXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZU9wZW5FdmVudChmaWxlOiBURmlsZSkge1xuICAgICAgICBhd2FpdCBnZXRBY3RpdmVGaWxlQ29udGVudChmaWxlKTtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgaGFuZGxlS2V5dXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLnRleHRhcmVhRWxlbWVudC52YWx1ZS50cmltKCk7XG5cbiAgICAgICAgLy8gT25seSBhbGxvdyAvc3RvcCBjb21tYW5kIHRvIGJlIGV4ZWN1dGVkIGR1cmluZyBmZXRjaFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hbGxvd09sbGFtYVN0cmVhbSB8fCAhdGhpcy5zZXR0aW5ncy5vbGxhbWFNb2RlbHMuaW5jbHVkZXModGhpcy5zZXR0aW5ncy5tb2RlbCkpIHtcbiAgICAgICAgICAgIGlmICgoaW5wdXQgPT09IFwiL3NcIiB8fCBpbnB1dCA9PT0gXCIvc3RvcFwiKSAmJiBldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmVudEVudGVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZXhlY3V0ZUNvbW1hbmQoaW5wdXQsIHRoaXMuc2V0dGluZ3MsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByZXZlbnRFbnRlciA9PT0gZmFsc2UgJiYgIWV2ZW50LnNoaWZ0S2V5ICYmIGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBsb2FkRGF0YSgpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChpbnB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChBTlRIUk9QSUNfTU9ERUxTLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgYWRkTWVzc2FnZSgnXFxuXFxuSHVtYW46ICcgKyBpbnB1dCwgJ3VzZXJNZXNzYWdlJywgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghKGlucHV0ID09PSBcIi9zXCIgfHwgaW5wdXQgPT09IFwiL3N0b3BcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkTWVzc2FnZShpbnB1dCwgJ3VzZXJNZXNzYWdlJywgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB1c2VyUCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgY29uc3QgbWFya2Rvd25Db250ZW50ID0gbWFya2VkKGlucHV0KTtcbiAgICAgICAgICAgIHVzZXJQLmlubmVySFRNTCA9IG1hcmtkb3duQ29udGVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB1c2VyTWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5jbGFzc05hbWUgPSBcInVzZXJNZXNzYWdlXCI7XG4gICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclRvSGV4KHRoaXMuc2V0dGluZ3MudXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgfHwgXG4gICAgICAgICAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKERFRkFVTFRfU0VUVElOR1MudXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IpLnRyaW0oKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlVG9vbEJhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB1c2VyTWVzc2FnZVRvb2xCYXJEaXYuY2xhc3NOYW1lID0gXCJ1c2VyTWVzc2FnZVRvb2xCYXJcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdXNlck5hbWVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICB1c2VyTmFtZVNwYW4uY2xhc3NOYW1lID0gXCJ1c2VyTmFtZVwiO1xuICAgICAgICAgICAgdXNlck5hbWVTcGFuLnRleHRDb250ZW50ID0gdGhpcy5zZXR0aW5ncy51c2VyTmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLnVzZXJOYW1lO1xuXG4gICAgICAgICAgICBjb25zdCBidXR0b25Db250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyRGl2LmNsYXNzTmFtZSA9IFwiYnV0dG9uLWNvbnRhaW5lclwiO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZXNzYWdlQ29udGFpbmVyXCIpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb3B5VXNlckJ1dHRvbiA9IGRpc3BsYXlVc2VyQ29weUJ1dHRvbih1c2VyUCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhc2hCdXR0b24gPSBkaXNwbGF5VHJhc2goKTtcblxuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZCh1c2VyTmFtZVNwYW4pO1xuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXJEaXYpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChjb3B5VXNlckJ1dHRvbik7XG4gICAgICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKHRyYXNoQnV0dG9uKTtcbiAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5hcHBlbmRDaGlsZCh1c2VyTWVzc2FnZVRvb2xCYXJEaXYpO1xuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlRGl2LmFwcGVuZENoaWxkKHVzZXJQKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKHVzZXJNZXNzYWdlRGl2KTtcblxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlQ29tbWFuZChpbnB1dCwgdGhpcy5zZXR0aW5ncywgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlbE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kZWxOYW1lJykgYXMgSFRNTEhlYWRpbmdFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWxOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbE5hbWUudGV4dENvbnRlbnQgPSAnTW9kZWw6ICcgKyB0aGlzLnNldHRpbmdzLm1vZGVsLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICAgXG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmVudEVudGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gXCJib3RNZXNzYWdlXCI7XG4gICAgICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JUb0hleCh0aGlzLnNldHRpbmdzLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShERUZBVUxUX1NFVFRJTkdTLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IpLnRyaW0oKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZVRvb2xCYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBib3RNZXNzYWdlVG9vbEJhckRpdi5jbGFzc05hbWUgPSBcImJvdE1lc3NhZ2VUb29sQmFyXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm90TmFtZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTsgXG4gICAgICAgICAgICAgICAgICAgIGJvdE5hbWVTcGFuLnRleHRDb250ZW50ID0gdGhpcy5zZXR0aW5ncy5jaGF0Ym90TmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLmNoYXRib3ROYW1lO1xuICAgICAgICAgICAgICAgICAgICBib3ROYW1lU3Bhbi5jbGFzc05hbWUgPSBcImNoYXRib3ROYW1lXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJsb2NrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJsb2NrRGl2LmNsYXNzTmFtZSA9IFwibWVzc2FnZUJsb2NrXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZVRvb2xCYXJEaXYuYXBwZW5kQ2hpbGQoYm90TmFtZVNwYW4pO1xuICAgICAgICAgICAgICAgICAgICBib3RNZXNzYWdlRGl2LmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VUb29sQmFyRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChtZXNzYWdlQmxvY2tEaXYpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nRWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJsb2FkaW5nXCIpOyBcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0VsLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiOyBcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0VsLnRleHRDb250ZW50ID0gXCIuLi5cIjsgXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmaW5lIGEgZnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBsb2FkaW5nIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVMb2FkaW5nQW5pbWF0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbG9hZGluZ0VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0VsLnRleHRDb250ZW50ICs9IFwiLlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGxvYWRpbmcgYW5pbWF0aW9uIGhhcyByZWFjaGVkIHRocmVlIGRvdHMsIHJlc2V0IGl0IHRvIG9uZSBkb3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nRWwudGV4dENvbnRlbnQ/Lmxlbmd0aCAmJiBsb2FkaW5nRWwudGV4dENvbnRlbnQubGVuZ3RoID4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdFbC50ZXh0Q29udGVudCA9IFwiLlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9OyAgXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGFseSBsb2FkaW5nIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgICAgICBib3RNZXNzYWdlRGl2LmFwcGVuZENoaWxkKGxvYWRpbmdFbCk7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmdFbC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdlbmQnIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdBbmltYXRpb25JbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwodXBkYXRlTG9hZGluZ0FuaW1hdGlvbiwgNTAwKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBzcGFjZXIgZWxlbWVudCBmb3Igc2Nyb2xsaW5nIG1vc3QgcmVjZW50IHVzZXJNZXNzYWdlL2JvdE1lc3NhZ2UgdG9cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BhY2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VyLnNldEF0dHJpYnV0ZShcImlkXCIsIFwic3BhY2VyXCIpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKHNwYWNlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgdXNlck1lc3NhZ2VEaXYuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiwgYmxvY2s6IFwic3RhcnRcIiB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBjaGF0Ym90IGZ1bmN0aW9uIHdpdGggdGhlIHVzZXIncyBpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0aGlzLkJNT2NoYXRib3QoaW5wdXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BhY2VyID0gbWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiI3NwYWNlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BhY2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGxvYWRpbmdBbmltYXRpb25JbnRlcnZhbElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0b3AgdGhlIGxvYWRpbmcgYW5pbWF0aW9uIGFuZCB1cGRhdGUgdGhlIGJvdCBtZXNzYWdlIHdpdGggYW4gZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwobG9hZGluZ0FuaW1hdGlvbkludGVydmFsSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdFBhcmFncmFwaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdFBhcmFncmFwaC50ZXh0Q29udGVudCA9IFwiT29wcywgc29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChib3RQYXJhZ3JhcGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIyOXB4XCI7XG4gICAgICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC52YWx1ZSA9IHRoaXMudGV4dGFyZWFFbGVtZW50LnZhbHVlLnJlcGxhY2UoL15bXFxyXFxuXSt8W1xcclxcbl0rJC9nbSxcIlwiKTsgLy8gcmVtb3ZlIG5ld2xpbmVzIG9ubHkgYXQgYmVnaW5uaW5nIG9yIGVuZCBvZiBpbnB1dFxuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIgJiYgIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlSW5wdXQoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnN0eWxlLmhlaWdodCA9IFwiMjlweFwiO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLnRleHRhcmVhRWxlbWVudC5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgaGFuZGxlQmx1cihldmVudDogRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRleHRhcmVhRWxlbWVudC52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIyOXB4XCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3M7XG4gICAgfVxuICAgIFxuICAgIGNsZWFudXAoKSB7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmhhbmRsZUtleXVwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZUtleWRvd24uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmhhbmRsZUlucHV0LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmhhbmRsZUJsdXIuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgLy8gQ2xlYXIgdGhlIGxvYWRpbmcgYW5pbWF0aW9uIGludGVydmFsIGlmIGl0J3MgYWN0aXZlXG4gICAgICAgIGlmICh0aGlzLmxvYWRpbmdBbmltYXRpb25JbnRlcnZhbElkKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMubG9hZGluZ0FuaW1hdGlvbkludGVydmFsSWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgQk1PY2hhdGJvdChfaW5wdXQ6IHN0cmluZykge1xuICAgICAgICBsZXQgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50ID0gJyc7XG5cbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cbiAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlKSB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50ID0gYXdhaXQgZ2V0QWN0aXZlRmlsZUNvbnRlbnQoYWN0aXZlRmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICBjb25zdCBjaGF0Ym90TmFtZUhlYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhdGJvdE5hbWVIZWFkaW5nJyk7XG4gICAgICAgIGNvbnN0IGNoYXRib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJveCB0ZXh0YXJlYScpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG5cbiAgICAgICAgLy8gSWYgYXBpS2V5IGRvZXMgbm90IGV4aXN0LlxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXBpS2V5ICYmIE9QRU5BSV9NT0RFTFMuaW5jbHVkZXModGhpcy5zZXR0aW5ncy5tb2RlbCkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJBUEkga2V5IG5vdCBmb3VuZC4gUGxlYXNlIGFkZCB5b3VyIE9wZW5BSSBBUEkga2V5IGluIHRoZSBwbHVnaW4gc2V0dGluZ3MuXCIpO1xuICAgICAgICAgICAgaWYgKGNoYXRib3ROYW1lSGVhZGluZyl7XG4gICAgICAgICAgICAgICAgY2hhdGJvdE5hbWVIZWFkaW5nLnRleHRDb250ZW50ID0gXCJFUlJPUlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBsYXN0RGl2ID0gbWVzc2FnZUNvbnRhaW5lckVsPy5sYXN0RWxlbWVudENoaWxkIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gXCJBUEkga2V5IG5vdCBmb3VuZC4gUGxlYXNlIGFkZCB5b3VyIE9wZW5BSSBBUEkga2V5IGluIHRoZSBwbHVnaW4gc2V0dGluZ3MuXCI7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnZXJyb3JNZXNzYWdlJyk7XG4gICAgICAgICAgICBjb25zdCBjaGF0Ym90TmFtZUVycm9yID0gbGFzdERpdi5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdE5hbWUnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICAgIGNoYXRib3ROYW1lRXJyb3IudGV4dENvbnRlbnQgPSBcIkVSUk9SXCI7XG4gICAgICAgICAgICBsYXN0RGl2LmFwcGVuZENoaWxkKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICBjaGF0Ym94LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfSBcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgc3lzdGVtUmVmZXJlbmNlQ3VycmVudE5vdGUgPSAnJztcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucmVmZXJlbmNlQ3VycmVudE5vdGUpIHtcbiAgICAgICAgICAgICAgICBzeXN0ZW1SZWZlcmVuY2VDdXJyZW50Tm90ZSA9ICdSZWZlciB0byBub3RlIGlmIGFza2VkLidcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbWF4VG9rZW5zID0gdGhpcy5zZXR0aW5ncy5tYXhfdG9rZW5zO1xuICAgICAgICAgICAgY29uc3QgdGVtcGVyYXR1cmUgPSB0aGlzLnNldHRpbmdzLnRlbXBlcmF0dXJlO1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgICAgYXBpS2V5OiB0aGlzLnNldHRpbmdzLmFwaUtleSxcbiAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5zZXR0aW5ncy5tb2RlbCxcbiAgICAgICAgICAgICAgICBzeXN0ZW1fcm9sZTogc3lzdGVtUmVmZXJlbmNlQ3VycmVudE5vdGUgKyB0aGlzLnNldHRpbmdzLnN5c3RlbV9yb2xlXG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgICAgIC8vIE9wZW5BSSBtb2RlbHNcbiAgICAgICAgICAgIGlmIChPUEVOQUlfTU9ERUxTLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hPcGVuQUlBUEkodGhpcy5zZXR0aW5ncywgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50KTsgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjb21wbGV0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFOVEhST1BJQ19NT0RFTFMuaW5jbHVkZXModGhpcy5zZXR0aW5ncy5tb2RlbCkpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmxBbnRocm9waWNBUEkodGhpcy5zZXR0aW5ncywgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2UudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBtZXNzYWdlLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbXBsZXRpb25UZXh0ID0gJyc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IEpTT04ucGFyc2UobGluZS5zbGljZSgnZGF0YTonLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50RGF0YS5jb21wbGV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25UZXh0ICs9IGV2ZW50RGF0YS5jb21wbGV0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm90TWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RCb3RNZXNzYWdlID0gYm90TWVzc2FnZXNbYm90TWVzc2FnZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSBsYXN0Qm90TWVzc2FnZS5xdWVyeVNlbGVjdG9yKFwiI2xvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nRWwuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnZW5kJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Qm90TWVzc2FnZS5yZW1vdmVDaGlsZChsb2FkaW5nRWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQmxvY2sgPSBsYXN0Qm90TWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZUJsb2NrJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlQmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQmxvY2suaW5uZXJIVE1MID0gbWFya2VkKGNvbXBsZXRpb25UZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhcmFncmFwaEJyZWFrcyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZUJsb2NrQ29weUJ1dHRvbihtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2Uuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkTWVzc2FnZSgnXFxuXFxuQXNzaXN0YW50OiAnICsgY29tcGxldGlvblRleHQsICdib3RNZXNzYWdlJywgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHsgXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm9sbGFtYVJlc3RBUElVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmFsbG93T2xsYW1hU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgb2xsYW1hRmV0Y2hEYXRhU3RyZWFtKHRoaXMuc2V0dGluZ3MsIHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBvbGxhbWFGZXRjaERhdGEodGhpcy5zZXR0aW5ncywgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybENoYXRDb21wbGV0aW9uKHRoaXMuc2V0dGluZ3MubG9jYWxBSVJlc3RBUElVcmwsIHNldHRpbmdzLCByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQsIG1lc3NhZ2VIaXN0b3J5LCBtYXhUb2tlbnMsIHRlbXBlcmF0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2UuanNvbi5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXJFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm90TWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdFbCA9IGxhc3RCb3RNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoXCIjbG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGluZ0VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdFbC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdlbmQnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Qm90TWVzc2FnZS5yZW1vdmVDaGlsZChsb2FkaW5nRWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtkb3duQ29udGVudCA9IG1hcmtlZChtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQmxvY2suaW5uZXJIVE1MID0gbWFya2Rvd25Db250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5jbGFzc0xpc3QuYWRkKFwibWVzc2FnZUJsb2NrXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhcmFncmFwaEJyZWFrcyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZUJsb2NrQ29weUJ1dHRvbihtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLmFwcGVuZENoaWxkKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2Uuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UsICdib3RNZXNzYWdlJywgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjb21wbGV0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkJNTyBzZXR0aW5nczpcIiwgdGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAgICAgLy8gTm90aGluZyB0byBjbGVhbiB1cC5cbiAgICB9XG5cbn1cblxuLy8gQ3JlYXRlIGRhdGEgZm9sZGVyIGFuZCBsb2FkIEpTT04gZmlsZVxuYXN5bmMgZnVuY3Rpb24gbG9hZERhdGEoKSB7XG4gICAgaWYgKCFhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cygnLi8ub2JzaWRpYW4vcGx1Z2lucy9ibW8tY2hhdGJvdC9kYXRhLycpKSB7XG4gICAgICAgIHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoJy4vLm9ic2lkaWFuL3BsdWdpbnMvYm1vLWNoYXRib3QvZGF0YS8nKTtcbiAgICB9XG5cbiAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04pKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTik7XG5cbiAgICAgICAgICAgIGlmIChmaWxlQ29udGVudC50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlSGlzdG9yeSA9IFtdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlSGlzdG9yeSA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgbWVzc2FnZSBoaXN0b3J5OlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBtZXNzYWdlSGlzdG9yeSA9IFtdO1xuICAgIH1cbn1cblxuLy8gUmVmZXJlbmNlIEN1cnJlbnQgTm90ZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZUZpbGVDb250ZW50KGZpbGU6IFRGaWxlKSB7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGNvbnN0IGRvdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZG90SW5kaWNhdG9yJyk7XG4gICAgbGV0IGN1cnJlbnROb3RlID0gJyc7XG4gICAgaWYgKGFjdGl2ZUZpbGU/LmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgIGN1cnJlbnROb3RlID0gJ05vdGU6YGBgJyArIGNvbnRlbnQgKyAnYGBgXFxuJztcbiAgICAgICAgaWYgKGRvdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIChkb3RFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIChkb3RFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2RhMmMyYyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnROb3RlO1xufVxuXG4vLyBBZGQgYSBuZXcgbWVzc2FnZSB0byB0aGUgbWVzc2FnZUhpc3RvcnkgYXJyYXkgYW5kIHNhdmUgaXQgdG8gdGhlIGZpbGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRNZXNzYWdlKGlucHV0OiBzdHJpbmcsIG1lc3NhZ2VUeXBlOiAndXNlck1lc3NhZ2UnIHwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5nczogQk1PU2V0dGluZ3MsIGluZGV4PzogbnVtYmVyKSB7XG4gICAgY29uc3QgbWVzc2FnZU9iajogeyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZyB9ID0ge1xuICAgICAgICByb2xlOiBcIlwiLFxuICAgICAgICBjb250ZW50OiBcIlwiXG4gICAgfTtcblxuICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gJ3VzZXJNZXNzYWdlJykge1xuICAgICAgICBtZXNzYWdlT2JqLnJvbGUgPSAndXNlcic7XG4gICAgICAgIG1lc3NhZ2VPYmouY29udGVudCA9IGlucHV0O1xuICAgIH0gZWxzZSBpZiAobWVzc2FnZVR5cGUgPT09ICdib3RNZXNzYWdlJykge1xuICAgICAgICBtZXNzYWdlT2JqLnJvbGUgPSAnYXNzaXN0YW50JzsgIFxuICAgICAgICBtZXNzYWdlT2JqLmNvbnRlbnQgPSBpbnB1dDtcblxuICAgICAgICBjb25zdCBib3RNZXNzYWdlVG9vbEJhckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm90TWVzc2FnZVRvb2xCYXJcIik7XG4gICAgICAgIGNvbnN0IGxhc3RCb3RNZXNzYWdlVG9vbEJhckRpdiA9IGJvdE1lc3NhZ2VUb29sQmFyRGl2W2JvdE1lc3NhZ2VUb29sQmFyRGl2Lmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoYm90TWVzc2FnZVRvb2xCYXJEaXYubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKCFtZXNzYWdlT2JqLmNvbnRlbnQuaW5jbHVkZXMoJ2RpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCInKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvcHlCb3RCdXR0b24gPSBkaXNwbGF5Qm90Q29weUJ1dHRvbihtZXNzYWdlT2JqLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2VUb29sQmFyRGl2LmFwcGVuZENoaWxkKGNvcHlCb3RCdXR0b24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBtZXNzYWdlSGlzdG9yeS5wdXNoKG1lc3NhZ2VPYmopO1xuXG4gICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VIaXN0b3J5LCBudWxsLCA0KTtcblxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04sIGpzb25TdHJpbmcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3cml0aW5nIHRvIG1lc3NhZ2UgaGlzdG9yeSBmaWxlOlwiLCBlcnJvcik7XG4gICAgfVxufVxuXG4vLyBIYW5kbGUgUHJpc21hIEhpZ2hsaWdodGluZyBmb3IgY29kZSBibG9ja3NcbmV4cG9ydCBmdW5jdGlvbiBwcmlzbUhpZ2hsaWdodGluZyhtZXNzYWdlQmxvY2s6IHsgcXVlcnlTZWxlY3RvckFsbDogKGFyZzA6IHN0cmluZykgPT4gYW55OyB9KSB7XG4gICAgICAgIGxvYWRQcmlzbSgpLnRoZW4oKFByaXNtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvZGVCbG9ja3MgPSBtZXNzYWdlQmxvY2s/LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlQmxvY2sgcHJlIGNvZGUnKTtcblxuICAgICAgICBjb2RlQmxvY2tzPy5mb3JFYWNoKChjb2RlQmxvY2s6IHsgY2xhc3NOYW1lOiBzdHJpbmc7IHRleHRDb250ZW50OiBhbnk7IGlubmVySFRNTDogYW55OyB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYW5ndWFnZSA9IGNvZGVCbG9jay5jbGFzc05hbWUucmVwbGFjZShcImxhbmd1YWdlLVwiLCBcIlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBjb2RlQmxvY2sudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChsYW5ndWFnZSAmJiBQcmlzbS5sYW5ndWFnZXNbbGFuZ3VhZ2VdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRDb2RlID0gUHJpc20uaGlnaGxpZ2h0KGNvZGUsIFByaXNtLmxhbmd1YWdlc1tsYW5ndWFnZV0pO1xuICAgICAgICAgICAgICAgIGNvZGVCbG9jay5pbm5lckhUTUwgPSBoaWdobGlnaHRlZENvZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vLyBDb3B5IGJ1dHRvbiBmb3IgY29kZSBibG9ja3NcbmV4cG9ydCBmdW5jdGlvbiBjb2RlQmxvY2tDb3B5QnV0dG9uKG1lc3NhZ2VCbG9jazogeyBxdWVyeVNlbGVjdG9yQWxsOiAoYXJnMDogc3RyaW5nKSA9PiBhbnk7IH0pIHtcbiAgICBjb25zdCBjb2RlQmxvY2tzID0gbWVzc2FnZUJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlQmxvY2sgcHJlIGNvZGUnKTtcbiAgICBjb2RlQmxvY2tzLmZvckVhY2goKGNvZGVFbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjb3B5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgY29weUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiY29weVwiO1xuICAgICAgICBzZXRJY29uKGNvcHlCdXR0b24sIFwiY29weVwiKTtcbiAgICAgICAgY29weUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY29weS1idXR0b25cIik7XG4gICAgICAgIGNvcHlCdXR0b24udGl0bGUgPSBcImNvcHlcIjtcbiAgICAgICAgaWYgKGNvZGVFbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGNvZGVFbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNvcHlCdXR0b24sIGNvZGVFbGVtZW50Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBjb3B5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBsYW5ndWFnZSBmcm9tIHRoZSBjbGFzcyBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGNvbnN0IGxhbmd1YWdlID0gY29kZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpPy5yZXBsYWNlKCdsYW5ndWFnZS0nLCAnJykgfHwgJyc7XG4gICAgICAgICAgICAvLyBGb3JtYXQgdGhlIGNvZGUgdGV4dCBpbiBtYXJrZG93biBjb2RlIGJsb2NrIHN5bnRheFxuICAgICAgICAgICAgY29uc3QgY29kZVRleHQgPSBgXFxgXFxgXFxgJHtsYW5ndWFnZX1cXG4ke2NvZGVFbGVtZW50LnRleHRDb250ZW50fVxcYFxcYFxcYGA7XG4gICAgICAgICAgICBpZiAoY29kZVRleHQpIHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChjb2RlVGV4dCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NvcGllZCBjb2RlYmxvY2suJyk7XG4gICAgICAgICAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNvcHkgY29kZTogXCIsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gY29weSBjb2RlOiBcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbi8vIEFkZCBsaW5lIGJyZWFrIGJldHdlZW4gY29uc2VjdXRpdmUgPHA+IGVsZW1lbnRzXG5leHBvcnQgZnVuY3Rpb24gYWRkUGFyYWdyYXBoQnJlYWtzKG1lc3NhZ2VCbG9jazogeyBxdWVyeVNlbGVjdG9yQWxsOiAoYXJnMDogc3RyaW5nKSA9PiBhbnk7IH0pIHtcbiAgICBjb25zdCBwYXJhZ3JhcGhzID0gbWVzc2FnZUJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoXCJwXCIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYWdyYXBocy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwID0gcGFyYWdyYXBoc1tpXTtcbiAgICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSBwLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgaWYgKG5leHRTaWJsaW5nICYmIG5leHRTaWJsaW5nLm5vZGVOYW1lID09PSBcIlBcIikge1xuICAgICAgICAgICAgY29uc3QgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIik7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBwLnBhcmVudE5vZGU7XG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShiciwgbmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29weU1lc3NhZ2VUb0NsaXBib2FyZChtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChtZXNzYWdlKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgY29uc29sZS5sb2coJ01lc3NhZ2UgY29waWVkIHRvIGNsaXBib2FyZCcpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNvcHkgbWVzc2FnZTogJywgZXJyKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZGlzcGxheVVzZXJDb3B5QnV0dG9uICh1c2VyUDogSFRNTFBhcmFncmFwaEVsZW1lbnQpIHtcbiAgICBjb25zdCBjb3B5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjb3B5QnV0dG9uLnRleHRDb250ZW50ID0gXCJjb3B5XCI7XG4gICAgc2V0SWNvbihjb3B5QnV0dG9uLCBcImNvcHlcIik7XG4gICAgY29weUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY29weS1idXR0b25cIik7XG4gICAgY29weUJ1dHRvbi50aXRsZSA9IFwiY29weVwiO1xuXG4gICAgY29weUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlVGV4dCA9IHVzZXJQLnRleHRDb250ZW50O1xuXG4gICAgICAgIGlmIChtZXNzYWdlVGV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29weU1lc3NhZ2VUb0NsaXBib2FyZChtZXNzYWdlVGV4dCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdDb3BpZWQgdXNlciBtZXNzYWdlLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWVzc2FnZSBjb250ZW50IGlzIG51bGwuIENhbm5vdCBjb3B5LicpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvcHlCdXR0b247XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlCb3RDb3B5QnV0dG9uIChtZXNzYWdlT2JqOiB7cm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7fSwgc2V0dGluZ3M6IEJNT1NldHRpbmdzKSB7XG4gICAgY29uc3QgY29weUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY29weUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiY29weVwiO1xuICAgIHNldEljb24oY29weUJ1dHRvbiwgXCJjb3B5XCIpO1xuICAgIGNvcHlCdXR0b24uY2xhc3NMaXN0LmFkZChcImNvcHktYnV0dG9uXCIpO1xuICAgIGNvcHlCdXR0b24udGl0bGUgPSBcImNvcHlcIjtcblxuICAgIGxldCBtZXNzYWdlVGV4dCA9IG1lc3NhZ2VPYmouY29udGVudDtcblxuICAgIGlmIChtZXNzYWdlVGV4dCAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoQU5USFJPUElDX01PREVMUy5pbmNsdWRlcyhzZXR0aW5ncy5tb2RlbCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxTdHJpbmcgPSBtZXNzYWdlT2JqLmNvbnRlbnQ7XG4gICAgICAgICAgICBjb25zdCBjbGVhblN0cmluZyA9IGZ1bGxTdHJpbmcuc3BsaXQoJyAnKS5zbGljZSgxKS5qb2luKCcgJykudHJpbSgpO1xuICAgICAgICAgICAgbWVzc2FnZVRleHQgPSBjbGVhblN0cmluZztcbiAgICAgICAgfSBcbiAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKCdNZXNzYWdlIGNvbnRlbnQgaXMgbnVsbC4gQ2Fubm90IGNvcHkuJyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ01lc3NhZ2UgY29udGVudCBpcyBudWxsLiBDYW5ub3QgY29weS4nKTtcbiAgICB9XG5cbiAgICBjb3B5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChtZXNzYWdlVGV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29weU1lc3NhZ2VUb0NsaXBib2FyZChtZXNzYWdlVGV4dCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdDb3BpZWQgYm90IG1lc3NhZ2UuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNZXNzYWdlIGNvbnRlbnQgaXMgbnVsbC4gQ2Fubm90IGNvcHkuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY29weUJ1dHRvbjtcbn1cblxuZnVuY3Rpb24gZGlzcGxheVRyYXNoICgpIHtcbiAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgdHJhc2hCdXR0b24udGV4dENvbnRlbnQgPSBcInRyYXNoXCI7XG4gICAgc2V0SWNvbih0cmFzaEJ1dHRvbiwgXCJ0cmFzaFwiKTtcbiAgICB0cmFzaEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidHJhc2gtYnV0dG9uXCIpO1xuICAgIHRyYXNoQnV0dG9uLnRpdGxlID0gXCJ0cmFzaFwiO1xuXG4gICAgbGV0IGxhc3RDbGlja2VkRWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICAgIC8vIEFkZCBhIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBlbGxpcHNpcyBzcGFuIHRvIHRvZ2dsZSB0aGUgZHJvcGRvd25cbiAgICB0cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBsYXN0Q2xpY2tlZEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgd2hpbGUgKGxhc3RDbGlja2VkRWxlbWVudCAmJiAhbGFzdENsaWNrZWRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygndXNlck1lc3NhZ2UnKSkge1xuICAgICAgICAgICAgbGFzdENsaWNrZWRFbGVtZW50ID0gbGFzdENsaWNrZWRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGFzdENsaWNrZWRFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyTWVzc2FnZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtZXNzYWdlQ29udGFpbmVyIC51c2VyTWVzc2FnZScpKTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJNZXNzYWdlcy5pbmRleE9mKGxhc3RDbGlja2VkRWxlbWVudCkgKiAyO1xuICAgICAgICBcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChhcHApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG1vZGFsLmNvbnRlbnRFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgyPkRlbGV0ZSBNZXNzYWdlIEJsb2NrLjwvaDI+XG4gICAgICAgICAgICAgICAgICAgIDxwPkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBtZXNzYWdlIGJsb2NrPzwvcD5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNvbmZpcm1EZWxldGVcIj5Db25maXJtIERlbGV0ZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGA7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtRGVsZXRlQnV0dG9uID0gbW9kYWwuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybURlbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICBjb25maXJtRGVsZXRlQnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVNZXNzYWdlKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTWVzc2FnZSBkZWxldGVkLicpO1xuICAgICAgICAgICAgICAgICAgICAvLyBoaWRlQWxsRHJvcGRvd25zKCk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0pO1xuICAgIHJldHVybiB0cmFzaEJ1dHRvbjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU1lc3NhZ2UoaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuXG4gICAgY29uc3QgZGl2RWxlbWVudHMgPSBtZXNzYWdlQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yQWxsKCdkaXYuYm90TWVzc2FnZSwgZGl2LnVzZXJNZXNzYWdlJyk7XG5cbiAgICBpZiAoZGl2RWxlbWVudHMgJiYgZGl2RWxlbWVudHMubGVuZ3RoID4gMCAmJiBpbmRleCA+PSAwICYmIGluZGV4IDwgZGl2RWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UgYW5kIHRoZSBuZXh0IG9uZSBpZiBpdCBleGlzdHNcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lcj8ucmVtb3ZlQ2hpbGQoZGl2RWxlbWVudHNbaW5kZXhdKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG5leHQgbWVzc2FnZSBpcyBmcm9tIHRoZSBhc3Npc3RhbnQgYW5kIHJlbW92ZSBpdCBpZiBpdCBpc1xuICAgICAgICBpZiAoaW5kZXggKyAxIDwgZGl2RWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TWVzc2FnZSA9IGRpdkVsZW1lbnRzW2luZGV4ICsgMV07XG4gICAgICAgICAgICBpZiAobmV4dE1lc3NhZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdib3RNZXNzYWdlJykpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyPy5yZW1vdmVDaGlsZChuZXh0TWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2VIaXN0b3J5IGJ5IHJlbW92aW5nIHRoZSBzcGVjaWZpZWQgaW5kZXggYW5kIHBvdGVudGlhbGx5IHRoZSBuZXh0IG9uZVxuICAgIGlmIChtZXNzYWdlSGlzdG9yeVtpbmRleCArIDFdICYmIG1lc3NhZ2VIaXN0b3J5W2luZGV4ICsgMV0ucm9sZSA9PT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgICBtZXNzYWdlSGlzdG9yeS5zcGxpY2UoaW5kZXgsIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2VIaXN0b3J5LnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlSGlzdG9yeSwgbnVsbCwgNCk7XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTiwganNvblN0cmluZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd3JpdGluZyBtZXNzYWdlSGlzdG9yeS5qc29uJywgZXJyb3IpO1xuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZU1lc3NhZ2VUaHJlYWQoaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICBcbiAgICBjb25zdCBkaXZFbGVtZW50cyA9IG1lc3NhZ2VDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5ib3RNZXNzYWdlLCBkaXYudXNlck1lc3NhZ2UnKTtcbiAgXG4gICAgaWYgKGRpdkVsZW1lbnRzICYmIGRpdkVsZW1lbnRzLmxlbmd0aCA+IDAgJiYgaW5kZXggPj0gMCAmJiBpbmRleCA8IGRpdkVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgZGl2RWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lcj8ucmVtb3ZlQ2hpbGQoZGl2RWxlbWVudHNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1lc3NhZ2VIaXN0b3J5LnNwbGljZShpbmRleCk7XG4gICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VIaXN0b3J5LCBudWxsLCA0KTtcblxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVuYW1lTWVzc2FnZUhpc3RvcnlKU09OLCBqc29uU3RyaW5nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3cml0aW5nIG1lc3NhZ2VIaXN0b3J5Lmpzb24nLCBlcnJvcik7XG4gICAgfVxufVxuXG5cbiIsICIvLyBGdW5jdGlvbiB0byBjb252ZXJ0IEhTTCBvciBSR0IgdG8gSEVYXG5leHBvcnQgZnVuY3Rpb24gY29sb3JUb0hleChjb2xvclZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChjb2xvclZhbHVlLnN0YXJ0c1dpdGgoXCJoc2xcIikpIHtcbiAgICAgIC8vIENvbnZlcnQgSFNMIHRvIEhFWFxuICAgICAgY29uc3QgbWF0Y2ggPSBjb2xvclZhbHVlLm1hdGNoKC8oXFxkKyhcXC5cXGQrKT8pJT8vZyk7XG4gICAgICBpZiAobWF0Y2ggPT09IG51bGwgfHwgbWF0Y2gubGVuZ3RoIDwgMykge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSFNMIHZhbHVlXCIpO1xuXHR9XG5cbiAgICAgIGNvbnN0IGggPSBwYXJzZUludChtYXRjaFswXSkgLyAzNjA7XG4gICAgICBjb25zdCBzID0gcGFyc2VJbnQobWF0Y2hbMV0pIC8gMTAwO1xuICAgICAgY29uc3QgbCA9IHBhcnNlSW50KG1hdGNoWzJdKSAvIDEwMDtcbiAgXG4gICAgICBjb25zdCBxID0gbCA8IDAuNSA/IGwgKiAoMSArIHMpIDogbCArIHMgLSBsICogcztcbiAgICAgIGNvbnN0IHAgPSAyICogbCAtIHE7XG4gICAgICBjb25zdCByID0gaHVlMnJnYihwLCBxLCBoICsgMSAvIDMpO1xuICAgICAgY29uc3QgZyA9IGh1ZTJyZ2IocCwgcSwgaCk7XG4gICAgICBjb25zdCBiID0gaHVlMnJnYihwLCBxLCBoIC0gMSAvIDMpO1xuICBcbiAgICAgIGNvbnN0IHRvSGV4ID0gZnVuY3Rpb24gKGM6IG51bWJlcikge1xuICAgICAgICBjb25zdCBoZXggPSBNYXRoLnJvdW5kKGMgKiAyNTUpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgcmV0dXJuIGhleC5sZW5ndGggPT09IDEgPyBcIjBcIiArIGhleCA6IGhleDtcbiAgICAgIH07XG4gIFxuICAgICAgY29uc3QgaGV4ID0gXCIjXCIgKyB0b0hleChyKSArIHRvSGV4KGcpICsgdG9IZXgoYik7XG4gICAgICByZXR1cm4gaGV4O1xuICAgIH0gZWxzZSBpZiAoY29sb3JWYWx1ZS5zdGFydHNXaXRoKFwicmdiXCIpKSB7XG4gICAgICAvLyBDb252ZXJ0IFJHQiB0byBIRVhcbiAgICAgIGNvbnN0IHNlcCA9IGNvbG9yVmFsdWUuaW5kZXhPZihcIixcIikgPiAtMSA/IFwiLFwiIDogXCIgXCI7XG4gICAgICBjb25zdCByZ2JBcnJheSA9IGNvbG9yVmFsdWUuc3Vic3RyKDQpLnNwbGl0KFwiKVwiKVswXS5zcGxpdChzZXApO1xuICBcbiAgICAgIGxldCByID0gKCtyZ2JBcnJheVswXSkudG9TdHJpbmcoMTYpLFxuICAgICAgICBnID0gKCtyZ2JBcnJheVsxXSkudG9TdHJpbmcoMTYpLFxuICAgICAgICBiID0gKCtyZ2JBcnJheVsyXSkudG9TdHJpbmcoMTYpO1xuICBcbiAgICAgIGlmIChyLmxlbmd0aCA9PSAxKVxuICAgICAgICByID0gXCIwXCIgKyByO1xuICAgICAgaWYgKGcubGVuZ3RoID09IDEpXG4gICAgICAgIGcgPSBcIjBcIiArIGc7XG4gICAgICBpZiAoYi5sZW5ndGggPT0gMSlcbiAgICAgICAgYiA9IFwiMFwiICsgYjtcbiAgXG4gICAgICByZXR1cm4gXCIjXCIgKyByICsgZyArIGI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIHRoZSBjb2xvclZhbHVlIGlzIG5laXRoZXIgUkdCIG5vciBIU0wsIHJldHVybiB0aGUgaW5wdXRcbiAgICAgIHJldHVybiBjb2xvclZhbHVlO1xuICAgIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gY29udmVydCBIU0wgdG8gUkdCXG5mdW5jdGlvbiBodWUycmdiKHA6IG51bWJlciwgcTogbnVtYmVyLCB0OiBudW1iZXIpIHtcblx0aWYgKHQgPCAwKSB0ICs9IDE7XG5cdGlmICh0ID4gMSkgdCAtPSAxO1xuXHRpZiAodCA8IDEgLyA2KSByZXR1cm4gcCArIChxIC0gcCkgKiA2ICogdDtcblx0aWYgKHQgPCAxIC8gMikgcmV0dXJuIHE7XG5cdGlmICh0IDwgMiAvIDMpIHJldHVybiBwICsgKHEgLSBwKSAqICgyIC8gMyAtIHQpICogNjtcblx0cmV0dXJuIHA7XG59IiwgImltcG9ydCB7IE5vdGljZSwgcmVxdWVzdFVybCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQk1PU2V0dGluZ3MgfSBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgQU5USFJPUElDX01PREVMUywgT1BFTkFJX01PREVMUywgYWRkTWVzc2FnZSwgYWRkUGFyYWdyYXBoQnJlYWtzLCBjb2RlQmxvY2tDb3B5QnV0dG9uLCBtZXNzYWdlSGlzdG9yeSwgcHJpc21IaWdobGlnaHRpbmcgfSBmcm9tIFwiLi4vdmlld1wiO1xuaW1wb3J0IE9wZW5BSSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbSB9IGZyb20gXCJvcGVuYWkvcmVzb3VyY2VzL2NoYXRcIjtcbmltcG9ydCB7IG1hcmtlZCB9IGZyb20gXCJtYXJrZWRcIjtcblxubGV0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuLy8gRmV0Y2ggT3BlbkFJIEFQSVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoT3BlbkFJQVBJKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgcmVmZXJlbmNlQ3VycmVudE5vdGU6IHN0cmluZykge1xuICAgIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICAgICAgICBhcGlLZXk6IHNldHRpbmdzLmFwaUtleSxcbiAgICAgICAgYmFzZVVSTDogc2V0dGluZ3Mub3BlbkFJQmFzZVVybCxcbiAgICAgICAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI6IHRydWUsIC8vIGFwaUtleSBpcyBzdG9yZWQgd2l0aGluIGRhdGEuanNvblxuICAgIH0pO1xuXG4gICAgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgbGV0IG1lc3NhZ2UgPSAnJztcblxuICAgIGxldCBpc1Njcm9sbCA9IGZhbHNlO1xuXG4gICAgLy8gUmVtb3ZlcyBhbGwgc3lzdGVtIGNvbW1hbmRzIGZyb20gdGhlIG1lc3NhZ2UgaGlzdG9yeVxuICAgIGNvbnN0IGZpbHRlcmVkTWVzc2FnZUhpc3RvcnlDb250ZW50ID0gbWVzc2FnZUhpc3RvcnkuZmlsdGVyKChtZXNzYWdlLCBpbmRleCwgYXJyYXkpID0+IHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgbWVzc2FnZSBvciB0aGUgcHJldmlvdXMgb25lIGlzIGEgdXNlciBtZXNzYWdlIGNvbnRhaW5pbmcgJy8nXG4gICAgICAgIGNvbnN0IGlzVXNlck1lc3NhZ2VXaXRoU2xhc2ggPSAobWVzc2FnZS5yb2xlID09PSAndXNlcicgJiYgbWVzc2FnZS5jb250ZW50LmluY2x1ZGVzKCcvJykpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhcnJheVtpbmRleCAtIDFdPy5yb2xlID09PSAndXNlcicgJiYgYXJyYXlbaW5kZXggLSAxXT8uY29udGVudC5pbmNsdWRlcygnLycpKTtcbiAgICBcbiAgICAgICAgLy8gSW5jbHVkZSB0aGUgbWVzc2FnZSBpbiB0aGUgbmV3IGFycmF5IGlmIGl0J3Mgbm90IHBhcnQgb2YgYSBwYWlyIHRvIGJlIHJlbW92ZWRcbiAgICAgICAgcmV0dXJuICFpc1VzZXJNZXNzYWdlV2l0aFNsYXNoO1xuICAgIH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgICAgIG1vZGVsOiBzZXR0aW5ncy5tb2RlbCxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IHBhcnNlSW50KHNldHRpbmdzLm1heF90b2tlbnMpLFxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHNldHRpbmdzLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiByZWZlcmVuY2VDdXJyZW50Tm90ZSArIHNldHRpbmdzLnN5c3RlbV9yb2xlIH0sXG4gICAgICAgICAgICAgICAgLi4uZmlsdGVyZWRNZXNzYWdlSGlzdG9yeUNvbnRlbnQgYXMgQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW1bXVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBwYXJ0IG9mIHN0cmVhbSkge1xuXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gcGFydC5jaG9pY2VzWzBdPy5kZWx0YT8uY29udGVudCB8fCAnJztcblxuICAgICAgICAgICAgbWVzc2FnZSArPSBjb250ZW50O1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXJFbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm90TWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGxhc3RCb3RNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlQmxvY2snKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSBsYXN0Qm90TWVzc2FnZS5xdWVyeVNlbGVjdG9yKFwiI2xvYWRpbmdcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdFbC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdlbmQnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2UucmVtb3ZlQ2hpbGQobG9hZGluZ0VsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5pbm5lckhUTUwgPSBtYXJrZWQobWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkUGFyYWdyYXBoQnJlYWtzKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgIGNvZGVCbG9ja0NvcHlCdXR0b24obWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXJFbC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIChldmVudDogV2hlZWxFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBzY3JvbGxzIHVwIG9yIGRvd24sIHN0b3AgYXV0by1zY3JvbGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRlbHRhWSA8IDAgfHwgZXZlbnQuZGVsdGFZID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWlzU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdhdXRvJywgYmxvY2s6ICdzdGFydCcgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBtYWtpbmcgQVBJIHJlcXVlc3Q6IFRoZSB1c2VyIGFib3J0ZWQgYSByZXF1ZXN0LicpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYWRkTWVzc2FnZShtZXNzYWdlLCAnYm90TWVzc2FnZScsIHNldHRpbmdzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICBpZiAobWVzc2FnZUNvbnRhaW5lckVsKSB7XG4gICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJvdE1lc3NhZ2VcIik7XG4gICAgICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQmxvY2sgPSBsYXN0Qm90TWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZUJsb2NrJyk7XG5cbiAgICAgICAgICAgIGlmIChtZXNzYWdlQmxvY2spIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQmxvY2suaW5uZXJIVE1MID0gbWFya2VkKGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvciB8fCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2VCbG9jay5pbm5lckhUTUwsICdib3RNZXNzYWdlJywgc2V0dGluZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3IgfHwgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxufVxuXG4vLyBSZXF1ZXN0IHJlc3BvbnNlIGZyb20gT2xsYW1hXG4vLyBOT1RFOiBBYm9ydCBkb2VzIG5vdCB3b3JrIGZvciByZXF1ZXN0VXJsXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb2xsYW1hRmV0Y2hEYXRhKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50OiBzdHJpbmcpe1xuICAgIGNvbnN0IG9sbGFtYVJlc3RBUElVcmwgPSBzZXR0aW5ncy5vbGxhbWFSZXN0QVBJVXJsO1xuXG4gICAgaWYgKCFvbGxhbWFSZXN0QVBJVXJsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgdXJsOiBvbGxhbWFSZXN0QVBJVXJsICsgJy9hcGkvY2hhdCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MubW9kZWwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50ICsgc2V0dGluZ3Muc3lzdGVtX3JvbGUgfSxcbiAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZUhpc3RvcnlcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogc2V0dGluZ3MudGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgICAgICAgIG51bV9wcmVkaWN0OiBwYXJzZUludChzZXR0aW5ncy5tYXhfdG9rZW5zKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2UuanNvbi5tZXNzYWdlLmNvbnRlbnQ7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXJFbCkge1xuICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChcIi5ib3RNZXNzYWdlXCIpO1xuICAgICAgICAgICAgY29uc3QgbGFzdEJvdE1lc3NhZ2UgPSBib3RNZXNzYWdlc1tib3RNZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdFbCA9IGxhc3RCb3RNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoXCIjbG9hZGluZ1wiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGxvYWRpbmdFbCkge1xuICAgICAgICAgICAgICAgIGxvYWRpbmdFbC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdlbmQnIH0pO1xuICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLnJlbW92ZUNoaWxkKGxvYWRpbmdFbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgICBjb25zdCBtYXJrZG93bkNvbnRlbnQgPSBtYXJrZWQobWVzc2FnZSk7XG4gICAgICAgICAgICBtZXNzYWdlQmxvY2suaW5uZXJIVE1MID0gbWFya2Rvd25Db250ZW50O1xuICAgICAgICAgICAgbWVzc2FnZUJsb2NrLmNsYXNzTGlzdC5hZGQoXCJtZXNzYWdlQmxvY2tcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFkZFBhcmFncmFwaEJyZWFrcyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgcHJpc21IaWdobGlnaHRpbmcobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgIGNvZGVCbG9ja0NvcHlCdXR0b24obWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2UuYXBwZW5kQ2hpbGQobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZSwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5ncyk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYWtpbmcgQVBJIHJlcXVlc3Q6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5cbi8vIEZldGNoIE9sbGFtYSBBUEkgdmlhIHN0cmVhbVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9sbGFtYUZldGNoRGF0YVN0cmVhbShzZXR0aW5nczogQk1PU2V0dGluZ3MsIHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3Qgb2xsYW1hUmVzdEFQSVVybCA9IHNldHRpbmdzLm9sbGFtYVJlc3RBUElVcmw7XG5cbiAgICBpZiAoIW9sbGFtYVJlc3RBUElVcmwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IG9sbGFtYVJlc3RBUElVcmwgKyAnL2FwaS9jaGF0JztcblxuICAgIGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAgIGxldCBtZXNzYWdlID0gJyc7XG5cbiAgICBsZXQgaXNTY3JvbGwgPSBmYWxzZTtcblxuICAgIC8vIFJlbW92ZXMgYWxsIHN5c3RlbSBjb21tYW5kcyBmcm9tIHRoZSBtZXNzYWdlIGhpc3RvcnlcbiAgICBjb25zdCBmaWx0ZXJlZE1lc3NhZ2VIaXN0b3J5Q29udGVudCA9IG1lc3NhZ2VIaXN0b3J5LmZpbHRlcigobWVzc2FnZSwgaW5kZXgsIGFycmF5KSA9PiB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IG1lc3NhZ2Ugb3IgdGhlIHByZXZpb3VzIG9uZSBpcyBhIHVzZXIgbWVzc2FnZSBjb250YWluaW5nICcvJ1xuICAgICAgICBjb25zdCBpc1VzZXJNZXNzYWdlV2l0aFNsYXNoID0gKG1lc3NhZ2Uucm9sZSA9PT0gJ3VzZXInICYmIG1lc3NhZ2UuY29udGVudC5pbmNsdWRlcygnLycpKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYXJyYXlbaW5kZXggLSAxXT8ucm9sZSA9PT0gJ3VzZXInICYmIGFycmF5W2luZGV4IC0gMV0/LmNvbnRlbnQuaW5jbHVkZXMoJy8nKSk7XG4gICAgXG4gICAgICAgIC8vIEluY2x1ZGUgdGhlIG1lc3NhZ2UgaW4gdGhlIG5ldyBhcnJheSBpZiBpdCdzIG5vdCBwYXJ0IG9mIGEgcGFpciB0byBiZSByZW1vdmVkXG4gICAgICAgIHJldHVybiAhaXNVc2VyTWVzc2FnZVdpdGhTbGFzaDtcbiAgICB9KTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MubW9kZWwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50ICsgc2V0dGluZ3Muc3lzdGVtX3JvbGUgfSxcbiAgICAgICAgICAgICAgICAgICAgLi4uZmlsdGVyZWRNZXNzYWdlSGlzdG9yeUNvbnRlbnRcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBzZXR0aW5ncy50ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgbnVtX3ByZWRpY3Q6IHBhcnNlSW50KHNldHRpbmdzLm1heF90b2tlbnMpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHNpZ25hbDogYWJvcnRDb250cm9sbGVyLnNpZ25hbFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgSFRUUCBlcnJvciEgU3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciEgU3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcmVzcG9uc2UuYm9keSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgUmVzcG9uc2UgYm9keSBpcyBudWxsIG9yIHVuZGVmaW5lZC5gKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzcG9uc2UgYm9keSBpcyBudWxsIG9yIHVuZGVmaW5lZC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICAgICAgbGV0IHJlYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgIHdoaWxlIChyZWFkaW5nKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICByZWFkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pIHx8IFwiXCI7XG4gICAgICAgICAgICAvLyBTcGxpdHRpbmcgdGhlIGNodW5rIHRvIHBhcnNlIEpTT04gbWVzc2FnZXMgc2VwYXJhdGVseVxuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBjaHVuay5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMuZmlsdGVyKEJvb2xlYW4pKSB7IC8vIEZpbHRlciBvdXQgZW1wdHkgcGFydHNcbiAgICAgICAgICAgICAgICBsZXQgcGFyc2VkQ2h1bms7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkQ2h1bmsgPSBKU09OLnBhcnNlKHBhcnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkQ2h1bmsuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHBhcnNlZENodW5rLm1lc3NhZ2UuY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIEpTT046JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BhcnQgd2l0aCBlcnJvcjonLCBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkQ2h1bmsgPSB7cmVzcG9uc2U6ICd7X2VffSd9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJvdE1lc3NhZ2VcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdEJvdE1lc3NhZ2UgPSBib3RNZXNzYWdlc1tib3RNZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQmxvY2sgPSBsYXN0Qm90TWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZUJsb2NrJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gbGFzdEJvdE1lc3NhZ2UucXVlcnlTZWxlY3RvcihcIiNsb2FkaW5nXCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VCbG9jaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGluZ0VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nRWwuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnZW5kJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLnJlbW92ZUNoaWxkKGxvYWRpbmdFbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQmxvY2suaW5uZXJIVE1MID0gbWFya2VkKG1lc3NhZ2UsIHsgYnJlYWtzOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGFkZFBhcmFncmFwaEJyZWFrcyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICBwcmlzbUhpZ2hsaWdodGluZyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICBjb2RlQmxvY2tDb3B5QnV0dG9uKG1lc3NhZ2VCbG9jayk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyRWwuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZXZlbnQ6IFdoZWVsRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgc2Nyb2xscyB1cCBvciBkb3duLCBzdG9wIGF1dG8tc2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kZWx0YVkgPCAwIHx8IGV2ZW50LmRlbHRhWSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFpc1Njcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0Qm90TWVzc2FnZS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnYXV0bycsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZSwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5ncyk7XG4gICAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZSwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5ncyk7IC8vIFRoaXMgd2lsbCBzYXZlIG1pZC1zdHJlYW0gY29udmVyc2F0aW9uLlxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYWtpbmcgQVBJIHJlcXVlc3Q6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5cbi8vIFJlcXVlc3QgcmVzcG9uc2UgZnJvbSBBbnRocm9waWMgXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFVybEFudGhyb3BpY0FQSShzZXR0aW5nczogQk1PU2V0dGluZ3MsIHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICdhbnRocm9waWMtdmVyc2lvbic6ICcyMDIzLTA2LTAxJyxcbiAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAneC1hcGkta2V5Jzogc2V0dGluZ3MuYXBpS2V5LFxuICAgIH07XG4gIFxuICAgIGNvbnN0IG1lc3NhZ2VIaXN0b3J5U3RyaW5nID0gbWVzc2FnZUhpc3RvcnkubWFwKGVudHJ5ID0+IGVudHJ5LmNvbnRlbnQpLmpvaW4oJ1xcbicpO1xuXG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgIG1vZGVsOiBzZXR0aW5ncy5tb2RlbCxcbiAgICAgICAgcHJvbXB0OiAgYFxcblxcbkh1bWFuOiAke3JlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudH1cXG5cXG4ke3NldHRpbmdzLnN5c3RlbV9yb2xlfVxcblxcbiR7bWVzc2FnZUhpc3RvcnlTdHJpbmd9XFxuXFxuQXNzaXN0YW50OmAsXG4gICAgICAgIG1heF90b2tlbnNfdG9fc2FtcGxlOiBwYXJzZUludChzZXR0aW5ncy5tYXhfdG9rZW5zKSB8fCAxMDAwMDAsXG4gICAgICAgIHRlbXBlcmF0dXJlOiBzZXR0aW5ncy50ZW1wZXJhdHVyZSxcbiAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgIH07XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6ICdodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxL2NvbXBsZXRlJyxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgIH0pO1xuICBcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXJFbCkge1xuICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChcIi5ib3RNZXNzYWdlXCIpO1xuICAgICAgICAgICAgY29uc3QgbGFzdEJvdE1lc3NhZ2UgPSBib3RNZXNzYWdlc1tib3RNZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGxhc3RCb3RNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlQmxvY2snKTtcblxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VCbG9jaykge1xuXG4gICAgICAgICAgICAgICAgbWVzc2FnZUJsb2NrLmlubmVySFRNTCA9ICdNYXggdG9rZW5zIG92ZXJmbG93LiBQbGVhc2UgcmVkdWNlIG1heF90b2tlbnMgb3IgY2xlYXIgY2hhdCBtZXNzYWdlcy4gV2UgcmVjb21tZW5kIGNsZWFyaW5nIG1heF90b2tlbnMgZm9yIGJlc3QgcmVzdWx0cy4nO1xuICAgICAgICAgICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZUJsb2NrLmlubmVySFRNTCwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5ncyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSBsYXN0Qm90TWVzc2FnZS5xdWVyeVNlbGVjdG9yKFwiI2xvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgaWYgKGxvYWRpbmdFbCkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nRWwuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnZW5kJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2UucmVtb3ZlQ2hpbGQobG9hZGluZ0VsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1ha2luZyBBUEkgcmVxdWVzdDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5cbi8vIFJlcXVlc3QgcmVzcG9uc2UgZnJvbSBzZWxmLWhvc3RlZCBtb2RlbHMgKExPQ0FMIEFJKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RVcmxDaGF0Q29tcGxldGlvbihcbiAgICB1cmw6IHN0cmluZywgXG4gICAgc2V0dGluZ3M6IHsgYXBpS2V5OiBzdHJpbmc7IG1vZGVsOiBzdHJpbmc7IHN5c3RlbV9yb2xlOiBzdHJpbmc7IH0sIFxuICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlOiBzdHJpbmcsXG4gICAgbWVzc2FnZUhpc3RvcnlDb250ZW50OiB7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH1bXSA9IFtdLFxuICAgIG1heFRva2Vuczogc3RyaW5nLCBcbiAgICB0ZW1wZXJhdHVyZTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZUhpc3RvcnkgPSBtZXNzYWdlSGlzdG9yeUNvbnRlbnQubWFwKChpdGVtOiB7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyB9KSA9PiAoe1xuICAgICAgICAgICAgcm9sZTogaXRlbS5yb2xlLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50LFxuICAgICAgICB9KSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwgKyAnL3YxL2NoYXQvY29tcGxldGlvbnMnLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c2V0dGluZ3MuYXBpS2V5fWBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLm1vZGVsLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogcmVmZXJlbmNlQ3VycmVudE5vdGUgKyBzZXR0aW5ncy5zeXN0ZW1fcm9sZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZUhpc3RvcnlcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2VuczogcGFyc2VJbnQobWF4VG9rZW5zKSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFraW5nIEFQSSByZXF1ZXN0OicsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG59XG5cbi8vIFJlbmFtZSBub3RlIHRpdGxlIGJhc2VkIG9uIHNwZWNpZmllZCBtb2RlbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTW9kZWxSZW5hbWVUaXRsZShzZXR0aW5nczogQk1PU2V0dGluZ3MsIHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudDogc3RyaW5nKSB7XG5cbiAgICBjb25zdCBwcm9tcHQgPSBgQmFzZWQgb24gdGhlIGZvbGxvd2luZyBtYXJrZG93biBjb250ZW50LCBjcmVhdGUgYSBuZXcsIHN1aXRhYmxlIHRpdGxlLlxuICAgICBUaGUgdGl0bGUgc2hvdWxkIG5vdCBjb250YWluIGFueSBvZiB0aGUgZm9sbG93aW5nIGNoYXJhY3RlcnM6IGJhY2tzbGFzaGVzLCBmb3J3YXJkIHNsYXNoZXMsIG9yIGNvbG9ucy5cbiAgICAgQWxzbywgcGxlYXNlIHByb3ZpZGUgdGhlIHRpdGxlIHdpdGhvdXQgdXNpbmcgcXVvdGF0aW9uIG1hcmtzLiBUSEUgVElUTEUgSVM6IFxcblxcbmA7XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAoT1BFTkFJX01PREVMUy5pbmNsdWRlcyhzZXR0aW5ncy5tb2RlbCkpIHtcblxuICAgICAgICAgICAgY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gICAgICAgICAgICAgICAgYXBpS2V5OiBzZXR0aW5ncy5hcGlLZXksXG4gICAgICAgICAgICAgICAgYmFzZVVSTDogc2V0dGluZ3Mub3BlbkFJQmFzZVVybCxcbiAgICAgICAgICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSwgLy8gYXBpS2V5IGlzIHN0b3JlZCB3aXRoaW4gZGF0YS5qc29uXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgY2hhdENvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIG1vZGVsOiBzZXR0aW5ncy5tb2RlbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBwcm9tcHQgKyByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnR9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHRpdGxlID0gY2hhdENvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XG4gICAgICAgICAgICAvLyBSZW1vdmUgYmFja3NsYXNoZXMsIGZvcndhcmQgc2xhc2hlcywgYW5kIGNvbG9uc1xuICAgICAgICAgICAgaWYgKHRpdGxlKSB7XG4gICAgICAgICAgICAgICAgdGl0bGUgPSB0aXRsZS5yZXBsYWNlKC9bXFxcXC86XS9nLCAnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aXRsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKEFOVEhST1BJQ19NT0RFTFMuaW5jbHVkZXMoc2V0dGluZ3MubW9kZWwpKSB7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgICdhbnRocm9waWMtdmVyc2lvbic6ICcyMDIzLTA2LTAxJyxcbiAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICd4LWFwaS1rZXknOiBzZXR0aW5ncy5hcGlLZXksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLm1vZGVsLFxuICAgICAgICAgICAgICAgICAgcHJvbXB0OiAgYFxcblxcbkh1bWFuOiAke3Byb21wdH1cXG5cXG5Bc3Npc3RhbnQ6YCxcbiAgICAgICAgICAgICAgICAgIG1heF90b2tlbnNfdG9fc2FtcGxlOiAyNSxcbiAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBzZXR0aW5ncy50ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxL2NvbXBsZXRlJyxcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS50ZXh0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gbWVzc2FnZS5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gJyc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0gSlNPTi5wYXJzZShsaW5lLnNsaWNlKCdkYXRhOicubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudERhdGEuY29tcGxldGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlICs9IGV2ZW50RGF0YS5jb21wbGV0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvW1xcXFwvOl0vZywgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aXRsZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIG1ha2luZyBBUEkgcmVxdWVzdDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFraW5nIEFQSSByZXF1ZXN0OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLm9sbGFtYVJlc3RBUElVcmwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBzZXR0aW5ncy5vbGxhbWFSZXN0QVBJVXJsICsgJy9hcGkvZ2VuZXJhdGUnO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCArICdcXG5cXG4nICsgcHJvbXB0ICArICcgT1VUUFVUIFRJVExFIE9OTFk6JyxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLm1vZGVsLFxuICAgICAgICAgICAgICAgICAgICBzdHJlYW06IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogc2V0dGluZ3MudGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1fcHJlZGljdDogMjUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlVGV4dCA9IEpTT04ucGFyc2UocmVzcG9uc2UudGV4dCk7XG4gICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gcGFyc2VUZXh0LnJlc3BvbnNlO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBiYWNrc2xhc2hlcywgZm9yd2FyZCBzbGFzaGVzLCBhbmQgY29sb25zXG4gICAgICAgICAgICAgICAgaWYgKHRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvW1xcXFwvOl0vZywgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IucmVzcG9uc2U/LmRhdGE/LmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbn1cblxuLy8gQWJvcnQgY29udHJvbGxlclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFib3J0Q29udHJvbGxlcigpIHtcbiAgICByZXR1cm4gYWJvcnRDb250cm9sbGVyO1xufSIsICJleHBvcnQgY29uc3QgVkVSU0lPTiA9ICc0LjYuMCc7IC8vIHgtcmVsZWFzZS1wbGVhc2UtdmVyc2lvblxuIiwgImltcG9ydCB0eXBlIHsgUmVzcG9uc2UgfSBmcm9tICcuL19zaGltcy9mZXRjaC5qcyc7XG5cbnR5cGUgQnl0ZXMgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IFVpbnQ4QXJyYXkgfCBCdWZmZXIgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG50eXBlIFNlcnZlclNlbnRFdmVudCA9IHtcbiAgZXZlbnQ6IHN0cmluZyB8IG51bGw7XG4gIGRhdGE6IHN0cmluZztcbiAgcmF3OiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCBjbGFzcyBTdHJlYW08SXRlbT4gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+IHtcbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyO1xuXG4gIHByaXZhdGUgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBwcml2YXRlIGRlY29kZXI6IFNTRURlY29kZXI7XG5cbiAgY29uc3RydWN0b3IocmVzcG9uc2U6IFJlc3BvbnNlLCBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIpIHtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgICB0aGlzLmRlY29kZXIgPSBuZXcgU1NFRGVjb2RlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyAqaXRlck1lc3NhZ2VzKCk6IEFzeW5jR2VuZXJhdG9yPFNlcnZlclNlbnRFdmVudCwgdm9pZCwgdW5rbm93bj4ge1xuICAgIGlmICghdGhpcy5yZXNwb25zZS5ib2R5KSB7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGl0ZXJhdGUgb3ZlciBhIHJlc3BvbnNlIHdpdGggbm8gYm9keWApO1xuICAgIH1cbiAgICBjb25zdCBsaW5lRGVjb2RlciA9IG5ldyBMaW5lRGVjb2RlcigpO1xuXG4gICAgY29uc3QgaXRlciA9IHJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYWJsZTxCeXRlcz4odGhpcy5yZXNwb25zZS5ib2R5KTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0ZXIpIHtcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5kZWNvZGUoY2h1bmspKSB7XG4gICAgICAgIGNvbnN0IHNzZSA9IHRoaXMuZGVjb2Rlci5kZWNvZGUobGluZSk7XG4gICAgICAgIGlmIChzc2UpIHlpZWxkIHNzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZmx1c2goKSkge1xuICAgICAgY29uc3Qgc3NlID0gdGhpcy5kZWNvZGVyLmRlY29kZShsaW5lKTtcbiAgICAgIGlmIChzc2UpIHlpZWxkIHNzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhdG9yPEl0ZW0sIGFueSwgdW5kZWZpbmVkPiB7XG4gICAgbGV0IGRvbmUgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgZm9yIGF3YWl0IChjb25zdCBzc2Ugb2YgdGhpcy5pdGVyTWVzc2FnZXMoKSkge1xuICAgICAgICBpZiAoZG9uZSkgY29udGludWU7XG5cbiAgICAgICAgaWYgKHNzZS5kYXRhLnN0YXJ0c1dpdGgoJ1tET05FXScpKSB7XG4gICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3NlLmV2ZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHlpZWxkIEpTT04ucGFyc2Uoc3NlLmRhdGEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYENvdWxkIG5vdCBwYXJzZSBtZXNzYWdlIGludG8gSlNPTjpgLCBzc2UuZGF0YSk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGcm9tIGNodW5rOmAsIHNzZS5yYXcpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIGNhbGxzIGBzdHJlYW0uY29udHJvbGxlci5hYm9ydCgpYCwgd2Ugc2hvdWxkIGV4aXQgd2l0aG91dCB0aHJvd2luZy5cbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHJldHVybjtcbiAgICAgIHRocm93IGU7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIGBicmVha2BzLCBhYm9ydCB0aGUgb25nb2luZyByZXF1ZXN0LlxuICAgICAgaWYgKCFkb25lKSB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgU1NFRGVjb2RlciB7XG4gIHByaXZhdGUgZGF0YTogc3RyaW5nW107XG4gIHByaXZhdGUgZXZlbnQ6IHN0cmluZyB8IG51bGw7XG4gIHByaXZhdGUgY2h1bmtzOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmV2ZW50ID0gbnVsbDtcbiAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICB0aGlzLmNodW5rcyA9IFtdO1xuICB9XG5cbiAgZGVjb2RlKGxpbmU6IHN0cmluZykge1xuICAgIGlmIChsaW5lLmVuZHNXaXRoKCdcXHInKSkge1xuICAgICAgbGluZSA9IGxpbmUuc3Vic3RyaW5nKDAsIGxpbmUubGVuZ3RoIC0gMSk7XG4gICAgfVxuXG4gICAgaWYgKCFsaW5lKSB7XG4gICAgICAvLyBlbXB0eSBsaW5lIGFuZCB3ZSBkaWRuJ3QgcHJldmlvdXNseSBlbmNvdW50ZXIgYW55IG1lc3NhZ2VzXG4gICAgICBpZiAoIXRoaXMuZXZlbnQgJiYgIXRoaXMuZGF0YS5sZW5ndGgpIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCBzc2U6IFNlcnZlclNlbnRFdmVudCA9IHtcbiAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgIGRhdGE6IHRoaXMuZGF0YS5qb2luKCdcXG4nKSxcbiAgICAgICAgcmF3OiB0aGlzLmNodW5rcyxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuZXZlbnQgPSBudWxsO1xuICAgICAgdGhpcy5kYXRhID0gW107XG4gICAgICB0aGlzLmNodW5rcyA9IFtdO1xuXG4gICAgICByZXR1cm4gc3NlO1xuICAgIH1cblxuICAgIHRoaXMuY2h1bmtzLnB1c2gobGluZSk7XG5cbiAgICBpZiAobGluZS5zdGFydHNXaXRoKCc6JykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBbZmllbGRuYW1lLCBfLCB2YWx1ZV0gPSBwYXJ0aXRpb24obGluZSwgJzonKTtcblxuICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCcgJykpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgIH1cblxuICAgIGlmIChmaWVsZG5hbWUgPT09ICdldmVudCcpIHtcbiAgICAgIHRoaXMuZXZlbnQgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGZpZWxkbmFtZSA9PT0gJ2RhdGEnKSB7XG4gICAgICB0aGlzLmRhdGEucHVzaCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHJlLWltcGxlbWVudGF0aW9uIG9mIGh0dHB4J3MgYExpbmVEZWNvZGVyYCBpbiBQeXRob24gdGhhdCBoYW5kbGVzIGluY3JlbWVudGFsbHlcbiAqIHJlYWRpbmcgbGluZXMgZnJvbSB0ZXh0LlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmNvZGUvaHR0cHgvYmxvYi85MjAzMzNlYTk4MTE4ZTljZjYxN2YyNDY5MDVkN2IyMDI1MTA5NDFjL2h0dHB4L19kZWNvZGVycy5weSNMMjU4XG4gKi9cbmNsYXNzIExpbmVEZWNvZGVyIHtcbiAgLy8gcHJldHRpZXItaWdub3JlXG4gIHN0YXRpYyBORVdMSU5FX0NIQVJTID0gbmV3IFNldChbJ1xcbicsICdcXHInLCAnXFx4MGInLCAnXFx4MGMnLCAnXFx4MWMnLCAnXFx4MWQnLCAnXFx4MWUnLCAnXFx4ODUnLCAnXFx1MjAyOCcsICdcXHUyMDI5J10pO1xuICBzdGF0aWMgTkVXTElORV9SRUdFWFAgPSAvXFxyXFxufFtcXG5cXHJcXHgwYlxceDBjXFx4MWNcXHgxZFxceDFlXFx4ODVcXHUyMDI4XFx1MjAyOV0vZztcblxuICBidWZmZXI6IHN0cmluZ1tdO1xuICB0cmFpbGluZ0NSOiBib29sZWFuO1xuICB0ZXh0RGVjb2RlcjogYW55OyAvLyBUZXh0RGVjb2RlciBmb3VuZCBpbiBicm93c2Vyczsgbm90IHR5cGVkIHRvIGF2b2lkIHB1bGxpbmcgaW4gZWl0aGVyIFwiZG9tXCIgb3IgXCJub2RlXCIgdHlwZXMuXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgfVxuXG4gIGRlY29kZShjaHVuazogQnl0ZXMpOiBzdHJpbmdbXSB7XG4gICAgbGV0IHRleHQgPSB0aGlzLmRlY29kZVRleHQoY2h1bmspO1xuXG4gICAgaWYgKHRoaXMudHJhaWxpbmdDUikge1xuICAgICAgdGV4dCA9ICdcXHInICsgdGV4dDtcbiAgICAgIHRoaXMudHJhaWxpbmdDUiA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGV4dC5lbmRzV2l0aCgnXFxyJykpIHtcbiAgICAgIHRoaXMudHJhaWxpbmdDUiA9IHRydWU7XG4gICAgICB0ZXh0ID0gdGV4dC5zbGljZSgwLCAtMSk7XG4gICAgfVxuXG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgdHJhaWxpbmdOZXdsaW5lID0gTGluZURlY29kZXIuTkVXTElORV9DSEFSUy5oYXModGV4dFt0ZXh0Lmxlbmd0aCAtIDFdIHx8ICcnKTtcbiAgICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KExpbmVEZWNvZGVyLk5FV0xJTkVfUkVHRVhQKTtcblxuICAgIGlmIChsaW5lcy5sZW5ndGggPT09IDEgJiYgIXRyYWlsaW5nTmV3bGluZSkge1xuICAgICAgdGhpcy5idWZmZXIucHVzaChsaW5lc1swXSEpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICBsaW5lcyA9IFt0aGlzLmJ1ZmZlci5qb2luKCcnKSArIGxpbmVzWzBdLCAuLi5saW5lcy5zbGljZSgxKV07XG4gICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIH1cblxuICAgIGlmICghdHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICB0aGlzLmJ1ZmZlciA9IFtsaW5lcy5wb3AoKSB8fCAnJ107XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgZGVjb2RlVGV4dChieXRlczogQnl0ZXMpOiBzdHJpbmcge1xuICAgIGlmIChieXRlcyA9PSBudWxsKSByZXR1cm4gJyc7XG4gICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHJldHVybiBieXRlcztcblxuICAgIC8vIE5vZGU6XG4gICAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIGJ5dGVzLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShieXRlcykudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVW5leHBlY3RlZDogcmVjZWl2ZWQgbm9uLVVpbnQ4QXJyYXkgKCR7Ynl0ZXMuY29uc3RydWN0b3IubmFtZX0pIHN0cmVhbSBjaHVuayBpbiBhbiBlbnZpcm9ubWVudCB3aXRoIGEgZ2xvYmFsIFwiQnVmZmVyXCIgZGVmaW5lZCwgd2hpY2ggdGhpcyBsaWJyYXJ5IGFzc3VtZXMgdG8gYmUgTm9kZS4gUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLmAsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEJyb3dzZXJcbiAgICBpZiAodHlwZW9mIFRleHREZWNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBieXRlcyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHRoaXMudGV4dERlY29kZXIgPz89IG5ldyBUZXh0RGVjb2RlcigndXRmOCcpO1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0RGVjb2Rlci5kZWNvZGUoYnl0ZXMpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBVbmV4cGVjdGVkOiByZWNlaXZlZCBub24tVWludDhBcnJheS9BcnJheUJ1ZmZlciAoJHtcbiAgICAgICAgICAoYnl0ZXMgYXMgYW55KS5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICAgIH0pIGluIGEgd2ViIHBsYXRmb3JtLiBQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFVuZXhwZWN0ZWQ6IG5laXRoZXIgQnVmZmVyIG5vciBUZXh0RGVjb2RlciBhcmUgYXZhaWxhYmxlIGFzIGdsb2JhbHMuIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICk7XG4gIH1cblxuICBmbHVzaCgpOiBzdHJpbmdbXSB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5sZW5ndGggJiYgIXRoaXMudHJhaWxpbmdDUikge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmVzID0gW3RoaXMuYnVmZmVyLmpvaW4oJycpXTtcbiAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIHRoaXMudHJhaWxpbmdDUiA9IGZhbHNlO1xuICAgIHJldHVybiBsaW5lcztcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJ0aXRpb24oc3RyOiBzdHJpbmcsIGRlbGltaXRlcjogc3RyaW5nKTogW3N0cmluZywgc3RyaW5nLCBzdHJpbmddIHtcbiAgY29uc3QgaW5kZXggPSBzdHIuaW5kZXhPZihkZWxpbWl0ZXIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgcmV0dXJuIFtzdHIuc3Vic3RyaW5nKDAsIGluZGV4KSwgZGVsaW1pdGVyLCBzdHIuc3Vic3RyaW5nKGluZGV4ICsgZGVsaW1pdGVyLmxlbmd0aCldO1xuICB9XG5cbiAgcmV0dXJuIFtzdHIsICcnLCAnJ107XG59XG5cbi8qKlxuICogTW9zdCBicm93c2VycyBkb24ndCB5ZXQgaGF2ZSBhc3luYyBpdGVyYWJsZSBzdXBwb3J0IGZvciBSZWFkYWJsZVN0cmVhbSxcbiAqIGFuZCBOb2RlIGhhcyBhIHZlcnkgZGlmZmVyZW50IHdheSBvZiByZWFkaW5nIGJ5dGVzIGZyb20gaXRzIFwiUmVhZGFibGVTdHJlYW1cIi5cbiAqXG4gKiBUaGlzIHBvbHlmaWxsIHdhcyBwdWxsZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vTWF0dGlhc0J1ZWxlbnMvd2ViLXN0cmVhbXMtcG9seWZpbGwvcHVsbC8xMjIjaXNzdWVjb21tZW50LTE2MjczNTQ0OTBcbiAqL1xuZnVuY3Rpb24gcmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhYmxlPFQ+KHN0cmVhbTogYW55KTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPFQ+IHtcbiAgaWYgKHN0cmVhbVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0pIHJldHVybiBzdHJlYW07XG5cbiAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICByZXR1cm4ge1xuICAgIGFzeW5jIG5leHQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAocmVzdWx0Py5kb25lKSByZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgY2xvc2VkXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgd2hlbiBzdHJlYW0gYmVjb21lcyBlcnJvcmVkXG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfSxcbiAgICBhc3luYyByZXR1cm4oKSB7XG4gICAgICBjb25zdCBjYW5jZWxQcm9taXNlID0gcmVhZGVyLmNhbmNlbCgpO1xuICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7XG4gICAgICBhd2FpdCBjYW5jZWxQcm9taXNlO1xuICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgIH0sXG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gIH07XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHsgY2FzdFRvRXJyb3IsIEhlYWRlcnMgfSBmcm9tICcuL2NvcmUuanMnO1xuXG5leHBvcnQgY2xhc3MgQVBJRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHJlYWRvbmx5IHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICByZWFkb25seSBoZWFkZXJzOiBIZWFkZXJzIHwgdW5kZWZpbmVkO1xuICByZWFkb25seSBlcnJvcjogT2JqZWN0IHwgdW5kZWZpbmVkO1xuXG4gIHJlYWRvbmx5IGNvZGU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IHBhcmFtOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICByZWFkb25seSB0eXBlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgc3RhdHVzOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgZXJyb3I6IE9iamVjdCB8IHVuZGVmaW5lZCxcbiAgICBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKSB7XG4gICAgc3VwZXIoQVBJRXJyb3IubWFrZU1lc3NhZ2UoZXJyb3IsIG1lc3NhZ2UpKTtcbiAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuXG4gICAgY29uc3QgZGF0YSA9IGVycm9yIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgdGhpcy5lcnJvciA9IGRhdGE7XG4gICAgdGhpcy5jb2RlID0gZGF0YT8uWydjb2RlJ107XG4gICAgdGhpcy5wYXJhbSA9IGRhdGE/LlsncGFyYW0nXTtcbiAgICB0aGlzLnR5cGUgPSBkYXRhPy5bJ3R5cGUnXTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIG1ha2VNZXNzYWdlKGVycm9yOiBhbnksIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAoXG4gICAgICBlcnJvcj8ubWVzc2FnZSA/XG4gICAgICAgIHR5cGVvZiBlcnJvci5tZXNzYWdlID09PSAnc3RyaW5nJyA/IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgOiBKU09OLnN0cmluZ2lmeShlcnJvci5tZXNzYWdlKVxuICAgICAgOiBlcnJvciA/IEpTT04uc3RyaW5naWZ5KGVycm9yKVxuICAgICAgOiBtZXNzYWdlIHx8ICdVbmtub3duIGVycm9yIG9jY3VycmVkJ1xuICAgICk7XG4gIH1cblxuICBzdGF0aWMgZ2VuZXJhdGUoXG4gICAgc3RhdHVzOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgZXJyb3JSZXNwb25zZTogT2JqZWN0IHwgdW5kZWZpbmVkLFxuICAgIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApIHtcbiAgICBpZiAoIXN0YXR1cykge1xuICAgICAgcmV0dXJuIG5ldyBBUElDb25uZWN0aW9uRXJyb3IoeyBjYXVzZTogY2FzdFRvRXJyb3IoZXJyb3JSZXNwb25zZSkgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXJyb3IgPSAoZXJyb3JSZXNwb25zZSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KT8uWydlcnJvciddO1xuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICByZXR1cm4gbmV3IEJhZFJlcXVlc3RFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDEpIHtcbiAgICAgIHJldHVybiBuZXcgQXV0aGVudGljYXRpb25FcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDMpIHtcbiAgICAgIHJldHVybiBuZXcgUGVybWlzc2lvbkRlbmllZEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQwNCkge1xuICAgICAgcmV0dXJuIG5ldyBOb3RGb3VuZEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQwOSkge1xuICAgICAgcmV0dXJuIG5ldyBDb25mbGljdEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQyMikge1xuICAgICAgcmV0dXJuIG5ldyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICByZXR1cm4gbmV3IFJhdGVMaW1pdEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPj0gNTAwKSB7XG4gICAgICByZXR1cm4gbmV3IEludGVybmFsU2VydmVyRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBBUElFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJVXNlckFib3J0RXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSA9IHt9KSB7XG4gICAgc3VwZXIodW5kZWZpbmVkLCB1bmRlZmluZWQsIG1lc3NhZ2UgfHwgJ1JlcXVlc3Qgd2FzIGFib3J0ZWQuJywgdW5kZWZpbmVkKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UsIGNhdXNlIH06IHsgbWVzc2FnZT86IHN0cmluZzsgY2F1c2U/OiBFcnJvciB8IHVuZGVmaW5lZCB9KSB7XG4gICAgc3VwZXIodW5kZWZpbmVkLCB1bmRlZmluZWQsIG1lc3NhZ2UgfHwgJ0Nvbm5lY3Rpb24gZXJyb3IuJywgdW5kZWZpbmVkKTtcbiAgICAvLyBpbiBzb21lIGVudmlyb25tZW50cyB0aGUgJ2NhdXNlJyBwcm9wZXJ0eSBpcyBhbHJlYWR5IGRlY2xhcmVkXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmIChjYXVzZSkgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yIGV4dGVuZHMgQVBJQ29ubmVjdGlvbkVycm9yIHtcbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlIH06IHsgbWVzc2FnZT86IHN0cmluZyB9ID0ge30pIHtcbiAgICBzdXBlcih7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gJ1JlcXVlc3QgdGltZWQgb3V0LicgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJhZFJlcXVlc3RFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MDAgPSA0MDA7XG59XG5cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQwMSA9IDQwMTtcbn1cblxuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb25EZW5pZWRFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MDMgPSA0MDM7XG59XG5cbmV4cG9ydCBjbGFzcyBOb3RGb3VuZEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQwNCA9IDQwNDtcbn1cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogNDA5ID0gNDA5O1xufVxuXG5leHBvcnQgY2xhc3MgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQyMiA9IDQyMjtcbn1cblxuZXhwb3J0IGNsYXNzIFJhdGVMaW1pdEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQyOSA9IDQyOTtcbn1cblxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyRXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7fVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqXG4gKiBUaGlzIGlzIGEgc3R1YiBmb3Igbm9uLW5vZGUgZW52aXJvbm1lbnRzLlxuICogSW4gbm9kZSBlbnZpcm9ubWVudHMsIGl0IGdldHMgcmVwbGFjZWQgYWdlbnQtbm9kZS50cyBieSB0aGUgcGFja2FnZSBleHBvcnQgbWFwXG4gKi9cblxuZXhwb3J0IHR5cGUgQWdlbnQgPSBhbnk7XG5cbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0QWdlbnQgPSAodXJsOiBzdHJpbmcpOiBhbnkgPT4ge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cblxuLy8gSWYgd2UgYWNjaWRlbnRhbGx5IGNhbGwgZmV0Y2ggd2l0aCB0aGUgd3JvbmcgdGhpcyBiaW5kaW5nLFxuLy8gaW4gdGhlIGJyb3dzZXIgaXQgd291bGQgdGhyb3c6XG4vLyAgIFR5cGVFcnJvcjogRmFpbGVkIHRvIGV4ZWN1dGUgJ2ZldGNoJyBvbiAnV2luZG93JzogSWxsZWdhbCBpbnZvY2F0aW9uXG5jb25zdCBfZmV0Y2ggPSBmZXRjaC5iaW5kKHVuZGVmaW5lZCk7XG5jb25zdCBfUmVxdWVzdCA9IFJlcXVlc3Q7XG5jb25zdCBfUmVzcG9uc2UgPSBSZXNwb25zZTtcbmNvbnN0IF9IZWFkZXJzID0gSGVhZGVycztcblxuZXhwb3J0IGNvbnN0IGlzUG9seWZpbGxlZCA9IGZhbHNlO1xuXG5leHBvcnQgeyBfZmV0Y2ggYXMgZmV0Y2gsIF9SZXF1ZXN0IGFzIFJlcXVlc3QsIF9SZXNwb25zZSBhcyBSZXNwb25zZSwgX0hlYWRlcnMgYXMgSGVhZGVycyB9O1xuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuXG5jb25zdCBfRm9ybURhdGEgPSBGb3JtRGF0YTtcbmNvbnN0IF9CbG9iID0gQmxvYjtcblxuY29uc3QgX0ZpbGUgPVxuICB0eXBlb2YgRmlsZSAhPT0gJ3VuZGVmaW5lZCcgPyBGaWxlIDogKFxuICAgIC8vIEJ1biBkb2Vzbid0IGltcGxlbWVudCBGaWxlIHlldCwgc28ganVzdCBtYWtlIGEgc2hpbSB0aGF0IHRocm93cyBhIGhlbHBmdWwgZXJyb3IgbWVzc2FnZVxuICAgIGNsYXNzIEZpbGUgZXh0ZW5kcyBCbG9iIHtcbiAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGZpbGUgdXBsb2FkcyBhcmVuJ3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQgeWV0IGFzICdGaWxlJyBpcyBub3QgZGVmaW5lZGApO1xuICAgICAgfVxuICAgIH1cbiAgKTtcblxuZXhwb3J0IHsgX0Zvcm1EYXRhIGFzIEZvcm1EYXRhLCBfRmlsZSBhcyBGaWxlLCBfQmxvYiBhcyBCbG9iIH07XG5cbmV4cG9ydCBjb25zdCBpc1BvbHlmaWxsZWQgPSBmYWxzZTtcbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cblxuaW1wb3J0IHsgRm9ybURhdGEgfSBmcm9tICcuL2Zvcm0tZGF0YS5qcyc7XG5pbXBvcnQgdHlwZSB7IFJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBNdWx0aXBhcnRCb2R5IH0gZnJvbSAnLi4vdXBsb2Fkcy5qcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9uczxUIGV4dGVuZHMge30gPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gIGZvcm06IEZvcm1EYXRhLFxuICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VD4+IHtcbiAgcmV0dXJuIHsgLi4ub3B0cywgYm9keTogbmV3IE11bHRpcGFydEJvZHkoZm9ybSkgYXMgYW55IH07XG59XG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICpcbiAqIFRoaXMgaXMgYSBzdHViIHRoYXQgZ2V0cyByZXBsYWNlZCBieSBmaWxlRnJvbVBhdGgtbm9kZS5qcyBmb3Igbm9kZSBlbnZpcm9ubWVudHNcbiAqIGluIHRoZSBwYWNrYWdlIGV4cG9ydCBtYXBcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEZpbGVQcm9wZXJ0eUJhZywgRmlsZSB9IGZyb20gJy4vZm9ybS1kYXRhLmpzJztcblxuZXhwb3J0IHR5cGUgRmlsZUZyb21QYXRoT3B0aW9ucyA9IE9taXQ8RmlsZVByb3BlcnR5QmFnLCAnbGFzdE1vZGlmaWVkJz47XG5cbi8qKlxuICogVGhpcyBpcyBhIHN0dWIgZm9yIG5vbi1ub2RlIGVudmlyb25tZW50cyB0aGF0IGp1c3QgdGhyb3dzIGFuIGVycm9yLlxuICogSW4gbm9kZSBlbnZpcm9ubWVudHMsIHRoaXMgbW9kdWxlIHdpbGwgYmUgcmVwbGFjZWQgYnkgdXRpbC9ub2RlL2ZpbGVGcm9tUGF0aCBieSB0aGVcbiAqIHBhY2thZ2UgaW1wb3J0IG1hcC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGVGcm9tUGF0aChwYXRoOiBzdHJpbmcpOiBQcm9taXNlPEZpbGU+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGVGcm9tUGF0aChwYXRoOiBzdHJpbmcsIGZpbGVuYW1lPzogc3RyaW5nKTogUHJvbWlzZTxGaWxlPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWxlRnJvbVBhdGgocGF0aDogc3RyaW5nLCBvcHRpb25zPzogRmlsZUZyb21QYXRoT3B0aW9ucyk6IFByb21pc2U8RmlsZT47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmlsZUZyb21QYXRoKFxuICBwYXRoOiBzdHJpbmcsXG4gIGZpbGVuYW1lPzogc3RyaW5nLFxuICBvcHRpb25zPzogRmlsZUZyb21QYXRoT3B0aW9ucyxcbik6IFByb21pc2U8RmlsZT47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmlsZUZyb21QYXRoKCk6IFByb21pc2U8RmlsZT4ge1xuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ1RoZSBgZmlsZUZyb21QYXRoYCBmdW5jdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBpbiBOb2RlLiBTZWUgdGhlIFJFQURNRSBmb3IgbW9yZSBkZXRhaWxzOiBodHRwczovL3d3dy5naXRodWIuY29tL29wZW5haS9vcGVuYWktbm9kZSNmaWxlLXVwbG9hZHMnLFxuICApO1xufVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuXG4vLyBzaGltIHRoZXNlIE5vZGUgdHlwZXMgdG8gYXZvaWQgaW1wb3J0aW5nIEB0eXBlcy9ub2RlIGFuZCBwb2xsdXRpbmcgdGhlIHVzZXInc1xuLy8gdHlwZSBlbnZpcm9ubWVudCBpbiBub24tbm9kZSBwcm9qZWN0c1xuXG5leHBvcnQgZGVjbGFyZSBjbGFzcyBSZWFkYWJsZSB7XG4gIHJlYWRhYmxlOiBib29sZWFuO1xuICByZWFkb25seSByZWFkYWJsZUVuZGVkOiBib29sZWFuO1xuICByZWFkb25seSByZWFkYWJsZUZsb3dpbmc6IGJvb2xlYW4gfCBudWxsO1xuICByZWFkb25seSByZWFkYWJsZUhpZ2hXYXRlck1hcms6IG51bWJlcjtcbiAgcmVhZG9ubHkgcmVhZGFibGVMZW5ndGg6IG51bWJlcjtcbiAgcmVhZG9ubHkgcmVhZGFibGVPYmplY3RNb2RlOiBib29sZWFuO1xuICBkZXN0cm95ZWQ6IGJvb2xlYW47XG4gIHJlYWQoc2l6ZT86IG51bWJlcik6IGFueTtcbiAgcGF1c2UoKTogdGhpcztcbiAgcmVzdW1lKCk6IHRoaXM7XG4gIGlzUGF1c2VkKCk6IGJvb2xlYW47XG4gIGRlc3Ryb3koZXJyb3I/OiBFcnJvcik6IHRoaXM7XG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPGFueT47XG59XG5cbmV4cG9ydCBkZWNsYXJlIGNsYXNzIEZzUmVhZFN0cmVhbSBleHRlbmRzIFJlYWRhYmxlIHtcbiAgcGF0aDoge307IC8vIG5vZGUgdHlwZSBpcyBzdHJpbmcgfCBCdWZmZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRnNSZWFkU3RyZWFtKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBGc1JlYWRTdHJlYW0ge1xuICByZXR1cm4gZmFsc2U7XG59XG4iLCAiaW1wb3J0IHsgdHlwZSBSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4vY29yZS5qcyc7XG5pbXBvcnQgeyB0eXBlIFJlYWRhYmxlIH0gZnJvbSAnLi9fc2hpbXMvbm9kZS1yZWFkYWJsZS5qcyc7XG5pbXBvcnQgeyB0eXBlIEJvZHlJbml0IH0gZnJvbSAnLi9fc2hpbXMvZmV0Y2guanMnO1xuaW1wb3J0IHsgRm9ybURhdGEsIEZpbGUsIHR5cGUgQmxvYiwgdHlwZSBGaWxlUHJvcGVydHlCYWcgfSBmcm9tICcuL19zaGltcy9mb3JtLWRhdGEuanMnO1xuaW1wb3J0IHsgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuL19zaGltcy9nZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucy5qcyc7XG5pbXBvcnQgeyBmaWxlRnJvbVBhdGggfSBmcm9tICcuL19zaGltcy9maWxlRnJvbVBhdGguanMnO1xuaW1wb3J0IHsgdHlwZSBGc1JlYWRTdHJlYW0sIGlzRnNSZWFkU3RyZWFtIH0gZnJvbSAnLi9fc2hpbXMvbm9kZS1yZWFkYWJsZS5qcyc7XG5cbmV4cG9ydCB7IGZpbGVGcm9tUGF0aCB9O1xuXG50eXBlIEJsb2JMaWtlUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYkxpa2UgfCBVaW50OEFycmF5IHwgRGF0YVZpZXc7XG5leHBvcnQgdHlwZSBCbG9iUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYiB8IFVpbnQ4QXJyYXkgfCBEYXRhVmlldztcblxuLyoqXG4gKiBUeXBpY2FsbHksIHRoaXMgaXMgYSBuYXRpdmUgXCJGaWxlXCIgY2xhc3MuXG4gKlxuICogV2UgcHJvdmlkZSB0aGUge0BsaW5rIHRvRmlsZX0gdXRpbGl0eSB0byBjb252ZXJ0IGEgdmFyaWV0eSBvZiBvYmplY3RzXG4gKiBpbnRvIHRoZSBGaWxlIGNsYXNzLlxuICpcbiAqIEZvciBjb252ZW5pZW5jZSwgeW91IGNhbiBhbHNvIHBhc3MgYSBmZXRjaCBSZXNwb25zZSwgb3IgaW4gTm9kZSxcbiAqIHRoZSByZXN1bHQgb2YgZnMuY3JlYXRlUmVhZFN0cmVhbSgpLlxuICovXG5leHBvcnQgdHlwZSBVcGxvYWRhYmxlID0gRmlsZUxpa2UgfCBSZXNwb25zZUxpa2UgfCBGc1JlYWRTdHJlYW07XG5cbi8qKlxuICogSW50ZW5kZWQgdG8gbWF0Y2ggd2ViLkJsb2IsIG5vZGUuQmxvYiwgbm9kZS1mZXRjaC5CbG9iLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmxvYkxpa2Uge1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3NpemUpICovXG4gIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi90eXBlKSAqL1xuICByZWFkb25seSB0eXBlOiBzdHJpbmc7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2IvdGV4dCkgKi9cbiAgdGV4dCgpOiBQcm9taXNlPHN0cmluZz47XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2Ivc2xpY2UpICovXG4gIHNsaWNlKHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiBCbG9iTGlrZTtcbiAgLy8gdW5mb3J0dW5hdGVseSBAdHlwZXMvbm9kZS1mZXRjaEBeMi42LjQgZG9lc24ndCB0eXBlIHRoZSBhcnJheUJ1ZmZlciBtZXRob2Rcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuRmlsZSwgbm9kZS5GaWxlLCBub2RlLWZldGNoLkZpbGUsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWxlTGlrZSBleHRlbmRzIEJsb2JMaWtlIHtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvRmlsZS9sYXN0TW9kaWZpZWQpICovXG4gIHJlYWRvbmx5IGxhc3RNb2RpZmllZDogbnVtYmVyO1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9GaWxlL25hbWUpICovXG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuUmVzcG9uc2UsIG5vZGUuUmVzcG9uc2UsIG5vZGUtZmV0Y2guUmVzcG9uc2UsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zZUxpa2Uge1xuICB1cmw6IHN0cmluZztcbiAgYmxvYigpOiBQcm9taXNlPEJsb2JMaWtlPjtcbn1cblxuZXhwb3J0IGNvbnN0IGlzUmVzcG9uc2VMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBSZXNwb25zZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS51cmwgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS5ibG9iID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNGaWxlTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRmlsZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS5uYW1lID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUubGFzdE1vZGlmaWVkID09PSAnbnVtYmVyJyAmJlxuICBpc0Jsb2JMaWtlKHZhbHVlKTtcblxuLyoqXG4gKiBUaGUgQmxvYkxpa2UgdHlwZSBvbWl0cyBhcnJheUJ1ZmZlcigpIGJlY2F1c2UgQHR5cGVzL25vZGUtZmV0Y2hAXjIuNi40IGxhY2tzIGl0OyBidXQgdGhpcyBjaGVja1xuICogYWRkcyB0aGUgYXJyYXlCdWZmZXIoKSBtZXRob2QgdHlwZSBiZWNhdXNlIGl0IGlzIGF2YWlsYWJsZSBhbmQgdXNlZCBhdCBydW50aW1lXG4gKi9cbmV4cG9ydCBjb25zdCBpc0Jsb2JMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBCbG9iTGlrZSAmIHsgYXJyYXlCdWZmZXIoKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4gfSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLnNpemUgPT09ICdudW1iZXInICYmXG4gIHR5cGVvZiB2YWx1ZS50eXBlID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICB0eXBlb2YgdmFsdWUuc2xpY2UgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIHZhbHVlLmFycmF5QnVmZmVyID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNVcGxvYWRhYmxlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBVcGxvYWRhYmxlID0+IHtcbiAgcmV0dXJuIGlzRmlsZUxpa2UodmFsdWUpIHx8IGlzUmVzcG9uc2VMaWtlKHZhbHVlKSB8fCBpc0ZzUmVhZFN0cmVhbSh2YWx1ZSk7XG59O1xuXG5leHBvcnQgdHlwZSBUb0ZpbGVJbnB1dCA9IFVwbG9hZGFibGUgfCBFeGNsdWRlPEJsb2JMaWtlUGFydCwgc3RyaW5nPiB8IEFzeW5jSXRlcmFibGU8QmxvYkxpa2VQYXJ0PjtcblxuLyoqXG4gKiBIZWxwZXIgZm9yIGNyZWF0aW5nIGEge0BsaW5rIEZpbGV9IHRvIHBhc3MgdG8gYW4gU0RLIHVwbG9hZCBtZXRob2QgZnJvbSBhIHZhcmlldHkgb2YgZGlmZmVyZW50IGRhdGEgZm9ybWF0c1xuICogQHBhcmFtIHZhbHVlIHRoZSByYXcgY29udGVudCBvZiB0aGUgZmlsZS4gIENhbiBiZSBhbiB7QGxpbmsgVXBsb2FkYWJsZX0sIHtAbGluayBCbG9iTGlrZVBhcnR9LCBvciB7QGxpbmsgQXN5bmNJdGVyYWJsZX0gb2Yge0BsaW5rIEJsb2JMaWtlUGFydH1zXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGZpbGUuIElmIG9taXR0ZWQsIHRvRmlsZSB3aWxsIHRyeSB0byBkZXRlcm1pbmUgYSBmaWxlIG5hbWUgZnJvbSBiaXRzIGlmIHBvc3NpYmxlXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdGlvbnMudHlwZSB0aGUgTUlNRSB0eXBlIG9mIHRoZSBjb250ZW50XG4gKiBAcGFyYW0ge251bWJlcj19IG9wdGlvbnMubGFzdE1vZGlmaWVkIHRoZSBsYXN0IG1vZGlmaWVkIHRpbWVzdGFtcFxuICogQHJldHVybnMgYSB7QGxpbmsgRmlsZX0gd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydGllc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9GaWxlKFxuICB2YWx1ZTogVG9GaWxlSW5wdXQgfCBQcm9taXNlTGlrZTxUb0ZpbGVJbnB1dD4sXG4gIG5hbWU/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBvcHRpb25zOiBGaWxlUHJvcGVydHlCYWcgfCB1bmRlZmluZWQgPSB7fSxcbik6IFByb21pc2U8RmlsZUxpa2U+IHtcbiAgLy8gSWYgaXQncyBhIHByb21pc2UsIHJlc29sdmUgaXQuXG4gIHZhbHVlID0gYXdhaXQgdmFsdWU7XG5cbiAgaWYgKGlzUmVzcG9uc2VMaWtlKHZhbHVlKSkge1xuICAgIGNvbnN0IGJsb2IgPSBhd2FpdCB2YWx1ZS5ibG9iKCk7XG4gICAgbmFtZSB8fD0gbmV3IFVSTCh2YWx1ZS51cmwpLnBhdGhuYW1lLnNwbGl0KC9bXFxcXC9dLykucG9wKCkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgICByZXR1cm4gbmV3IEZpbGUoW2Jsb2IgYXMgYW55XSwgbmFtZSwgb3B0aW9ucyk7XG4gIH1cblxuICBjb25zdCBiaXRzID0gYXdhaXQgZ2V0Qnl0ZXModmFsdWUpO1xuXG4gIG5hbWUgfHw9IGdldE5hbWUodmFsdWUpID8/ICd1bmtub3duX2ZpbGUnO1xuXG4gIGlmICghb3B0aW9ucy50eXBlKSB7XG4gICAgY29uc3QgdHlwZSA9IChiaXRzWzBdIGFzIGFueSk/LnR5cGU7XG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgdHlwZSB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgRmlsZShiaXRzLCBuYW1lLCBvcHRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Qnl0ZXModmFsdWU6IFRvRmlsZUlucHV0KTogUHJvbWlzZTxBcnJheTxCbG9iUGFydD4+IHtcbiAgbGV0IHBhcnRzOiBBcnJheTxCbG9iUGFydD4gPSBbXTtcbiAgaWYgKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHxcbiAgICBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpIHx8IC8vIGluY2x1ZGVzIFVpbnQ4QXJyYXksIEJ1ZmZlciwgZXRjLlxuICAgIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJcbiAgKSB7XG4gICAgcGFydHMucHVzaCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoaXNCbG9iTGlrZSh2YWx1ZSkpIHtcbiAgICBwYXJ0cy5wdXNoKGF3YWl0IHZhbHVlLmFycmF5QnVmZmVyKCkpO1xuICB9IGVsc2UgaWYgKFxuICAgIGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yKHZhbHVlKSAvLyBpbmNsdWRlcyBSZWFkYWJsZSwgUmVhZGFibGVTdHJlYW0sIGV0Yy5cbiAgKSB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB2YWx1ZSkge1xuICAgICAgcGFydHMucHVzaChjaHVuayBhcyBCbG9iUGFydCk7IC8vIFRPRE8sIGNvbnNpZGVyIHZhbGlkYXRpbmc/XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBVbmV4cGVjdGVkIGRhdGEgdHlwZTogJHt0eXBlb2YgdmFsdWV9OyBjb25zdHJ1Y3RvcjogJHtcbiAgICAgICAgdmFsdWU/LmNvbnN0cnVjdG9yPy5uYW1lXG4gICAgICB9OyBwcm9wczogJHtwcm9wc0ZvckVycm9yKHZhbHVlKX1gLFxuICAgICk7XG4gIH1cblxuICByZXR1cm4gcGFydHM7XG59XG5cbmZ1bmN0aW9uIHByb3BzRm9yRXJyb3IodmFsdWU6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICByZXR1cm4gYFske3Byb3BzLm1hcCgocCkgPT4gYFwiJHtwfVwiYCkuam9pbignLCAnKX1dYDtcbn1cblxuZnVuY3Rpb24gZ2V0TmFtZSh2YWx1ZTogYW55KTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIChcbiAgICBnZXRTdHJpbmdGcm9tTWF5YmVCdWZmZXIodmFsdWUubmFtZSkgfHxcbiAgICBnZXRTdHJpbmdGcm9tTWF5YmVCdWZmZXIodmFsdWUuZmlsZW5hbWUpIHx8XG4gICAgLy8gRm9yIGZzLlJlYWRTdHJlYW1cbiAgICBnZXRTdHJpbmdGcm9tTWF5YmVCdWZmZXIodmFsdWUucGF0aCk/LnNwbGl0KC9bXFxcXC9dLykucG9wKClcbiAgKTtcbn1cblxuY29uc3QgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyID0gKHg6IHN0cmluZyB8IEJ1ZmZlciB8IHVua25vd24pOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodHlwZW9mIHggPT09ICdzdHJpbmcnKSByZXR1cm4geDtcbiAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHggaW5zdGFuY2VvZiBCdWZmZXIpIHJldHVybiBTdHJpbmcoeCk7XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5jb25zdCBpc0FzeW5jSXRlcmFibGVJdGVyYXRvciA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPHVua25vd24+ID0+XG4gIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY2xhc3MgTXVsdGlwYXJ0Qm9keSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBib2R5OiBSZWFkYWJsZSB8IEJvZHlJbml0KSB7fVxuICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ011bHRpcGFydEJvZHknO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBpc011bHRpcGFydEJvZHkgPSAoYm9keTogYW55KTogYm9keSBpcyBNdWx0aXBhcnRCb2R5ID0+XG4gIGJvZHkgJiYgdHlwZW9mIGJvZHkgPT09ICdvYmplY3QnICYmIGJvZHkuYm9keSAmJiBib2R5W1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNdWx0aXBhcnRCb2R5JztcblxuLyoqXG4gKiBSZXR1cm5zIGEgbXVsdGlwYXJ0L2Zvcm0tZGF0YSByZXF1ZXN0IGlmIGFueSBwYXJ0IG9mIHRoZSBnaXZlbiByZXF1ZXN0IGJvZHkgY29udGFpbnMgYSBGaWxlIC8gQmxvYiB2YWx1ZS5cbiAqIE90aGVyd2lzZSByZXR1cm5zIHRoZSByZXF1ZXN0IGFzIGlzLlxuICovXG5leHBvcnQgY29uc3QgbWF5YmVNdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPSBhc3luYyA8VCBleHRlbmRzIHt9ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VCB8IE11bHRpcGFydEJvZHk+PiA9PiB7XG4gIGlmICghaGFzVXBsb2FkYWJsZVZhbHVlKG9wdHMuYm9keSkpIHJldHVybiBvcHRzO1xuXG4gIGNvbnN0IGZvcm0gPSBhd2FpdCBjcmVhdGVGb3JtKG9wdHMuYm9keSk7XG4gIHJldHVybiBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyhmb3JtLCBvcHRzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPSBhc3luYyA8VCBleHRlbmRzIHt9ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VCB8IE11bHRpcGFydEJvZHk+PiA9PiB7XG4gIGNvbnN0IGZvcm0gPSBhd2FpdCBjcmVhdGVGb3JtKG9wdHMuYm9keSk7XG4gIHJldHVybiBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyhmb3JtLCBvcHRzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVGb3JtID0gYXN5bmMgPFQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oYm9keTogVCB8IHVuZGVmaW5lZCk6IFByb21pc2U8Rm9ybURhdGE+ID0+IHtcbiAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyhib2R5IHx8IHt9KS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYWRkRm9ybVZhbHVlKGZvcm0sIGtleSwgdmFsdWUpKSk7XG4gIHJldHVybiBmb3JtO1xufTtcblxuY29uc3QgaGFzVXBsb2FkYWJsZVZhbHVlID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiA9PiB7XG4gIGlmIChpc1VwbG9hZGFibGUodmFsdWUpKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUuc29tZShoYXNVcGxvYWRhYmxlVmFsdWUpO1xuICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAoY29uc3QgayBpbiB2YWx1ZSkge1xuICAgICAgaWYgKGhhc1VwbG9hZGFibGVWYWx1ZSgodmFsdWUgYXMgYW55KVtrXSkpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBhZGRGb3JtVmFsdWUgPSBhc3luYyAoZm9ybTogRm9ybURhdGEsIGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgUmVjZWl2ZWQgbnVsbCBmb3IgXCIke2tleX1cIjsgdG8gcGFzcyBudWxsIGluIEZvcm1EYXRhLCB5b3UgbXVzdCB1c2UgdGhlIHN0cmluZyAnbnVsbCdgLFxuICAgICk7XG4gIH1cblxuICAvLyBUT0RPOiBtYWtlIG5lc3RlZCBmb3JtYXRzIGNvbmZpZ3VyYWJsZVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgZm9ybS5hcHBlbmQoa2V5LCBTdHJpbmcodmFsdWUpKTtcbiAgfSBlbHNlIGlmIChpc1VwbG9hZGFibGUodmFsdWUpKSB7XG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IHRvRmlsZSh2YWx1ZSk7XG4gICAgZm9ybS5hcHBlbmQoa2V5LCBmaWxlIGFzIEZpbGUpO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodmFsdWUubWFwKChlbnRyeSkgPT4gYWRkRm9ybVZhbHVlKGZvcm0sIGtleSArICdbXScsIGVudHJ5KSkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5tYXAoKFtuYW1lLCBwcm9wXSkgPT4gYWRkRm9ybVZhbHVlKGZvcm0sIGAke2tleX1bJHtuYW1lfV1gLCBwcm9wKSksXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYEludmFsaWQgdmFsdWUgZ2l2ZW4gdG8gZm9ybSwgZXhwZWN0ZWQgYSBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb2JqZWN0LCBBcnJheSwgRmlsZSBvciBCbG9iIGJ1dCBnb3QgJHt2YWx1ZX0gaW5zdGVhZGAsXG4gICAgKTtcbiAgfVxufTtcbiIsICJpbXBvcnQgeyBWRVJTSU9OIH0gZnJvbSAnLi92ZXJzaW9uLmpzJztcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gJy4vc3RyZWFtaW5nLmpzJztcbmltcG9ydCB7IEFQSUVycm9yLCBBUElDb25uZWN0aW9uRXJyb3IsIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsIEFQSVVzZXJBYm9ydEVycm9yIH0gZnJvbSAnLi9lcnJvci5qcyc7XG5pbXBvcnQgdHlwZSB7IFJlYWRhYmxlIH0gZnJvbSAnLi9fc2hpbXMvbm9kZS1yZWFkYWJsZS5qcyc7XG5pbXBvcnQgeyBnZXREZWZhdWx0QWdlbnQsIHR5cGUgQWdlbnQgfSBmcm9tICcuL19zaGltcy9hZ2VudC5qcyc7XG5pbXBvcnQge1xuICBmZXRjaCxcbiAgaXNQb2x5ZmlsbGVkIGFzIGZldGNoSXNQb2x5ZmlsbGVkLFxuICB0eXBlIFJlcXVlc3RJbmZvLFxuICB0eXBlIFJlcXVlc3RJbml0LFxuICB0eXBlIFJlc3BvbnNlLFxuICB0eXBlIEhlYWRlcnNJbml0LFxufSBmcm9tICcuL19zaGltcy9mZXRjaC5qcyc7XG5leHBvcnQgeyB0eXBlIFJlc3BvbnNlIH07XG5pbXBvcnQgeyBpc011bHRpcGFydEJvZHkgfSBmcm9tICcuL3VwbG9hZHMuanMnO1xuZXhwb3J0IHtcbiAgbWF5YmVNdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMsXG4gIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyxcbiAgY3JlYXRlRm9ybSxcbiAgdHlwZSBVcGxvYWRhYmxlLFxufSBmcm9tICcuL3VwbG9hZHMuanMnO1xuXG5jb25zdCBNQVhfUkVUUklFUyA9IDI7XG5cbmV4cG9ydCB0eXBlIEZldGNoID0gKHVybDogUmVxdWVzdEluZm8sIGluaXQ/OiBSZXF1ZXN0SW5pdCkgPT4gUHJvbWlzZTxSZXNwb25zZT47XG5cbnR5cGUgUHJvbWlzZU9yVmFsdWU8VD4gPSBUIHwgUHJvbWlzZTxUPjtcblxudHlwZSBBUElSZXNwb25zZVByb3BzID0ge1xuICByZXNwb25zZTogUmVzcG9uc2U7XG4gIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcjtcbn07XG5cbmFzeW5jIGZ1bmN0aW9uIGRlZmF1bHRQYXJzZVJlc3BvbnNlPFQ+KHByb3BzOiBBUElSZXNwb25zZVByb3BzKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IHsgcmVzcG9uc2UgfSA9IHByb3BzO1xuICBpZiAocHJvcHMub3B0aW9ucy5zdHJlYW0pIHtcbiAgICAvLyBOb3RlOiB0aGVyZSBpcyBhbiBpbnZhcmlhbnQgaGVyZSB0aGF0IGlzbid0IHJlcHJlc2VudGVkIGluIHRoZSB0eXBlIHN5c3RlbVxuICAgIC8vIHRoYXQgaWYgeW91IHNldCBgc3RyZWFtOiB0cnVlYCB0aGUgcmVzcG9uc2UgdHlwZSBtdXN0IGFsc28gYmUgYFN0cmVhbTxUPmBcbiAgICByZXR1cm4gbmV3IFN0cmVhbShyZXNwb25zZSwgcHJvcHMuY29udHJvbGxlcikgYXMgYW55O1xuICB9XG5cbiAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG4gIGlmIChjb250ZW50VHlwZT8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSkge1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBkZWJ1ZygncmVzcG9uc2UnLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnVybCwgcmVzcG9uc2UuaGVhZGVycywganNvbik7XG5cbiAgICByZXR1cm4ganNvbiBhcyBUO1xuICB9XG5cbiAgLy8gVE9ETyBoYW5kbGUgYmxvYiwgYXJyYXlidWZmZXIsIG90aGVyIGNvbnRlbnQgdHlwZXMsIGV0Yy5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIHRleHQpO1xuICByZXR1cm4gdGV4dCBhcyBhbnkgYXMgVDtcbn1cblxuLyoqXG4gKiBBIHN1YmNsYXNzIG9mIGBQcm9taXNlYCBwcm92aWRpbmcgYWRkaXRpb25hbCBoZWxwZXIgbWV0aG9kc1xuICogZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIFNESy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFQSVByb21pc2U8VD4gZXh0ZW5kcyBQcm9taXNlPFQ+IHtcbiAgcHJpdmF0ZSBwYXJzZWRQcm9taXNlOiBQcm9taXNlPFQ+IHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVzcG9uc2VQcm9taXNlOiBQcm9taXNlPEFQSVJlc3BvbnNlUHJvcHM+LFxuICAgIHByaXZhdGUgcGFyc2VSZXNwb25zZTogKHByb3BzOiBBUElSZXNwb25zZVByb3BzKSA9PiBQcm9taXNlT3JWYWx1ZTxUPiA9IGRlZmF1bHRQYXJzZVJlc3BvbnNlLFxuICApIHtcbiAgICBzdXBlcigocmVzb2x2ZSkgPT4ge1xuICAgICAgLy8gdGhpcyBpcyBtYXliZSBhIGJpdCB3ZWlyZCBidXQgdGhpcyBoYXMgdG8gYmUgYSBuby1vcCB0byBub3QgaW1wbGljaXRseVxuICAgICAgLy8gcGFyc2UgdGhlIHJlc3BvbnNlIGJvZHk7IGluc3RlYWQgLnRoZW4sIC5jYXRjaCwgLmZpbmFsbHkgYXJlIG92ZXJyaWRkZW5cbiAgICAgIC8vIHRvIHBhcnNlIHRoZSByZXNwb25zZVxuICAgICAgcmVzb2x2ZShudWxsIGFzIGFueSk7XG4gICAgfSk7XG4gIH1cblxuICBfdGhlblVud3JhcDxVPih0cmFuc2Zvcm06IChkYXRhOiBUKSA9PiBVKTogQVBJUHJvbWlzZTxVPiB7XG4gICAgcmV0dXJuIG5ldyBBUElQcm9taXNlKHRoaXMucmVzcG9uc2VQcm9taXNlLCBhc3luYyAocHJvcHMpID0+IHRyYW5zZm9ybShhd2FpdCB0aGlzLnBhcnNlUmVzcG9uc2UocHJvcHMpKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UgaW5zdGVhZCBvZiBwYXJzaW5nIHRoZSByZXNwb25zZVxuICAgKiBkYXRhLlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBwYXJzZSB0aGUgcmVzcG9uc2UgYm9keSBidXQgc3RpbGwgZ2V0IHRoZSBgUmVzcG9uc2VgXG4gICAqIGluc3RhbmNlLCB5b3UgY2FuIHVzZSB7QGxpbmsgd2l0aFJlc3BvbnNlKCl9LlxuICAgKi9cbiAgYXNSZXNwb25zZSgpOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2VQcm9taXNlLnRoZW4oKHApID0+IHAucmVzcG9uc2UpO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwYXJzZWQgcmVzcG9uc2UgZGF0YSBhbmQgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlLlxuICAgKlxuICAgKiBJZiB5b3UganVzdCB3YW50IHRvIGdldCB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2Ugd2l0aG91dCBwYXJzaW5nIGl0LFxuICAgKiB5b3UgY2FuIHVzZSB7QGxpbmsgYXNSZXNwb25zZSgpfS5cbiAgICovXG4gIGFzeW5jIHdpdGhSZXNwb25zZSgpOiBQcm9taXNlPHsgZGF0YTogVDsgcmVzcG9uc2U6IFJlc3BvbnNlIH0+IHtcbiAgICBjb25zdCBbZGF0YSwgcmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMucGFyc2UoKSwgdGhpcy5hc1Jlc3BvbnNlKCldKTtcbiAgICByZXR1cm4geyBkYXRhLCByZXNwb25zZSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZSgpOiBQcm9taXNlPFQ+IHtcbiAgICBpZiAoIXRoaXMucGFyc2VkUHJvbWlzZSkge1xuICAgICAgdGhpcy5wYXJzZWRQcm9taXNlID0gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbih0aGlzLnBhcnNlUmVzcG9uc2UpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wYXJzZWRQcm9taXNlO1xuICB9XG5cbiAgb3ZlcnJpZGUgdGhlbjxUUmVzdWx0MSA9IFQsIFRSZXN1bHQyID0gbmV2ZXI+KFxuICAgIG9uZnVsZmlsbGVkPzogKCh2YWx1ZTogVCkgPT4gVFJlc3VsdDEgfCBQcm9taXNlTGlrZTxUUmVzdWx0MT4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgICBvbnJlamVjdGVkPzogKChyZWFzb246IGFueSkgPT4gVFJlc3VsdDIgfCBQcm9taXNlTGlrZTxUUmVzdWx0Mj4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgKTogUHJvbWlzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS50aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGNhdGNoPFRSZXN1bHQgPSBuZXZlcj4oXG4gICAgb25yZWplY3RlZD86ICgocmVhc29uOiBhbnkpID0+IFRSZXN1bHQgfCBQcm9taXNlTGlrZTxUUmVzdWx0PikgfCB1bmRlZmluZWQgfCBudWxsLFxuICApOiBQcm9taXNlPFQgfCBUUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS5jYXRjaChvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGZpbmFsbHkob25maW5hbGx5PzogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkIHwgbnVsbCk6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiB0aGlzLnBhcnNlKCkuZmluYWxseShvbmZpbmFsbHkpO1xuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBUElDbGllbnQge1xuICBiYXNlVVJMOiBzdHJpbmc7XG4gIG1heFJldHJpZXM6IG51bWJlcjtcbiAgdGltZW91dDogbnVtYmVyO1xuICBodHRwQWdlbnQ6IEFnZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgZmV0Y2g6IEZldGNoO1xuICBwcm90ZWN0ZWQgaWRlbXBvdGVuY3lIZWFkZXI/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGJhc2VVUkwsXG4gICAgbWF4UmV0cmllcyxcbiAgICB0aW1lb3V0ID0gNjAwMDAwLCAvLyAxMCBtaW51dGVzXG4gICAgaHR0cEFnZW50LFxuICAgIGZldGNoOiBvdmVycmlkZW5GZXRjaCxcbiAgfToge1xuICAgIGJhc2VVUkw6IHN0cmluZztcbiAgICBtYXhSZXRyaWVzPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIHRpbWVvdXQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICBodHRwQWdlbnQ6IEFnZW50IHwgdW5kZWZpbmVkO1xuICAgIGZldGNoOiBGZXRjaCB8IHVuZGVmaW5lZDtcbiAgfSkge1xuICAgIHRoaXMuYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgdGhpcy5tYXhSZXRyaWVzID0gdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIoJ21heFJldHJpZXMnLCBtYXhSZXRyaWVzID8/IE1BWF9SRVRSSUVTKTtcbiAgICB0aGlzLnRpbWVvdXQgPSB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlcigndGltZW91dCcsIHRpbWVvdXQpO1xuICAgIHRoaXMuaHR0cEFnZW50ID0gaHR0cEFnZW50O1xuXG4gICAgdGhpcy5mZXRjaCA9IG92ZXJyaWRlbkZldGNoID8/IGZldGNoO1xuICB9XG5cbiAgcHJvdGVjdGVkIGF1dGhIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gZGVmYXVsdCBoZWFkZXJzLCBmb3IgZXhhbXBsZTpcbiAgICpcbiAgICogIHtcbiAgICogICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMoKSxcbiAgICogICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAxMjMnLFxuICAgKiAgfVxuICAgKi9cbiAgcHJvdGVjdGVkIGRlZmF1bHRIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1VzZXItQWdlbnQnOiB0aGlzLmdldFVzZXJBZ2VudCgpLFxuICAgICAgLi4uZ2V0UGxhdGZvcm1IZWFkZXJzKCksXG4gICAgICAuLi50aGlzLmF1dGhIZWFkZXJzKG9wdHMpLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZGVmYXVsdFF1ZXJ5KCk6IERlZmF1bHRRdWVyeSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gaGVhZGVycyB2YWxpZGF0aW9uOlxuICAgKi9cbiAgcHJvdGVjdGVkIHZhbGlkYXRlSGVhZGVycyhoZWFkZXJzOiBIZWFkZXJzLCBjdXN0b21IZWFkZXJzOiBIZWFkZXJzKSB7fVxuXG4gIHByb3RlY3RlZCBkZWZhdWx0SWRlbXBvdGVuY3lLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYHN0YWlubGVzcy1ub2RlLXJldHJ5LSR7dXVpZDQoKX1gO1xuICB9XG5cbiAgZ2V0PFJlcSBleHRlbmRzIHt9LCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdnZXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHBvc3Q8UmVxIGV4dGVuZHMge30sIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ3Bvc3QnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHBhdGNoPFJlcSBleHRlbmRzIHt9LCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwYXRjaCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcHV0PFJlcSBleHRlbmRzIHt9LCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwdXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIGRlbGV0ZTxSZXEgZXh0ZW5kcyB7fSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgnZGVsZXRlJywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwcml2YXRlIG1ldGhvZFJlcXVlc3Q8UmVxIGV4dGVuZHMge30sIFJzcD4oXG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kLFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4sXG4gICk6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChQcm9taXNlLnJlc29sdmUob3B0cykudGhlbigob3B0cykgPT4gKHsgbWV0aG9kLCBwYXRoLCAuLi5vcHRzIH0pKSk7XG4gIH1cblxuICBnZXRBUElMaXN0PEl0ZW0sIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiA9IEFic3RyYWN0UGFnZTxJdGVtPj4oXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogYW55W10pID0+IFBhZ2VDbGFzcyxcbiAgICBvcHRzPzogUmVxdWVzdE9wdGlvbnM8YW55PixcbiAgKTogUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdEFQSUxpc3QoUGFnZSwgeyBtZXRob2Q6ICdnZXQnLCBwYXRoLCAuLi5vcHRzIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDb250ZW50TGVuZ3RoKGJvZHk6IHVua25vd24pOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5ieXRlTGVuZ3RoKGJvZHksICd1dGY4JykudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBlbmNvZGVkID0gZW5jb2Rlci5lbmNvZGUoYm9keSk7XG4gICAgICAgIHJldHVybiBlbmNvZGVkLmxlbmd0aC50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYnVpbGRSZXF1ZXN0PFJlcSBleHRlbmRzIHt9PihcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4sXG4gICk6IHsgcmVxOiBSZXF1ZXN0SW5pdDsgdXJsOiBzdHJpbmc7IHRpbWVvdXQ6IG51bWJlciB9IHtcbiAgICBjb25zdCB7IG1ldGhvZCwgcGF0aCwgcXVlcnksIGhlYWRlcnM6IGhlYWRlcnMgPSB7fSB9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IGJvZHkgPVxuICAgICAgaXNNdWx0aXBhcnRCb2R5KG9wdGlvbnMuYm9keSkgPyBvcHRpb25zLmJvZHkuYm9keVxuICAgICAgOiBvcHRpb25zLmJvZHkgPyBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHksIG51bGwsIDIpXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgY29udGVudExlbmd0aCA9IHRoaXMuY2FsY3VsYXRlQ29udGVudExlbmd0aChib2R5KTtcblxuICAgIGNvbnN0IHVybCA9IHRoaXMuYnVpbGRVUkwocGF0aCEsIHF1ZXJ5KTtcbiAgICBpZiAoJ3RpbWVvdXQnIGluIG9wdGlvbnMpIHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0Jywgb3B0aW9ucy50aW1lb3V0KTtcbiAgICBjb25zdCB0aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0ID8/IHRoaXMudGltZW91dDtcbiAgICBjb25zdCBodHRwQWdlbnQgPSBvcHRpb25zLmh0dHBBZ2VudCA/PyB0aGlzLmh0dHBBZ2VudCA/PyBnZXREZWZhdWx0QWdlbnQodXJsKTtcbiAgICBjb25zdCBtaW5BZ2VudFRpbWVvdXQgPSB0aW1lb3V0ICsgMTAwMDtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgKGh0dHBBZ2VudCBhcyBhbnkpPy5vcHRpb25zPy50aW1lb3V0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgbWluQWdlbnRUaW1lb3V0ID4gKChodHRwQWdlbnQgYXMgYW55KS5vcHRpb25zLnRpbWVvdXQgPz8gMClcbiAgICApIHtcbiAgICAgIC8vIEFsbG93IGFueSBnaXZlbiByZXF1ZXN0IHRvIGJ1bXAgb3VyIGFnZW50IGFjdGl2ZSBzb2NrZXQgdGltZW91dC5cbiAgICAgIC8vIFRoaXMgbWF5IHNlZW0gc3RyYW5nZSwgYnV0IGxlYWtpbmcgYWN0aXZlIHNvY2tldHMgc2hvdWxkIGJlIHJhcmUgYW5kIG5vdCBwYXJ0aWN1bGFybHkgcHJvYmxlbWF0aWMsXG4gICAgICAvLyBhbmQgd2l0aG91dCBtdXRhdGluZyBhZ2VudCB3ZSB3b3VsZCBuZWVkIHRvIGNyZWF0ZSBtb3JlIG9mIHRoZW0uXG4gICAgICAvLyBUaGlzIHRyYWRlb2ZmIG9wdGltaXplcyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICAoaHR0cEFnZW50IGFzIGFueSkub3B0aW9ucy50aW1lb3V0ID0gbWluQWdlbnRUaW1lb3V0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlkZW1wb3RlbmN5SGVhZGVyICYmIG1ldGhvZCAhPT0gJ2dldCcpIHtcbiAgICAgIGlmICghb3B0aW9ucy5pZGVtcG90ZW5jeUtleSkgb3B0aW9ucy5pZGVtcG90ZW5jeUtleSA9IHRoaXMuZGVmYXVsdElkZW1wb3RlbmN5S2V5KCk7XG4gICAgICBoZWFkZXJzW3RoaXMuaWRlbXBvdGVuY3lIZWFkZXJdID0gb3B0aW9ucy5pZGVtcG90ZW5jeUtleTtcbiAgICB9XG5cbiAgICBjb25zdCByZXFIZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgLi4uKGNvbnRlbnRMZW5ndGggJiYgeyAnQ29udGVudC1MZW5ndGgnOiBjb250ZW50TGVuZ3RoIH0pLFxuICAgICAgLi4udGhpcy5kZWZhdWx0SGVhZGVycyhvcHRpb25zKSxcbiAgICAgIC4uLmhlYWRlcnMsXG4gICAgfTtcbiAgICAvLyBsZXQgYnVpbHRpbiBmZXRjaCBzZXQgdGhlIENvbnRlbnQtVHlwZSBmb3IgbXVsdGlwYXJ0IGJvZGllc1xuICAgIGlmIChpc011bHRpcGFydEJvZHkob3B0aW9ucy5ib2R5KSAmJiAhZmV0Y2hJc1BvbHlmaWxsZWQpIHtcbiAgICAgIGRlbGV0ZSByZXFIZWFkZXJzWydDb250ZW50LVR5cGUnXTtcbiAgICB9XG5cbiAgICAvLyBTdHJpcCBhbnkgaGVhZGVycyBiZWluZyBleHBsaWNpdGx5IG9taXR0ZWQgd2l0aCBudWxsXG4gICAgT2JqZWN0LmtleXMocmVxSGVhZGVycykuZm9yRWFjaCgoa2V5KSA9PiByZXFIZWFkZXJzW2tleV0gPT09IG51bGwgJiYgZGVsZXRlIHJlcUhlYWRlcnNba2V5XSk7XG5cbiAgICBjb25zdCByZXE6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgbWV0aG9kLFxuICAgICAgLi4uKGJvZHkgJiYgeyBib2R5OiBib2R5IGFzIGFueSB9KSxcbiAgICAgIGhlYWRlcnM6IHJlcUhlYWRlcnMsXG4gICAgICAuLi4oaHR0cEFnZW50ICYmIHsgYWdlbnQ6IGh0dHBBZ2VudCB9KSxcbiAgICAgIC8vIEB0cy1pZ25vcmUgbm9kZS1mZXRjaCB1c2VzIGEgY3VzdG9tIEFib3J0U2lnbmFsIHR5cGUgdGhhdCBpc1xuICAgICAgLy8gbm90IGNvbXBhdGlibGUgd2l0aCBzdGFuZGFyZCB3ZWIgdHlwZXNcbiAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwgPz8gbnVsbCxcbiAgICB9O1xuXG4gICAgdGhpcy52YWxpZGF0ZUhlYWRlcnMocmVxSGVhZGVycywgaGVhZGVycyk7XG5cbiAgICByZXR1cm4geyByZXEsIHVybCwgdGltZW91dCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYXMgYSBjYWxsYmFjayBmb3IgbXV0YXRpbmcgdGhlIGdpdmVuIGBSZXF1ZXN0SW5pdGAgb2JqZWN0LlxuICAgKlxuICAgKiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FzZXMgd2hlcmUgeW91IHdhbnQgdG8gYWRkIGNlcnRhaW4gaGVhZGVycyBiYXNlZCBvZmYgb2ZcbiAgICogdGhlIHJlcXVlc3QgcHJvcGVydGllcywgZS5nLiBgbWV0aG9kYCBvciBgdXJsYC5cbiAgICovXG4gIHByb3RlY3RlZCBhc3luYyBwcmVwYXJlUmVxdWVzdChcbiAgICByZXF1ZXN0OiBSZXF1ZXN0SW5pdCxcbiAgICB7IHVybCwgb3B0aW9ucyB9OiB7IHVybDogc3RyaW5nOyBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zIH0sXG4gICk6IFByb21pc2U8dm9pZD4ge31cblxuICBwcm90ZWN0ZWQgcGFyc2VIZWFkZXJzKGhlYWRlcnM6IEhlYWRlcnNJbml0IHwgbnVsbCB8IHVuZGVmaW5lZCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIHJldHVybiAoXG4gICAgICAhaGVhZGVycyA/IHt9XG4gICAgICA6IFN5bWJvbC5pdGVyYXRvciBpbiBoZWFkZXJzID9cbiAgICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKEFycmF5LmZyb20oaGVhZGVycyBhcyBJdGVyYWJsZTxzdHJpbmdbXT4pLm1hcCgoaGVhZGVyKSA9PiBbLi4uaGVhZGVyXSkpXG4gICAgICA6IHsgLi4uaGVhZGVycyB9XG4gICAgKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBtYWtlU3RhdHVzRXJyb3IoXG4gICAgc3RhdHVzOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgZXJyb3I6IE9iamVjdCB8IHVuZGVmaW5lZCxcbiAgICBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKSB7XG4gICAgcmV0dXJuIEFQSUVycm9yLmdlbmVyYXRlKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICB9XG5cbiAgcmVxdWVzdDxSZXEgZXh0ZW5kcyB7fSwgUnNwPihcbiAgICBvcHRpb25zOiBQcm9taXNlT3JWYWx1ZTxGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4+LFxuICAgIHJlbWFpbmluZ1JldHJpZXM6IG51bWJlciB8IG51bGwgPSBudWxsLFxuICApOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiBuZXcgQVBJUHJvbWlzZSh0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIHJlbWFpbmluZ1JldHJpZXMpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3QoXG4gICAgb3B0aW9uc0lucHV0OiBQcm9taXNlT3JWYWx1ZTxGaW5hbFJlcXVlc3RPcHRpb25zPixcbiAgICByZXRyaWVzUmVtYWluaW5nOiBudW1iZXIgfCBudWxsLFxuICApOiBQcm9taXNlPEFQSVJlc3BvbnNlUHJvcHM+IHtcbiAgICBjb25zdCBvcHRpb25zID0gYXdhaXQgb3B0aW9uc0lucHV0O1xuICAgIGlmIChyZXRyaWVzUmVtYWluaW5nID09IG51bGwpIHtcbiAgICAgIHJldHJpZXNSZW1haW5pbmcgPSBvcHRpb25zLm1heFJldHJpZXMgPz8gdGhpcy5tYXhSZXRyaWVzO1xuICAgIH1cblxuICAgIGNvbnN0IHsgcmVxLCB1cmwsIHRpbWVvdXQgfSA9IHRoaXMuYnVpbGRSZXF1ZXN0KG9wdGlvbnMpO1xuXG4gICAgYXdhaXQgdGhpcy5wcmVwYXJlUmVxdWVzdChyZXEsIHsgdXJsLCBvcHRpb25zIH0pO1xuXG4gICAgZGVidWcoJ3JlcXVlc3QnLCB1cmwsIG9wdGlvbnMsIHJlcS5oZWFkZXJzKTtcblxuICAgIGlmIChvcHRpb25zLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2hXaXRoVGltZW91dCh1cmwsIHJlcSwgdGltZW91dCwgY29udHJvbGxlcikuY2F0Y2goY2FzdFRvRXJyb3IpO1xuXG4gICAgaWYgKHJlc3BvbnNlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGlmIChvcHRpb25zLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXRyaWVzUmVtYWluaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJldHJ5UmVxdWVzdChvcHRpb25zLCByZXRyaWVzUmVtYWluaW5nKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXNwb25zZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IoKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBBUElDb25uZWN0aW9uRXJyb3IoeyBjYXVzZTogcmVzcG9uc2UgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gY3JlYXRlUmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgaWYgKHJldHJpZXNSZW1haW5pbmcgJiYgdGhpcy5zaG91bGRSZXRyeShyZXNwb25zZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cnlSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcsIHJlc3BvbnNlSGVhZGVycyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVyclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJ1Vua25vd24nKTtcbiAgICAgIGNvbnN0IGVyckpTT04gPSBzYWZlSlNPTihlcnJUZXh0KTtcbiAgICAgIGNvbnN0IGVyck1lc3NhZ2UgPSBlcnJKU09OID8gdW5kZWZpbmVkIDogZXJyVGV4dDtcblxuICAgICAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCB1cmwsIHJlc3BvbnNlSGVhZGVycywgZXJyTWVzc2FnZSk7XG5cbiAgICAgIGNvbnN0IGVyciA9IHRoaXMubWFrZVN0YXR1c0Vycm9yKHJlc3BvbnNlLnN0YXR1cywgZXJySlNPTiwgZXJyTWVzc2FnZSwgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICByZXR1cm4geyByZXNwb25zZSwgb3B0aW9ucywgY29udHJvbGxlciB9O1xuICB9XG5cbiAgcmVxdWVzdEFQSUxpc3Q8SXRlbSA9IHVua25vd24sIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiA9IEFic3RyYWN0UGFnZTxJdGVtPj4oXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIEFic3RyYWN0UGFnZT4pID0+IFBhZ2VDbGFzcyxcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zLFxuICApOiBQYWdlUHJvbWlzZTxQYWdlQ2xhc3MsIEl0ZW0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5tYWtlUmVxdWVzdChvcHRpb25zLCBudWxsKTtcbiAgICByZXR1cm4gbmV3IFBhZ2VQcm9taXNlPFBhZ2VDbGFzcywgSXRlbT4odGhpcywgcmVxdWVzdCwgUGFnZSk7XG4gIH1cblxuICBidWlsZFVSTDxSZXEgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ocGF0aDogc3RyaW5nLCBxdWVyeTogUmVxIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXJsID1cbiAgICAgIGlzQWJzb2x1dGVVUkwocGF0aCkgP1xuICAgICAgICBuZXcgVVJMKHBhdGgpXG4gICAgICA6IG5ldyBVUkwodGhpcy5iYXNlVVJMICsgKHRoaXMuYmFzZVVSTC5lbmRzV2l0aCgnLycpICYmIHBhdGguc3RhcnRzV2l0aCgnLycpID8gcGF0aC5zbGljZSgxKSA6IHBhdGgpKTtcblxuICAgIGNvbnN0IGRlZmF1bHRRdWVyeSA9IHRoaXMuZGVmYXVsdFF1ZXJ5KCk7XG4gICAgaWYgKCFpc0VtcHR5T2JqKGRlZmF1bHRRdWVyeSkpIHtcbiAgICAgIHF1ZXJ5ID0geyAuLi5kZWZhdWx0UXVlcnksIC4uLnF1ZXJ5IH0gYXMgUmVxO1xuICAgIH1cblxuICAgIGlmIChxdWVyeSkge1xuICAgICAgdXJsLnNlYXJjaCA9IHRoaXMuc3RyaW5naWZ5UXVlcnkocXVlcnkpO1xuICAgIH1cblxuICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzdHJpbmdpZnlRdWVyeShxdWVyeTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBzdHJpbmcge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhxdWVyeSlcbiAgICAgIC5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIHJldHVybiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT1gO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IHN0cmluZ2lmeSB0eXBlICR7dHlwZW9mIHZhbHVlfTsgRXhwZWN0ZWQgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9yIG51bGwuIElmIHlvdSBuZWVkIHRvIHBhc3MgbmVzdGVkIHF1ZXJ5IHBhcmFtZXRlcnMsIHlvdSBjYW4gbWFudWFsbHkgZW5jb2RlIHRoZW0sIGUuZy4geyBxdWVyeTogeyAnZm9vW2tleTFdJzogdmFsdWUxLCAnZm9vW2tleTJdJzogdmFsdWUyIH0gfSwgYW5kIHBsZWFzZSBvcGVuIGEgR2l0SHViIGlzc3VlIHJlcXVlc3RpbmcgYmV0dGVyIHN1cHBvcnQgZm9yIHlvdXIgdXNlIGNhc2UuYCxcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAuam9pbignJicpO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hXaXRoVGltZW91dChcbiAgICB1cmw6IFJlcXVlc3RJbmZvLFxuICAgIGluaXQ6IFJlcXVlc3RJbml0IHwgdW5kZWZpbmVkLFxuICAgIG1zOiBudW1iZXIsXG4gICAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLFxuICApOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgY29uc3QgeyBzaWduYWwsIC4uLm9wdGlvbnMgfSA9IGluaXQgfHwge307XG4gICAgaWYgKHNpZ25hbCkgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4gY29udHJvbGxlci5hYm9ydCgpKTtcblxuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgbXMpO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWVzdENsaWVudCgpXG4gICAgICAuZmV0Y2godXJsLCB7IHNpZ25hbDogY29udHJvbGxlci5zaWduYWwgYXMgYW55LCAuLi5vcHRpb25zIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldFJlcXVlc3RDbGllbnQoKTogUmVxdWVzdENsaWVudCB7XG4gICAgcmV0dXJuIHsgZmV0Y2g6IHRoaXMuZmV0Y2ggfTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkUmV0cnkocmVzcG9uc2U6IFJlc3BvbnNlKTogYm9vbGVhbiB7XG4gICAgLy8gTm90ZSB0aGlzIGlzIG5vdCBhIHN0YW5kYXJkIGhlYWRlci5cbiAgICBjb25zdCBzaG91bGRSZXRyeUhlYWRlciA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LXNob3VsZC1yZXRyeScpO1xuXG4gICAgLy8gSWYgdGhlIHNlcnZlciBleHBsaWNpdGx5IHNheXMgd2hldGhlciBvciBub3QgdG8gcmV0cnksIG9iZXkuXG4gICAgaWYgKHNob3VsZFJldHJ5SGVhZGVyID09PSAndHJ1ZScpIHJldHVybiB0cnVlO1xuICAgIGlmIChzaG91bGRSZXRyeUhlYWRlciA9PT0gJ2ZhbHNlJykgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gUmV0cnkgb24gbG9jayB0aW1lb3V0cy5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gUmV0cnkgb24gcmF0ZSBsaW1pdHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IGludGVybmFsIGVycm9ycy5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDUwMCkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJldHJ5UmVxdWVzdChcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zLFxuICAgIHJldHJpZXNSZW1haW5pbmc6IG51bWJlcixcbiAgICByZXNwb25zZUhlYWRlcnM/OiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApOiBQcm9taXNlPEFQSVJlc3BvbnNlUHJvcHM+IHtcbiAgICByZXRyaWVzUmVtYWluaW5nIC09IDE7XG5cbiAgICAvLyBBYm91dCB0aGUgUmV0cnktQWZ0ZXIgaGVhZGVyOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvUmV0cnktQWZ0ZXJcbiAgICAvL1xuICAgIC8vIFRPRE86IHdlIG1heSB3YW50IHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgaGVhZGVyIGlzIHVzaW5nIHRoZSBodHRwLWRhdGUgc3ludGF4OiBcIlJldHJ5LUFmdGVyOiA8aHR0cC1kYXRlPlwiLlxuICAgIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvUmV0cnktQWZ0ZXIjc3ludGF4IGZvciBkZXRhaWxzLlxuICAgIGNvbnN0IHJldHJ5QWZ0ZXIgPSBwYXJzZUludChyZXNwb25zZUhlYWRlcnM/LlsncmV0cnktYWZ0ZXInXSB8fCAnJyk7XG5cbiAgICBjb25zdCBtYXhSZXRyaWVzID0gb3B0aW9ucy5tYXhSZXRyaWVzID8/IHRoaXMubWF4UmV0cmllcztcbiAgICBjb25zdCB0aW1lb3V0ID0gdGhpcy5jYWxjdWxhdGVSZXRyeVRpbWVvdXRTZWNvbmRzKHJldHJpZXNSZW1haW5pbmcsIHJldHJ5QWZ0ZXIsIG1heFJldHJpZXMpICogMTAwMDtcbiAgICBhd2FpdCBzbGVlcCh0aW1lb3V0KTtcblxuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcpO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVSZXRyeVRpbWVvdXRTZWNvbmRzKFxuICAgIHJldHJpZXNSZW1haW5pbmc6IG51bWJlcixcbiAgICByZXRyeUFmdGVyOiBudW1iZXIsXG4gICAgbWF4UmV0cmllczogbnVtYmVyLFxuICApOiBudW1iZXIge1xuICAgIGNvbnN0IGluaXRpYWxSZXRyeURlbGF5ID0gMC41O1xuICAgIGNvbnN0IG1heFJldHJ5RGVsYXkgPSAyO1xuXG4gICAgLy8gSWYgdGhlIEFQSSBhc2tzIHVzIHRvIHdhaXQgYSBjZXJ0YWluIGFtb3VudCBvZiB0aW1lIChhbmQgaXQncyBhIHJlYXNvbmFibGUgYW1vdW50KSxcbiAgICAvLyBqdXN0IGRvIHdoYXQgaXQgc2F5cy5cbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihyZXRyeUFmdGVyKSAmJiByZXRyeUFmdGVyIDw9IDYwKSB7XG4gICAgICByZXR1cm4gcmV0cnlBZnRlcjtcbiAgICB9XG5cbiAgICBjb25zdCBudW1SZXRyaWVzID0gbWF4UmV0cmllcyAtIHJldHJpZXNSZW1haW5pbmc7XG5cbiAgICAvLyBBcHBseSBleHBvbmVudGlhbCBiYWNrb2ZmLCBidXQgbm90IG1vcmUgdGhhbiB0aGUgbWF4LlxuICAgIGNvbnN0IHNsZWVwU2Vjb25kcyA9IE1hdGgubWluKGluaXRpYWxSZXRyeURlbGF5ICogTWF0aC5wb3cobnVtUmV0cmllcyAtIDEsIDIpLCBtYXhSZXRyeURlbGF5KTtcblxuICAgIC8vIEFwcGx5IHNvbWUgaml0dGVyLCBwbHVzLW9yLW1pbnVzIGhhbGYgYSBzZWNvbmQuXG4gICAgY29uc3Qgaml0dGVyID0gTWF0aC5yYW5kb20oKSAtIDAuNTtcblxuICAgIHJldHVybiBzbGVlcFNlY29uZHMgKyBqaXR0ZXI7XG4gIH1cblxuICBwcml2YXRlIGdldFVzZXJBZ2VudCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9L0pTICR7VkVSU0lPTn1gO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBUElSZXNvdXJjZSB7XG4gIHByb3RlY3RlZCBjbGllbnQ6IEFQSUNsaWVudDtcbiAgY29uc3RydWN0b3IoY2xpZW50OiBBUElDbGllbnQpIHtcbiAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcblxuICAgIHRoaXMuZ2V0ID0gY2xpZW50LmdldC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wb3N0ID0gY2xpZW50LnBvc3QuYmluZChjbGllbnQpO1xuICAgIHRoaXMucGF0Y2ggPSBjbGllbnQucGF0Y2guYmluZChjbGllbnQpO1xuICAgIHRoaXMucHV0ID0gY2xpZW50LnB1dC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5kZWxldGUgPSBjbGllbnQuZGVsZXRlLmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLmdldEFQSUxpc3QgPSBjbGllbnQuZ2V0QVBJTGlzdC5iaW5kKGNsaWVudCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0OiBBUElDbGllbnRbJ2dldCddO1xuICBwcm90ZWN0ZWQgcG9zdDogQVBJQ2xpZW50Wydwb3N0J107XG4gIHByb3RlY3RlZCBwYXRjaDogQVBJQ2xpZW50WydwYXRjaCddO1xuICBwcm90ZWN0ZWQgcHV0OiBBUElDbGllbnRbJ3B1dCddO1xuICBwcm90ZWN0ZWQgZGVsZXRlOiBBUElDbGllbnRbJ2RlbGV0ZSddO1xuICBwcm90ZWN0ZWQgZ2V0QVBJTGlzdDogQVBJQ2xpZW50WydnZXRBUElMaXN0J107XG59XG5cbmV4cG9ydCB0eXBlIFBhZ2VJbmZvID0geyB1cmw6IFVSTCB9IHwgeyBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCB9O1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RQYWdlPEl0ZW0+IGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxJdGVtPiB7XG4gICNjbGllbnQ6IEFQSUNsaWVudDtcbiAgcHJvdGVjdGVkIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG5cbiAgcHJvdGVjdGVkIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgcHJvdGVjdGVkIGJvZHk6IHVua25vd247XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBBUElDbGllbnQsIHJlc3BvbnNlOiBSZXNwb25zZSwgYm9keTogdW5rbm93biwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHRoaXMuI2NsaWVudCA9IGNsaWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLmJvZHkgPSBib2R5O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBuZXh0UGFnZUluZm8gaW5zdGVhZFxuICAgKi9cbiAgYWJzdHJhY3QgbmV4dFBhZ2VQYXJhbXMoKTogUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4gfCBudWxsO1xuICBhYnN0cmFjdCBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsO1xuXG4gIGFic3RyYWN0IGdldFBhZ2luYXRlZEl0ZW1zKCk6IEl0ZW1bXTtcblxuICBoYXNOZXh0UGFnZSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ2V0UGFnaW5hdGVkSXRlbXMoKTtcbiAgICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLm5leHRQYWdlSW5mbygpICE9IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXROZXh0UGFnZSgpOiBQcm9taXNlPHRoaXM+IHtcbiAgICBjb25zdCBuZXh0SW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFuZXh0SW5mbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnTm8gbmV4dCBwYWdlIGV4cGVjdGVkOyBwbGVhc2UgY2hlY2sgYC5oYXNOZXh0UGFnZSgpYCBiZWZvcmUgY2FsbGluZyBgLmdldE5leHRQYWdlKClgLicsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBuZXh0T3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zIH07XG4gICAgaWYgKCdwYXJhbXMnIGluIG5leHRJbmZvKSB7XG4gICAgICBuZXh0T3B0aW9ucy5xdWVyeSA9IHsgLi4ubmV4dE9wdGlvbnMucXVlcnksIC4uLm5leHRJbmZvLnBhcmFtcyB9O1xuICAgIH0gZWxzZSBpZiAoJ3VybCcgaW4gbmV4dEluZm8pIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IFsuLi5PYmplY3QuZW50cmllcyhuZXh0T3B0aW9ucy5xdWVyeSB8fCB7fSksIC4uLm5leHRJbmZvLnVybC5zZWFyY2hQYXJhbXMuZW50cmllcygpXTtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHBhcmFtcykge1xuICAgICAgICBuZXh0SW5mby51cmwuc2VhcmNoUGFyYW1zLnNldChrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0gdW5kZWZpbmVkO1xuICAgICAgbmV4dE9wdGlvbnMucGF0aCA9IG5leHRJbmZvLnVybC50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4jY2xpZW50LnJlcXVlc3RBUElMaXN0KHRoaXMuY29uc3RydWN0b3IgYXMgYW55LCBuZXh0T3B0aW9ucyk7XG4gIH1cblxuICBhc3luYyAqaXRlclBhZ2VzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgIGxldCBwYWdlOiBBYnN0cmFjdFBhZ2U8SXRlbT4gPSB0aGlzO1xuICAgIHlpZWxkIHBhZ2U7XG4gICAgd2hpbGUgKHBhZ2UuaGFzTmV4dFBhZ2UoKSkge1xuICAgICAgcGFnZSA9IGF3YWl0IHBhZ2UuZ2V0TmV4dFBhZ2UoKTtcbiAgICAgIHlpZWxkIHBhZ2U7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgKltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBwYWdlIG9mIHRoaXMuaXRlclBhZ2VzKCkpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBwYWdlLmdldFBhZ2luYXRlZEl0ZW1zKCkpIHtcbiAgICAgICAgeWllbGQgaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHN1YmNsYXNzIG9mIFByb21pc2Ugd2lsbCByZXNvbHZlIHRvIGFuIGluc3RhbnRpYXRlZCBQYWdlIG9uY2UgdGhlIHJlcXVlc3QgY29tcGxldGVzLlxuICpcbiAqIEl0IGFsc28gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlIHRvIGFsbG93IGF1dG8tcGFnaW5hdGluZyBpdGVyYXRpb24gb24gYW4gdW5hd2FpdGVkIGxpc3QgY2FsbCwgZWc6XG4gKlxuICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAqICAgICAgY29uc29sZS5sb2coaXRlbSlcbiAqICAgIH1cbiAqL1xuZXhwb3J0IGNsYXNzIFBhZ2VQcm9taXNlPFxuICAgIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPixcbiAgICBJdGVtID0gUmV0dXJuVHlwZTxQYWdlQ2xhc3NbJ2dldFBhZ2luYXRlZEl0ZW1zJ10+W251bWJlcl0sXG4gID5cbiAgZXh0ZW5kcyBBUElQcm9taXNlPFBhZ2VDbGFzcz5cbiAgaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+XG57XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNsaWVudDogQVBJQ2xpZW50LFxuICAgIHJlcXVlc3Q6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4sXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIEFic3RyYWN0UGFnZT4pID0+IFBhZ2VDbGFzcyxcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICByZXF1ZXN0LFxuICAgICAgYXN5bmMgKHByb3BzKSA9PiBuZXcgUGFnZShjbGllbnQsIHByb3BzLnJlc3BvbnNlLCBhd2FpdCBkZWZhdWx0UGFyc2VSZXNwb25zZShwcm9wcyksIHByb3BzLm9wdGlvbnMpLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWxsb3cgYXV0by1wYWdpbmF0aW5nIGl0ZXJhdGlvbiBvbiBhbiB1bmF3YWl0ZWQgbGlzdCBjYWxsLCBlZzpcbiAgICpcbiAgICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAgICogICAgICBjb25zb2xlLmxvZyhpdGVtKVxuICAgKiAgICB9XG4gICAqL1xuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgdGhpcztcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgcGFnZSkge1xuICAgICAgeWllbGQgaXRlbTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlc3BvbnNlSGVhZGVycyA9IChcbiAgaGVhZGVyczogQXdhaXRlZDxSZXR1cm5UeXBlPEZldGNoPj5bJ2hlYWRlcnMnXSxcbik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPT4ge1xuICByZXR1cm4gbmV3IFByb3h5KFxuICAgIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGhlYWRlcnMuZW50cmllcygpLFxuICAgICksXG4gICAge1xuICAgICAgZ2V0KHRhcmdldCwgbmFtZSkge1xuICAgICAgICBjb25zdCBrZXkgPSBuYW1lLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiB0YXJnZXRba2V5LnRvTG93ZXJDYXNlKCldIHx8IHRhcmdldFtrZXldO1xuICAgICAgfSxcbiAgICB9LFxuICApO1xufTtcblxudHlwZSBIVFRQTWV0aG9kID0gJ2dldCcgfCAncG9zdCcgfCAncHV0JyB8ICdwYXRjaCcgfCAnZGVsZXRlJztcblxuZXhwb3J0IHR5cGUgUmVxdWVzdENsaWVudCA9IHsgZmV0Y2g6IEZldGNoIH07XG5leHBvcnQgdHlwZSBIZWFkZXJzID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZD47XG5leHBvcnQgdHlwZSBEZWZhdWx0UXVlcnkgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+O1xuZXhwb3J0IHR5cGUgS2V5c0VudW08VD4gPSB7IFtQIGluIGtleW9mIFJlcXVpcmVkPFQ+XTogdHJ1ZSB9O1xuXG5leHBvcnQgdHlwZSBSZXF1ZXN0T3B0aW9uczxSZXEgZXh0ZW5kcyB7fSA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgUmVhZGFibGU+ID0ge1xuICBtZXRob2Q/OiBIVFRQTWV0aG9kO1xuICBwYXRoPzogc3RyaW5nO1xuICBxdWVyeT86IFJlcSB8IHVuZGVmaW5lZDtcbiAgYm9keT86IFJlcSB8IHVuZGVmaW5lZDtcbiAgaGVhZGVycz86IEhlYWRlcnMgfCB1bmRlZmluZWQ7XG5cbiAgbWF4UmV0cmllcz86IG51bWJlcjtcbiAgc3RyZWFtPzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgdGltZW91dD86IG51bWJlcjtcbiAgaHR0cEFnZW50PzogQWdlbnQ7XG4gIHNpZ25hbD86IEFib3J0U2lnbmFsIHwgdW5kZWZpbmVkIHwgbnVsbDtcbiAgaWRlbXBvdGVuY3lLZXk/OiBzdHJpbmc7XG59O1xuXG4vLyBUaGlzIGlzIHJlcXVpcmVkIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSBpZiBhIGdpdmVuIG9iamVjdCBtYXRjaGVzIHRoZSBSZXF1ZXN0T3B0aW9uc1xuLy8gdHlwZSBhdCBydW50aW1lLiBXaGlsZSB0aGlzIHJlcXVpcmVzIGR1cGxpY2F0aW9uLCBpdCBpcyBlbmZvcmNlZCBieSB0aGUgVHlwZVNjcmlwdFxuLy8gY29tcGlsZXIgc3VjaCB0aGF0IGFueSBtaXNzaW5nIC8gZXh0cmFuZW91cyBrZXlzIHdpbGwgY2F1c2UgYW4gZXJyb3IuXG5jb25zdCByZXF1ZXN0T3B0aW9uc0tleXM6IEtleXNFbnVtPFJlcXVlc3RPcHRpb25zPiA9IHtcbiAgbWV0aG9kOiB0cnVlLFxuICBwYXRoOiB0cnVlLFxuICBxdWVyeTogdHJ1ZSxcbiAgYm9keTogdHJ1ZSxcbiAgaGVhZGVyczogdHJ1ZSxcblxuICBtYXhSZXRyaWVzOiB0cnVlLFxuICBzdHJlYW06IHRydWUsXG4gIHRpbWVvdXQ6IHRydWUsXG4gIGh0dHBBZ2VudDogdHJ1ZSxcbiAgc2lnbmFsOiB0cnVlLFxuICBpZGVtcG90ZW5jeUtleTogdHJ1ZSxcbn07XG5cbmV4cG9ydCBjb25zdCBpc1JlcXVlc3RPcHRpb25zID0gKG9iajogdW5rbm93bik6IG9iaiBpcyBSZXF1ZXN0T3B0aW9ucyA9PiB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiZcbiAgICBvYmogIT09IG51bGwgJiZcbiAgICAhaXNFbXB0eU9iaihvYmopICYmXG4gICAgT2JqZWN0LmtleXMob2JqKS5ldmVyeSgoaykgPT4gaGFzT3duKHJlcXVlc3RPcHRpb25zS2V5cywgaykpXG4gICk7XG59O1xuXG5leHBvcnQgdHlwZSBGaW5hbFJlcXVlc3RPcHRpb25zPFJlcSBleHRlbmRzIHt9ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBSZWFkYWJsZT4gPSBSZXF1ZXN0T3B0aW9uczxSZXE+ICYge1xuICBtZXRob2Q6IEhUVFBNZXRob2Q7XG4gIHBhdGg6IHN0cmluZztcbn07XG5cbmRlY2xhcmUgY29uc3QgRGVubzogYW55O1xuZGVjbGFyZSBjb25zdCBFZGdlUnVudGltZTogYW55O1xudHlwZSBBcmNoID0gJ3gzMicgfCAneDY0JyB8ICdhcm0nIHwgJ2FybTY0JyB8IGBvdGhlcjoke3N0cmluZ31gIHwgJ3Vua25vd24nO1xudHlwZSBQbGF0Zm9ybU5hbWUgPVxuICB8ICdNYWNPUydcbiAgfCAnTGludXgnXG4gIHwgJ1dpbmRvd3MnXG4gIHwgJ0ZyZWVCU0QnXG4gIHwgJ09wZW5CU0QnXG4gIHwgJ2lPUydcbiAgfCAnQW5kcm9pZCdcbiAgfCBgT3RoZXI6JHtzdHJpbmd9YFxuICB8ICdVbmtub3duJztcbnR5cGUgQnJvd3NlciA9ICdpZScgfCAnZWRnZScgfCAnY2hyb21lJyB8ICdmaXJlZm94JyB8ICdzYWZhcmknO1xudHlwZSBQbGF0Zm9ybVByb3BlcnRpZXMgPSB7XG4gICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJztcbiAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IHN0cmluZztcbiAgJ1gtU3RhaW5sZXNzLU9TJzogUGxhdGZvcm1OYW1lO1xuICAnWC1TdGFpbmxlc3MtQXJjaCc6IEFyY2g7XG4gICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ25vZGUnIHwgJ2Rlbm8nIHwgJ2VkZ2UnIHwgYGJyb3dzZXI6JHtCcm93c2VyfWAgfCAndW5rbm93bic7XG4gICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBzdHJpbmc7XG59O1xuY29uc3QgZ2V0UGxhdGZvcm1Qcm9wZXJ0aWVzID0gKCk6IFBsYXRmb3JtUHJvcGVydGllcyA9PiB7XG4gIGlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcgJiYgRGVuby5idWlsZCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogbm9ybWFsaXplUGxhdGZvcm0oRGVuby5idWlsZC5vcyksXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IG5vcm1hbGl6ZUFyY2goRGVuby5idWlsZC5hcmNoKSxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ2Rlbm8nLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IERlbm8udmVyc2lvbixcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgRWRnZVJ1bnRpbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiBgb3RoZXI6JHtFZGdlUnVudGltZX1gLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZWRnZScsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogcHJvY2Vzcy52ZXJzaW9uLFxuICAgIH07XG4gIH1cbiAgLy8gQ2hlY2sgaWYgTm9kZS5qc1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MgOiAwKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogbm9ybWFsaXplUGxhdGZvcm0ocHJvY2Vzcy5wbGF0Zm9ybSksXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IG5vcm1hbGl6ZUFyY2gocHJvY2Vzcy5hcmNoKSxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ25vZGUnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IHByb2Nlc3MudmVyc2lvbixcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgYnJvd3NlckluZm8gPSBnZXRCcm93c2VySW5mbygpO1xuICBpZiAoYnJvd3NlckluZm8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6ICd1bmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogYGJyb3dzZXI6JHticm93c2VySW5mby5icm93c2VyfWAsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogYnJvd3NlckluZm8udmVyc2lvbixcbiAgICB9O1xuICB9XG5cbiAgLy8gVE9ETyBhZGQgc3VwcG9ydCBmb3IgQ2xvdWRmbGFyZSB3b3JrZXJzLCBldGMuXG4gIHJldHVybiB7XG4gICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICdYLVN0YWlubGVzcy1PUyc6ICdVbmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtQXJjaCc6ICd1bmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICd1bmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogJ3Vua25vd24nLFxuICB9O1xufTtcblxudHlwZSBCcm93c2VySW5mbyA9IHtcbiAgYnJvd3NlcjogQnJvd3NlcjtcbiAgdmVyc2lvbjogc3RyaW5nO1xufTtcblxuZGVjbGFyZSBjb25zdCBuYXZpZ2F0b3I6IHsgdXNlckFnZW50OiBzdHJpbmcgfSB8IHVuZGVmaW5lZDtcblxuLy8gTm90ZTogbW9kaWZpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vSlMtRGV2VG9vbHMvaG9zdC1lbnZpcm9ubWVudC9ibG9iL2IxYWI3OWVjZGUzN2RiNWQ2ZTE2M2MwNTBlNTRmZTdkMjg3ZDdjOTIvc3JjL2lzb21vcnBoaWMuYnJvd3Nlci50c1xuZnVuY3Rpb24gZ2V0QnJvd3NlckluZm8oKTogQnJvd3NlckluZm8gfCBudWxsIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIE5PVEU6IFRoZSBvcmRlciBtYXR0ZXJzIGhlcmUhXG4gIGNvbnN0IGJyb3dzZXJQYXR0ZXJucyA9IFtcbiAgICB7IGtleTogJ2VkZ2UnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvRWRnZSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnaWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvTVNJRSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnaWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvVHJpZGVudCg/Oi4qcnZcXDooXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnY2hyb21lJyBhcyBjb25zdCwgcGF0dGVybjogL0Nocm9tZSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnZmlyZWZveCcgYXMgY29uc3QsIHBhdHRlcm46IC9GaXJlZm94KD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdzYWZhcmknIGFzIGNvbnN0LCBwYXR0ZXJuOiAvKD86VmVyc2lvblxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/KD86XFxXK01vYmlsZVxcUyopP1xcVytTYWZhcmkvIH0sXG4gIF07XG5cbiAgLy8gRmluZCB0aGUgRklSU1QgbWF0Y2hpbmcgYnJvd3NlclxuICBmb3IgKGNvbnN0IHsga2V5LCBwYXR0ZXJuIH0gb2YgYnJvd3NlclBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBtYWpvciA9IG1hdGNoWzFdIHx8IDA7XG4gICAgICBjb25zdCBtaW5vciA9IG1hdGNoWzJdIHx8IDA7XG4gICAgICBjb25zdCBwYXRjaCA9IG1hdGNoWzNdIHx8IDA7XG5cbiAgICAgIHJldHVybiB7IGJyb3dzZXI6IGtleSwgdmVyc2lvbjogYCR7bWFqb3J9LiR7bWlub3J9LiR7cGF0Y2h9YCB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5jb25zdCBub3JtYWxpemVBcmNoID0gKGFyY2g6IHN0cmluZyk6IEFyY2ggPT4ge1xuICAvLyBOb2RlIGRvY3M6XG4gIC8vIC0gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc2FyY2hcbiAgLy8gRGVubyBkb2NzOlxuICAvLyAtIGh0dHBzOi8vZG9jLmRlbm8ubGFuZC9kZW5vL3N0YWJsZS9+L0Rlbm8uYnVpbGRcbiAgaWYgKGFyY2ggPT09ICd4MzInKSByZXR1cm4gJ3gzMic7XG4gIGlmIChhcmNoID09PSAneDg2XzY0JyB8fCBhcmNoID09PSAneDY0JykgcmV0dXJuICd4NjQnO1xuICBpZiAoYXJjaCA9PT0gJ2FybScpIHJldHVybiAnYXJtJztcbiAgaWYgKGFyY2ggPT09ICdhYXJjaDY0JyB8fCBhcmNoID09PSAnYXJtNjQnKSByZXR1cm4gJ2FybTY0JztcbiAgaWYgKGFyY2gpIHJldHVybiBgb3RoZXI6JHthcmNofWA7XG4gIHJldHVybiAndW5rbm93bic7XG59O1xuXG5jb25zdCBub3JtYWxpemVQbGF0Zm9ybSA9IChwbGF0Zm9ybTogc3RyaW5nKTogUGxhdGZvcm1OYW1lID0+IHtcbiAgLy8gTm9kZSBwbGF0Zm9ybXM6XG4gIC8vIC0gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc3BsYXRmb3JtXG4gIC8vIERlbm8gcGxhdGZvcm1zOlxuICAvLyAtIGh0dHBzOi8vZG9jLmRlbm8ubGFuZC9kZW5vL3N0YWJsZS9+L0Rlbm8uYnVpbGRcbiAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vZGVub2xhbmQvZGVuby9pc3N1ZXMvMTQ3OTlcblxuICBwbGF0Zm9ybSA9IHBsYXRmb3JtLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gTk9URTogdGhpcyBpT1MgY2hlY2sgaXMgdW50ZXN0ZWQgYW5kIG1heSBub3Qgd29ya1xuICAvLyBOb2RlIGRvZXMgbm90IHdvcmsgbmF0aXZlbHkgb24gSU9TLCB0aGVyZSBpcyBhIGZvcmsgYXRcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy1tb2JpbGUvbm9kZWpzLW1vYmlsZVxuICAvLyBob3dldmVyIGl0IGlzIHVua25vd24gYXQgdGhlIHRpbWUgb2Ygd3JpdGluZyBob3cgdG8gZGV0ZWN0IGlmIGl0IGlzIHJ1bm5pbmdcbiAgaWYgKHBsYXRmb3JtLmluY2x1ZGVzKCdpb3MnKSkgcmV0dXJuICdpT1MnO1xuICBpZiAocGxhdGZvcm0gPT09ICdhbmRyb2lkJykgcmV0dXJuICdBbmRyb2lkJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZGFyd2luJykgcmV0dXJuICdNYWNPUyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJykgcmV0dXJuICdXaW5kb3dzJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZnJlZWJzZCcpIHJldHVybiAnRnJlZUJTRCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ29wZW5ic2QnKSByZXR1cm4gJ09wZW5CU0QnO1xuICBpZiAocGxhdGZvcm0gPT09ICdsaW51eCcpIHJldHVybiAnTGludXgnO1xuICBpZiAocGxhdGZvcm0pIHJldHVybiBgT3RoZXI6JHtwbGF0Zm9ybX1gO1xuICByZXR1cm4gJ1Vua25vd24nO1xufTtcblxubGV0IF9wbGF0Zm9ybUhlYWRlcnM6IFBsYXRmb3JtUHJvcGVydGllcztcbmNvbnN0IGdldFBsYXRmb3JtSGVhZGVycyA9ICgpID0+IHtcbiAgcmV0dXJuIChfcGxhdGZvcm1IZWFkZXJzID8/PSBnZXRQbGF0Zm9ybVByb3BlcnRpZXMoKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2FmZUpTT04gPSAodGV4dDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGV4dCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn07XG5cbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xOTcwOTg0NlxuY29uc3Qgc3RhcnRzV2l0aFNjaGVtZVJlZ2V4cCA9IG5ldyBSZWdFeHAoJ14oPzpbYS16XSs6KT8vLycsICdpJyk7XG5jb25zdCBpc0Fic29sdXRlVVJMID0gKHVybDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBzdGFydHNXaXRoU2NoZW1lUmVnZXhwLnRlc3QodXJsKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzbGVlcCA9IChtczogbnVtYmVyKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuXG5jb25zdCB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlciA9IChuYW1lOiBzdHJpbmcsIG46IHVua25vd24pOiBudW1iZXIgPT4ge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKG4pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke25hbWV9IG11c3QgYmUgYW4gaW50ZWdlcmApO1xuICB9XG4gIGlmIChuIDwgMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcmApO1xuICB9XG4gIHJldHVybiBuO1xufTtcblxuZXhwb3J0IGNvbnN0IGNhc3RUb0Vycm9yID0gKGVycjogYW55KTogRXJyb3IgPT4ge1xuICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiBlcnI7XG4gIHJldHVybiBuZXcgRXJyb3IoZXJyKTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbnN1cmVQcmVzZW50ID0gPFQ+KHZhbHVlOiBUIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFQgPT4ge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhIHZhbHVlIHRvIGJlIGdpdmVuIGJ1dCByZWNlaXZlZCAke3ZhbHVlfSBpbnN0ZWFkLmApO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFJlYWQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUuXG4gKlxuICogV2lsbCByZXR1cm4gdW5kZWZpbmVkIGlmIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBkb2Vzbid0IGV4aXN0IG9yIGNhbm5vdCBiZSBhY2Nlc3NlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlYWRFbnYgPSAoZW52OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Py5bZW52XSA/PyB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBEZW5vICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBEZW5vLmVudj8uZ2V0Py4oZW52KTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvZXJjZUludGVnZXIgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgcmV0dXJuIE1hdGgucm91bmQodmFsdWUpO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgY29lcmNlICR7dmFsdWV9ICh0eXBlOiAke3R5cGVvZiB2YWx1ZX0pIGludG8gYSBudW1iZXJgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb2VyY2VGbG9hdCA9ICh2YWx1ZTogdW5rbm93bik6IG51bWJlciA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSByZXR1cm4gdmFsdWU7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgY29lcmNlICR7dmFsdWV9ICh0eXBlOiAke3R5cGVvZiB2YWx1ZX0pIGludG8gYSBudW1iZXJgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb2VyY2VCb29sZWFuID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykgcmV0dXJuIHZhbHVlO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHZhbHVlID09PSAndHJ1ZSc7XG4gIHJldHVybiBCb29sZWFuKHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXliZUNvZXJjZUludGVnZXIgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGNvZXJjZUludGVnZXIodmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1heWJlQ29lcmNlRmxvYXQgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGNvZXJjZUZsb2F0KHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXliZUNvZXJjZUJvb2xlYW4gPSAodmFsdWU6IHVua25vd24pOiBib29sZWFuIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VCb29sZWFuKHZhbHVlKTtcbn07XG5cbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zNDQ5MTI4N1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlPYmoob2JqOiBPYmplY3QgfCBudWxsIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gIGlmICghb2JqKSByZXR1cm4gdHJ1ZTtcbiAgZm9yIChjb25zdCBfayBpbiBvYmopIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIGh0dHBzOi8vZXNsaW50Lm9yZy9kb2NzL2xhdGVzdC9ydWxlcy9uby1wcm90b3R5cGUtYnVpbHRpbnNcbmV4cG9ydCBmdW5jdGlvbiBoYXNPd24ob2JqOiBPYmplY3QsIGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWcoYWN0aW9uOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSB7XG4gIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5lbnZbJ0RFQlVHJ10gPT09ICd0cnVlJykge1xuICAgIGNvbnNvbGUubG9nKGBPcGVuQUk6REVCVUc6JHthY3Rpb259YCwgLi4uYXJncyk7XG4gIH1cbn1cblxuLyoqXG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyM1xuICovXG5jb25zdCB1dWlkNCA9ICgpID0+IHtcbiAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgKGMpID0+IHtcbiAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwO1xuICAgIGNvbnN0IHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMpIHwgMHg4O1xuICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNSdW5uaW5nSW5Ccm93c2VyID0gKCkgPT4ge1xuICByZXR1cm4gKFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJ1xuICApO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBIZWFkZXJzUHJvdG9jb2wge1xuICBnZXQ6IChoZWFkZXI6IHN0cmluZykgPT4gc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCB0eXBlIEhlYWRlcnNMaWtlID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10gfCB1bmRlZmluZWQ+IHwgSGVhZGVyc1Byb3RvY29sO1xuXG5leHBvcnQgY29uc3QgaXNIZWFkZXJzUHJvdG9jb2wgPSAoaGVhZGVyczogYW55KTogaGVhZGVycyBpcyBIZWFkZXJzUHJvdG9jb2wgPT4ge1xuICByZXR1cm4gdHlwZW9mIGhlYWRlcnM/LmdldCA9PT0gJ2Z1bmN0aW9uJztcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRIZWFkZXIgPSAoaGVhZGVyczogSGVhZGVyc0xpa2UsIGtleTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gIGlmIChpc0hlYWRlcnNQcm90b2NvbChoZWFkZXJzKSkgcmV0dXJuIGhlYWRlcnMuZ2V0KGtleSkgfHwgaGVhZGVycy5nZXQobG93ZXJLZXkpO1xuICBjb25zdCB2YWx1ZSA9IGhlYWRlcnNba2V5XSB8fCBoZWFkZXJzW2xvd2VyS2V5XTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgaWYgKHZhbHVlLmxlbmd0aCA8PSAxKSByZXR1cm4gdmFsdWVbMF07XG4gICAgY29uc29sZS53YXJuKGBSZWNlaXZlZCAke3ZhbHVlLmxlbmd0aH0gZW50cmllcyBmb3IgdGhlICR7a2V5fSBoZWFkZXIsIHVzaW5nIHRoZSBmaXJzdCBlbnRyeS5gKTtcbiAgICByZXR1cm4gdmFsdWVbMF07XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBFbmNvZGVzIGEgc3RyaW5nIHRvIEJhc2U2NCBmb3JtYXQuXG4gKi9cbmV4cG9ydCBjb25zdCB0b0Jhc2U2NCA9IChzdHI6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcgPT4ge1xuICBpZiAoIXN0cikgcmV0dXJuICcnO1xuICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oc3RyKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH1cblxuICBpZiAodHlwZW9mIGJ0b2EgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGJ0b2Eoc3RyKTtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGdlbmVyYXRlIGI2NCBzdHJpbmc7IEV4cGVjdGVkIGBCdWZmZXJgIG9yIGBidG9hYCB0byBiZSBkZWZpbmVkJyk7XG59O1xuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCB7IEFic3RyYWN0UGFnZSwgUmVzcG9uc2UsIEFQSUNsaWVudCwgRmluYWxSZXF1ZXN0T3B0aW9ucywgUGFnZUluZm8gfSBmcm9tICcuL2NvcmUuanMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2VSZXNwb25zZTxJdGVtPiB7XG4gIGRhdGE6IEFycmF5PEl0ZW0+O1xuXG4gIG9iamVjdDogc3RyaW5nO1xufVxuXG4vKipcbiAqIE5vdGU6IG5vIHBhZ2luYXRpb24gYWN0dWFsbHkgb2NjdXJzIHlldCwgdGhpcyBpcyBmb3IgZm9yd2FyZHMtY29tcGF0aWJpbGl0eS5cbiAqL1xuZXhwb3J0IGNsYXNzIFBhZ2U8SXRlbT4gZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4gaW1wbGVtZW50cyBQYWdlUmVzcG9uc2U8SXRlbT4ge1xuICBvYmplY3Q6IHN0cmluZztcblxuICBkYXRhOiBBcnJheTxJdGVtPjtcblxuICBjb25zdHJ1Y3RvcihjbGllbnQ6IEFQSUNsaWVudCwgcmVzcG9uc2U6IFJlc3BvbnNlLCBib2R5OiBQYWdlUmVzcG9uc2U8SXRlbT4sIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpIHtcbiAgICBzdXBlcihjbGllbnQsIHJlc3BvbnNlLCBib2R5LCBvcHRpb25zKTtcblxuICAgIHRoaXMub2JqZWN0ID0gYm9keS5vYmplY3Q7XG4gICAgdGhpcy5kYXRhID0gYm9keS5kYXRhO1xuICB9XG5cbiAgZ2V0UGFnaW5hdGVkSXRlbXMoKTogSXRlbVtdIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9XG5cbiAgLy8gQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBgbmV4dFBhZ2VJbmZvKClgIGluc3RlYWRcbiAgLyoqXG4gICAqIFRoaXMgcGFnZSByZXByZXNlbnRzIGEgcmVzcG9uc2UgdGhhdCBpc24ndCBhY3R1YWxseSBwYWdpbmF0ZWQgYXQgdGhlIEFQSSBsZXZlbFxuICAgKiBzbyB0aGVyZSB3aWxsIG5ldmVyIGJlIGFueSBuZXh0IHBhZ2UgcGFyYW1zLlxuICAgKi9cbiAgbmV4dFBhZ2VQYXJhbXMoKTogbnVsbCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBuZXh0UGFnZUluZm8oKTogbnVsbCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDdXJzb3JQYWdlUmVzcG9uc2U8SXRlbT4ge1xuICBkYXRhOiBBcnJheTxJdGVtPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDdXJzb3JQYWdlUGFyYW1zIHtcbiAgLyoqXG4gICAqIElkZW50aWZpZXIgZm9yIHRoZSBsYXN0IGpvYiBmcm9tIHRoZSBwcmV2aW91cyBwYWdpbmF0aW9uIHJlcXVlc3QuXG4gICAqL1xuICBhZnRlcj86IHN0cmluZztcblxuICAvKipcbiAgICogTnVtYmVyIG9mIGZpbmUtdHVuaW5nIGpvYnMgdG8gcmV0cmlldmUuXG4gICAqL1xuICBsaW1pdD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEN1cnNvclBhZ2U8SXRlbSBleHRlbmRzIHsgaWQ6IHN0cmluZyB9PlxuICBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPlxuICBpbXBsZW1lbnRzIEN1cnNvclBhZ2VSZXNwb25zZTxJdGVtPlxue1xuICBkYXRhOiBBcnJheTxJdGVtPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjbGllbnQ6IEFQSUNsaWVudCxcbiAgICByZXNwb25zZTogUmVzcG9uc2UsXG4gICAgYm9keTogQ3Vyc29yUGFnZVJlc3BvbnNlPEl0ZW0+LFxuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKGNsaWVudCwgcmVzcG9uc2UsIGJvZHksIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5kYXRhID0gYm9keS5kYXRhO1xuICB9XG5cbiAgZ2V0UGFnaW5hdGVkSXRlbXMoKTogSXRlbVtdIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9XG5cbiAgLy8gQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBgbmV4dFBhZ2VJbmZvKClgIGluc3RlYWRcbiAgbmV4dFBhZ2VQYXJhbXMoKTogUGFydGlhbDxDdXJzb3JQYWdlUGFyYW1zPiB8IG51bGwge1xuICAgIGNvbnN0IGluZm8gPSB0aGlzLm5leHRQYWdlSW5mbygpO1xuICAgIGlmICghaW5mbykgcmV0dXJuIG51bGw7XG4gICAgaWYgKCdwYXJhbXMnIGluIGluZm8pIHJldHVybiBpbmZvLnBhcmFtcztcbiAgICBjb25zdCBwYXJhbXMgPSBPYmplY3QuZnJvbUVudHJpZXMoaW5mby51cmwuc2VhcmNoUGFyYW1zKTtcbiAgICBpZiAoIU9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgbmV4dFBhZ2VJbmZvKCk6IFBhZ2VJbmZvIHwgbnVsbCB7XG4gICAgaWYgKCF0aGlzLmRhdGE/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgbmV4dCA9IHRoaXMuZGF0YVt0aGlzLmRhdGEubGVuZ3RoIC0gMV0/LmlkO1xuICAgIGlmICghbmV4dCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHsgcGFyYW1zOiB7IGFmdGVyOiBuZXh0IH0gfTtcbiAgfVxufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCB0eXBlIHsgT3BlbkFJIH0gZnJvbSAnLi9pbmRleC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBBUElSZXNvdXJjZSB7XG4gIHByb3RlY3RlZCBjbGllbnQ6IE9wZW5BSTtcbiAgY29uc3RydWN0b3IoY2xpZW50OiBPcGVuQUkpIHtcbiAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcblxuICAgIHRoaXMuZ2V0ID0gY2xpZW50LmdldC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wb3N0ID0gY2xpZW50LnBvc3QuYmluZChjbGllbnQpO1xuICAgIHRoaXMucGF0Y2ggPSBjbGllbnQucGF0Y2guYmluZChjbGllbnQpO1xuICAgIHRoaXMucHV0ID0gY2xpZW50LnB1dC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5kZWxldGUgPSBjbGllbnQuZGVsZXRlLmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLmdldEFQSUxpc3QgPSBjbGllbnQuZ2V0QVBJTGlzdC5iaW5kKGNsaWVudCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0OiBPcGVuQUlbJ2dldCddO1xuICBwcm90ZWN0ZWQgcG9zdDogT3BlbkFJWydwb3N0J107XG4gIHByb3RlY3RlZCBwYXRjaDogT3BlbkFJWydwYXRjaCddO1xuICBwcm90ZWN0ZWQgcHV0OiBPcGVuQUlbJ3B1dCddO1xuICBwcm90ZWN0ZWQgZGVsZXRlOiBPcGVuQUlbJ2RlbGV0ZSddO1xuICBwcm90ZWN0ZWQgZ2V0QVBJTGlzdDogT3BlbkFJWydnZXRBUElMaXN0J107XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi8uLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgdHlwZSBVcGxvYWRhYmxlLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb3JlLmpzJztcblxuZXhwb3J0IGNsYXNzIFRyYW5zY3JpcHRpb25zIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogVHJhbnNjcmliZXMgYXVkaW8gaW50byB0aGUgaW5wdXQgbGFuZ3VhZ2UuXG4gICAqL1xuICBjcmVhdGUoYm9keTogVHJhbnNjcmlwdGlvbkNyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8VHJhbnNjcmlwdGlvbj4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9hdWRpby90cmFuc2NyaXB0aW9ucycsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyh7IGJvZHksIC4uLm9wdGlvbnMgfSkpO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNjcmlwdGlvbiB7XG4gIHRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2NyaXB0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBhdWRpbyBmaWxlIG9iamVjdCAobm90IGZpbGUgbmFtZSkgdG8gdHJhbnNjcmliZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6XG4gICAqIGZsYWMsIG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIG9nZywgd2F2LCBvciB3ZWJtLlxuICAgKi9cbiAgZmlsZTogVXBsb2FkYWJsZTtcblxuICAvKipcbiAgICogSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSBgd2hpc3Blci0xYCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgKi9cbiAgbW9kZWw6IChzdHJpbmcgJiB7fSkgfCAnd2hpc3Blci0xJztcblxuICAvKipcbiAgICogVGhlIGxhbmd1YWdlIG9mIHRoZSBpbnB1dCBhdWRpby4gU3VwcGx5aW5nIHRoZSBpbnB1dCBsYW5ndWFnZSBpblxuICAgKiBbSVNPLTYzOS0xXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0lTT182MzktMV9jb2RlcykgZm9ybWF0IHdpbGxcbiAgICogaW1wcm92ZSBhY2N1cmFjeSBhbmQgbGF0ZW5jeS5cbiAgICovXG4gIGxhbmd1YWdlPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbCdzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW9cbiAgICogc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBtYXRjaCB0aGVcbiAgICogYXVkaW8gbGFuZ3VhZ2UuXG4gICAqL1xuICBwcm9tcHQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LFxuICAgKiB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICovXG4gIHJlc3BvbnNlX2Zvcm1hdD86ICdqc29uJyB8ICd0ZXh0JyB8ICdzcnQnIHwgJ3ZlcmJvc2VfanNvbicgfCAndnR0JztcblxuICAvKipcbiAgICogVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZVxuICAgKiBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZFxuICAgKiBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlXG4gICAqIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG9cbiAgICogYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBUcmFuc2NyaXB0aW9ucyB7XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNjcmlwdGlvbiA9IEFQSS5UcmFuc2NyaXB0aW9uO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zY3JpcHRpb25DcmVhdGVQYXJhbXMgPSBBUEkuVHJhbnNjcmlwdGlvbkNyZWF0ZVBhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uLy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyB0eXBlIFVwbG9hZGFibGUsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4uLy4uL2NvcmUuanMnO1xuXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25zIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogVHJhbnNsYXRlcyBhdWRpbyBpbnRvIEVuZ2xpc2guXG4gICAqL1xuICBjcmVhdGUoYm9keTogVHJhbnNsYXRpb25DcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPFRyYW5zbGF0aW9uPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2F1ZGlvL3RyYW5zbGF0aW9ucycsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyh7IGJvZHksIC4uLm9wdGlvbnMgfSkpO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNsYXRpb24ge1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNsYXRpb25DcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIGF1ZGlvIGZpbGUgb2JqZWN0IChub3QgZmlsZSBuYW1lKSB0cmFuc2xhdGUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOiBmbGFjLFxuICAgKiBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCBvZ2csIHdhdiwgb3Igd2VibS5cbiAgICovXG4gIGZpbGU6IFVwbG9hZGFibGU7XG5cbiAgLyoqXG4gICAqIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgYHdoaXNwZXItMWAgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICovXG4gIG1vZGVsOiAoc3RyaW5nICYge30pIHwgJ3doaXNwZXItMSc7XG5cbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsJ3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpb1xuICAgKiBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIGJlIGluXG4gICAqIEVuZ2xpc2guXG4gICAqL1xuICBwcm9tcHQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LFxuICAgKiB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICovXG4gIHJlc3BvbnNlX2Zvcm1hdD86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZVxuICAgKiBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZFxuICAgKiBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlXG4gICAqIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG9cbiAgICogYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBUcmFuc2xhdGlvbnMge1xuICBleHBvcnQgaW1wb3J0IFRyYW5zbGF0aW9uID0gQVBJLlRyYW5zbGF0aW9uO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLlRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0IHsgVHJhbnNjcmlwdGlvbnMgfSBmcm9tICcuL3RyYW5zY3JpcHRpb25zLmpzJztcbmltcG9ydCB7IFRyYW5zbGF0aW9ucyB9IGZyb20gJy4vdHJhbnNsYXRpb25zLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcblxuZXhwb3J0IGNsYXNzIEF1ZGlvIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICB0cmFuc2NyaXB0aW9uczogVHJhbnNjcmlwdGlvbnMgPSBuZXcgVHJhbnNjcmlwdGlvbnModGhpcy5jbGllbnQpO1xuICB0cmFuc2xhdGlvbnM6IFRyYW5zbGF0aW9ucyA9IG5ldyBUcmFuc2xhdGlvbnModGhpcy5jbGllbnQpO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEF1ZGlvIHtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2NyaXB0aW9ucyA9IEFQSS5UcmFuc2NyaXB0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2NyaXB0aW9uID0gQVBJLlRyYW5zY3JpcHRpb247XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNjcmlwdGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5UcmFuc2NyaXB0aW9uQ3JlYXRlUGFyYW1zO1xuXG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNsYXRpb25zID0gQVBJLlRyYW5zbGF0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2xhdGlvbiA9IEFQSS5UcmFuc2xhdGlvbjtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2xhdGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5UcmFuc2xhdGlvbkNyZWF0ZVBhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uLy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUHJvbWlzZSB9IGZyb20gJy4uLy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBDb21wbGV0aW9uc18gZnJvbSAnLi4vY29tcGxldGlvbnMuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSAnLi4vLi4vc3RyZWFtaW5nLmpzJztcblxuZXhwb3J0IGNsYXNzIENvbXBsZXRpb25zIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG1vZGVsIHJlc3BvbnNlIGZvciB0aGUgZ2l2ZW4gY2hhdCBjb252ZXJzYXRpb24uXG4gICAqL1xuICBjcmVhdGUoXG4gICAgYm9keTogQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8Q2hhdENvbXBsZXRpb24+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPENoYXRDb21wbGV0aW9uQ2h1bms+PjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q2hhdENvbXBsZXRpb25DaHVuaz4gfCBDaGF0Q29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxDaGF0Q29tcGxldGlvbj4gfCBBUElQcm9taXNlPFN0cmVhbTxDaGF0Q29tcGxldGlvbkNodW5rPj4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9jaGF0L2NvbXBsZXRpb25zJywgeyBib2R5LCAuLi5vcHRpb25zLCBzdHJlYW06IGJvZHkuc3RyZWFtID8/IGZhbHNlIH0pIGFzXG4gICAgICB8IEFQSVByb21pc2U8Q2hhdENvbXBsZXRpb24+XG4gICAgICB8IEFQSVByb21pc2U8U3RyZWFtPENoYXRDb21wbGV0aW9uQ2h1bms+PjtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGF0IGNvbXBsZXRpb24gcmVzcG9uc2UgcmV0dXJuZWQgYnkgbW9kZWwsIGJhc2VkIG9uIHRoZSBwcm92aWRlZFxuICogaW5wdXQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdENvbXBsZXRpb24ge1xuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNoYXQgY29tcGxldGlvbi5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiBjaGF0IGNvbXBsZXRpb24gY2hvaWNlcy4gQ2FuIGJlIG1vcmUgdGhhbiBvbmUgaWYgYG5gIGlzIGdyZWF0ZXJcbiAgICogdGhhbiAxLlxuICAgKi9cbiAgY2hvaWNlczogQXJyYXk8Q2hhdENvbXBsZXRpb24uQ2hvaWNlPjtcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSBvZiB3aGVuIHRoZSBjaGF0IGNvbXBsZXRpb24gd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB1c2VkIGZvciB0aGUgY2hhdCBjb21wbGV0aW9uLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgYGNoYXQuY29tcGxldGlvbmAuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVXNhZ2Ugc3RhdGlzdGljcyBmb3IgdGhlIGNvbXBsZXRpb24gcmVxdWVzdC5cbiAgICovXG4gIHVzYWdlPzogQ29tcGxldGlvbnNfLkNvbXBsZXRpb25Vc2FnZTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGF0Q29tcGxldGlvbiB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2hvaWNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVhc29uIHRoZSBtb2RlbCBzdG9wcGVkIGdlbmVyYXRpbmcgdG9rZW5zLiBUaGlzIHdpbGwgYmUgYHN0b3BgIGlmIHRoZSBtb2RlbFxuICAgICAqIGhpdCBhIG5hdHVyYWwgc3RvcCBwb2ludCBvciBhIHByb3ZpZGVkIHN0b3Agc2VxdWVuY2UsIGBsZW5ndGhgIGlmIHRoZSBtYXhpbXVtXG4gICAgICogbnVtYmVyIG9mIHRva2VucyBzcGVjaWZpZWQgaW4gdGhlIHJlcXVlc3Qgd2FzIHJlYWNoZWQsIG9yIGBmdW5jdGlvbl9jYWxsYCBpZiB0aGVcbiAgICAgKiBtb2RlbCBjYWxsZWQgYSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmaW5pc2hfcmVhc29uOiAnc3RvcCcgfCAnbGVuZ3RoJyB8ICdmdW5jdGlvbl9jYWxsJztcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgY2hvaWNlIGluIHRoZSBsaXN0IG9mIGNob2ljZXMuXG4gICAgICovXG4gICAgaW5kZXg6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEEgY2hhdCBjb21wbGV0aW9uIG1lc3NhZ2UgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICBtZXNzYWdlOiBDaGF0Q29tcGxldGlvbk1lc3NhZ2U7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgc3RyZWFtZWQgY2h1bmsgb2YgYSBjaGF0IGNvbXBsZXRpb24gcmVzcG9uc2UgcmV0dXJuZWQgYnkgbW9kZWwsXG4gKiBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgaW5wdXQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdENvbXBsZXRpb25DaHVuayB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY2hhdCBjb21wbGV0aW9uIGNodW5rLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogQSBsaXN0IG9mIGNoYXQgY29tcGxldGlvbiBjaG9pY2VzLiBDYW4gYmUgbW9yZSB0aGFuIG9uZSBpZiBgbmAgaXMgZ3JlYXRlclxuICAgKiB0aGFuIDEuXG4gICAqL1xuICBjaG9pY2VzOiBBcnJheTxDaGF0Q29tcGxldGlvbkNodW5rLkNob2ljZT47XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgb2Ygd2hlbiB0aGUgY2hhdCBjb21wbGV0aW9uIGNodW5rIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdG8gZ2VuZXJhdGUgdGhlIGNvbXBsZXRpb24uXG4gICAqL1xuICBtb2RlbDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBgY2hhdC5jb21wbGV0aW9uLmNodW5rYC5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENoYXRDb21wbGV0aW9uQ2h1bmsge1xuICBleHBvcnQgaW50ZXJmYWNlIENob2ljZSB7XG4gICAgLyoqXG4gICAgICogQSBjaGF0IGNvbXBsZXRpb24gZGVsdGEgZ2VuZXJhdGVkIGJ5IHN0cmVhbWVkIG1vZGVsIHJlc3BvbnNlcy5cbiAgICAgKi9cbiAgICBkZWx0YTogQ2hvaWNlLkRlbHRhO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHJlYXNvbiB0aGUgbW9kZWwgc3RvcHBlZCBnZW5lcmF0aW5nIHRva2Vucy4gVGhpcyB3aWxsIGJlIGBzdG9wYCBpZiB0aGUgbW9kZWxcbiAgICAgKiBoaXQgYSBuYXR1cmFsIHN0b3AgcG9pbnQgb3IgYSBwcm92aWRlZCBzdG9wIHNlcXVlbmNlLCBgbGVuZ3RoYCBpZiB0aGUgbWF4aW11bVxuICAgICAqIG51bWJlciBvZiB0b2tlbnMgc3BlY2lmaWVkIGluIHRoZSByZXF1ZXN0IHdhcyByZWFjaGVkLCBvciBgZnVuY3Rpb25fY2FsbGAgaWYgdGhlXG4gICAgICogbW9kZWwgY2FsbGVkIGEgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZmluaXNoX3JlYXNvbjogJ3N0b3AnIHwgJ2xlbmd0aCcgfCAnZnVuY3Rpb25fY2FsbCcgfCBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBjaG9pY2UgaW4gdGhlIGxpc3Qgb2YgY2hvaWNlcy5cbiAgICAgKi9cbiAgICBpbmRleDogbnVtYmVyO1xuICB9XG5cbiAgZXhwb3J0IG5hbWVzcGFjZSBDaG9pY2Uge1xuICAgIC8qKlxuICAgICAqIEEgY2hhdCBjb21wbGV0aW9uIGRlbHRhIGdlbmVyYXRlZCBieSBzdHJlYW1lZCBtb2RlbCByZXNwb25zZXMuXG4gICAgICovXG4gICAgZXhwb3J0IGludGVyZmFjZSBEZWx0YSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBjb250ZW50cyBvZiB0aGUgY2h1bmsgbWVzc2FnZS5cbiAgICAgICAqL1xuICAgICAgY29udGVudD86IHN0cmluZyB8IG51bGw7XG5cbiAgICAgIC8qKlxuICAgICAgICogVGhlIG5hbWUgYW5kIGFyZ3VtZW50cyBvZiBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZVxuICAgICAgICogbW9kZWwuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uX2NhbGw/OiBEZWx0YS5GdW5jdGlvbkNhbGw7XG5cbiAgICAgIC8qKlxuICAgICAgICogVGhlIHJvbGUgb2YgdGhlIGF1dGhvciBvZiB0aGlzIG1lc3NhZ2UuXG4gICAgICAgKi9cbiAgICAgIHJvbGU/OiBDaGF0Q29tcGxldGlvblJvbGU7XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBEZWx0YSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBuYW1lIGFuZCBhcmd1bWVudHMgb2YgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQsIGFzIGdlbmVyYXRlZCBieSB0aGVcbiAgICAgICAqIG1vZGVsLlxuICAgICAgICovXG4gICAgICBleHBvcnQgaW50ZXJmYWNlIEZ1bmN0aW9uQ2FsbCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYXJndW1lbnRzIHRvIGNhbGwgdGhlIGZ1bmN0aW9uIHdpdGgsIGFzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgaW4gSlNPTlxuICAgICAgICAgKiBmb3JtYXQuIE5vdGUgdGhhdCB0aGUgbW9kZWwgZG9lcyBub3QgYWx3YXlzIGdlbmVyYXRlIHZhbGlkIEpTT04sIGFuZCBtYXlcbiAgICAgICAgICogaGFsbHVjaW5hdGUgcGFyYW1ldGVycyBub3QgZGVmaW5lZCBieSB5b3VyIGZ1bmN0aW9uIHNjaGVtYS4gVmFsaWRhdGUgdGhlXG4gICAgICAgICAqIGFyZ3VtZW50cyBpbiB5b3VyIGNvZGUgYmVmb3JlIGNhbGxpbmcgeW91ciBmdW5jdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGFyZ3VtZW50cz86IHN0cmluZztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uIHRvIGNhbGwuXG4gICAgICAgICAqL1xuICAgICAgICBuYW1lPzogc3RyaW5nO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEEgY2hhdCBjb21wbGV0aW9uIG1lc3NhZ2UgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbk1lc3NhZ2Uge1xuICAvKipcbiAgICogVGhlIGNvbnRlbnRzIG9mIHRoZSBtZXNzYWdlLlxuICAgKi9cbiAgY29udGVudDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIHJvbGUgb2YgdGhlIGF1dGhvciBvZiB0aGlzIG1lc3NhZ2UuXG4gICAqL1xuICByb2xlOiBDaGF0Q29tcGxldGlvblJvbGU7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIGFuZCBhcmd1bWVudHMgb2YgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQsIGFzIGdlbmVyYXRlZCBieSB0aGVcbiAgICogbW9kZWwuXG4gICAqL1xuICBmdW5jdGlvbl9jYWxsPzogQ2hhdENvbXBsZXRpb25NZXNzYWdlLkZ1bmN0aW9uQ2FsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGF0Q29tcGxldGlvbk1lc3NhZ2Uge1xuICAvKipcbiAgICogVGhlIG5hbWUgYW5kIGFyZ3VtZW50cyBvZiBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZVxuICAgKiBtb2RlbC5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgRnVuY3Rpb25DYWxsIHtcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIHRvIGNhbGwgdGhlIGZ1bmN0aW9uIHdpdGgsIGFzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgaW4gSlNPTlxuICAgICAqIGZvcm1hdC4gTm90ZSB0aGF0IHRoZSBtb2RlbCBkb2VzIG5vdCBhbHdheXMgZ2VuZXJhdGUgdmFsaWQgSlNPTiwgYW5kIG1heVxuICAgICAqIGhhbGx1Y2luYXRlIHBhcmFtZXRlcnMgbm90IGRlZmluZWQgYnkgeW91ciBmdW5jdGlvbiBzY2hlbWEuIFZhbGlkYXRlIHRoZVxuICAgICAqIGFyZ3VtZW50cyBpbiB5b3VyIGNvZGUgYmVmb3JlIGNhbGxpbmcgeW91ciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICAgICAqL1xuICAgIG5hbWU6IHN0cmluZztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtIHtcbiAgLyoqXG4gICAqIFRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZS4gYGNvbnRlbnRgIGlzIHJlcXVpcmVkIGZvciBhbGwgbWVzc2FnZXMsIGFuZCBtYXkgYmVcbiAgICogbnVsbCBmb3IgYXNzaXN0YW50IG1lc3NhZ2VzIHdpdGggZnVuY3Rpb24gY2FsbHMuXG4gICAqL1xuICBjb250ZW50OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgcm9sZSBvZiB0aGUgbWVzc2FnZXMgYXV0aG9yLiBPbmUgb2YgYHN5c3RlbWAsIGB1c2VyYCwgYGFzc2lzdGFudGAsIG9yXG4gICAqIGBmdW5jdGlvbmAuXG4gICAqL1xuICByb2xlOiAnc3lzdGVtJyB8ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ2Z1bmN0aW9uJztcblxuICAvKipcbiAgICogVGhlIG5hbWUgYW5kIGFyZ3VtZW50cyBvZiBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZVxuICAgKiBtb2RlbC5cbiAgICovXG4gIGZ1bmN0aW9uX2NhbGw/OiBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbS5GdW5jdGlvbkNhbGw7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBhdXRob3Igb2YgdGhpcyBtZXNzYWdlLiBgbmFtZWAgaXMgcmVxdWlyZWQgaWYgcm9sZSBpc1xuICAgKiBgZnVuY3Rpb25gLCBhbmQgaXQgc2hvdWxkIGJlIHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB3aG9zZSByZXNwb25zZSBpcyBpbiB0aGVcbiAgICogYGNvbnRlbnRgLiBNYXkgY29udGFpbiBhLXosIEEtWiwgMC05LCBhbmQgdW5kZXJzY29yZXMsIHdpdGggYSBtYXhpbXVtIGxlbmd0aCBvZlxuICAgKiA2NCBjaGFyYWN0ZXJzLlxuICAgKi9cbiAgbmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbSB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBhbmQgYXJndW1lbnRzIG9mIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLCBhcyBnZW5lcmF0ZWQgYnkgdGhlXG4gICAqIG1vZGVsLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBGdW5jdGlvbkNhbGwge1xuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgdG8gY2FsbCB0aGUgZnVuY3Rpb24gd2l0aCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBpbiBKU09OXG4gICAgICogZm9ybWF0LiBOb3RlIHRoYXQgdGhlIG1vZGVsIGRvZXMgbm90IGFsd2F5cyBnZW5lcmF0ZSB2YWxpZCBKU09OLCBhbmQgbWF5XG4gICAgICogaGFsbHVjaW5hdGUgcGFyYW1ldGVycyBub3QgZGVmaW5lZCBieSB5b3VyIGZ1bmN0aW9uIHNjaGVtYS4gVmFsaWRhdGUgdGhlXG4gICAgICogYXJndW1lbnRzIGluIHlvdXIgY29kZSBiZWZvcmUgY2FsbGluZyB5b3VyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uIHRvIGNhbGwuXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nO1xuICB9XG59XG5cbi8qKlxuICogVGhlIHJvbGUgb2YgdGhlIGF1dGhvciBvZiB0aGlzIG1lc3NhZ2UuXG4gKi9cbmV4cG9ydCB0eXBlIENoYXRDb21wbGV0aW9uUm9sZSA9ICdzeXN0ZW0nIHwgJ3VzZXInIHwgJ2Fzc2lzdGFudCcgfCAnZnVuY3Rpb24nO1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtIHNob3VsZCBiZSB1c2VkIGluc3RlYWRcbiAqL1xuZXhwb3J0IHR5cGUgQ3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0TWVzc2FnZSA9IENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtO1xuXG5leHBvcnQgdHlwZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9XG4gIHwgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmdcbiAgfCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogQSBsaXN0IG9mIG1lc3NhZ2VzIGNvbXByaXNpbmcgdGhlIGNvbnZlcnNhdGlvbiBzbyBmYXIuXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX2Zvcm1hdF9pbnB1dHNfdG9fQ2hhdEdQVF9tb2RlbHMuaXB5bmIpLlxuICAgKi9cbiAgbWVzc2FnZXM6IEFycmF5PENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtPjtcblxuICAvKipcbiAgICogSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gU2VlIHRoZVxuICAgKiBbbW9kZWwgZW5kcG9pbnQgY29tcGF0aWJpbGl0eV0oL2RvY3MvbW9kZWxzL21vZGVsLWVuZHBvaW50LWNvbXBhdGliaWxpdHkpIHRhYmxlXG4gICAqIGZvciBkZXRhaWxzIG9uIHdoaWNoIG1vZGVscyB3b3JrIHdpdGggdGhlIENoYXQgQVBJLlxuICAgKi9cbiAgbW9kZWw6XG4gICAgfCAoc3RyaW5nICYge30pXG4gICAgfCAnZ3B0LTQnXG4gICAgfCAnZ3B0LTQtMDMxNCdcbiAgICB8ICdncHQtNC0wNjEzJ1xuICAgIHwgJ2dwdC00LTMyaydcbiAgICB8ICdncHQtNC0zMmstMDMxNCdcbiAgICB8ICdncHQtNC0zMmstMDYxMydcbiAgICB8ICdncHQtMy41LXR1cmJvJ1xuICAgIHwgJ2dwdC0zLjUtdHVyYm8tMTZrJ1xuICAgIHwgJ2dwdC0zLjUtdHVyYm8tMDMwMSdcbiAgICB8ICdncHQtMy41LXR1cmJvLTA2MTMnXG4gICAgfCAnZ3B0LTMuNS10dXJiby0xNmstMDYxMyc7XG5cbiAgLyoqXG4gICAqIE51bWJlciBiZXR3ZWVuIC0yLjAgYW5kIDIuMC4gUG9zaXRpdmUgdmFsdWVzIHBlbmFsaXplIG5ldyB0b2tlbnMgYmFzZWQgb24gdGhlaXJcbiAgICogZXhpc3RpbmcgZnJlcXVlbmN5IGluIHRoZSB0ZXh0IHNvIGZhciwgZGVjcmVhc2luZyB0aGUgbW9kZWwncyBsaWtlbGlob29kIHRvXG4gICAqIHJlcGVhdCB0aGUgc2FtZSBsaW5lIHZlcmJhdGltLlxuICAgKlxuICAgKiBbU2VlIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZnJlcXVlbmN5IGFuZCBwcmVzZW5jZSBwZW5hbHRpZXMuXSgvZG9jcy9ndWlkZXMvZ3B0L3BhcmFtZXRlci1kZXRhaWxzKVxuICAgKi9cbiAgZnJlcXVlbmN5X3BlbmFsdHk/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBDb250cm9scyBob3cgdGhlIG1vZGVsIHJlc3BvbmRzIHRvIGZ1bmN0aW9uIGNhbGxzLiBcIm5vbmVcIiBtZWFucyB0aGUgbW9kZWwgZG9lc1xuICAgKiBub3QgY2FsbCBhIGZ1bmN0aW9uLCBhbmQgcmVzcG9uZHMgdG8gdGhlIGVuZC11c2VyLiBcImF1dG9cIiBtZWFucyB0aGUgbW9kZWwgY2FuXG4gICAqIHBpY2sgYmV0d2VlbiBhbiBlbmQtdXNlciBvciBjYWxsaW5nIGEgZnVuY3Rpb24uIFNwZWNpZnlpbmcgYSBwYXJ0aWN1bGFyIGZ1bmN0aW9uXG4gICAqIHZpYSBge1wibmFtZVwiOiBcIm15X2Z1bmN0aW9uXCJ9YCBmb3JjZXMgdGhlIG1vZGVsIHRvIGNhbGwgdGhhdCBmdW5jdGlvbi4gXCJub25lXCIgaXNcbiAgICogdGhlIGRlZmF1bHQgd2hlbiBubyBmdW5jdGlvbnMgYXJlIHByZXNlbnQuIFwiYXV0b1wiIGlzIHRoZSBkZWZhdWx0IGlmIGZ1bmN0aW9uc1xuICAgKiBhcmUgcHJlc2VudC5cbiAgICovXG4gIGZ1bmN0aW9uX2NhbGw/OiAnbm9uZScgfCAnYXV0bycgfCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcy5GdW5jdGlvbkNhbGxPcHRpb247XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiBmdW5jdGlvbnMgdGhlIG1vZGVsIG1heSBnZW5lcmF0ZSBKU09OIGlucHV0cyBmb3IuXG4gICAqL1xuICBmdW5jdGlvbnM/OiBBcnJheTxDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcy5GdW5jdGlvbj47XG5cbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgbGlrZWxpaG9vZCBvZiBzcGVjaWZpZWQgdG9rZW5zIGFwcGVhcmluZyBpbiB0aGUgY29tcGxldGlvbi5cbiAgICpcbiAgICogQWNjZXB0cyBhIGpzb24gb2JqZWN0IHRoYXQgbWFwcyB0b2tlbnMgKHNwZWNpZmllZCBieSB0aGVpciB0b2tlbiBJRCBpbiB0aGVcbiAgICogdG9rZW5pemVyKSB0byBhbiBhc3NvY2lhdGVkIGJpYXMgdmFsdWUgZnJvbSAtMTAwIHRvIDEwMC4gTWF0aGVtYXRpY2FsbHksIHRoZVxuICAgKiBiaWFzIGlzIGFkZGVkIHRvIHRoZSBsb2dpdHMgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBwcmlvciB0byBzYW1wbGluZy4gVGhlIGV4YWN0XG4gICAqIGVmZmVjdCB3aWxsIHZhcnkgcGVyIG1vZGVsLCBidXQgdmFsdWVzIGJldHdlZW4gLTEgYW5kIDEgc2hvdWxkIGRlY3JlYXNlIG9yXG4gICAqIGluY3JlYXNlIGxpa2VsaWhvb2Qgb2Ygc2VsZWN0aW9uOyB2YWx1ZXMgbGlrZSAtMTAwIG9yIDEwMCBzaG91bGQgcmVzdWx0IGluIGEgYmFuXG4gICAqIG9yIGV4Y2x1c2l2ZSBzZWxlY3Rpb24gb2YgdGhlIHJlbGV2YW50IHRva2VuLlxuICAgKi9cbiAgbG9naXRfYmlhcz86IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgW3Rva2Vuc10oL3Rva2VuaXplcikgdG8gZ2VuZXJhdGUgaW4gdGhlIGNoYXQgY29tcGxldGlvbi5cbiAgICpcbiAgICogVGhlIHRvdGFsIGxlbmd0aCBvZiBpbnB1dCB0b2tlbnMgYW5kIGdlbmVyYXRlZCB0b2tlbnMgaXMgbGltaXRlZCBieSB0aGUgbW9kZWwnc1xuICAgKiBjb250ZXh0IGxlbmd0aC5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fY291bnRfdG9rZW5zX3dpdGhfdGlrdG9rZW4uaXB5bmIpXG4gICAqIGZvciBjb3VudGluZyB0b2tlbnMuXG4gICAqL1xuICBtYXhfdG9rZW5zPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBIb3cgbWFueSBjaGF0IGNvbXBsZXRpb24gY2hvaWNlcyB0byBnZW5lcmF0ZSBmb3IgZWFjaCBpbnB1dCBtZXNzYWdlLlxuICAgKi9cbiAgbj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE51bWJlciBiZXR3ZWVuIC0yLjAgYW5kIDIuMC4gUG9zaXRpdmUgdmFsdWVzIHBlbmFsaXplIG5ldyB0b2tlbnMgYmFzZWQgb25cbiAgICogd2hldGhlciB0aGV5IGFwcGVhciBpbiB0aGUgdGV4dCBzbyBmYXIsIGluY3JlYXNpbmcgdGhlIG1vZGVsJ3MgbGlrZWxpaG9vZCB0b1xuICAgKiB0YWxrIGFib3V0IG5ldyB0b3BpY3MuXG4gICAqXG4gICAqIFtTZWUgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBmcmVxdWVuY3kgYW5kIHByZXNlbmNlIHBlbmFsdGllcy5dKC9kb2NzL2d1aWRlcy9ncHQvcGFyYW1ldGVyLWRldGFpbHMpXG4gICAqL1xuICBwcmVzZW5jZV9wZW5hbHR5PzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVXAgdG8gNCBzZXF1ZW5jZXMgd2hlcmUgdGhlIEFQSSB3aWxsIHN0b3AgZ2VuZXJhdGluZyBmdXJ0aGVyIHRva2Vucy5cbiAgICovXG4gIHN0b3A/OiBzdHJpbmcgfCBudWxsIHwgQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogSWYgc2V0LCBwYXJ0aWFsIG1lc3NhZ2UgZGVsdGFzIHdpbGwgYmUgc2VudCwgbGlrZSBpbiBDaGF0R1BULiBUb2tlbnMgd2lsbCBiZVxuICAgKiBzZW50IGFzIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUsIHdpdGggdGhlIHN0cmVhbSB0ZXJtaW5hdGVkIGJ5IGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZS5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fc3RyZWFtX2NvbXBsZXRpb25zLmlweW5iKS5cbiAgICovXG4gIHN0cmVhbT86IGJvb2xlYW4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBXaGF0IHNhbXBsaW5nIHRlbXBlcmF0dXJlIHRvIHVzZSwgYmV0d2VlbiAwIGFuZCAyLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGxcbiAgICogbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmVcbiAgICogZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy5cbiAgICpcbiAgICogV2UgZ2VuZXJhbGx5IHJlY29tbWVuZCBhbHRlcmluZyB0aGlzIG9yIGB0b3BfcGAgYnV0IG5vdCBib3RoLlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBbiBhbHRlcm5hdGl2ZSB0byBzYW1wbGluZyB3aXRoIHRlbXBlcmF0dXJlLCBjYWxsZWQgbnVjbGV1cyBzYW1wbGluZywgd2hlcmUgdGhlXG4gICAqIG1vZGVsIGNvbnNpZGVycyB0aGUgcmVzdWx0cyBvZiB0aGUgdG9rZW5zIHdpdGggdG9wX3AgcHJvYmFiaWxpdHkgbWFzcy4gU28gMC4xXG4gICAqIG1lYW5zIG9ubHkgdGhlIHRva2VucyBjb21wcmlzaW5nIHRoZSB0b3AgMTAlIHByb2JhYmlsaXR5IG1hc3MgYXJlIGNvbnNpZGVyZWQuXG4gICAqXG4gICAqIFdlIGdlbmVyYWxseSByZWNvbW1lbmQgYWx0ZXJpbmcgdGhpcyBvciBgdGVtcGVyYXR1cmVgIGJ1dCBub3QgYm90aC5cbiAgICovXG4gIHRvcF9wPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3JcbiAgICogYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICovXG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMge1xuICBleHBvcnQgaW50ZXJmYWNlIEZ1bmN0aW9uQ2FsbE9wdGlvbiB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uIHRvIGNhbGwuXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nO1xuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBGdW5jdGlvbiB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC4gTXVzdCBiZSBhLXosIEEtWiwgMC05LCBvciBjb250YWluXG4gICAgICogdW5kZXJzY29yZXMgYW5kIGRhc2hlcywgd2l0aCBhIG1heGltdW0gbGVuZ3RoIG9mIDY0LlxuICAgICAqL1xuICAgIG5hbWU6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBwYXJhbWV0ZXJzIHRoZSBmdW5jdGlvbnMgYWNjZXB0cywgZGVzY3JpYmVkIGFzIGEgSlNPTiBTY2hlbWEgb2JqZWN0LiBTZWUgdGhlXG4gICAgICogW2d1aWRlXSgvZG9jcy9ndWlkZXMvZ3B0L2Z1bmN0aW9uLWNhbGxpbmcpIGZvciBleGFtcGxlcywgYW5kIHRoZVxuICAgICAqIFtKU09OIFNjaGVtYSByZWZlcmVuY2VdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnL3VuZGVyc3RhbmRpbmctanNvbi1zY2hlbWEvKSBmb3JcbiAgICAgKiBkb2N1bWVudGF0aW9uIGFib3V0IHRoZSBmb3JtYXQuXG4gICAgICpcbiAgICAgKiBUbyBkZXNjcmliZSBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBubyBwYXJhbWV0ZXJzLCBwcm92aWRlIHRoZSB2YWx1ZVxuICAgICAqIGB7XCJ0eXBlXCI6IFwib2JqZWN0XCIsIFwicHJvcGVydGllc1wiOiB7fX1gLlxuICAgICAqL1xuICAgIHBhcmFtZXRlcnM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuXG4gICAgLyoqXG4gICAgICogQSBkZXNjcmlwdGlvbiBvZiB3aGF0IHRoZSBmdW5jdGlvbiBkb2VzLCB1c2VkIGJ5IHRoZSBtb2RlbCB0byBjaG9vc2Ugd2hlbiBhbmRcbiAgICAgKiBob3cgdG8gY2FsbCB0aGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIH1cblxuICBleHBvcnQgdHlwZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IHR5cGUgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIGluc3RlYWRcbiAqL1xuZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGV4dGVuZHMgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIElmIHNldCwgcGFydGlhbCBtZXNzYWdlIGRlbHRhcyB3aWxsIGJlIHNlbnQsIGxpa2UgaW4gQ2hhdEdQVC4gVG9rZW5zIHdpbGwgYmVcbiAgICogc2VudCBhcyBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLCB3aXRoIHRoZSBzdHJlYW0gdGVybWluYXRlZCBieSBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2UuXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX3N0cmVhbV9jb21wbGV0aW9ucy5pcHluYikuXG4gICAqL1xuICBzdHJlYW0/OiBmYWxzZSB8IG51bGw7XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGluc3RlYWRcbiAqL1xuZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGV4dGVuZHMgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIElmIHNldCwgcGFydGlhbCBtZXNzYWdlIGRlbHRhcyB3aWxsIGJlIHNlbnQsIGxpa2UgaW4gQ2hhdEdQVC4gVG9rZW5zIHdpbGwgYmVcbiAgICogc2VudCBhcyBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLCB3aXRoIHRoZSBzdHJlYW0gdGVybWluYXRlZCBieSBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2UuXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX3N0cmVhbV9jb21wbGV0aW9ucy5pcHluYikuXG4gICAqL1xuICBzdHJlYW06IHRydWU7XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGluc3RlYWRcbiAqL1xuZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgbmFtZXNwYWNlIENvbXBsZXRpb25zIHtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbiA9IEFQSS5DaGF0Q29tcGxldGlvbjtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNodW5rID0gQVBJLkNoYXRDb21wbGV0aW9uQ2h1bms7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25NZXNzYWdlID0gQVBJLkNoYXRDb21wbGV0aW9uTWVzc2FnZTtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbSA9IEFQSS5DaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbTtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvblJvbGUgPSBBUEkuQ2hhdENvbXBsZXRpb25Sb2xlO1xuICBleHBvcnQgaW1wb3J0IENyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdE1lc3NhZ2UgPSBBUEkuQ3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0TWVzc2FnZTtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uLy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCB7IENvbXBsZXRpb25zIH0gZnJvbSAnLi9jb21wbGV0aW9ucy5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0IGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICBjb21wbGV0aW9uczogQ29tcGxldGlvbnMgPSBuZXcgQ29tcGxldGlvbnModGhpcy5jbGllbnQpO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENoYXQge1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25zID0gQVBJLkNvbXBsZXRpb25zO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uID0gQVBJLkNoYXRDb21wbGV0aW9uO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ2h1bmsgPSBBUEkuQ2hhdENvbXBsZXRpb25DaHVuaztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbk1lc3NhZ2UgPSBBUEkuQ2hhdENvbXBsZXRpb25NZXNzYWdlO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtID0gQVBJLkNoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uUm9sZSA9IEFQSS5DaGF0Q29tcGxldGlvblJvbGU7XG4gIGV4cG9ydCBpbXBvcnQgQ3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0TWVzc2FnZSA9IEFQSS5DcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElQcm9taXNlIH0gZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gJy4uL3N0cmVhbWluZy5qcyc7XG5cbmV4cG9ydCBjbGFzcyBDb21wbGV0aW9ucyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb21wbGV0aW9uIGZvciB0aGUgcHJvdmlkZWQgcHJvbXB0IGFuZCBwYXJhbWV0ZXJzLlxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQVBJUHJvbWlzZTxDb21wbGV0aW9uPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+PjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPiB8IENvbXBsZXRpb24+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxDb21wbGV0aW9uPiB8IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+PiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2NvbXBsZXRpb25zJywgeyBib2R5LCAuLi5vcHRpb25zLCBzdHJlYW06IGJvZHkuc3RyZWFtID8/IGZhbHNlIH0pIGFzXG4gICAgICB8IEFQSVByb21pc2U8Q29tcGxldGlvbj5cbiAgICAgIHwgQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+O1xuICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGNvbXBsZXRpb24gcmVzcG9uc2UgZnJvbSB0aGUgQVBJLiBOb3RlOiBib3RoIHRoZSBzdHJlYW1lZCBhbmRcbiAqIG5vbi1zdHJlYW1lZCByZXNwb25zZSBvYmplY3RzIHNoYXJlIHRoZSBzYW1lIHNoYXBlICh1bmxpa2UgdGhlIGNoYXQgZW5kcG9pbnQpLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb24ge1xuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbXBsZXRpb24uXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBjb21wbGV0aW9uIGNob2ljZXMgdGhlIG1vZGVsIGdlbmVyYXRlZCBmb3IgdGhlIGlucHV0IHByb21wdC5cbiAgICovXG4gIGNob2ljZXM6IEFycmF5PENvbXBsZXRpb25DaG9pY2U+O1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIG9mIHdoZW4gdGhlIGNvbXBsZXRpb24gd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB1c2VkIGZvciBjb21wbGV0aW9uLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgXCJ0ZXh0X2NvbXBsZXRpb25cIlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFVzYWdlIHN0YXRpc3RpY3MgZm9yIHRoZSBjb21wbGV0aW9uIHJlcXVlc3QuXG4gICAqL1xuICB1c2FnZT86IENvbXBsZXRpb25Vc2FnZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ2hvaWNlIHtcbiAgLyoqXG4gICAqIFRoZSByZWFzb24gdGhlIG1vZGVsIHN0b3BwZWQgZ2VuZXJhdGluZyB0b2tlbnMuIFRoaXMgd2lsbCBiZSBgc3RvcGAgaWYgdGhlIG1vZGVsXG4gICAqIGhpdCBhIG5hdHVyYWwgc3RvcCBwb2ludCBvciBhIHByb3ZpZGVkIHN0b3Agc2VxdWVuY2UsIG9yIGBsZW5ndGhgIGlmIHRoZSBtYXhpbXVtXG4gICAqIG51bWJlciBvZiB0b2tlbnMgc3BlY2lmaWVkIGluIHRoZSByZXF1ZXN0IHdhcyByZWFjaGVkLlxuICAgKi9cbiAgZmluaXNoX3JlYXNvbjogJ3N0b3AnIHwgJ2xlbmd0aCc7XG5cbiAgaW5kZXg6IG51bWJlcjtcblxuICBsb2dwcm9iczogQ29tcGxldGlvbkNob2ljZS5Mb2dwcm9icyB8IG51bGw7XG5cbiAgdGV4dDogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENvbXBsZXRpb25DaG9pY2Uge1xuICBleHBvcnQgaW50ZXJmYWNlIExvZ3Byb2JzIHtcbiAgICB0ZXh0X29mZnNldD86IEFycmF5PG51bWJlcj47XG5cbiAgICB0b2tlbl9sb2dwcm9icz86IEFycmF5PG51bWJlcj47XG5cbiAgICB0b2tlbnM/OiBBcnJheTxzdHJpbmc+O1xuXG4gICAgdG9wX2xvZ3Byb2JzPzogQXJyYXk8UmVjb3JkPHN0cmluZywgbnVtYmVyPj47XG4gIH1cbn1cblxuLyoqXG4gKiBVc2FnZSBzdGF0aXN0aWNzIGZvciB0aGUgY29tcGxldGlvbiByZXF1ZXN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25Vc2FnZSB7XG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdG9rZW5zIGluIHRoZSBnZW5lcmF0ZWQgY29tcGxldGlvbi5cbiAgICovXG4gIGNvbXBsZXRpb25fdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiB0b2tlbnMgaW4gdGhlIHByb21wdC5cbiAgICovXG4gIHByb21wdF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogVG90YWwgbnVtYmVyIG9mIHRva2VucyB1c2VkIGluIHRoZSByZXF1ZXN0IChwcm9tcHQgKyBjb21wbGV0aW9uKS5cbiAgICovXG4gIHRvdGFsX3Rva2VuczogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyB8IENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gWW91IGNhbiB1c2UgdGhlXG4gICAqIFtMaXN0IG1vZGVsc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9tb2RlbHMvbGlzdCkgQVBJIHRvIHNlZSBhbGwgb2YgeW91ciBhdmFpbGFibGVcbiAgICogbW9kZWxzLCBvciBzZWUgb3VyIFtNb2RlbCBvdmVydmlld10oL2RvY3MvbW9kZWxzL292ZXJ2aWV3KSBmb3IgZGVzY3JpcHRpb25zIG9mXG4gICAqIHRoZW0uXG4gICAqL1xuICBtb2RlbDpcbiAgICB8IChzdHJpbmcgJiB7fSlcbiAgICB8ICdiYWJiYWdlLTAwMidcbiAgICB8ICdkYXZpbmNpLTAwMidcbiAgICB8ICd0ZXh0LWRhdmluY2ktMDAzJ1xuICAgIHwgJ3RleHQtZGF2aW5jaS0wMDInXG4gICAgfCAndGV4dC1kYXZpbmNpLTAwMSdcbiAgICB8ICdjb2RlLWRhdmluY2ktMDAyJ1xuICAgIHwgJ3RleHQtY3VyaWUtMDAxJ1xuICAgIHwgJ3RleHQtYmFiYmFnZS0wMDEnXG4gICAgfCAndGV4dC1hZGEtMDAxJztcblxuICAvKipcbiAgICogVGhlIHByb21wdChzKSB0byBnZW5lcmF0ZSBjb21wbGV0aW9ucyBmb3IsIGVuY29kZWQgYXMgYSBzdHJpbmcsIGFycmF5IG9mXG4gICAqIHN0cmluZ3MsIGFycmF5IG9mIHRva2Vucywgb3IgYXJyYXkgb2YgdG9rZW4gYXJyYXlzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgPHxlbmRvZnRleHR8PiBpcyB0aGUgZG9jdW1lbnQgc2VwYXJhdG9yIHRoYXQgdGhlIG1vZGVsIHNlZXMgZHVyaW5nXG4gICAqIHRyYWluaW5nLCBzbyBpZiBhIHByb21wdCBpcyBub3Qgc3BlY2lmaWVkIHRoZSBtb2RlbCB3aWxsIGdlbmVyYXRlIGFzIGlmIGZyb20gdGhlXG4gICAqIGJlZ2lubmluZyBvZiBhIG5ldyBkb2N1bWVudC5cbiAgICovXG4gIHByb21wdDogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPiB8IEFycmF5PG51bWJlcj4gfCBBcnJheTxBcnJheTxudW1iZXI+PiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBgYmVzdF9vZmAgY29tcGxldGlvbnMgc2VydmVyLXNpZGUgYW5kIHJldHVybnMgdGhlIFwiYmVzdFwiICh0aGUgb25lIHdpdGhcbiAgICogdGhlIGhpZ2hlc3QgbG9nIHByb2JhYmlsaXR5IHBlciB0b2tlbikuIFJlc3VsdHMgY2Fubm90IGJlIHN0cmVhbWVkLlxuICAgKlxuICAgKiBXaGVuIHVzZWQgd2l0aCBgbmAsIGBiZXN0X29mYCBjb250cm9scyB0aGUgbnVtYmVyIG9mIGNhbmRpZGF0ZSBjb21wbGV0aW9ucyBhbmRcbiAgICogYG5gIHNwZWNpZmllcyBob3cgbWFueSB0byByZXR1cm4gXHUyMDEzIGBiZXN0X29mYCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBgbmAuXG4gICAqXG4gICAqICoqTm90ZToqKiBCZWNhdXNlIHRoaXMgcGFyYW1ldGVyIGdlbmVyYXRlcyBtYW55IGNvbXBsZXRpb25zLCBpdCBjYW4gcXVpY2tseVxuICAgKiBjb25zdW1lIHlvdXIgdG9rZW4gcXVvdGEuIFVzZSBjYXJlZnVsbHkgYW5kIGVuc3VyZSB0aGF0IHlvdSBoYXZlIHJlYXNvbmFibGVcbiAgICogc2V0dGluZ3MgZm9yIGBtYXhfdG9rZW5zYCBhbmQgYHN0b3BgLlxuICAgKi9cbiAgYmVzdF9vZj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEVjaG8gYmFjayB0aGUgcHJvbXB0IGluIGFkZGl0aW9uIHRvIHRoZSBjb21wbGV0aW9uXG4gICAqL1xuICBlY2hvPzogYm9vbGVhbiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE51bWJlciBiZXR3ZWVuIC0yLjAgYW5kIDIuMC4gUG9zaXRpdmUgdmFsdWVzIHBlbmFsaXplIG5ldyB0b2tlbnMgYmFzZWQgb24gdGhlaXJcbiAgICogZXhpc3RpbmcgZnJlcXVlbmN5IGluIHRoZSB0ZXh0IHNvIGZhciwgZGVjcmVhc2luZyB0aGUgbW9kZWwncyBsaWtlbGlob29kIHRvXG4gICAqIHJlcGVhdCB0aGUgc2FtZSBsaW5lIHZlcmJhdGltLlxuICAgKlxuICAgKiBbU2VlIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZnJlcXVlbmN5IGFuZCBwcmVzZW5jZSBwZW5hbHRpZXMuXSgvZG9jcy9ndWlkZXMvZ3B0L3BhcmFtZXRlci1kZXRhaWxzKVxuICAgKi9cbiAgZnJlcXVlbmN5X3BlbmFsdHk/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBNb2RpZnkgdGhlIGxpa2VsaWhvb2Qgb2Ygc3BlY2lmaWVkIHRva2VucyBhcHBlYXJpbmcgaW4gdGhlIGNvbXBsZXRpb24uXG4gICAqXG4gICAqIEFjY2VwdHMgYSBqc29uIG9iamVjdCB0aGF0IG1hcHMgdG9rZW5zIChzcGVjaWZpZWQgYnkgdGhlaXIgdG9rZW4gSUQgaW4gdGhlIEdQVFxuICAgKiB0b2tlbml6ZXIpIHRvIGFuIGFzc29jaWF0ZWQgYmlhcyB2YWx1ZSBmcm9tIC0xMDAgdG8gMTAwLiBZb3UgY2FuIHVzZSB0aGlzXG4gICAqIFt0b2tlbml6ZXIgdG9vbF0oL3Rva2VuaXplcj92aWV3PWJwZSkgKHdoaWNoIHdvcmtzIGZvciBib3RoIEdQVC0yIGFuZCBHUFQtMykgdG9cbiAgICogY29udmVydCB0ZXh0IHRvIHRva2VuIElEcy4gTWF0aGVtYXRpY2FsbHksIHRoZSBiaWFzIGlzIGFkZGVkIHRvIHRoZSBsb2dpdHNcbiAgICogZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBwcmlvciB0byBzYW1wbGluZy4gVGhlIGV4YWN0IGVmZmVjdCB3aWxsIHZhcnkgcGVyIG1vZGVsLFxuICAgKiBidXQgdmFsdWVzIGJldHdlZW4gLTEgYW5kIDEgc2hvdWxkIGRlY3JlYXNlIG9yIGluY3JlYXNlIGxpa2VsaWhvb2Qgb2Ygc2VsZWN0aW9uO1xuICAgKiB2YWx1ZXMgbGlrZSAtMTAwIG9yIDEwMCBzaG91bGQgcmVzdWx0IGluIGEgYmFuIG9yIGV4Y2x1c2l2ZSBzZWxlY3Rpb24gb2YgdGhlXG4gICAqIHJlbGV2YW50IHRva2VuLlxuICAgKlxuICAgKiBBcyBhbiBleGFtcGxlLCB5b3UgY2FuIHBhc3MgYHtcIjUwMjU2XCI6IC0xMDB9YCB0byBwcmV2ZW50IHRoZSA8fGVuZG9mdGV4dHw+IHRva2VuXG4gICAqIGZyb20gYmVpbmcgZ2VuZXJhdGVkLlxuICAgKi9cbiAgbG9naXRfYmlhcz86IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBJbmNsdWRlIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvbiB0aGUgYGxvZ3Byb2JzYCBtb3N0IGxpa2VseSB0b2tlbnMsIGFzIHdlbGwgdGhlXG4gICAqIGNob3NlbiB0b2tlbnMuIEZvciBleGFtcGxlLCBpZiBgbG9ncHJvYnNgIGlzIDUsIHRoZSBBUEkgd2lsbCByZXR1cm4gYSBsaXN0IG9mXG4gICAqIHRoZSA1IG1vc3QgbGlrZWx5IHRva2Vucy4gVGhlIEFQSSB3aWxsIGFsd2F5cyByZXR1cm4gdGhlIGBsb2dwcm9iYCBvZiB0aGVcbiAgICogc2FtcGxlZCB0b2tlbiwgc28gdGhlcmUgbWF5IGJlIHVwIHRvIGBsb2dwcm9icysxYCBlbGVtZW50cyBpbiB0aGUgcmVzcG9uc2UuXG4gICAqXG4gICAqIFRoZSBtYXhpbXVtIHZhbHVlIGZvciBgbG9ncHJvYnNgIGlzIDUuXG4gICAqL1xuICBsb2dwcm9icz86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBbdG9rZW5zXSgvdG9rZW5pemVyKSB0byBnZW5lcmF0ZSBpbiB0aGUgY29tcGxldGlvbi5cbiAgICpcbiAgICogVGhlIHRva2VuIGNvdW50IG9mIHlvdXIgcHJvbXB0IHBsdXMgYG1heF90b2tlbnNgIGNhbm5vdCBleGNlZWQgdGhlIG1vZGVsJ3NcbiAgICogY29udGV4dCBsZW5ndGguXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX2NvdW50X3Rva2Vuc193aXRoX3Rpa3Rva2VuLmlweW5iKVxuICAgKiBmb3IgY291bnRpbmcgdG9rZW5zLlxuICAgKi9cbiAgbWF4X3Rva2Vucz86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEhvdyBtYW55IGNvbXBsZXRpb25zIHRvIGdlbmVyYXRlIGZvciBlYWNoIHByb21wdC5cbiAgICpcbiAgICogKipOb3RlOioqIEJlY2F1c2UgdGhpcyBwYXJhbWV0ZXIgZ2VuZXJhdGVzIG1hbnkgY29tcGxldGlvbnMsIGl0IGNhbiBxdWlja2x5XG4gICAqIGNvbnN1bWUgeW91ciB0b2tlbiBxdW90YS4gVXNlIGNhcmVmdWxseSBhbmQgZW5zdXJlIHRoYXQgeW91IGhhdmUgcmVhc29uYWJsZVxuICAgKiBzZXR0aW5ncyBmb3IgYG1heF90b2tlbnNgIGFuZCBgc3RvcGAuXG4gICAqL1xuICBuPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogTnVtYmVyIGJldHdlZW4gLTIuMCBhbmQgMi4wLiBQb3NpdGl2ZSB2YWx1ZXMgcGVuYWxpemUgbmV3IHRva2VucyBiYXNlZCBvblxuICAgKiB3aGV0aGVyIHRoZXkgYXBwZWFyIGluIHRoZSB0ZXh0IHNvIGZhciwgaW5jcmVhc2luZyB0aGUgbW9kZWwncyBsaWtlbGlob29kIHRvXG4gICAqIHRhbGsgYWJvdXQgbmV3IHRvcGljcy5cbiAgICpcbiAgICogW1NlZSBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGZyZXF1ZW5jeSBhbmQgcHJlc2VuY2UgcGVuYWx0aWVzLl0oL2RvY3MvZ3VpZGVzL2dwdC9wYXJhbWV0ZXItZGV0YWlscylcbiAgICovXG4gIHByZXNlbmNlX3BlbmFsdHk/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBVcCB0byA0IHNlcXVlbmNlcyB3aGVyZSB0aGUgQVBJIHdpbGwgc3RvcCBnZW5lcmF0aW5nIGZ1cnRoZXIgdG9rZW5zLiBUaGVcbiAgICogcmV0dXJuZWQgdGV4dCB3aWxsIG5vdCBjb250YWluIHRoZSBzdG9wIHNlcXVlbmNlLlxuICAgKi9cbiAgc3RvcD86IHN0cmluZyB8IG51bGwgfCBBcnJheTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN0cmVhbSBiYWNrIHBhcnRpYWwgcHJvZ3Jlc3MuIElmIHNldCwgdG9rZW5zIHdpbGwgYmUgc2VudCBhc1xuICAgKiBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLCB3aXRoIHRoZSBzdHJlYW0gdGVybWluYXRlZCBieSBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2UuXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX3N0cmVhbV9jb21wbGV0aW9ucy5pcHluYikuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIHN1ZmZpeCB0aGF0IGNvbWVzIGFmdGVyIGEgY29tcGxldGlvbiBvZiBpbnNlcnRlZCB0ZXh0LlxuICAgKi9cbiAgc3VmZml4Pzogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogV2hhdCBzYW1wbGluZyB0ZW1wZXJhdHVyZSB0byB1c2UsIGJldHdlZW4gMCBhbmQgMi4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsXG4gICAqIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlXG4gICAqIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuXG4gICAqXG4gICAqIFdlIGdlbmVyYWxseSByZWNvbW1lbmQgYWx0ZXJpbmcgdGhpcyBvciBgdG9wX3BgIGJ1dCBub3QgYm90aC5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogQW4gYWx0ZXJuYXRpdmUgdG8gc2FtcGxpbmcgd2l0aCB0ZW1wZXJhdHVyZSwgY2FsbGVkIG51Y2xldXMgc2FtcGxpbmcsIHdoZXJlIHRoZVxuICAgKiBtb2RlbCBjb25zaWRlcnMgdGhlIHJlc3VsdHMgb2YgdGhlIHRva2VucyB3aXRoIHRvcF9wIHByb2JhYmlsaXR5IG1hc3MuIFNvIDAuMVxuICAgKiBtZWFucyBvbmx5IHRoZSB0b2tlbnMgY29tcHJpc2luZyB0aGUgdG9wIDEwJSBwcm9iYWJpbGl0eSBtYXNzIGFyZSBjb25zaWRlcmVkLlxuICAgKlxuICAgKiBXZSBnZW5lcmFsbHkgcmVjb21tZW5kIGFsdGVyaW5nIHRoaXMgb3IgYHRlbXBlcmF0dXJlYCBidXQgbm90IGJvdGguXG4gICAqL1xuICB0b3BfcD86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yXG4gICAqIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAqL1xuICB1c2VyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMge1xuICBleHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGV4dGVuZHMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBzdHJlYW0gYmFjayBwYXJ0aWFsIHByb2dyZXNzLiBJZiBzZXQsIHRva2VucyB3aWxsIGJlIHNlbnQgYXNcbiAgICogZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtPzogZmFsc2UgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN0cmVhbSBiYWNrIHBhcnRpYWwgcHJvZ3Jlc3MuIElmIHNldCwgdG9rZW5zIHdpbGwgYmUgc2VudCBhc1xuICAgKiBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLCB3aXRoIHRoZSBzdHJlYW0gdGVybWluYXRlZCBieSBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2UuXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX3N0cmVhbV9jb21wbGV0aW9ucy5pcHluYikuXG4gICAqL1xuICBzdHJlYW06IHRydWU7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ29tcGxldGlvbnMge1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb24gPSBBUEkuQ29tcGxldGlvbjtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ2hvaWNlID0gQVBJLkNvbXBsZXRpb25DaG9pY2U7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvblVzYWdlID0gQVBJLkNvbXBsZXRpb25Vc2FnZTtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBFbWJlZGRpbmdzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlbWJlZGRpbmcgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgaW5wdXQgdGV4dC5cbiAgICovXG4gIGNyZWF0ZShcbiAgICBib2R5OiBFbWJlZGRpbmdDcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxDcmVhdGVFbWJlZGRpbmdSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9lbWJlZGRpbmdzJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlRW1iZWRkaW5nUmVzcG9uc2Uge1xuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgZW1iZWRkaW5ncyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsLlxuICAgKi9cbiAgZGF0YTogQXJyYXk8RW1iZWRkaW5nPjtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIG1vZGVsIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGVtYmVkZGluZy5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwiZW1iZWRkaW5nXCIuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHVzYWdlIGluZm9ybWF0aW9uIGZvciB0aGUgcmVxdWVzdC5cbiAgICovXG4gIHVzYWdlOiBDcmVhdGVFbWJlZGRpbmdSZXNwb25zZS5Vc2FnZTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDcmVhdGVFbWJlZGRpbmdSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBUaGUgdXNhZ2UgaW5mb3JtYXRpb24gZm9yIHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBVc2FnZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiB0b2tlbnMgdXNlZCBieSB0aGUgcHJvbXB0LlxuICAgICAqL1xuICAgIHByb21wdF90b2tlbnM6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIHVzZWQgYnkgdGhlIHJlcXVlc3QuXG4gICAgICovXG4gICAgdG90YWxfdG9rZW5zOiBudW1iZXI7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGVtYmVkZGluZyB2ZWN0b3IgcmV0dXJuZWQgYnkgZW1iZWRkaW5nIGVuZHBvaW50LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVtYmVkZGluZyB7XG4gIC8qKlxuICAgKiBUaGUgZW1iZWRkaW5nIHZlY3Rvciwgd2hpY2ggaXMgYSBsaXN0IG9mIGZsb2F0cy4gVGhlIGxlbmd0aCBvZiB2ZWN0b3IgZGVwZW5kcyBvblxuICAgKiB0aGUgbW9kZWwgYXMgbGlzdGVkIGluIHRoZSBbZW1iZWRkaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvZW1iZWRkaW5ncykuXG4gICAqL1xuICBlbWJlZGRpbmc6IEFycmF5PG51bWJlcj47XG5cbiAgLyoqXG4gICAqIFRoZSBpbmRleCBvZiB0aGUgZW1iZWRkaW5nIGluIHRoZSBsaXN0IG9mIGVtYmVkZGluZ3MuXG4gICAqL1xuICBpbmRleDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBcImVtYmVkZGluZ1wiLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1iZWRkaW5nQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIElucHV0IHRleHQgdG8gZW1iZWQsIGVuY29kZWQgYXMgYSBzdHJpbmcgb3IgYXJyYXkgb2YgdG9rZW5zLiBUbyBlbWJlZCBtdWx0aXBsZVxuICAgKiBpbnB1dHMgaW4gYSBzaW5nbGUgcmVxdWVzdCwgcGFzcyBhbiBhcnJheSBvZiBzdHJpbmdzIG9yIGFycmF5IG9mIHRva2VuIGFycmF5cy5cbiAgICogRWFjaCBpbnB1dCBtdXN0IG5vdCBleGNlZWQgdGhlIG1heCBpbnB1dCB0b2tlbnMgZm9yIHRoZSBtb2RlbCAoODE5MSB0b2tlbnMgZm9yXG4gICAqIGB0ZXh0LWVtYmVkZGluZy1hZGEtMDAyYCkuXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX2NvdW50X3Rva2Vuc193aXRoX3Rpa3Rva2VuLmlweW5iKVxuICAgKiBmb3IgY291bnRpbmcgdG9rZW5zLlxuICAgKi9cbiAgaW5wdXQ6IHN0cmluZyB8IEFycmF5PHN0cmluZz4gfCBBcnJheTxudW1iZXI+IHwgQXJyYXk8QXJyYXk8bnVtYmVyPj47XG5cbiAgLyoqXG4gICAqIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIFlvdSBjYW4gdXNlIHRoZVxuICAgKiBbTGlzdCBtb2RlbHNdKC9kb2NzL2FwaS1yZWZlcmVuY2UvbW9kZWxzL2xpc3QpIEFQSSB0byBzZWUgYWxsIG9mIHlvdXIgYXZhaWxhYmxlXG4gICAqIG1vZGVscywgb3Igc2VlIG91ciBbTW9kZWwgb3ZlcnZpZXddKC9kb2NzL21vZGVscy9vdmVydmlldykgZm9yIGRlc2NyaXB0aW9ucyBvZlxuICAgKiB0aGVtLlxuICAgKi9cbiAgbW9kZWw6IChzdHJpbmcgJiB7fSkgfCAndGV4dC1lbWJlZGRpbmctYWRhLTAwMic7XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yXG4gICAqIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAqL1xuICB1c2VyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEVtYmVkZGluZ3Mge1xuICBleHBvcnQgaW1wb3J0IENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlID0gQVBJLkNyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlO1xuICBleHBvcnQgaW1wb3J0IEVtYmVkZGluZyA9IEFQSS5FbWJlZGRpbmc7XG4gIGV4cG9ydCBpbXBvcnQgRW1iZWRkaW5nQ3JlYXRlUGFyYW1zID0gQVBJLkVtYmVkZGluZ0NyZWF0ZVBhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBDb21wbGV0aW9ucyBmcm9tICcuL2NvbXBsZXRpb25zLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcblxuZXhwb3J0IGNsYXNzIEVkaXRzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBlZGl0IGZvciB0aGUgcHJvdmlkZWQgaW5wdXQsIGluc3RydWN0aW9uLCBhbmQgcGFyYW1ldGVycy5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgVGhlIEVkaXRzIEFQSSBpcyBkZXByZWNhdGVkOyBwbGVhc2UgdXNlIENoYXQgQ29tcGxldGlvbnMgaW5zdGVhZC5cbiAgICpcbiAgICogaHR0cHM6Ly9vcGVuYWkuY29tL2Jsb2cvZ3B0LTQtYXBpLWdlbmVyYWwtYXZhaWxhYmlsaXR5I2RlcHJlY2F0aW9uLW9mLXRoZS1lZGl0cy1hcGlcbiAgICovXG4gIGNyZWF0ZShib2R5OiBFZGl0Q3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxFZGl0PiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2VkaXRzJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdCB7XG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgZWRpdCBjaG9pY2VzLiBDYW4gYmUgbW9yZSB0aGFuIG9uZSBpZiBgbmAgaXMgZ3JlYXRlciB0aGFuIDEuXG4gICAqL1xuICBjaG9pY2VzOiBBcnJheTxFZGl0LkNob2ljZT47XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgb2Ygd2hlbiB0aGUgZWRpdCB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgYGVkaXRgLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFVzYWdlIHN0YXRpc3RpY3MgZm9yIHRoZSBjb21wbGV0aW9uIHJlcXVlc3QuXG4gICAqL1xuICB1c2FnZTogQ29tcGxldGlvbnMuQ29tcGxldGlvblVzYWdlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEVkaXQge1xuICBleHBvcnQgaW50ZXJmYWNlIENob2ljZSB7XG4gICAgLyoqXG4gICAgICogVGhlIHJlYXNvbiB0aGUgbW9kZWwgc3RvcHBlZCBnZW5lcmF0aW5nIHRva2Vucy4gVGhpcyB3aWxsIGJlIGBzdG9wYCBpZiB0aGUgbW9kZWxcbiAgICAgKiBoaXQgYSBuYXR1cmFsIHN0b3AgcG9pbnQgb3IgYSBwcm92aWRlZCBzdG9wIHNlcXVlbmNlLCBvciBgbGVuZ3RoYCBpZiB0aGUgbWF4aW11bVxuICAgICAqIG51bWJlciBvZiB0b2tlbnMgc3BlY2lmaWVkIGluIHRoZSByZXF1ZXN0IHdhcyByZWFjaGVkLlxuICAgICAqL1xuICAgIGZpbmlzaF9yZWFzb246ICdzdG9wJyB8ICdsZW5ndGgnO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBjaG9pY2UgaW4gdGhlIGxpc3Qgb2YgY2hvaWNlcy5cbiAgICAgKi9cbiAgICBpbmRleDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGVkaXRlZCByZXN1bHQuXG4gICAgICovXG4gICAgdGV4dDogc3RyaW5nO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdENyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgaW5zdHJ1Y3Rpb24gdGhhdCB0ZWxscyB0aGUgbW9kZWwgaG93IHRvIGVkaXQgdGhlIHByb21wdC5cbiAgICovXG4gIGluc3RydWN0aW9uOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIFlvdSBjYW4gdXNlIHRoZSBgdGV4dC1kYXZpbmNpLWVkaXQtMDAxYCBvclxuICAgKiBgY29kZS1kYXZpbmNpLWVkaXQtMDAxYCBtb2RlbCB3aXRoIHRoaXMgZW5kcG9pbnQuXG4gICAqL1xuICBtb2RlbDogKHN0cmluZyAmIHt9KSB8ICd0ZXh0LWRhdmluY2ktZWRpdC0wMDEnIHwgJ2NvZGUtZGF2aW5jaS1lZGl0LTAwMSc7XG5cbiAgLyoqXG4gICAqIFRoZSBpbnB1dCB0ZXh0IHRvIHVzZSBhcyBhIHN0YXJ0aW5nIHBvaW50IGZvciB0aGUgZWRpdC5cbiAgICovXG4gIGlucHV0Pzogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogSG93IG1hbnkgZWRpdHMgdG8gZ2VuZXJhdGUgZm9yIHRoZSBpbnB1dCBhbmQgaW5zdHJ1Y3Rpb24uXG4gICAqL1xuICBuPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogV2hhdCBzYW1wbGluZyB0ZW1wZXJhdHVyZSB0byB1c2UsIGJldHdlZW4gMCBhbmQgMi4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsXG4gICAqIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlXG4gICAqIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuXG4gICAqXG4gICAqIFdlIGdlbmVyYWxseSByZWNvbW1lbmQgYWx0ZXJpbmcgdGhpcyBvciBgdG9wX3BgIGJ1dCBub3QgYm90aC5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogQW4gYWx0ZXJuYXRpdmUgdG8gc2FtcGxpbmcgd2l0aCB0ZW1wZXJhdHVyZSwgY2FsbGVkIG51Y2xldXMgc2FtcGxpbmcsIHdoZXJlIHRoZVxuICAgKiBtb2RlbCBjb25zaWRlcnMgdGhlIHJlc3VsdHMgb2YgdGhlIHRva2VucyB3aXRoIHRvcF9wIHByb2JhYmlsaXR5IG1hc3MuIFNvIDAuMVxuICAgKiBtZWFucyBvbmx5IHRoZSB0b2tlbnMgY29tcHJpc2luZyB0aGUgdG9wIDEwJSBwcm9iYWJpbGl0eSBtYXNzIGFyZSBjb25zaWRlcmVkLlxuICAgKlxuICAgKiBXZSBnZW5lcmFsbHkgcmVjb21tZW5kIGFsdGVyaW5nIHRoaXMgb3IgYHRlbXBlcmF0dXJlYCBidXQgbm90IGJvdGguXG4gICAqL1xuICB0b3BfcD86IG51bWJlciB8IG51bGw7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRWRpdHMge1xuICBleHBvcnQgaW1wb3J0IEVkaXQgPSBBUEkuRWRpdDtcbiAgZXhwb3J0IGltcG9ydCBFZGl0Q3JlYXRlUGFyYW1zID0gQVBJLkVkaXRDcmVhdGVQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0IHsgc2xlZXAgfSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IgfSBmcm9tICcuLi9lcnJvci5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyB0eXBlIFVwbG9hZGFibGUsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgUGFnZSB9IGZyb20gJy4uL3BhZ2luYXRpb24uanMnO1xuXG5leHBvcnQgY2xhc3MgRmlsZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBVcGxvYWQgYSBmaWxlIHRoYXQgY29udGFpbnMgZG9jdW1lbnQocykgdG8gYmUgdXNlZCBhY3Jvc3MgdmFyaW91c1xuICAgKiBlbmRwb2ludHMvZmVhdHVyZXMuIEN1cnJlbnRseSwgdGhlIHNpemUgb2YgYWxsIHRoZSBmaWxlcyB1cGxvYWRlZCBieSBvbmVcbiAgICogb3JnYW5pemF0aW9uIGNhbiBiZSB1cCB0byAxIEdCLiBQbGVhc2UgY29udGFjdCB1cyBpZiB5b3UgbmVlZCB0byBpbmNyZWFzZSB0aGVcbiAgICogc3RvcmFnZSBsaW1pdC5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBGaWxlQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaWxlT2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ZpbGVzJywgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zKHsgYm9keSwgLi4ub3B0aW9ucyB9KSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIGZpbGUuXG4gICAqL1xuICByZXRyaWV2ZShmaWxlSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmlsZU9iamVjdD4ge1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbGVzLyR7ZmlsZUlkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIGZpbGVzIHRoYXQgYmVsb25nIHRvIHRoZSB1c2VyJ3Mgb3JnYW5pemF0aW9uLlxuICAgKi9cbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8RmlsZU9iamVjdHNQYWdlLCBGaWxlT2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QVBJTGlzdCgnL2ZpbGVzJywgRmlsZU9iamVjdHNQYWdlLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmaWxlLlxuICAgKi9cbiAgZGVsKGZpbGVJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaWxlRGVsZXRlZD4ge1xuICAgIHJldHVybiB0aGlzLmRlbGV0ZShgL2ZpbGVzLyR7ZmlsZUlkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNvbnRlbnRzIG9mIHRoZSBzcGVjaWZpZWQgZmlsZVxuICAgKi9cbiAgcmV0cmlldmVDb250ZW50KGZpbGVJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9maWxlcy8ke2ZpbGVJZH0vY29udGVudGAsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLCAuLi5vcHRpb25zPy5oZWFkZXJzIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogV2FpdHMgZm9yIHRoZSBnaXZlbiBmaWxlIHRvIGJlIHByb2Nlc3NlZCwgZGVmYXVsdCB0aW1lb3V0IGlzIDMwIG1pbnMuXG4gICAqL1xuICBhc3luYyB3YWl0Rm9yUHJvY2Vzc2luZyhcbiAgICBpZDogc3RyaW5nLFxuICAgIHsgcG9sbEludGVydmFsID0gNTAwMCwgbWF4V2FpdCA9IDMwICogNjAgKiAxMDAwIH06IHsgcG9sbEludGVydmFsPzogbnVtYmVyOyBtYXhXYWl0PzogbnVtYmVyIH0gPSB7fSxcbiAgKTogUHJvbWlzZTxGaWxlT2JqZWN0PiB7XG4gICAgY29uc3QgVEVSTUlOQUxfU1RBVEVTID0gbmV3IFNldChbJ3Byb2Nlc3NlZCcsICdlcnJvcicsICdkZWxldGVkJ10pO1xuXG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIGxldCBmaWxlID0gYXdhaXQgdGhpcy5yZXRyaWV2ZShpZCk7XG5cbiAgICB3aGlsZSAoIWZpbGUuc3RhdHVzIHx8ICFURVJNSU5BTF9TVEFURVMuaGFzKGZpbGUuc3RhdHVzKSkge1xuICAgICAgYXdhaXQgc2xlZXAocG9sbEludGVydmFsKTtcblxuICAgICAgZmlsZSA9IGF3YWl0IHRoaXMucmV0cmlldmUoaWQpO1xuICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydCA+IG1heFdhaXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3Ioe1xuICAgICAgICAgIG1lc3NhZ2U6IGBHaXZpbmcgdXAgb24gd2FpdGluZyBmb3IgZmlsZSAke2lkfSB0byBmaW5pc2ggcHJvY2Vzc2luZyBhZnRlciAke21heFdhaXR9IG1pbGxpc2Vjb25kcy5gLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmlsZTtcbiAgfVxufVxuXG4vKipcbiAqIE5vdGU6IG5vIHBhZ2luYXRpb24gYWN0dWFsbHkgb2NjdXJzIHlldCwgdGhpcyBpcyBmb3IgZm9yd2FyZHMtY29tcGF0aWJpbGl0eS5cbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVPYmplY3RzUGFnZSBleHRlbmRzIFBhZ2U8RmlsZU9iamVjdD4ge31cbi8vIGFsaWFzIHNvIHdlIGNhbiBleHBvcnQgaXQgaW4gdGhlIG5hbWVzcGFjZVxudHlwZSBfRmlsZU9iamVjdHNQYWdlID0gRmlsZU9iamVjdHNQYWdlO1xuXG5leHBvcnQgdHlwZSBGaWxlQ29udGVudCA9IHN0cmluZztcblxuZXhwb3J0IGludGVyZmFjZSBGaWxlRGVsZXRlZCB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgZGVsZXRlZDogYm9vbGVhbjtcblxuICBvYmplY3Q6IHN0cmluZztcbn1cblxuLyoqXG4gKiBUaGUgYEZpbGVgIG9iamVjdCByZXByZXNlbnRzIGEgZG9jdW1lbnQgdGhhdCBoYXMgYmVlbiB1cGxvYWRlZCB0byBPcGVuQUkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZU9iamVjdCB7XG4gIC8qKlxuICAgKiBUaGUgZmlsZSBpZGVudGlmaWVyLCB3aGljaCBjYW4gYmUgcmVmZXJlbmNlZCBpbiB0aGUgQVBJIGVuZHBvaW50cy5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBzaXplIG9mIHRoZSBmaWxlIGluIGJ5dGVzLlxuICAgKi9cbiAgYnl0ZXM6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSBmb3Igd2hlbiB0aGUgZmlsZSB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGZpbGUuXG4gICAqL1xuICBmaWxlbmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBcImZpbGVcIi5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgaW50ZW5kZWQgcHVycG9zZSBvZiB0aGUgZmlsZS4gQ3VycmVudGx5LCBvbmx5IFwiZmluZS10dW5lXCIgaXMgc3VwcG9ydGVkLlxuICAgKi9cbiAgcHVycG9zZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIGZpbGUsIHdoaWNoIGNhbiBiZSBlaXRoZXIgYHVwbG9hZGVkYCwgYHByb2Nlc3NlZGAsXG4gICAqIGBwZW5kaW5nYCwgYGVycm9yYCwgYGRlbGV0aW5nYCBvciBgZGVsZXRlZGAuXG4gICAqL1xuICBzdGF0dXM/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgZGV0YWlscyBhYm91dCB0aGUgc3RhdHVzIG9mIHRoZSBmaWxlLiBJZiB0aGUgZmlsZSBpcyBpbiB0aGUgYGVycm9yYFxuICAgKiBzdGF0ZSwgdGhpcyB3aWxsIGluY2x1ZGUgYSBtZXNzYWdlIGRlc2NyaWJpbmcgdGhlIGVycm9yLlxuICAgKi9cbiAgc3RhdHVzX2RldGFpbHM/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogTmFtZSBvZiB0aGUgW0pTT04gTGluZXNdKGh0dHBzOi8vanNvbmxpbmVzLnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC8pIGZpbGUgdG8gYmVcbiAgICogdXBsb2FkZWQuXG4gICAqXG4gICAqIElmIHRoZSBgcHVycG9zZWAgaXMgc2V0IHRvIFwiZmluZS10dW5lXCIsIHRoZSBmaWxlIHdpbGwgYmUgdXNlZCBmb3IgZmluZS10dW5pbmcuXG4gICAqL1xuICBmaWxlOiBVcGxvYWRhYmxlO1xuXG4gIC8qKlxuICAgKiBUaGUgaW50ZW5kZWQgcHVycG9zZSBvZiB0aGUgdXBsb2FkZWQgZG9jdW1lbnRzLlxuICAgKlxuICAgKiBVc2UgXCJmaW5lLXR1bmVcIiBmb3IgW2ZpbmUtdHVuaW5nXSgvZG9jcy9hcGktcmVmZXJlbmNlL2ZpbmUtdHVuaW5nKS4gVGhpcyBhbGxvd3NcbiAgICogdXMgdG8gdmFsaWRhdGUgdGhlIGZvcm1hdCBvZiB0aGUgdXBsb2FkZWQgZmlsZS5cbiAgICovXG4gIHB1cnBvc2U6IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBGaWxlcyB7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZUNvbnRlbnQgPSBBUEkuRmlsZUNvbnRlbnQ7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZURlbGV0ZWQgPSBBUEkuRmlsZURlbGV0ZWQ7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZU9iamVjdCA9IEFQSS5GaWxlT2JqZWN0O1xuICBleHBvcnQgdHlwZSBGaWxlT2JqZWN0c1BhZ2UgPSBfRmlsZU9iamVjdHNQYWdlO1xuICBleHBvcnQgaW1wb3J0IEZpbGVDcmVhdGVQYXJhbXMgPSBBUEkuRmlsZUNyZWF0ZVBhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUHJvbWlzZSB9IGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBGaWxlcyBmcm9tICcuL2ZpbGVzLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IFBhZ2UgfSBmcm9tICcuLi9wYWdpbmF0aW9uLmpzJztcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gJy4uL3N0cmVhbWluZy5qcyc7XG5cbmV4cG9ydCBjbGFzcyBGaW5lVHVuZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgam9iIHRoYXQgZmluZS10dW5lcyBhIHNwZWNpZmllZCBtb2RlbCBmcm9tIGEgZ2l2ZW4gZGF0YXNldC5cbiAgICpcbiAgICogUmVzcG9uc2UgaW5jbHVkZXMgZGV0YWlscyBvZiB0aGUgZW5xdWV1ZWQgam9iIGluY2x1ZGluZyBqb2Igc3RhdHVzIGFuZCB0aGUgbmFtZVxuICAgKiBvZiB0aGUgZmluZS10dW5lZCBtb2RlbHMgb25jZSBjb21wbGV0ZS5cbiAgICpcbiAgICogW0xlYXJuIG1vcmUgYWJvdXQgZmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcpXG4gICAqL1xuICBjcmVhdGUoYm9keTogRmluZVR1bmVDcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbmVUdW5lPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ZpbmUtdHVuZXMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBpbmZvIGFib3V0IHRoZSBmaW5lLXR1bmUgam9iLlxuICAgKlxuICAgKiBbTGVhcm4gbW9yZSBhYm91dCBmaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZylcbiAgICovXG4gIHJldHJpZXZlKGZpbmVUdW5lSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmluZVR1bmU+IHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9maW5lLXR1bmVzLyR7ZmluZVR1bmVJZH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0IHlvdXIgb3JnYW5pemF0aW9uJ3MgZmluZS10dW5pbmcgam9ic1xuICAgKi9cbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8RmluZVR1bmVzUGFnZSwgRmluZVR1bmU+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBUElMaXN0KCcvZmluZS10dW5lcycsIEZpbmVUdW5lc1BhZ2UsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEltbWVkaWF0ZWx5IGNhbmNlbCBhIGZpbmUtdHVuZSBqb2IuXG4gICAqL1xuICBjYW5jZWwoZmluZVR1bmVJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaW5lVHVuZT4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoYC9maW5lLXR1bmVzLyR7ZmluZVR1bmVJZH0vY2FuY2VsYCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZpbmUtZ3JhaW5lZCBzdGF0dXMgdXBkYXRlcyBmb3IgYSBmaW5lLXR1bmUgam9iLlxuICAgKi9cbiAgbGlzdEV2ZW50cyhcbiAgICBmaW5lVHVuZUlkOiBzdHJpbmcsXG4gICAgcXVlcnk/OiBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8RmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2U+O1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5lSWQ6IHN0cmluZyxcbiAgICBxdWVyeTogRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxGaW5lVHVuZUV2ZW50Pj47XG4gIGxpc3RFdmVudHMoXG4gICAgZmluZVR1bmVJZDogc3RyaW5nLFxuICAgIHF1ZXJ5PzogRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zQmFzZSB8IHVuZGVmaW5lZCxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08RmluZVR1bmVFdmVudD4gfCBGaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZT47XG4gIGxpc3RFdmVudHMoXG4gICAgZmluZVR1bmVJZDogc3RyaW5nLFxuICAgIHF1ZXJ5PzogRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zIHwgdW5kZWZpbmVkLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPEZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlPiB8IEFQSVByb21pc2U8U3RyZWFtPEZpbmVUdW5lRXZlbnQ+PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGAvZmluZS10dW5lcy8ke2ZpbmVUdW5lSWR9L2V2ZW50c2AsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgdGltZW91dDogODY0MDAwMDAsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgc3RyZWFtOiBxdWVyeT8uc3RyZWFtID8/IGZhbHNlLFxuICAgIH0pIGFzIEFQSVByb21pc2U8RmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2U+IHwgQVBJUHJvbWlzZTxTdHJlYW08RmluZVR1bmVFdmVudD4+O1xuICB9XG59XG5cbi8qKlxuICogTm90ZTogbm8gcGFnaW5hdGlvbiBhY3R1YWxseSBvY2N1cnMgeWV0LCB0aGlzIGlzIGZvciBmb3J3YXJkcy1jb21wYXRpYmlsaXR5LlxuICovXG5leHBvcnQgY2xhc3MgRmluZVR1bmVzUGFnZSBleHRlbmRzIFBhZ2U8RmluZVR1bmU+IHt9XG4vLyBhbGlhcyBzbyB3ZSBjYW4gZXhwb3J0IGl0IGluIHRoZSBuYW1lc3BhY2VcbnR5cGUgX0ZpbmVUdW5lc1BhZ2UgPSBGaW5lVHVuZXNQYWdlO1xuXG4vKipcbiAqIFRoZSBgRmluZVR1bmVgIG9iamVjdCByZXByZXNlbnRzIGEgbGVnYWN5IGZpbmUtdHVuZSBqb2IgdGhhdCBoYXMgYmVlbiBjcmVhdGVkXG4gKiB0aHJvdWdoIHRoZSBBUEkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmUge1xuICAvKipcbiAgICogVGhlIG9iamVjdCBpZGVudGlmaWVyLCB3aGljaCBjYW4gYmUgcmVmZXJlbmNlZCBpbiB0aGUgQVBJIGVuZHBvaW50cy5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgZm9yIHdoZW4gdGhlIGZpbmUtdHVuaW5nIGpvYiB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWwgdGhhdCBpcyBiZWluZyBjcmVhdGVkLlxuICAgKi9cbiAgZmluZV90dW5lZF9tb2RlbDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIGh5cGVycGFyYW1ldGVycyB1c2VkIGZvciB0aGUgZmluZS10dW5pbmcgam9iLiBTZWUgdGhlXG4gICAqIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZy9oeXBlcnBhcmFtZXRlcnMpIGZvciBtb3JlXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBoeXBlcnBhcmFtczogRmluZVR1bmUuSHlwZXJwYXJhbXM7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIG1vZGVsIHRoYXQgaXMgYmVpbmcgZmluZS10dW5lZC5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwiZmluZS10dW5lXCIuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB0aGF0IG93bnMgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIG9yZ2FuaXphdGlvbl9pZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgY29tcGlsZWQgcmVzdWx0cyBmaWxlcyBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIHJlc3VsdF9maWxlczogQXJyYXk8RmlsZXMuRmlsZU9iamVjdD47XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgZmluZS10dW5pbmcgam9iLCB3aGljaCBjYW4gYmUgZWl0aGVyIGBjcmVhdGVkYCxcbiAgICogYHJ1bm5pbmdgLCBgc3VjY2VlZGVkYCwgYGZhaWxlZGAsIG9yIGBjYW5jZWxsZWRgLlxuICAgKi9cbiAgc3RhdHVzOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIGZpbGVzIHVzZWQgZm9yIHRyYWluaW5nLlxuICAgKi9cbiAgdHJhaW5pbmdfZmlsZXM6IEFycmF5PEZpbGVzLkZpbGVPYmplY3Q+O1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIGZvciB3aGVuIHRoZSBmaW5lLXR1bmluZyBqb2Igd2FzIGxhc3QgdXBkYXRlZC5cbiAgICovXG4gIHVwZGF0ZWRfYXQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgZmlsZXMgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAgICovXG4gIHZhbGlkYXRpb25fZmlsZXM6IEFycmF5PEZpbGVzLkZpbGVPYmplY3Q+O1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBldmVudHMgdGhhdCBoYXZlIGJlZW4gb2JzZXJ2ZWQgaW4gdGhlIGxpZmVjeWNsZSBvZiB0aGUgRmluZVR1bmUgam9iLlxuICAgKi9cbiAgZXZlbnRzPzogQXJyYXk8RmluZVR1bmVFdmVudD47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmluZVR1bmUge1xuICAvKipcbiAgICogVGhlIGh5cGVycGFyYW1ldGVycyB1c2VkIGZvciB0aGUgZmluZS10dW5pbmcgam9iLiBTZWUgdGhlXG4gICAqIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZy9oeXBlcnBhcmFtZXRlcnMpIGZvciBtb3JlXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIEh5cGVycGFyYW1zIHtcbiAgICAvKipcbiAgICAgKiBUaGUgYmF0Y2ggc2l6ZSB0byB1c2UgZm9yIHRyYWluaW5nLiBUaGUgYmF0Y2ggc2l6ZSBpcyB0aGUgbnVtYmVyIG9mIHRyYWluaW5nXG4gICAgICogZXhhbXBsZXMgdXNlZCB0byB0cmFpbiBhIHNpbmdsZSBmb3J3YXJkIGFuZCBiYWNrd2FyZCBwYXNzLlxuICAgICAqL1xuICAgIGJhdGNoX3NpemU6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBsZWFybmluZyByYXRlIG11bHRpcGxpZXIgdG8gdXNlIGZvciB0cmFpbmluZy5cbiAgICAgKi9cbiAgICBsZWFybmluZ19yYXRlX211bHRpcGxpZXI6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgZXBvY2hzIHRvIHRyYWluIHRoZSBtb2RlbCBmb3IuIEFuIGVwb2NoIHJlZmVycyB0byBvbmUgZnVsbCBjeWNsZVxuICAgICAqIHRocm91Z2ggdGhlIHRyYWluaW5nIGRhdGFzZXQuXG4gICAgICovXG4gICAgbl9lcG9jaHM6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSB3ZWlnaHQgdG8gdXNlIGZvciBsb3NzIG9uIHRoZSBwcm9tcHQgdG9rZW5zLlxuICAgICAqL1xuICAgIHByb21wdF9sb3NzX3dlaWdodDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBjbGFzc2VzIHRvIHVzZSBmb3IgY29tcHV0aW5nIGNsYXNzaWZpY2F0aW9uIG1ldHJpY3MuXG4gICAgICovXG4gICAgY2xhc3NpZmljYXRpb25fbl9jbGFzc2VzPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHBvc2l0aXZlIGNsYXNzIHRvIHVzZSBmb3IgY29tcHV0aW5nIGNsYXNzaWZpY2F0aW9uIG1ldHJpY3MuXG4gICAgICovXG4gICAgY2xhc3NpZmljYXRpb25fcG9zaXRpdmVfY2xhc3M/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2xhc3NpZmljYXRpb24gbWV0cmljcyB0byBjb21wdXRlIHVzaW5nIHRoZSB2YWxpZGF0aW9uIGRhdGFzZXQgYXQgdGhlIGVuZCBvZlxuICAgICAqIGV2ZXJ5IGVwb2NoLlxuICAgICAqL1xuICAgIGNvbXB1dGVfY2xhc3NpZmljYXRpb25fbWV0cmljcz86IGJvb2xlYW47XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZUV2ZW50IHtcbiAgY3JlYXRlZF9hdDogbnVtYmVyO1xuXG4gIGxldmVsOiBzdHJpbmc7XG5cbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIG9iamVjdDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlIHtcbiAgZGF0YTogQXJyYXk8RmluZVR1bmVFdmVudD47XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmVDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIElEIG9mIGFuIHVwbG9hZGVkIGZpbGUgdGhhdCBjb250YWlucyB0cmFpbmluZyBkYXRhLlxuICAgKlxuICAgKiBTZWUgW3VwbG9hZCBmaWxlXSgvZG9jcy9hcGktcmVmZXJlbmNlL2ZpbGVzL3VwbG9hZCkgZm9yIGhvdyB0byB1cGxvYWQgYSBmaWxlLlxuICAgKlxuICAgKiBZb3VyIGRhdGFzZXQgbXVzdCBiZSBmb3JtYXR0ZWQgYXMgYSBKU09OTCBmaWxlLCB3aGVyZSBlYWNoIHRyYWluaW5nIGV4YW1wbGUgaXMgYVxuICAgKiBKU09OIG9iamVjdCB3aXRoIHRoZSBrZXlzIFwicHJvbXB0XCIgYW5kIFwiY29tcGxldGlvblwiLiBBZGRpdGlvbmFsbHksIHlvdSBtdXN0XG4gICAqIHVwbG9hZCB5b3VyIGZpbGUgd2l0aCB0aGUgcHVycG9zZSBgZmluZS10dW5lYC5cbiAgICpcbiAgICogU2VlIHRoZVxuICAgKiBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcvY3JlYXRpbmctdHJhaW5pbmctZGF0YSkgZm9yXG4gICAqIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHRyYWluaW5nX2ZpbGU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGJhdGNoIHNpemUgdG8gdXNlIGZvciB0cmFpbmluZy4gVGhlIGJhdGNoIHNpemUgaXMgdGhlIG51bWJlciBvZiB0cmFpbmluZ1xuICAgKiBleGFtcGxlcyB1c2VkIHRvIHRyYWluIGEgc2luZ2xlIGZvcndhcmQgYW5kIGJhY2t3YXJkIHBhc3MuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoZSBiYXRjaCBzaXplIHdpbGwgYmUgZHluYW1pY2FsbHkgY29uZmlndXJlZCB0byBiZSB+MC4yJSBvZiB0aGVcbiAgICogbnVtYmVyIG9mIGV4YW1wbGVzIGluIHRoZSB0cmFpbmluZyBzZXQsIGNhcHBlZCBhdCAyNTYgLSBpbiBnZW5lcmFsLCB3ZSd2ZSBmb3VuZFxuICAgKiB0aGF0IGxhcmdlciBiYXRjaCBzaXplcyB0ZW5kIHRvIHdvcmsgYmV0dGVyIGZvciBsYXJnZXIgZGF0YXNldHMuXG4gICAqL1xuICBiYXRjaF9zaXplPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogSWYgdGhpcyBpcyBwcm92aWRlZCwgd2UgY2FsY3VsYXRlIEYtYmV0YSBzY29yZXMgYXQgdGhlIHNwZWNpZmllZCBiZXRhIHZhbHVlcy5cbiAgICogVGhlIEYtYmV0YSBzY29yZSBpcyBhIGdlbmVyYWxpemF0aW9uIG9mIEYtMSBzY29yZS4gVGhpcyBpcyBvbmx5IHVzZWQgZm9yIGJpbmFyeVxuICAgKiBjbGFzc2lmaWNhdGlvbi5cbiAgICpcbiAgICogV2l0aCBhIGJldGEgb2YgMSAoaS5lLiB0aGUgRi0xIHNjb3JlKSwgcHJlY2lzaW9uIGFuZCByZWNhbGwgYXJlIGdpdmVuIHRoZSBzYW1lXG4gICAqIHdlaWdodC4gQSBsYXJnZXIgYmV0YSBzY29yZSBwdXRzIG1vcmUgd2VpZ2h0IG9uIHJlY2FsbCBhbmQgbGVzcyBvbiBwcmVjaXNpb24uIEFcbiAgICogc21hbGxlciBiZXRhIHNjb3JlIHB1dHMgbW9yZSB3ZWlnaHQgb24gcHJlY2lzaW9uIGFuZCBsZXNzIG9uIHJlY2FsbC5cbiAgICovXG4gIGNsYXNzaWZpY2F0aW9uX2JldGFzPzogQXJyYXk8bnVtYmVyPiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgY2xhc3NlcyBpbiBhIGNsYXNzaWZpY2F0aW9uIHRhc2suXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIGlzIHJlcXVpcmVkIGZvciBtdWx0aWNsYXNzIGNsYXNzaWZpY2F0aW9uLlxuICAgKi9cbiAgY2xhc3NpZmljYXRpb25fbl9jbGFzc2VzPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIHBvc2l0aXZlIGNsYXNzIGluIGJpbmFyeSBjbGFzc2lmaWNhdGlvbi5cbiAgICpcbiAgICogVGhpcyBwYXJhbWV0ZXIgaXMgbmVlZGVkIHRvIGdlbmVyYXRlIHByZWNpc2lvbiwgcmVjYWxsLCBhbmQgRjEgbWV0cmljcyB3aGVuXG4gICAqIGRvaW5nIGJpbmFyeSBjbGFzc2lmaWNhdGlvbi5cbiAgICovXG4gIGNsYXNzaWZpY2F0aW9uX3Bvc2l0aXZlX2NsYXNzPzogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogSWYgc2V0LCB3ZSBjYWxjdWxhdGUgY2xhc3NpZmljYXRpb24tc3BlY2lmaWMgbWV0cmljcyBzdWNoIGFzIGFjY3VyYWN5IGFuZCBGLTFcbiAgICogc2NvcmUgdXNpbmcgdGhlIHZhbGlkYXRpb24gc2V0IGF0IHRoZSBlbmQgb2YgZXZlcnkgZXBvY2guIFRoZXNlIG1ldHJpY3MgY2FuIGJlXG4gICAqIHZpZXdlZCBpbiB0aGVcbiAgICogW3Jlc3VsdHMgZmlsZV0oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZy9hbmFseXppbmcteW91ci1maW5lLXR1bmVkLW1vZGVsKS5cbiAgICpcbiAgICogSW4gb3JkZXIgdG8gY29tcHV0ZSBjbGFzc2lmaWNhdGlvbiBtZXRyaWNzLCB5b3UgbXVzdCBwcm92aWRlIGFcbiAgICogYHZhbGlkYXRpb25fZmlsZWAuIEFkZGl0aW9uYWxseSwgeW91IG11c3Qgc3BlY2lmeSBgY2xhc3NpZmljYXRpb25fbl9jbGFzc2VzYCBmb3JcbiAgICogbXVsdGljbGFzcyBjbGFzc2lmaWNhdGlvbiBvciBgY2xhc3NpZmljYXRpb25fcG9zaXRpdmVfY2xhc3NgIGZvciBiaW5hcnlcbiAgICogY2xhc3NpZmljYXRpb24uXG4gICAqL1xuICBjb21wdXRlX2NsYXNzaWZpY2F0aW9uX21ldHJpY3M/OiBib29sZWFuIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIGxlYXJuaW5nIHJhdGUgbXVsdGlwbGllciB0byB1c2UgZm9yIHRyYWluaW5nLiBUaGUgZmluZS10dW5pbmcgbGVhcm5pbmcgcmF0ZVxuICAgKiBpcyB0aGUgb3JpZ2luYWwgbGVhcm5pbmcgcmF0ZSB1c2VkIGZvciBwcmV0cmFpbmluZyBtdWx0aXBsaWVkIGJ5IHRoaXMgdmFsdWUuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoZSBsZWFybmluZyByYXRlIG11bHRpcGxpZXIgaXMgdGhlIDAuMDUsIDAuMSwgb3IgMC4yIGRlcGVuZGluZyBvblxuICAgKiBmaW5hbCBgYmF0Y2hfc2l6ZWAgKGxhcmdlciBsZWFybmluZyByYXRlcyB0ZW5kIHRvIHBlcmZvcm0gYmV0dGVyIHdpdGggbGFyZ2VyXG4gICAqIGJhdGNoIHNpemVzKS4gV2UgcmVjb21tZW5kIGV4cGVyaW1lbnRpbmcgd2l0aCB2YWx1ZXMgaW4gdGhlIHJhbmdlIDAuMDIgdG8gMC4yIHRvXG4gICAqIHNlZSB3aGF0IHByb2R1Y2VzIHRoZSBiZXN0IHJlc3VsdHMuXG4gICAqL1xuICBsZWFybmluZ19yYXRlX211bHRpcGxpZXI/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgYmFzZSBtb2RlbCB0byBmaW5lLXR1bmUuIFlvdSBjYW4gc2VsZWN0IG9uZSBvZiBcImFkYVwiLCBcImJhYmJhZ2VcIixcbiAgICogXCJjdXJpZVwiLCBcImRhdmluY2lcIiwgb3IgYSBmaW5lLXR1bmVkIG1vZGVsIGNyZWF0ZWQgYWZ0ZXIgMjAyMi0wNC0yMSBhbmQgYmVmb3JlXG4gICAqIDIwMjMtMDgtMjIuIFRvIGxlYXJuIG1vcmUgYWJvdXQgdGhlc2UgbW9kZWxzLCBzZWUgdGhlIFtNb2RlbHNdKC9kb2NzL21vZGVscylcbiAgICogZG9jdW1lbnRhdGlvbi5cbiAgICovXG4gIG1vZGVsPzogKHN0cmluZyAmIHt9KSB8ICdhZGEnIHwgJ2JhYmJhZ2UnIHwgJ2N1cmllJyB8ICdkYXZpbmNpJyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgZXBvY2hzIHRvIHRyYWluIHRoZSBtb2RlbCBmb3IuIEFuIGVwb2NoIHJlZmVycyB0byBvbmUgZnVsbCBjeWNsZVxuICAgKiB0aHJvdWdoIHRoZSB0cmFpbmluZyBkYXRhc2V0LlxuICAgKi9cbiAgbl9lcG9jaHM/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgd2VpZ2h0IHRvIHVzZSBmb3IgbG9zcyBvbiB0aGUgcHJvbXB0IHRva2Vucy4gVGhpcyBjb250cm9scyBob3cgbXVjaCB0aGVcbiAgICogbW9kZWwgdHJpZXMgdG8gbGVhcm4gdG8gZ2VuZXJhdGUgdGhlIHByb21wdCAoYXMgY29tcGFyZWQgdG8gdGhlIGNvbXBsZXRpb24gd2hpY2hcbiAgICogYWx3YXlzIGhhcyBhIHdlaWdodCBvZiAxLjApLCBhbmQgY2FuIGFkZCBhIHN0YWJpbGl6aW5nIGVmZmVjdCB0byB0cmFpbmluZyB3aGVuXG4gICAqIGNvbXBsZXRpb25zIGFyZSBzaG9ydC5cbiAgICpcbiAgICogSWYgcHJvbXB0cyBhcmUgZXh0cmVtZWx5IGxvbmcgKHJlbGF0aXZlIHRvIGNvbXBsZXRpb25zKSwgaXQgbWF5IG1ha2Ugc2Vuc2UgdG9cbiAgICogcmVkdWNlIHRoaXMgd2VpZ2h0IHNvIGFzIHRvIGF2b2lkIG92ZXItcHJpb3JpdGl6aW5nIGxlYXJuaW5nIHRoZSBwcm9tcHQuXG4gICAqL1xuICBwcm9tcHRfbG9zc193ZWlnaHQ/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBIHN0cmluZyBvZiB1cCB0byA0MCBjaGFyYWN0ZXJzIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB5b3VyIGZpbmUtdHVuZWQgbW9kZWxcbiAgICogbmFtZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGEgYHN1ZmZpeGAgb2YgXCJjdXN0b20tbW9kZWwtbmFtZVwiIHdvdWxkIHByb2R1Y2UgYSBtb2RlbCBuYW1lIGxpa2VcbiAgICogYGFkYTpmdC15b3VyLW9yZzpjdXN0b20tbW9kZWwtbmFtZS0yMDIyLTAyLTE1LTA0LTIxLTA0YC5cbiAgICovXG4gIHN1ZmZpeD86IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBJRCBvZiBhbiB1cGxvYWRlZCBmaWxlIHRoYXQgY29udGFpbnMgdmFsaWRhdGlvbiBkYXRhLlxuICAgKlxuICAgKiBJZiB5b3UgcHJvdmlkZSB0aGlzIGZpbGUsIHRoZSBkYXRhIGlzIHVzZWQgdG8gZ2VuZXJhdGUgdmFsaWRhdGlvbiBtZXRyaWNzXG4gICAqIHBlcmlvZGljYWxseSBkdXJpbmcgZmluZS10dW5pbmcuIFRoZXNlIG1ldHJpY3MgY2FuIGJlIHZpZXdlZCBpbiB0aGVcbiAgICogW2ZpbmUtdHVuaW5nIHJlc3VsdHMgZmlsZV0oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZy9hbmFseXppbmcteW91ci1maW5lLXR1bmVkLW1vZGVsKS5cbiAgICogWW91ciB0cmFpbiBhbmQgdmFsaWRhdGlvbiBkYXRhIHNob3VsZCBiZSBtdXR1YWxseSBleGNsdXNpdmUuXG4gICAqXG4gICAqIFlvdXIgZGF0YXNldCBtdXN0IGJlIGZvcm1hdHRlZCBhcyBhIEpTT05MIGZpbGUsIHdoZXJlIGVhY2ggdmFsaWRhdGlvbiBleGFtcGxlIGlzXG4gICAqIGEgSlNPTiBvYmplY3Qgd2l0aCB0aGUga2V5cyBcInByb21wdFwiIGFuZCBcImNvbXBsZXRpb25cIi4gQWRkaXRpb25hbGx5LCB5b3UgbXVzdFxuICAgKiB1cGxvYWQgeW91ciBmaWxlIHdpdGggdGhlIHB1cnBvc2UgYGZpbmUtdHVuZWAuXG4gICAqXG4gICAqIFNlZSB0aGVcbiAgICogW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nL2NyZWF0aW5nLXRyYWluaW5nLWRhdGEpIGZvclxuICAgKiBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB2YWxpZGF0aW9uX2ZpbGU/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXMgPVxuICB8IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZ1xuICB8IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3RyZWFtIGV2ZW50cyBmb3IgdGhlIGZpbmUtdHVuZSBqb2IuIElmIHNldCB0byB0cnVlLCBldmVudHMgd2lsbCBiZVxuICAgKiBzZW50IGFzIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUuIFRoZSBzdHJlYW0gd2lsbCB0ZXJtaW5hdGUgd2l0aCBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2Ugd2hlbiB0aGUgam9iIGlzIGZpbmlzaGVkIChzdWNjZWVkZWQsIGNhbmNlbGxlZCwgb3IgZmFpbGVkKS5cbiAgICpcbiAgICogSWYgc2V0IHRvIGZhbHNlLCBvbmx5IGV2ZW50cyBnZW5lcmF0ZWQgc28gZmFyIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcyB7XG4gIGV4cG9ydCB0eXBlIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nIGV4dGVuZHMgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN0cmVhbSBldmVudHMgZm9yIHRoZSBmaW5lLXR1bmUgam9iLiBJZiBzZXQgdG8gdHJ1ZSwgZXZlbnRzIHdpbGwgYmVcbiAgICogc2VudCBhcyBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLiBUaGUgc3RyZWFtIHdpbGwgdGVybWluYXRlIHdpdGggYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlIHdoZW4gdGhlIGpvYiBpcyBmaW5pc2hlZCAoc3VjY2VlZGVkLCBjYW5jZWxsZWQsIG9yIGZhaWxlZCkuXG4gICAqXG4gICAqIElmIHNldCB0byBmYWxzZSwgb25seSBldmVudHMgZ2VuZXJhdGVkIHNvIGZhciB3aWxsIGJlIHJldHVybmVkLlxuICAgKi9cbiAgc3RyZWFtPzogZmFsc2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nIGV4dGVuZHMgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN0cmVhbSBldmVudHMgZm9yIHRoZSBmaW5lLXR1bmUgam9iLiBJZiBzZXQgdG8gdHJ1ZSwgZXZlbnRzIHdpbGwgYmVcbiAgICogc2VudCBhcyBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLiBUaGUgc3RyZWFtIHdpbGwgdGVybWluYXRlIHdpdGggYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlIHdoZW4gdGhlIGpvYiBpcyBmaW5pc2hlZCAoc3VjY2VlZGVkLCBjYW5jZWxsZWQsIG9yIGZhaWxlZCkuXG4gICAqXG4gICAqIElmIHNldCB0byBmYWxzZSwgb25seSBldmVudHMgZ2VuZXJhdGVkIHNvIGZhciB3aWxsIGJlIHJldHVybmVkLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEZpbmVUdW5lcyB7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmUgPSBBUEkuRmluZVR1bmU7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVFdmVudCA9IEFQSS5GaW5lVHVuZUV2ZW50O1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlID0gQVBJLkZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlO1xuICBleHBvcnQgdHlwZSBGaW5lVHVuZXNQYWdlID0gX0ZpbmVUdW5lc1BhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVDcmVhdGVQYXJhbXMgPSBBUEkuRmluZVR1bmVDcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmc7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi8uLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0IHsgaXNSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4uLy4uL2NvcmUuanMnO1xuaW1wb3J0ICogYXMgRmlsZXMgZnJvbSAnLi4vZmlsZXMuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgQ3Vyc29yUGFnZSwgQ3Vyc29yUGFnZVBhcmFtcyB9IGZyb20gJy4uLy4uL3BhZ2luYXRpb24uanMnO1xuXG5leHBvcnQgY2xhc3MgSm9icyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBqb2IgdGhhdCBmaW5lLXR1bmVzIGEgc3BlY2lmaWVkIG1vZGVsIGZyb20gYSBnaXZlbiBkYXRhc2V0LlxuICAgKlxuICAgKiBSZXNwb25zZSBpbmNsdWRlcyBkZXRhaWxzIG9mIHRoZSBlbnF1ZXVlZCBqb2IgaW5jbHVkaW5nIGpvYiBzdGF0dXMgYW5kIHRoZSBuYW1lXG4gICAqIG9mIHRoZSBmaW5lLXR1bmVkIG1vZGVscyBvbmNlIGNvbXBsZXRlLlxuICAgKlxuICAgKiBbTGVhcm4gbW9yZSBhYm91dCBmaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IEpvYkNyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmluZVR1bmluZ0pvYj4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9maW5lX3R1bmluZy9qb2JzJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBpbmZvIGFib3V0IGEgZmluZS10dW5pbmcgam9iLlxuICAgKlxuICAgKiBbTGVhcm4gbW9yZSBhYm91dCBmaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgKi9cbiAgcmV0cmlldmUoZmluZVR1bmluZ0pvYklkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbmVUdW5pbmdKb2I+IHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9maW5lX3R1bmluZy9qb2JzLyR7ZmluZVR1bmluZ0pvYklkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgeW91ciBvcmdhbml6YXRpb24ncyBmaW5lLXR1bmluZyBqb2JzXG4gICAqL1xuICBsaXN0KFxuICAgIHF1ZXJ5PzogSm9iTGlzdFBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxGaW5lVHVuaW5nSm9ic1BhZ2UsIEZpbmVUdW5pbmdKb2I+O1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxGaW5lVHVuaW5nSm9ic1BhZ2UsIEZpbmVUdW5pbmdKb2I+O1xuICBsaXN0KFxuICAgIHF1ZXJ5OiBKb2JMaXN0UGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JzUGFnZSwgRmluZVR1bmluZ0pvYj4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdCh7fSwgcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRBUElMaXN0KCcvZmluZV90dW5pbmcvam9icycsIEZpbmVUdW5pbmdKb2JzUGFnZSwgeyBxdWVyeSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbW1lZGlhdGVseSBjYW5jZWwgYSBmaW5lLXR1bmUgam9iLlxuICAgKi9cbiAgY2FuY2VsKGZpbmVUdW5pbmdKb2JJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaW5lVHVuaW5nSm9iPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdChgL2ZpbmVfdHVuaW5nL2pvYnMvJHtmaW5lVHVuaW5nSm9iSWR9L2NhbmNlbGAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzdGF0dXMgdXBkYXRlcyBmb3IgYSBmaW5lLXR1bmluZyBqb2IuXG4gICAqL1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5pbmdKb2JJZDogc3RyaW5nLFxuICAgIHF1ZXJ5PzogSm9iTGlzdEV2ZW50c1BhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSwgRmluZVR1bmluZ0pvYkV2ZW50PjtcbiAgbGlzdEV2ZW50cyhcbiAgICBmaW5lVHVuaW5nSm9iSWQ6IHN0cmluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSwgRmluZVR1bmluZ0pvYkV2ZW50PjtcbiAgbGlzdEV2ZW50cyhcbiAgICBmaW5lVHVuaW5nSm9iSWQ6IHN0cmluZyxcbiAgICBxdWVyeTogSm9iTGlzdEV2ZW50c1BhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSwgRmluZVR1bmluZ0pvYkV2ZW50PiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocXVlcnkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0RXZlbnRzKGZpbmVUdW5pbmdKb2JJZCwge30sIHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0QVBJTGlzdChgL2ZpbmVfdHVuaW5nL2pvYnMvJHtmaW5lVHVuaW5nSm9iSWR9L2V2ZW50c2AsIEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlLCB7XG4gICAgICBxdWVyeSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpbmVUdW5pbmdKb2JzUGFnZSBleHRlbmRzIEN1cnNvclBhZ2U8RmluZVR1bmluZ0pvYj4ge31cbi8vIGFsaWFzIHNvIHdlIGNhbiBleHBvcnQgaXQgaW4gdGhlIG5hbWVzcGFjZVxudHlwZSBfRmluZVR1bmluZ0pvYnNQYWdlID0gRmluZVR1bmluZ0pvYnNQYWdlO1xuXG5leHBvcnQgY2xhc3MgRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UgZXh0ZW5kcyBDdXJzb3JQYWdlPEZpbmVUdW5pbmdKb2JFdmVudD4ge31cbi8vIGFsaWFzIHNvIHdlIGNhbiBleHBvcnQgaXQgaW4gdGhlIG5hbWVzcGFjZVxudHlwZSBfRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UgPSBGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZTtcblxuLyoqXG4gKiBUaGUgYGZpbmVfdHVuaW5nLmpvYmAgb2JqZWN0IHJlcHJlc2VudHMgYSBmaW5lLXR1bmluZyBqb2IgdGhhdCBoYXMgYmVlbiBjcmVhdGVkXG4gKiB0aHJvdWdoIHRoZSBBUEkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmluZ0pvYiB7XG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IGlkZW50aWZpZXIsIHdoaWNoIGNhbiBiZSByZWZlcmVuY2VkIGluIHRoZSBBUEkgZW5kcG9pbnRzLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSBmb3Igd2hlbiB0aGUgZmluZS10dW5pbmcgam9iIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZF9hdDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgZmluZS10dW5lZCBtb2RlbCB0aGF0IGlzIGJlaW5nIGNyZWF0ZWQuXG4gICAqL1xuICBmaW5lX3R1bmVkX21vZGVsOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgaHlwZXJwYXJhbWV0ZXJzIHVzZWQgZm9yIHRoZSBmaW5lLXR1bmluZyBqb2IuIFNlZSB0aGVcbiAgICogW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICBoeXBlcnBhcmFtZXRlcnM6IEZpbmVUdW5pbmdKb2IuSHlwZXJwYXJhbWV0ZXJzO1xuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBtb2RlbCB0aGF0IGlzIGJlaW5nIGZpbmUtdHVuZWQuXG4gICAqL1xuICBtb2RlbDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBcImZpbmVfdHVuaW5nLmpvYlwiLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvcmdhbml6YXRpb24gdGhhdCBvd25zIHRoZSBmaW5lLXR1bmluZyBqb2IuXG4gICAqL1xuICBvcmdhbml6YXRpb25faWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGNvbXBpbGVkIHJlc3VsdHMgZmlsZXMgZm9yIHRoZSBmaW5lLXR1bmluZyBqb2IuXG4gICAqL1xuICByZXN1bHRfZmlsZXM6IEFycmF5PEZpbGVzLkZpbGVPYmplY3Q+O1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIGZpbmUtdHVuaW5nIGpvYiwgd2hpY2ggY2FuIGJlIGVpdGhlciBgY3JlYXRlZGAsXG4gICAqIGBwZW5kaW5nYCwgYHJ1bm5pbmdgLCBgc3VjY2VlZGVkYCwgYGZhaWxlZGAsIG9yIGBjYW5jZWxsZWRgLlxuICAgKi9cbiAgc3RhdHVzOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgYmlsbGFibGUgdG9rZW5zIHByb2Nlc3NlZCBieSB0aGlzIGZpbmUgdHVuaW5nIGpvYi5cbiAgICovXG4gIHRyYWluZWRfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBmaWxlIElEIHVzZWQgZm9yIHRyYWluaW5nLlxuICAgKi9cbiAgdHJhaW5pbmdfZmlsZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZmlsZSBJRCB1c2VkIGZvciB2YWxpZGF0aW9uLlxuICAgKi9cbiAgdmFsaWRhdGlvbl9maWxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIGZvciB3aGVuIHRoZSBmaW5lLXR1bmluZyBqb2Igd2FzIGZpbmlzaGVkLlxuICAgKi9cbiAgZmluaXNoZWRfYXQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmluZVR1bmluZ0pvYiB7XG4gIC8qKlxuICAgKiBUaGUgaHlwZXJwYXJhbWV0ZXJzIHVzZWQgZm9yIHRoZSBmaW5lLXR1bmluZyBqb2IuIFNlZSB0aGVcbiAgICogW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIEh5cGVycGFyYW1ldGVycyB7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBlcG9jaHMgdG8gdHJhaW4gdGhlIG1vZGVsIGZvci4gQW4gZXBvY2ggcmVmZXJzIHRvIG9uZSBmdWxsIGN5Y2xlXG4gICAgICogdGhyb3VnaCB0aGUgdHJhaW5pbmcgZGF0YXNldC4gXCJBdXRvXCIgZGVjaWRlcyB0aGUgb3B0aW1hbCBudW1iZXIgb2YgZXBvY2hzIGJhc2VkXG4gICAgICogb24gdGhlIHNpemUgb2YgdGhlIGRhdGFzZXQuIElmIHNldHRpbmcgdGhlIG51bWJlciBtYW51YWxseSwgd2Ugc3VwcG9ydCBhbnlcbiAgICAgKiBudW1iZXIgYmV0d2VlbiAxIGFuZCA1MCBlcG9jaHMuXG4gICAgICovXG4gICAgbl9lcG9jaHM/OiAnYXV0bycgfCBudW1iZXI7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuaW5nSm9iRXZlbnQge1xuICBpZDogc3RyaW5nO1xuXG4gIGNyZWF0ZWRfYXQ6IG51bWJlcjtcblxuICBsZXZlbDogJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJztcblxuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSm9iQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBtb2RlbCB0byBmaW5lLXR1bmUuIFlvdSBjYW4gc2VsZWN0IG9uZSBvZiB0aGVcbiAgICogW3N1cHBvcnRlZCBtb2RlbHNdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZy93aGF0LW1vZGVscy1jYW4tYmUtZmluZS10dW5lZCkuXG4gICAqL1xuICBtb2RlbDogKHN0cmluZyAmIHt9KSB8ICdiYWJiYWdlLTAwMicgfCAnZGF2aW5jaS0wMDInIHwgJ2dwdC0zLjUtdHVyYm8nO1xuXG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgYW4gdXBsb2FkZWQgZmlsZSB0aGF0IGNvbnRhaW5zIHRyYWluaW5nIGRhdGEuXG4gICAqXG4gICAqIFNlZSBbdXBsb2FkIGZpbGVdKC9kb2NzL2FwaS1yZWZlcmVuY2UvZmlsZXMvdXBsb2FkKSBmb3IgaG93IHRvIHVwbG9hZCBhIGZpbGUuXG4gICAqXG4gICAqIFlvdXIgZGF0YXNldCBtdXN0IGJlIGZvcm1hdHRlZCBhcyBhIEpTT05MIGZpbGUuIEFkZGl0aW9uYWxseSwgeW91IG11c3QgdXBsb2FkXG4gICAqIHlvdXIgZmlsZSB3aXRoIHRoZSBwdXJwb3NlIGBmaW5lLXR1bmVgLlxuICAgKlxuICAgKiBTZWUgdGhlIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdHJhaW5pbmdfZmlsZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgaHlwZXJwYXJhbWV0ZXJzIHVzZWQgZm9yIHRoZSBmaW5lLXR1bmluZyBqb2IuXG4gICAqL1xuICBoeXBlcnBhcmFtZXRlcnM/OiBKb2JDcmVhdGVQYXJhbXMuSHlwZXJwYXJhbWV0ZXJzO1xuXG4gIC8qKlxuICAgKiBBIHN0cmluZyBvZiB1cCB0byA0MCBjaGFyYWN0ZXJzIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB5b3VyIGZpbmUtdHVuZWQgbW9kZWxcbiAgICogbmFtZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGEgYHN1ZmZpeGAgb2YgXCJjdXN0b20tbW9kZWwtbmFtZVwiIHdvdWxkIHByb2R1Y2UgYSBtb2RlbCBuYW1lIGxpa2VcbiAgICogYGZ0OmdwdC0zLjUtdHVyYm86b3BlbmFpOmN1c3RvbS1tb2RlbC1uYW1lOjdwNGxVUmVsYC5cbiAgICovXG4gIHN1ZmZpeD86IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBJRCBvZiBhbiB1cGxvYWRlZCBmaWxlIHRoYXQgY29udGFpbnMgdmFsaWRhdGlvbiBkYXRhLlxuICAgKlxuICAgKiBJZiB5b3UgcHJvdmlkZSB0aGlzIGZpbGUsIHRoZSBkYXRhIGlzIHVzZWQgdG8gZ2VuZXJhdGUgdmFsaWRhdGlvbiBtZXRyaWNzXG4gICAqIHBlcmlvZGljYWxseSBkdXJpbmcgZmluZS10dW5pbmcuIFRoZXNlIG1ldHJpY3MgY2FuIGJlIHZpZXdlZCBpbiB0aGUgZmluZS10dW5pbmdcbiAgICogcmVzdWx0cyBmaWxlLiBUaGUgc2FtZSBkYXRhIHNob3VsZCBub3QgYmUgcHJlc2VudCBpbiBib3RoIHRyYWluIGFuZCB2YWxpZGF0aW9uXG4gICAqIGZpbGVzLlxuICAgKlxuICAgKiBZb3VyIGRhdGFzZXQgbXVzdCBiZSBmb3JtYXR0ZWQgYXMgYSBKU09OTCBmaWxlLiBZb3UgbXVzdCB1cGxvYWQgeW91ciBmaWxlIHdpdGhcbiAgICogdGhlIHB1cnBvc2UgYGZpbmUtdHVuZWAuXG4gICAqXG4gICAqIFNlZSB0aGUgW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB2YWxpZGF0aW9uX2ZpbGU/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEpvYkNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgaHlwZXJwYXJhbWV0ZXJzIHVzZWQgZm9yIHRoZSBmaW5lLXR1bmluZyBqb2IuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIEh5cGVycGFyYW1ldGVycyB7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBlcG9jaHMgdG8gdHJhaW4gdGhlIG1vZGVsIGZvci4gQW4gZXBvY2ggcmVmZXJzIHRvIG9uZSBmdWxsIGN5Y2xlXG4gICAgICogdGhyb3VnaCB0aGUgdHJhaW5pbmcgZGF0YXNldC5cbiAgICAgKi9cbiAgICBuX2Vwb2Nocz86ICdhdXRvJyB8IG51bWJlcjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEpvYkxpc3RQYXJhbXMgZXh0ZW5kcyBDdXJzb3JQYWdlUGFyYW1zIHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgSm9iTGlzdEV2ZW50c1BhcmFtcyBleHRlbmRzIEN1cnNvclBhZ2VQYXJhbXMge31cblxuZXhwb3J0IG5hbWVzcGFjZSBKb2JzIHtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuaW5nSm9iID0gQVBJLkZpbmVUdW5pbmdKb2I7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmluZ0pvYkV2ZW50ID0gQVBJLkZpbmVUdW5pbmdKb2JFdmVudDtcbiAgZXhwb3J0IHR5cGUgRmluZVR1bmluZ0pvYnNQYWdlID0gX0ZpbmVUdW5pbmdKb2JzUGFnZTtcbiAgZXhwb3J0IHR5cGUgRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UgPSBfRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgSm9iQ3JlYXRlUGFyYW1zID0gQVBJLkpvYkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBKb2JMaXN0UGFyYW1zID0gQVBJLkpvYkxpc3RQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSm9iTGlzdEV2ZW50c1BhcmFtcyA9IEFQSS5Kb2JMaXN0RXZlbnRzUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0IHsgSm9icyB9IGZyb20gJy4vam9icy5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBGaW5lVHVuaW5nIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICBqb2JzOiBKb2JzID0gbmV3IEpvYnModGhpcy5jbGllbnQpO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEZpbmVUdW5pbmcge1xuICBleHBvcnQgaW1wb3J0IEpvYnMgPSBBUEkuSm9icztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuaW5nSm9iID0gQVBJLkZpbmVUdW5pbmdKb2I7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmluZ0pvYkV2ZW50ID0gQVBJLkZpbmVUdW5pbmdKb2JFdmVudDtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuaW5nSm9ic1BhZ2UgPSBBUEkuRmluZVR1bmluZ0pvYnNQYWdlO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlID0gQVBJLkZpbmVUdW5pbmdKb2JFdmVudHNQYWdlO1xuICBleHBvcnQgaW1wb3J0IEpvYkNyZWF0ZVBhcmFtcyA9IEFQSS5Kb2JDcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSm9iTGlzdFBhcmFtcyA9IEFQSS5Kb2JMaXN0UGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEpvYkxpc3RFdmVudHNQYXJhbXMgPSBBUEkuSm9iTGlzdEV2ZW50c1BhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyB0eXBlIFVwbG9hZGFibGUsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4uL2NvcmUuanMnO1xuXG5leHBvcnQgY2xhc3MgSW1hZ2VzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIHZhcmlhdGlvbiBvZiBhIGdpdmVuIGltYWdlLlxuICAgKi9cbiAgY3JlYXRlVmFyaWF0aW9uKFxuICAgIGJvZHk6IEltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8SW1hZ2VzUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvaW1hZ2VzL3ZhcmlhdGlvbnMnLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMoeyBib2R5LCAuLi5vcHRpb25zIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGVkaXRlZCBvciBleHRlbmRlZCBpbWFnZSBnaXZlbiBhbiBvcmlnaW5hbCBpbWFnZSBhbmQgYSBwcm9tcHQuXG4gICAqL1xuICBlZGl0KGJvZHk6IEltYWdlRWRpdFBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8SW1hZ2VzUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvaW1hZ2VzL2VkaXRzJywgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zKHsgYm9keSwgLi4ub3B0aW9ucyB9KSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbWFnZSBnaXZlbiBhIHByb21wdC5cbiAgICovXG4gIGdlbmVyYXRlKGJvZHk6IEltYWdlR2VuZXJhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEltYWdlc1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ltYWdlcy9nZW5lcmF0aW9ucycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHVybCBvciB0aGUgY29udGVudCBvZiBhbiBpbWFnZSBnZW5lcmF0ZWQgYnkgdGhlIE9wZW5BSSBBUEkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2Uge1xuICAvKipcbiAgICogVGhlIGJhc2U2NC1lbmNvZGVkIEpTT04gb2YgdGhlIGdlbmVyYXRlZCBpbWFnZSwgaWYgYHJlc3BvbnNlX2Zvcm1hdGAgaXNcbiAgICogYGI2NF9qc29uYC5cbiAgICovXG4gIGI2NF9qc29uPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgVVJMIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2UsIGlmIGByZXNwb25zZV9mb3JtYXRgIGlzIGB1cmxgIChkZWZhdWx0KS5cbiAgICovXG4gIHVybD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbWFnZXNSZXNwb25zZSB7XG4gIGNyZWF0ZWQ6IG51bWJlcjtcblxuICBkYXRhOiBBcnJheTxJbWFnZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VDcmVhdGVWYXJpYXRpb25QYXJhbXMge1xuICAvKipcbiAgICogVGhlIGltYWdlIHRvIHVzZSBhcyB0aGUgYmFzaXMgZm9yIHRoZSB2YXJpYXRpb24ocykuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSxcbiAgICogbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS5cbiAgICovXG4gIGltYWdlOiBVcGxvYWRhYmxlO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgKi9cbiAgbj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiBgdXJsYCBvclxuICAgKiBgYjY0X2pzb25gLlxuICAgKi9cbiAgcmVzcG9uc2VfZm9ybWF0PzogJ3VybCcgfCAnYjY0X2pzb24nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mIGAyNTZ4MjU2YCwgYDUxMng1MTJgLCBvclxuICAgKiBgMTAyNHgxMDI0YC5cbiAgICovXG4gIHNpemU/OiAnMjU2eDI1NicgfCAnNTEyeDUxMicgfCAnMTAyNHgxMDI0JyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yXG4gICAqIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAqL1xuICB1c2VyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlRWRpdFBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgaW1hZ2UgdG8gZWRpdC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLiBJZiBtYXNrXG4gICAqIGlzIG5vdCBwcm92aWRlZCwgaW1hZ2UgbXVzdCBoYXZlIHRyYW5zcGFyZW5jeSwgd2hpY2ggd2lsbCBiZSB1c2VkIGFzIHRoZSBtYXNrLlxuICAgKi9cbiAgaW1hZ2U6IFVwbG9hZGFibGU7XG5cbiAgLyoqXG4gICAqIEEgdGV4dCBkZXNjcmlwdGlvbiBvZiB0aGUgZGVzaXJlZCBpbWFnZShzKS4gVGhlIG1heGltdW0gbGVuZ3RoIGlzIDEwMDBcbiAgICogY2hhcmFjdGVycy5cbiAgICovXG4gIHByb21wdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBbiBhZGRpdGlvbmFsIGltYWdlIHdob3NlIGZ1bGx5IHRyYW5zcGFyZW50IGFyZWFzIChlLmcuIHdoZXJlIGFscGhhIGlzIHplcm8pXG4gICAqIGluZGljYXRlIHdoZXJlIGBpbWFnZWAgc2hvdWxkIGJlIGVkaXRlZC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW5cbiAgICogNE1CLCBhbmQgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb25zIGFzIGBpbWFnZWAuXG4gICAqL1xuICBtYXNrPzogVXBsb2FkYWJsZTtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICovXG4gIG4/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgYHVybGAgb3JcbiAgICogYGI2NF9qc29uYC5cbiAgICovXG4gIHJlc3BvbnNlX2Zvcm1hdD86ICd1cmwnIHwgJ2I2NF9qc29uJyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiBgMjU2eDI1NmAsIGA1MTJ4NTEyYCwgb3JcbiAgICogYDEwMjR4MTAyNGAuXG4gICAqL1xuICBzaXplPzogJzI1NngyNTYnIHwgJzUxMng1MTInIHwgJzEwMjR4MTAyNCcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvclxuICAgKiBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgKi9cbiAgdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbWFnZUdlbmVyYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEEgdGV4dCBkZXNjcmlwdGlvbiBvZiB0aGUgZGVzaXJlZCBpbWFnZShzKS4gVGhlIG1heGltdW0gbGVuZ3RoIGlzIDEwMDBcbiAgICogY2hhcmFjdGVycy5cbiAgICovXG4gIHByb21wdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgKi9cbiAgbj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiBgdXJsYCBvclxuICAgKiBgYjY0X2pzb25gLlxuICAgKi9cbiAgcmVzcG9uc2VfZm9ybWF0PzogJ3VybCcgfCAnYjY0X2pzb24nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mIGAyNTZ4MjU2YCwgYDUxMng1MTJgLCBvclxuICAgKiBgMTAyNHgxMDI0YC5cbiAgICovXG4gIHNpemU/OiAnMjU2eDI1NicgfCAnNTEyeDUxMicgfCAnMTAyNHgxMDI0JyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yXG4gICAqIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAqL1xuICB1c2VyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEltYWdlcyB7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2UgPSBBUEkuSW1hZ2U7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VzUmVzcG9uc2UgPSBBUEkuSW1hZ2VzUmVzcG9uc2U7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VDcmVhdGVWYXJpYXRpb25QYXJhbXMgPSBBUEkuSW1hZ2VDcmVhdGVWYXJpYXRpb25QYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VFZGl0UGFyYW1zID0gQVBJLkltYWdlRWRpdFBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBJbWFnZUdlbmVyYXRlUGFyYW1zID0gQVBJLkltYWdlR2VuZXJhdGVQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgUGFnZSB9IGZyb20gJy4uL3BhZ2luYXRpb24uanMnO1xuXG5leHBvcnQgY2xhc3MgTW9kZWxzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogUmV0cmlldmVzIGEgbW9kZWwgaW5zdGFuY2UsIHByb3ZpZGluZyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbW9kZWwgc3VjaCBhc1xuICAgKiB0aGUgb3duZXIgYW5kIHBlcm1pc3Npb25pbmcuXG4gICAqL1xuICByZXRyaWV2ZShtb2RlbDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxNb2RlbD4ge1xuICAgIHJldHVybiB0aGlzLmdldChgL21vZGVscy8ke21vZGVsfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIG1vZGVscywgYW5kIHByb3ZpZGVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVhY2hcbiAgICogb25lIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAqL1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxNb2RlbHNQYWdlLCBNb2RlbD4ge1xuICAgIHJldHVybiB0aGlzLmdldEFQSUxpc3QoJy9tb2RlbHMnLCBNb2RlbHNQYWdlLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmaW5lLXR1bmVkIG1vZGVsLiBZb3UgbXVzdCBoYXZlIHRoZSBPd25lciByb2xlIGluIHlvdXIgb3JnYW5pemF0aW9uIHRvXG4gICAqIGRlbGV0ZSBhIG1vZGVsLlxuICAgKi9cbiAgZGVsKG1vZGVsOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPE1vZGVsRGVsZXRlZD4ge1xuICAgIHJldHVybiB0aGlzLmRlbGV0ZShgL21vZGVscy8ke21vZGVsfWAsIG9wdGlvbnMpO1xuICB9XG59XG5cbi8qKlxuICogTm90ZTogbm8gcGFnaW5hdGlvbiBhY3R1YWxseSBvY2N1cnMgeWV0LCB0aGlzIGlzIGZvciBmb3J3YXJkcy1jb21wYXRpYmlsaXR5LlxuICovXG5leHBvcnQgY2xhc3MgTW9kZWxzUGFnZSBleHRlbmRzIFBhZ2U8TW9kZWw+IHt9XG4vLyBhbGlhcyBzbyB3ZSBjYW4gZXhwb3J0IGl0IGluIHRoZSBuYW1lc3BhY2VcbnR5cGUgX01vZGVsc1BhZ2UgPSBNb2RlbHNQYWdlO1xuXG4vKipcbiAqIERlc2NyaWJlcyBhbiBPcGVuQUkgbW9kZWwgb2ZmZXJpbmcgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHRoZSBBUEkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWwge1xuICAvKipcbiAgICogVGhlIG1vZGVsIGlkZW50aWZpZXIsIHdoaWNoIGNhbiBiZSByZWZlcmVuY2VkIGluIHRoZSBBUEkgZW5kcG9pbnRzLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSB3aGVuIHRoZSBtb2RlbCB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgXCJtb2RlbFwiLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvcmdhbml6YXRpb24gdGhhdCBvd25zIHRoZSBtb2RlbC5cbiAgICovXG4gIG93bmVkX2J5OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxEZWxldGVkIHtcbiAgaWQ6IHN0cmluZztcblxuICBkZWxldGVkOiBib29sZWFuO1xuXG4gIG9iamVjdDogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIE1vZGVscyB7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZWwgPSBBUEkuTW9kZWw7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZWxEZWxldGVkID0gQVBJLk1vZGVsRGVsZXRlZDtcbiAgZXhwb3J0IHR5cGUgTW9kZWxzUGFnZSA9IF9Nb2RlbHNQYWdlO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcblxuZXhwb3J0IGNsYXNzIE1vZGVyYXRpb25zIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ2xhc3NpZmllcyBpZiB0ZXh0IHZpb2xhdGVzIE9wZW5BSSdzIENvbnRlbnQgUG9saWN5XG4gICAqL1xuICBjcmVhdGUoXG4gICAgYm9keTogTW9kZXJhdGlvbkNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPE1vZGVyYXRpb25DcmVhdGVSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9tb2RlcmF0aW9ucycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVyYXRpb24ge1xuICAvKipcbiAgICogQSBsaXN0IG9mIHRoZSBjYXRlZ29yaWVzLCBhbmQgd2hldGhlciB0aGV5IGFyZSBmbGFnZ2VkIG9yIG5vdC5cbiAgICovXG4gIGNhdGVnb3JpZXM6IE1vZGVyYXRpb24uQ2F0ZWdvcmllcztcblxuICAvKipcbiAgICogQSBsaXN0IG9mIHRoZSBjYXRlZ29yaWVzIGFsb25nIHdpdGggdGhlaXIgc2NvcmVzIGFzIHByZWRpY3RlZCBieSBtb2RlbC5cbiAgICovXG4gIGNhdGVnb3J5X3Njb3JlczogTW9kZXJhdGlvbi5DYXRlZ29yeVNjb3JlcztcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgY29udGVudCB2aW9sYXRlc1xuICAgKiBbT3BlbkFJJ3MgdXNhZ2UgcG9saWNpZXNdKC9wb2xpY2llcy91c2FnZS1wb2xpY2llcykuXG4gICAqL1xuICBmbGFnZ2VkOiBib29sZWFuO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIE1vZGVyYXRpb24ge1xuICAvKipcbiAgICogQSBsaXN0IG9mIHRoZSBjYXRlZ29yaWVzLCBhbmQgd2hldGhlciB0aGV5IGFyZSBmbGFnZ2VkIG9yIG5vdC5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2F0ZWdvcmllcyB7XG4gICAgLyoqXG4gICAgICogQ29udGVudCB0aGF0IGV4cHJlc3NlcywgaW5jaXRlcywgb3IgcHJvbW90ZXMgaGFyYXNzaW5nIGxhbmd1YWdlIHRvd2FyZHMgYW55XG4gICAgICogdGFyZ2V0LlxuICAgICAqL1xuICAgIGhhcmFzc21lbnQ6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBIYXJhc3NtZW50IGNvbnRlbnQgdGhhdCBhbHNvIGluY2x1ZGVzIHZpb2xlbmNlIG9yIHNlcmlvdXMgaGFybSB0b3dhcmRzIGFueVxuICAgICAqIHRhcmdldC5cbiAgICAgKi9cbiAgICAnaGFyYXNzbWVudC90aHJlYXRlbmluZyc6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDb250ZW50IHRoYXQgZXhwcmVzc2VzLCBpbmNpdGVzLCBvciBwcm9tb3RlcyBoYXRlIGJhc2VkIG9uIHJhY2UsIGdlbmRlcixcbiAgICAgKiBldGhuaWNpdHksIHJlbGlnaW9uLCBuYXRpb25hbGl0eSwgc2V4dWFsIG9yaWVudGF0aW9uLCBkaXNhYmlsaXR5IHN0YXR1cywgb3JcbiAgICAgKiBjYXN0ZS4gSGF0ZWZ1bCBjb250ZW50IGFpbWVkIGF0IG5vbi1wcm90ZWN0ZWQgZ3JvdXBzIChlLmcuLCBjaGVzcyBwbGF5ZXJzKSBpc1xuICAgICAqIGhhcnJhc3NtZW50LlxuICAgICAqL1xuICAgIGhhdGU6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBIYXRlZnVsIGNvbnRlbnQgdGhhdCBhbHNvIGluY2x1ZGVzIHZpb2xlbmNlIG9yIHNlcmlvdXMgaGFybSB0b3dhcmRzIHRoZSB0YXJnZXRlZFxuICAgICAqIGdyb3VwIGJhc2VkIG9uIHJhY2UsIGdlbmRlciwgZXRobmljaXR5LCByZWxpZ2lvbiwgbmF0aW9uYWxpdHksIHNleHVhbFxuICAgICAqIG9yaWVudGF0aW9uLCBkaXNhYmlsaXR5IHN0YXR1cywgb3IgY2FzdGUuXG4gICAgICovXG4gICAgJ2hhdGUvdGhyZWF0ZW5pbmcnOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCB0aGF0IHByb21vdGVzLCBlbmNvdXJhZ2VzLCBvciBkZXBpY3RzIGFjdHMgb2Ygc2VsZi1oYXJtLCBzdWNoIGFzXG4gICAgICogc3VpY2lkZSwgY3V0dGluZywgYW5kIGVhdGluZyBkaXNvcmRlcnMuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybSc6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDb250ZW50IHRoYXQgZW5jb3VyYWdlcyBwZXJmb3JtaW5nIGFjdHMgb2Ygc2VsZi1oYXJtLCBzdWNoIGFzIHN1aWNpZGUsIGN1dHRpbmcsXG4gICAgICogYW5kIGVhdGluZyBkaXNvcmRlcnMsIG9yIHRoYXQgZ2l2ZXMgaW5zdHJ1Y3Rpb25zIG9yIGFkdmljZSBvbiBob3cgdG8gY29tbWl0IHN1Y2hcbiAgICAgKiBhY3RzLlxuICAgICAqL1xuICAgICdzZWxmLWhhcm0vaW5zdHJ1Y3Rpb25zJzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgd2hlcmUgdGhlIHNwZWFrZXIgZXhwcmVzc2VzIHRoYXQgdGhleSBhcmUgZW5nYWdpbmcgb3IgaW50ZW5kIHRvIGVuZ2FnZVxuICAgICAqIGluIGFjdHMgb2Ygc2VsZi1oYXJtLCBzdWNoIGFzIHN1aWNpZGUsIGN1dHRpbmcsIGFuZCBlYXRpbmcgZGlzb3JkZXJzLlxuICAgICAqL1xuICAgICdzZWxmLWhhcm0vaW50ZW50JzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgbWVhbnQgdG8gYXJvdXNlIHNleHVhbCBleGNpdGVtZW50LCBzdWNoIGFzIHRoZSBkZXNjcmlwdGlvbiBvZiBzZXh1YWxcbiAgICAgKiBhY3Rpdml0eSwgb3IgdGhhdCBwcm9tb3RlcyBzZXh1YWwgc2VydmljZXMgKGV4Y2x1ZGluZyBzZXggZWR1Y2F0aW9uIGFuZFxuICAgICAqIHdlbGxuZXNzKS5cbiAgICAgKi9cbiAgICBzZXh1YWw6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBTZXh1YWwgY29udGVudCB0aGF0IGluY2x1ZGVzIGFuIGluZGl2aWR1YWwgd2hvIGlzIHVuZGVyIDE4IHllYXJzIG9sZC5cbiAgICAgKi9cbiAgICAnc2V4dWFsL21pbm9ycyc6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDb250ZW50IHRoYXQgZGVwaWN0cyBkZWF0aCwgdmlvbGVuY2UsIG9yIHBoeXNpY2FsIGluanVyeS5cbiAgICAgKi9cbiAgICB2aW9sZW5jZTogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgdGhhdCBkZXBpY3RzIGRlYXRoLCB2aW9sZW5jZSwgb3IgcGh5c2ljYWwgaW5qdXJ5IGluIGdyYXBoaWMgZGV0YWlsLlxuICAgICAqL1xuICAgICd2aW9sZW5jZS9ncmFwaGljJzogYm9vbGVhbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgdGhlIGNhdGVnb3JpZXMgYWxvbmcgd2l0aCB0aGVpciBzY29yZXMgYXMgcHJlZGljdGVkIGJ5IG1vZGVsLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBDYXRlZ29yeVNjb3JlcyB7XG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ2hhcmFzc21lbnQnLlxuICAgICAqL1xuICAgIGhhcmFzc21lbnQ6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdoYXJhc3NtZW50L3RocmVhdGVuaW5nJy5cbiAgICAgKi9cbiAgICAnaGFyYXNzbWVudC90aHJlYXRlbmluZyc6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdoYXRlJy5cbiAgICAgKi9cbiAgICBoYXRlOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnaGF0ZS90aHJlYXRlbmluZycuXG4gICAgICovXG4gICAgJ2hhdGUvdGhyZWF0ZW5pbmcnOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnc2VsZi1oYXJtJy5cbiAgICAgKi9cbiAgICAnc2VsZi1oYXJtJzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ3NlbGYtaGFybS9pbnN0cnVjdGlvbnMnLlxuICAgICAqL1xuICAgICdzZWxmLWhhcm0vaW5zdHJ1Y3Rpb25zJzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ3NlbGYtaGFybS9pbnRlbnQnLlxuICAgICAqL1xuICAgICdzZWxmLWhhcm0vaW50ZW50JzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ3NleHVhbCcuXG4gICAgICovXG4gICAgc2V4dWFsOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnc2V4dWFsL21pbm9ycycuXG4gICAgICovXG4gICAgJ3NleHVhbC9taW5vcnMnOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAndmlvbGVuY2UnLlxuICAgICAqL1xuICAgIHZpb2xlbmNlOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAndmlvbGVuY2UvZ3JhcGhpYycuXG4gICAgICovXG4gICAgJ3Zpb2xlbmNlL2dyYXBoaWMnOiBudW1iZXI7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIHBvbGljeSBjb21wbGlhbmNlIHJlcG9ydCBieSBPcGVuQUkncyBjb250ZW50IG1vZGVyYXRpb24gbW9kZWwgYWdhaW5zdFxuICogYSBnaXZlbiBpbnB1dC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNb2RlcmF0aW9uQ3JlYXRlUmVzcG9uc2Uge1xuICAvKipcbiAgICogVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgbW9kZXJhdGlvbiByZXF1ZXN0LlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIG1vZGVyYXRpb24gcmVzdWx0cy5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiBtb2RlcmF0aW9uIG9iamVjdHMuXG4gICAqL1xuICByZXN1bHRzOiBBcnJheTxNb2RlcmF0aW9uPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlcmF0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBpbnB1dCB0ZXh0IHRvIGNsYXNzaWZ5XG4gICAqL1xuICBpbnB1dDogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogVHdvIGNvbnRlbnQgbW9kZXJhdGlvbnMgbW9kZWxzIGFyZSBhdmFpbGFibGU6IGB0ZXh0LW1vZGVyYXRpb24tc3RhYmxlYCBhbmRcbiAgICogYHRleHQtbW9kZXJhdGlvbi1sYXRlc3RgLlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCBpcyBgdGV4dC1tb2RlcmF0aW9uLWxhdGVzdGAgd2hpY2ggd2lsbCBiZSBhdXRvbWF0aWNhbGx5IHVwZ3JhZGVkXG4gICAqIG92ZXIgdGltZS4gVGhpcyBlbnN1cmVzIHlvdSBhcmUgYWx3YXlzIHVzaW5nIG91ciBtb3N0IGFjY3VyYXRlIG1vZGVsLiBJZiB5b3UgdXNlXG4gICAqIGB0ZXh0LW1vZGVyYXRpb24tc3RhYmxlYCwgd2Ugd2lsbCBwcm92aWRlIGFkdmFuY2VkIG5vdGljZSBiZWZvcmUgdXBkYXRpbmcgdGhlXG4gICAqIG1vZGVsLiBBY2N1cmFjeSBvZiBgdGV4dC1tb2RlcmF0aW9uLXN0YWJsZWAgbWF5IGJlIHNsaWdodGx5IGxvd2VyIHRoYW4gZm9yXG4gICAqIGB0ZXh0LW1vZGVyYXRpb24tbGF0ZXN0YC5cbiAgICovXG4gIG1vZGVsPzogKHN0cmluZyAmIHt9KSB8ICd0ZXh0LW1vZGVyYXRpb24tbGF0ZXN0JyB8ICd0ZXh0LW1vZGVyYXRpb24tc3RhYmxlJztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBNb2RlcmF0aW9ucyB7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZXJhdGlvbiA9IEFQSS5Nb2RlcmF0aW9uO1xuICBleHBvcnQgaW1wb3J0IE1vZGVyYXRpb25DcmVhdGVSZXNwb25zZSA9IEFQSS5Nb2RlcmF0aW9uQ3JlYXRlUmVzcG9uc2U7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZXJhdGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5Nb2RlcmF0aW9uQ3JlYXRlUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi9jb3JlLmpzJztcbmltcG9ydCAqIGFzIFBhZ2luYXRpb24gZnJvbSAnLi9wYWdpbmF0aW9uLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL3Jlc291cmNlcy9pbmRleC5qcyc7XG5pbXBvcnQgKiBhcyBFcnJvcnMgZnJvbSAnLi9lcnJvci5qcyc7XG5pbXBvcnQgdHlwZSB7IEFnZW50IH0gZnJvbSAnLi9fc2hpbXMvYWdlbnQuanMnO1xuaW1wb3J0ICogYXMgVXBsb2FkcyBmcm9tICcuL3VwbG9hZHMuanMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENsaWVudE9wdGlvbnMge1xuICAvKipcbiAgICogRGVmYXVsdHMgdG8gcHJvY2Vzcy5lbnZbXCJPUEVOQUlfQVBJX0tFWVwiXS5cbiAgICovXG4gIGFwaUtleT86IHN0cmluZztcblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYmFzZSBVUkwgZm9yIHRoZSBBUEksIGUuZy4sIFwiaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vdjIvXCJcbiAgICovXG4gIGJhc2VVUkw/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIChpbiBtaWxsaXNlY29uZHMpIHRoYXQgdGhlIGNsaWVudCBzaG91bGQgd2FpdCBmb3IgYSByZXNwb25zZVxuICAgKiBmcm9tIHRoZSBzZXJ2ZXIgYmVmb3JlIHRpbWluZyBvdXQgYSBzaW5nbGUgcmVxdWVzdC5cbiAgICpcbiAgICogTm90ZSB0aGF0IHJlcXVlc3QgdGltZW91dHMgYXJlIHJldHJpZWQgYnkgZGVmYXVsdCwgc28gaW4gYSB3b3JzdC1jYXNlIHNjZW5hcmlvIHlvdSBtYXkgd2FpdFxuICAgKiBtdWNoIGxvbmdlciB0aGFuIHRoaXMgdGltZW91dCBiZWZvcmUgdGhlIHByb21pc2Ugc3VjY2VlZHMgb3IgZmFpbHMuXG4gICAqL1xuICB0aW1lb3V0PzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBBbiBIVFRQIGFnZW50IHVzZWQgdG8gbWFuYWdlIEhUVFAoUykgY29ubmVjdGlvbnMuXG4gICAqXG4gICAqIElmIG5vdCBwcm92aWRlZCwgYW4gYWdlbnQgd2lsbCBiZSBjb25zdHJ1Y3RlZCBieSBkZWZhdWx0IGluIHRoZSBOb2RlLmpzIGVudmlyb25tZW50LFxuICAgKiBvdGhlcndpc2Ugbm8gYWdlbnQgaXMgdXNlZC5cbiAgICovXG4gIGh0dHBBZ2VudD86IEFnZW50O1xuXG4gIC8qKlxuICAgKiBTcGVjaWZ5IGEgY3VzdG9tIGBmZXRjaGAgZnVuY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqXG4gICAqIElmIG5vdCBwcm92aWRlZCwgd2UgdXNlIGBub2RlLWZldGNoYCBvbiBOb2RlLmpzIGFuZCBvdGhlcndpc2UgZXhwZWN0IHRoYXQgYGZldGNoYCBpc1xuICAgKiBkZWZpbmVkIGdsb2JhbGx5LlxuICAgKi9cbiAgZmV0Y2g/OiBDb3JlLkZldGNoIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdGltZXMgdGhhdCB0aGUgY2xpZW50IHdpbGwgcmV0cnkgYSByZXF1ZXN0IGluIGNhc2Ugb2YgYVxuICAgKiB0ZW1wb3JhcnkgZmFpbHVyZSwgbGlrZSBhIG5ldHdvcmsgZXJyb3Igb3IgYSA1WFggZXJyb3IgZnJvbSB0aGUgc2VydmVyLlxuICAgKlxuICAgKiBAZGVmYXVsdCAyXG4gICAqL1xuICBtYXhSZXRyaWVzPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0IGhlYWRlcnMgdG8gaW5jbHVkZSB3aXRoIGV2ZXJ5IHJlcXVlc3QgdG8gdGhlIEFQSS5cbiAgICpcbiAgICogVGhlc2UgY2FuIGJlIHJlbW92ZWQgaW4gaW5kaXZpZHVhbCByZXF1ZXN0cyBieSBleHBsaWNpdGx5IHNldHRpbmcgdGhlXG4gICAqIGhlYWRlciB0byBgdW5kZWZpbmVkYCBvciBgbnVsbGAgaW4gcmVxdWVzdCBvcHRpb25zLlxuICAgKi9cbiAgZGVmYXVsdEhlYWRlcnM/OiBDb3JlLkhlYWRlcnM7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgcXVlcnkgcGFyYW1ldGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKlxuICAgKiBUaGVzZSBjYW4gYmUgcmVtb3ZlZCBpbiBpbmRpdmlkdWFsIHJlcXVlc3RzIGJ5IGV4cGxpY2l0bHkgc2V0dGluZyB0aGVcbiAgICogcGFyYW0gdG8gYHVuZGVmaW5lZGAgaW4gcmVxdWVzdCBvcHRpb25zLlxuICAgKi9cbiAgZGVmYXVsdFF1ZXJ5PzogQ29yZS5EZWZhdWx0UXVlcnk7XG5cbiAgLyoqXG4gICAqIEJ5IGRlZmF1bHQsIGNsaWVudC1zaWRlIHVzZSBvZiB0aGlzIGxpYnJhcnkgaXMgbm90IGFsbG93ZWQsIGFzIGl0IHJpc2tzIGV4cG9zaW5nIHlvdXIgc2VjcmV0IEFQSSBjcmVkZW50aWFscyB0byBhdHRhY2tlcnMuXG4gICAqIE9ubHkgc2V0IHRoaXMgb3B0aW9uIHRvIGB0cnVlYCBpZiB5b3UgdW5kZXJzdGFuZCB0aGUgcmlza3MgYW5kIGhhdmUgYXBwcm9wcmlhdGUgbWl0aWdhdGlvbnMgaW4gcGxhY2UuXG4gICAqL1xuICBkYW5nZXJvdXNseUFsbG93QnJvd3Nlcj86IGJvb2xlYW47XG5cbiAgb3JnYW5pemF0aW9uPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuLyoqIEFQSSBDbGllbnQgZm9yIGludGVyZmFjaW5nIHdpdGggdGhlIE9wZW5BSSBBUEkuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJIGV4dGVuZHMgQ29yZS5BUElDbGllbnQge1xuICBhcGlLZXk6IHN0cmluZztcbiAgb3JnYW5pemF0aW9uPzogc3RyaW5nIHwgbnVsbDtcblxuICBwcml2YXRlIF9vcHRpb25zOiBDbGllbnRPcHRpb25zO1xuXG4gIC8qKlxuICAgKiBBUEkgQ2xpZW50IGZvciBpbnRlcmZhY2luZyB3aXRoIHRoZSBPcGVuQUkgQVBJLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYXBpS2V5PXByb2Nlc3MuZW52WydPUEVOQUlfQVBJX0tFWSddXSAtIFRoZSBBUEkgS2V5IHRvIHNlbmQgdG8gdGhlIEFQSS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmJhc2VVUkxdIC0gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYmFzZSBVUkwgZm9yIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy50aW1lb3V0PTEwIG1pbnV0ZXNdIC0gVGhlIG1heGltdW0gYW1vdW50IG9mIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgdGhlIGNsaWVudCB3aWxsIHdhaXQgZm9yIGEgcmVzcG9uc2UgYmVmb3JlIHRpbWluZyBvdXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5odHRwQWdlbnRdIC0gQW4gSFRUUCBhZ2VudCB1c2VkIHRvIG1hbmFnZSBIVFRQKHMpIGNvbm5lY3Rpb25zLlxuICAgKiBAcGFyYW0ge0NvcmUuRmV0Y2h9IFtvcHRzLmZldGNoXSAtIFNwZWNpZnkgYSBjdXN0b20gYGZldGNoYCBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLm1heFJldHJpZXM9Ml0gLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgdGltZXMgdGhlIGNsaWVudCB3aWxsIHJldHJ5IGEgcmVxdWVzdC5cbiAgICogQHBhcmFtIHtDb3JlLkhlYWRlcnN9IG9wdHMuZGVmYXVsdEhlYWRlcnMgLSBEZWZhdWx0IGhlYWRlcnMgdG8gaW5jbHVkZSB3aXRoIGV2ZXJ5IHJlcXVlc3QgdG8gdGhlIEFQSS5cbiAgICogQHBhcmFtIHtDb3JlLkRlZmF1bHRRdWVyeX0gb3B0cy5kZWZhdWx0UXVlcnkgLSBEZWZhdWx0IHF1ZXJ5IHBhcmFtZXRlcnMgdG8gaW5jbHVkZSB3aXRoIGV2ZXJ5IHJlcXVlc3QgdG8gdGhlIEFQSS5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5kYW5nZXJvdXNseUFsbG93QnJvd3Nlcj1mYWxzZV0gLSBCeSBkZWZhdWx0LCBjbGllbnQtc2lkZSB1c2Ugb2YgdGhpcyBsaWJyYXJ5IGlzIG5vdCBhbGxvd2VkLCBhcyBpdCByaXNrcyBleHBvc2luZyB5b3VyIHNlY3JldCBBUEkgY3JlZGVudGlhbHMgdG8gYXR0YWNrZXJzLlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGx9IFtvcHRzLm9yZ2FuaXphdGlvbl1cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBhcGlLZXkgPSBDb3JlLnJlYWRFbnYoJ09QRU5BSV9BUElfS0VZJyksXG4gICAgb3JnYW5pemF0aW9uID0gQ29yZS5yZWFkRW52KCdPUEVOQUlfT1JHX0lEJykgPz8gbnVsbCxcbiAgICAuLi5vcHRzXG4gIH06IENsaWVudE9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChhcGlLZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlRoZSBPUEVOQUlfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBtaXNzaW5nIG9yIGVtcHR5OyBlaXRoZXIgcHJvdmlkZSBpdCwgb3IgaW5zdGFudGlhdGUgdGhlIE9wZW5BSSBjbGllbnQgd2l0aCBhbiBhcGlLZXkgb3B0aW9uLCBsaWtlIG5ldyBPcGVuQUkoeyBhcGlLZXk6ICdteSBhcGlLZXknIH0pLlwiLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zOiBDbGllbnRPcHRpb25zID0ge1xuICAgICAgYXBpS2V5LFxuICAgICAgb3JnYW5pemF0aW9uLFxuICAgICAgLi4ub3B0cyxcbiAgICAgIGJhc2VVUkw6IG9wdHMuYmFzZVVSTCA/PyBgaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MWAsXG4gICAgfTtcblxuICAgIGlmICghb3B0aW9ucy5kYW5nZXJvdXNseUFsbG93QnJvd3NlciAmJiBDb3JlLmlzUnVubmluZ0luQnJvd3NlcigpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiSXQgbG9va3MgbGlrZSB5b3UncmUgcnVubmluZyBpbiBhIGJyb3dzZXItbGlrZSBlbnZpcm9ubWVudC5cXG5cXG5UaGlzIGlzIGRpc2FibGVkIGJ5IGRlZmF1bHQsIGFzIGl0IHJpc2tzIGV4cG9zaW5nIHlvdXIgc2VjcmV0IEFQSSBjcmVkZW50aWFscyB0byBhdHRhY2tlcnMuXFxuSWYgeW91IHVuZGVyc3RhbmQgdGhlIHJpc2tzIGFuZCBoYXZlIGFwcHJvcHJpYXRlIG1pdGlnYXRpb25zIGluIHBsYWNlLFxcbnlvdSBjYW4gc2V0IHRoZSBgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXJgIG9wdGlvbiB0byBgdHJ1ZWAsIGUuZy4sXFxuXFxubmV3IE9wZW5BSSh7IGFwaUtleSwgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI6IHRydWUgfSk7XFxuXFxuaHR0cHM6Ly9oZWxwLm9wZW5haS5jb20vZW4vYXJ0aWNsZXMvNTExMjU5NS1iZXN0LXByYWN0aWNlcy1mb3ItYXBpLWtleS1zYWZldHlcXG5cIixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3VwZXIoe1xuICAgICAgYmFzZVVSTDogb3B0aW9ucy5iYXNlVVJMISxcbiAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCA/PyA2MDAwMDAgLyogMTAgbWludXRlcyAqLyxcbiAgICAgIGh0dHBBZ2VudDogb3B0aW9ucy5odHRwQWdlbnQsXG4gICAgICBtYXhSZXRyaWVzOiBvcHRpb25zLm1heFJldHJpZXMsXG4gICAgICBmZXRjaDogb3B0aW9ucy5mZXRjaCxcbiAgICB9KTtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcblxuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgIHRoaXMub3JnYW5pemF0aW9uID0gb3JnYW5pemF0aW9uO1xuICB9XG5cbiAgY29tcGxldGlvbnM6IEFQSS5Db21wbGV0aW9ucyA9IG5ldyBBUEkuQ29tcGxldGlvbnModGhpcyk7XG4gIGNoYXQ6IEFQSS5DaGF0ID0gbmV3IEFQSS5DaGF0KHRoaXMpO1xuICBlZGl0czogQVBJLkVkaXRzID0gbmV3IEFQSS5FZGl0cyh0aGlzKTtcbiAgZW1iZWRkaW5nczogQVBJLkVtYmVkZGluZ3MgPSBuZXcgQVBJLkVtYmVkZGluZ3ModGhpcyk7XG4gIGZpbGVzOiBBUEkuRmlsZXMgPSBuZXcgQVBJLkZpbGVzKHRoaXMpO1xuICBpbWFnZXM6IEFQSS5JbWFnZXMgPSBuZXcgQVBJLkltYWdlcyh0aGlzKTtcbiAgYXVkaW86IEFQSS5BdWRpbyA9IG5ldyBBUEkuQXVkaW8odGhpcyk7XG4gIG1vZGVyYXRpb25zOiBBUEkuTW9kZXJhdGlvbnMgPSBuZXcgQVBJLk1vZGVyYXRpb25zKHRoaXMpO1xuICBtb2RlbHM6IEFQSS5Nb2RlbHMgPSBuZXcgQVBJLk1vZGVscyh0aGlzKTtcbiAgZmluZVR1bmluZzogQVBJLkZpbmVUdW5pbmcgPSBuZXcgQVBJLkZpbmVUdW5pbmcodGhpcyk7XG4gIGZpbmVUdW5lczogQVBJLkZpbmVUdW5lcyA9IG5ldyBBUEkuRmluZVR1bmVzKHRoaXMpO1xuXG4gIHByb3RlY3RlZCBvdmVycmlkZSBkZWZhdWx0UXVlcnkoKTogQ29yZS5EZWZhdWx0UXVlcnkgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zLmRlZmF1bHRRdWVyeTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvdmVycmlkZSBkZWZhdWx0SGVhZGVycyhvcHRzOiBDb3JlLkZpbmFsUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkhlYWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdXBlci5kZWZhdWx0SGVhZGVycyhvcHRzKSxcbiAgICAgICdPcGVuQUktT3JnYW5pemF0aW9uJzogdGhpcy5vcmdhbml6YXRpb24sXG4gICAgICAuLi50aGlzLl9vcHRpb25zLmRlZmF1bHRIZWFkZXJzLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYXV0aEhlYWRlcnMob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICByZXR1cm4geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCB9O1xuICB9XG5cbiAgc3RhdGljIE9wZW5BSSA9IHRoaXM7XG5cbiAgc3RhdGljIEFQSUVycm9yID0gRXJyb3JzLkFQSUVycm9yO1xuICBzdGF0aWMgQVBJQ29ubmVjdGlvbkVycm9yID0gRXJyb3JzLkFQSUNvbm5lY3Rpb25FcnJvcjtcbiAgc3RhdGljIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcjtcbiAgc3RhdGljIEFQSVVzZXJBYm9ydEVycm9yID0gRXJyb3JzLkFQSVVzZXJBYm9ydEVycm9yO1xuICBzdGF0aWMgTm90Rm91bmRFcnJvciA9IEVycm9ycy5Ob3RGb3VuZEVycm9yO1xuICBzdGF0aWMgQ29uZmxpY3RFcnJvciA9IEVycm9ycy5Db25mbGljdEVycm9yO1xuICBzdGF0aWMgUmF0ZUxpbWl0RXJyb3IgPSBFcnJvcnMuUmF0ZUxpbWl0RXJyb3I7XG4gIHN0YXRpYyBCYWRSZXF1ZXN0RXJyb3IgPSBFcnJvcnMuQmFkUmVxdWVzdEVycm9yO1xuICBzdGF0aWMgQXV0aGVudGljYXRpb25FcnJvciA9IEVycm9ycy5BdXRoZW50aWNhdGlvbkVycm9yO1xuICBzdGF0aWMgSW50ZXJuYWxTZXJ2ZXJFcnJvciA9IEVycm9ycy5JbnRlcm5hbFNlcnZlckVycm9yO1xuICBzdGF0aWMgUGVybWlzc2lvbkRlbmllZEVycm9yID0gRXJyb3JzLlBlcm1pc3Npb25EZW5pZWRFcnJvcjtcbiAgc3RhdGljIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciA9IEVycm9ycy5VbnByb2Nlc3NhYmxlRW50aXR5RXJyb3I7XG59XG5cbmV4cG9ydCBjb25zdCB7XG4gIEFQSUVycm9yLFxuICBBUElDb25uZWN0aW9uRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsXG4gIEFQSVVzZXJBYm9ydEVycm9yLFxuICBOb3RGb3VuZEVycm9yLFxuICBDb25mbGljdEVycm9yLFxuICBSYXRlTGltaXRFcnJvcixcbiAgQmFkUmVxdWVzdEVycm9yLFxuICBBdXRoZW50aWNhdGlvbkVycm9yLFxuICBJbnRlcm5hbFNlcnZlckVycm9yLFxuICBQZXJtaXNzaW9uRGVuaWVkRXJyb3IsXG4gIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvcixcbn0gPSBFcnJvcnM7XG5cbmV4cG9ydCBpbXBvcnQgdG9GaWxlID0gVXBsb2Fkcy50b0ZpbGU7XG5leHBvcnQgaW1wb3J0IGZpbGVGcm9tUGF0aCA9IFVwbG9hZHMuZmlsZUZyb21QYXRoO1xuXG5leHBvcnQgbmFtZXNwYWNlIE9wZW5BSSB7XG4gIC8vIEhlbHBlciBmdW5jdGlvbnNcbiAgZXhwb3J0IGltcG9ydCB0b0ZpbGUgPSBVcGxvYWRzLnRvRmlsZTtcbiAgZXhwb3J0IGltcG9ydCBmaWxlRnJvbVBhdGggPSBVcGxvYWRzLmZpbGVGcm9tUGF0aDtcblxuICBleHBvcnQgaW1wb3J0IFJlcXVlc3RPcHRpb25zID0gQ29yZS5SZXF1ZXN0T3B0aW9ucztcblxuICBleHBvcnQgaW1wb3J0IFBhZ2UgPSBQYWdpbmF0aW9uLlBhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgUGFnZVJlc3BvbnNlID0gUGFnaW5hdGlvbi5QYWdlUmVzcG9uc2U7XG5cbiAgZXhwb3J0IGltcG9ydCBDdXJzb3JQYWdlID0gUGFnaW5hdGlvbi5DdXJzb3JQYWdlO1xuICBleHBvcnQgaW1wb3J0IEN1cnNvclBhZ2VQYXJhbXMgPSBQYWdpbmF0aW9uLkN1cnNvclBhZ2VQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgQ3Vyc29yUGFnZVJlc3BvbnNlID0gUGFnaW5hdGlvbi5DdXJzb3JQYWdlUmVzcG9uc2U7XG5cbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9ucyA9IEFQSS5Db21wbGV0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uID0gQVBJLkNvbXBsZXRpb247XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNob2ljZSA9IEFQSS5Db21wbGV0aW9uQ2hvaWNlO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25Vc2FnZSA9IEFQSS5Db21wbGV0aW9uVXNhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG5cbiAgZXhwb3J0IGltcG9ydCBDaGF0ID0gQVBJLkNoYXQ7XG5cbiAgZXhwb3J0IGltcG9ydCBFZGl0cyA9IEFQSS5FZGl0cztcbiAgZXhwb3J0IGltcG9ydCBFZGl0ID0gQVBJLkVkaXQ7XG4gIGV4cG9ydCBpbXBvcnQgRWRpdENyZWF0ZVBhcmFtcyA9IEFQSS5FZGl0Q3JlYXRlUGFyYW1zO1xuXG4gIGV4cG9ydCBpbXBvcnQgRW1iZWRkaW5ncyA9IEFQSS5FbWJlZGRpbmdzO1xuICBleHBvcnQgaW1wb3J0IENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlID0gQVBJLkNyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlO1xuICBleHBvcnQgaW1wb3J0IEVtYmVkZGluZyA9IEFQSS5FbWJlZGRpbmc7XG4gIGV4cG9ydCBpbXBvcnQgRW1iZWRkaW5nQ3JlYXRlUGFyYW1zID0gQVBJLkVtYmVkZGluZ0NyZWF0ZVBhcmFtcztcblxuICBleHBvcnQgaW1wb3J0IEZpbGVzID0gQVBJLkZpbGVzO1xuICBleHBvcnQgaW1wb3J0IEZpbGVDb250ZW50ID0gQVBJLkZpbGVDb250ZW50O1xuICBleHBvcnQgaW1wb3J0IEZpbGVEZWxldGVkID0gQVBJLkZpbGVEZWxldGVkO1xuICBleHBvcnQgaW1wb3J0IEZpbGVPYmplY3QgPSBBUEkuRmlsZU9iamVjdDtcbiAgZXhwb3J0IGltcG9ydCBGaWxlT2JqZWN0c1BhZ2UgPSBBUEkuRmlsZU9iamVjdHNQYWdlO1xuICBleHBvcnQgaW1wb3J0IEZpbGVDcmVhdGVQYXJhbXMgPSBBUEkuRmlsZUNyZWF0ZVBhcmFtcztcblxuICBleHBvcnQgaW1wb3J0IEltYWdlcyA9IEFQSS5JbWFnZXM7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2UgPSBBUEkuSW1hZ2U7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VzUmVzcG9uc2UgPSBBUEkuSW1hZ2VzUmVzcG9uc2U7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VDcmVhdGVWYXJpYXRpb25QYXJhbXMgPSBBUEkuSW1hZ2VDcmVhdGVWYXJpYXRpb25QYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VFZGl0UGFyYW1zID0gQVBJLkltYWdlRWRpdFBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBJbWFnZUdlbmVyYXRlUGFyYW1zID0gQVBJLkltYWdlR2VuZXJhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBBdWRpbyA9IEFQSS5BdWRpbztcblxuICBleHBvcnQgaW1wb3J0IE1vZGVyYXRpb25zID0gQVBJLk1vZGVyYXRpb25zO1xuICBleHBvcnQgaW1wb3J0IE1vZGVyYXRpb24gPSBBUEkuTW9kZXJhdGlvbjtcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uQ3JlYXRlUmVzcG9uc2UgPSBBUEkuTW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlO1xuICBleHBvcnQgaW1wb3J0IE1vZGVyYXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuTW9kZXJhdGlvbkNyZWF0ZVBhcmFtcztcblxuICBleHBvcnQgaW1wb3J0IE1vZGVscyA9IEFQSS5Nb2RlbHM7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZWwgPSBBUEkuTW9kZWw7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZWxEZWxldGVkID0gQVBJLk1vZGVsRGVsZXRlZDtcbiAgZXhwb3J0IGltcG9ydCBNb2RlbHNQYWdlID0gQVBJLk1vZGVsc1BhZ2U7XG5cbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuaW5nID0gQVBJLkZpbmVUdW5pbmc7XG5cbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZXMgPSBBUEkuRmluZVR1bmVzO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lID0gQVBJLkZpbmVUdW5lO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lRXZlbnQgPSBBUEkuRmluZVR1bmVFdmVudDtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZSA9IEFQSS5GaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZXNQYWdlID0gQVBJLkZpbmVUdW5lc1BhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVDcmVhdGVQYXJhbXMgPSBBUEkuRmluZVR1bmVDcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE9wZW5BSTtcbiIsICIvKipcbiAqIG1hcmtlZCB2NC4zLjAgLSBhIG1hcmtkb3duIHBhcnNlclxuICogQ29weXJpZ2h0IChjKSAyMDExLTIwMjMsIENocmlzdG9waGVyIEplZmZyZXkuIChNSVQgTGljZW5zZWQpXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWFya2VkanMvbWFya2VkXG4gKi9cblxuLyoqXG4gKiBETyBOT1QgRURJVCBUSElTIEZJTEVcbiAqIFRoZSBjb2RlIGluIHRoaXMgZmlsZSBpcyBnZW5lcmF0ZWQgZnJvbSBmaWxlcyBpbiAuL3NyYy9cbiAqL1xuXG5mdW5jdGlvbiBnZXREZWZhdWx0cygpIHtcbiAgcmV0dXJuIHtcbiAgICBhc3luYzogZmFsc2UsXG4gICAgYmFzZVVybDogbnVsbCxcbiAgICBicmVha3M6IGZhbHNlLFxuICAgIGV4dGVuc2lvbnM6IG51bGwsXG4gICAgZ2ZtOiB0cnVlLFxuICAgIGhlYWRlcklkczogdHJ1ZSxcbiAgICBoZWFkZXJQcmVmaXg6ICcnLFxuICAgIGhpZ2hsaWdodDogbnVsbCxcbiAgICBob29rczogbnVsbCxcbiAgICBsYW5nUHJlZml4OiAnbGFuZ3VhZ2UtJyxcbiAgICBtYW5nbGU6IHRydWUsXG4gICAgcGVkYW50aWM6IGZhbHNlLFxuICAgIHJlbmRlcmVyOiBudWxsLFxuICAgIHNhbml0aXplOiBmYWxzZSxcbiAgICBzYW5pdGl6ZXI6IG51bGwsXG4gICAgc2lsZW50OiBmYWxzZSxcbiAgICBzbWFydHlwYW50czogZmFsc2UsXG4gICAgdG9rZW5pemVyOiBudWxsLFxuICAgIHdhbGtUb2tlbnM6IG51bGwsXG4gICAgeGh0bWw6IGZhbHNlXG4gIH07XG59XG5cbmxldCBkZWZhdWx0cyA9IGdldERlZmF1bHRzKCk7XG5cbmZ1bmN0aW9uIGNoYW5nZURlZmF1bHRzKG5ld0RlZmF1bHRzKSB7XG4gIGRlZmF1bHRzID0gbmV3RGVmYXVsdHM7XG59XG5cbi8qKlxuICogSGVscGVyc1xuICovXG5jb25zdCBlc2NhcGVUZXN0ID0gL1smPD5cIiddLztcbmNvbnN0IGVzY2FwZVJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVRlc3Quc291cmNlLCAnZycpO1xuY29uc3QgZXNjYXBlVGVzdE5vRW5jb2RlID0gL1s8PlwiJ118Jig/ISgjXFxkezEsN318I1tYeF1bYS1mQS1GMC05XXsxLDZ9fFxcdyspOykvO1xuY29uc3QgZXNjYXBlUmVwbGFjZU5vRW5jb2RlID0gbmV3IFJlZ0V4cChlc2NhcGVUZXN0Tm9FbmNvZGUuc291cmNlLCAnZycpO1xuY29uc3QgZXNjYXBlUmVwbGFjZW1lbnRzID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiMzOTsnXG59O1xuY29uc3QgZ2V0RXNjYXBlUmVwbGFjZW1lbnQgPSAoY2gpID0+IGVzY2FwZVJlcGxhY2VtZW50c1tjaF07XG5mdW5jdGlvbiBlc2NhcGUoaHRtbCwgZW5jb2RlKSB7XG4gIGlmIChlbmNvZGUpIHtcbiAgICBpZiAoZXNjYXBlVGVzdC50ZXN0KGh0bWwpKSB7XG4gICAgICByZXR1cm4gaHRtbC5yZXBsYWNlKGVzY2FwZVJlcGxhY2UsIGdldEVzY2FwZVJlcGxhY2VtZW50KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGVzY2FwZVRlc3ROb0VuY29kZS50ZXN0KGh0bWwpKSB7XG4gICAgICByZXR1cm4gaHRtbC5yZXBsYWNlKGVzY2FwZVJlcGxhY2VOb0VuY29kZSwgZ2V0RXNjYXBlUmVwbGFjZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBodG1sO1xufVxuXG5jb25zdCB1bmVzY2FwZVRlc3QgPSAvJigjKD86XFxkKyl8KD86I3hbMC05QS1GYS1mXSspfCg/OlxcdyspKTs/L2lnO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBodG1sXG4gKi9cbmZ1bmN0aW9uIHVuZXNjYXBlKGh0bWwpIHtcbiAgLy8gZXhwbGljaXRseSBtYXRjaCBkZWNpbWFsLCBoZXgsIGFuZCBuYW1lZCBIVE1MIGVudGl0aWVzXG4gIHJldHVybiBodG1sLnJlcGxhY2UodW5lc2NhcGVUZXN0LCAoXywgbikgPT4ge1xuICAgIG4gPSBuLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKG4gPT09ICdjb2xvbicpIHJldHVybiAnOic7XG4gICAgaWYgKG4uY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgIHJldHVybiBuLmNoYXJBdCgxKSA9PT0gJ3gnXG4gICAgICAgID8gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChuLnN1YnN0cmluZygyKSwgMTYpKVxuICAgICAgICA6IFN0cmluZy5mcm9tQ2hhckNvZGUoK24uc3Vic3RyaW5nKDEpKTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9KTtcbn1cblxuY29uc3QgY2FyZXQgPSAvKF58W15cXFtdKVxcXi9nO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nIHwgUmVnRXhwfSByZWdleFxuICogQHBhcmFtIHtzdHJpbmd9IG9wdFxuICovXG5mdW5jdGlvbiBlZGl0KHJlZ2V4LCBvcHQpIHtcbiAgcmVnZXggPSB0eXBlb2YgcmVnZXggPT09ICdzdHJpbmcnID8gcmVnZXggOiByZWdleC5zb3VyY2U7XG4gIG9wdCA9IG9wdCB8fCAnJztcbiAgY29uc3Qgb2JqID0ge1xuICAgIHJlcGxhY2U6IChuYW1lLCB2YWwpID0+IHtcbiAgICAgIHZhbCA9IHZhbC5zb3VyY2UgfHwgdmFsO1xuICAgICAgdmFsID0gdmFsLnJlcGxhY2UoY2FyZXQsICckMScpO1xuICAgICAgcmVnZXggPSByZWdleC5yZXBsYWNlKG5hbWUsIHZhbCk7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZ2V0UmVnZXg6ICgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUmVnRXhwKHJlZ2V4LCBvcHQpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIG9iajtcbn1cblxuY29uc3Qgbm9uV29yZEFuZENvbG9uVGVzdCA9IC9bXlxcdzpdL2c7XG5jb25zdCBvcmlnaW5JbmRlcGVuZGVudFVybCA9IC9eJHxeW2Etel1bYS16MC05Ky4tXSo6fF5bPyNdL2k7XG5cbi8qKlxuICogQHBhcmFtIHtib29sZWFufSBzYW5pdGl6ZVxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBocmVmXG4gKi9cbmZ1bmN0aW9uIGNsZWFuVXJsKHNhbml0aXplLCBiYXNlLCBocmVmKSB7XG4gIGlmIChzYW5pdGl6ZSkge1xuICAgIGxldCBwcm90O1xuICAgIHRyeSB7XG4gICAgICBwcm90ID0gZGVjb2RlVVJJQ29tcG9uZW50KHVuZXNjYXBlKGhyZWYpKVxuICAgICAgICAucmVwbGFjZShub25Xb3JkQW5kQ29sb25UZXN0LCAnJylcbiAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChwcm90LmluZGV4T2YoJ2phdmFzY3JpcHQ6JykgPT09IDAgfHwgcHJvdC5pbmRleE9mKCd2YnNjcmlwdDonKSA9PT0gMCB8fCBwcm90LmluZGV4T2YoJ2RhdGE6JykgPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBpZiAoYmFzZSAmJiAhb3JpZ2luSW5kZXBlbmRlbnRVcmwudGVzdChocmVmKSkge1xuICAgIGhyZWYgPSByZXNvbHZlVXJsKGJhc2UsIGhyZWYpO1xuICB9XG4gIHRyeSB7XG4gICAgaHJlZiA9IGVuY29kZVVSSShocmVmKS5yZXBsYWNlKC8lMjUvZywgJyUnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBocmVmO1xufVxuXG5jb25zdCBiYXNlVXJscyA9IHt9O1xuY29uc3QganVzdERvbWFpbiA9IC9eW146XSs6XFwvKlteL10qJC87XG5jb25zdCBwcm90b2NvbCA9IC9eKFteOl0rOilbXFxzXFxTXSokLztcbmNvbnN0IGRvbWFpbiA9IC9eKFteOl0rOlxcLypbXi9dKilbXFxzXFxTXSokLztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVxuICogQHBhcmFtIHtzdHJpbmd9IGhyZWZcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZVVybChiYXNlLCBocmVmKSB7XG4gIGlmICghYmFzZVVybHNbJyAnICsgYmFzZV0pIHtcbiAgICAvLyB3ZSBjYW4gaWdub3JlIGV2ZXJ5dGhpbmcgaW4gYmFzZSBhZnRlciB0aGUgbGFzdCBzbGFzaCBvZiBpdHMgcGF0aCBjb21wb25lbnQsXG4gICAgLy8gYnV0IHdlIG1pZ2h0IG5lZWQgdG8gYWRkIF90aGF0X1xuICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3NlY3Rpb24tM1xuICAgIGlmIChqdXN0RG9tYWluLnRlc3QoYmFzZSkpIHtcbiAgICAgIGJhc2VVcmxzWycgJyArIGJhc2VdID0gYmFzZSArICcvJztcbiAgICB9IGVsc2Uge1xuICAgICAgYmFzZVVybHNbJyAnICsgYmFzZV0gPSBydHJpbShiYXNlLCAnLycsIHRydWUpO1xuICAgIH1cbiAgfVxuICBiYXNlID0gYmFzZVVybHNbJyAnICsgYmFzZV07XG4gIGNvbnN0IHJlbGF0aXZlQmFzZSA9IGJhc2UuaW5kZXhPZignOicpID09PSAtMTtcblxuICBpZiAoaHJlZi5zdWJzdHJpbmcoMCwgMikgPT09ICcvLycpIHtcbiAgICBpZiAocmVsYXRpdmVCYXNlKSB7XG4gICAgICByZXR1cm4gaHJlZjtcbiAgICB9XG4gICAgcmV0dXJuIGJhc2UucmVwbGFjZShwcm90b2NvbCwgJyQxJykgKyBocmVmO1xuICB9IGVsc2UgaWYgKGhyZWYuY2hhckF0KDApID09PSAnLycpIHtcbiAgICBpZiAocmVsYXRpdmVCYXNlKSB7XG4gICAgICByZXR1cm4gaHJlZjtcbiAgICB9XG4gICAgcmV0dXJuIGJhc2UucmVwbGFjZShkb21haW4sICckMScpICsgaHJlZjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZSArIGhyZWY7XG4gIH1cbn1cblxuY29uc3Qgbm9vcFRlc3QgPSB7IGV4ZWM6IGZ1bmN0aW9uIG5vb3BUZXN0KCkge30gfTtcblxuZnVuY3Rpb24gc3BsaXRDZWxscyh0YWJsZVJvdywgY291bnQpIHtcbiAgLy8gZW5zdXJlIHRoYXQgZXZlcnkgY2VsbC1kZWxpbWl0aW5nIHBpcGUgaGFzIGEgc3BhY2VcbiAgLy8gYmVmb3JlIGl0IHRvIGRpc3Rpbmd1aXNoIGl0IGZyb20gYW4gZXNjYXBlZCBwaXBlXG4gIGNvbnN0IHJvdyA9IHRhYmxlUm93LnJlcGxhY2UoL1xcfC9nLCAobWF0Y2gsIG9mZnNldCwgc3RyKSA9PiB7XG4gICAgICBsZXQgZXNjYXBlZCA9IGZhbHNlLFxuICAgICAgICBjdXJyID0gb2Zmc2V0O1xuICAgICAgd2hpbGUgKC0tY3VyciA+PSAwICYmIHN0cltjdXJyXSA9PT0gJ1xcXFwnKSBlc2NhcGVkID0gIWVzY2FwZWQ7XG4gICAgICBpZiAoZXNjYXBlZCkge1xuICAgICAgICAvLyBvZGQgbnVtYmVyIG9mIHNsYXNoZXMgbWVhbnMgfCBpcyBlc2NhcGVkXG4gICAgICAgIC8vIHNvIHdlIGxlYXZlIGl0IGFsb25lXG4gICAgICAgIHJldHVybiAnfCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhZGQgc3BhY2UgYmVmb3JlIHVuZXNjYXBlZCB8XG4gICAgICAgIHJldHVybiAnIHwnO1xuICAgICAgfVxuICAgIH0pLFxuICAgIGNlbGxzID0gcm93LnNwbGl0KC8gXFx8Lyk7XG4gIGxldCBpID0gMDtcblxuICAvLyBGaXJzdC9sYXN0IGNlbGwgaW4gYSByb3cgY2Fubm90IGJlIGVtcHR5IGlmIGl0IGhhcyBubyBsZWFkaW5nL3RyYWlsaW5nIHBpcGVcbiAgaWYgKCFjZWxsc1swXS50cmltKCkpIHsgY2VsbHMuc2hpZnQoKTsgfVxuICBpZiAoY2VsbHMubGVuZ3RoID4gMCAmJiAhY2VsbHNbY2VsbHMubGVuZ3RoIC0gMV0udHJpbSgpKSB7IGNlbGxzLnBvcCgpOyB9XG5cbiAgaWYgKGNlbGxzLmxlbmd0aCA+IGNvdW50KSB7XG4gICAgY2VsbHMuc3BsaWNlKGNvdW50KTtcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoY2VsbHMubGVuZ3RoIDwgY291bnQpIGNlbGxzLnB1c2goJycpO1xuICB9XG5cbiAgZm9yICg7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgIC8vIGxlYWRpbmcgb3IgdHJhaWxpbmcgd2hpdGVzcGFjZSBpcyBpZ25vcmVkIHBlciB0aGUgZ2ZtIHNwZWNcbiAgICBjZWxsc1tpXSA9IGNlbGxzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXFxcXFx8L2csICd8Jyk7XG4gIH1cbiAgcmV0dXJuIGNlbGxzO1xufVxuXG4vKipcbiAqIFJlbW92ZSB0cmFpbGluZyAnYydzLiBFcXVpdmFsZW50IHRvIHN0ci5yZXBsYWNlKC9jKiQvLCAnJykuXG4gKiAvYyokLyBpcyB2dWxuZXJhYmxlIHRvIFJFRE9TLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBjXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGludmVydCBSZW1vdmUgc3VmZml4IG9mIG5vbi1jIGNoYXJzIGluc3RlYWQuIERlZmF1bHQgZmFsc2V5LlxuICovXG5mdW5jdGlvbiBydHJpbShzdHIsIGMsIGludmVydCkge1xuICBjb25zdCBsID0gc3RyLmxlbmd0aDtcbiAgaWYgKGwgPT09IDApIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvLyBMZW5ndGggb2Ygc3VmZml4IG1hdGNoaW5nIHRoZSBpbnZlcnQgY29uZGl0aW9uLlxuICBsZXQgc3VmZkxlbiA9IDA7XG5cbiAgLy8gU3RlcCBsZWZ0IHVudGlsIHdlIGZhaWwgdG8gbWF0Y2ggdGhlIGludmVydCBjb25kaXRpb24uXG4gIHdoaWxlIChzdWZmTGVuIDwgbCkge1xuICAgIGNvbnN0IGN1cnJDaGFyID0gc3RyLmNoYXJBdChsIC0gc3VmZkxlbiAtIDEpO1xuICAgIGlmIChjdXJyQ2hhciA9PT0gYyAmJiAhaW52ZXJ0KSB7XG4gICAgICBzdWZmTGVuKys7XG4gICAgfSBlbHNlIGlmIChjdXJyQ2hhciAhPT0gYyAmJiBpbnZlcnQpIHtcbiAgICAgIHN1ZmZMZW4rKztcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0ci5zbGljZSgwLCBsIC0gc3VmZkxlbik7XG59XG5cbmZ1bmN0aW9uIGZpbmRDbG9zaW5nQnJhY2tldChzdHIsIGIpIHtcbiAgaWYgKHN0ci5pbmRleE9mKGJbMV0pID09PSAtMSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBjb25zdCBsID0gc3RyLmxlbmd0aDtcbiAgbGV0IGxldmVsID0gMCxcbiAgICBpID0gMDtcbiAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoc3RyW2ldID09PSAnXFxcXCcpIHtcbiAgICAgIGkrKztcbiAgICB9IGVsc2UgaWYgKHN0cltpXSA9PT0gYlswXSkge1xuICAgICAgbGV2ZWwrKztcbiAgICB9IGVsc2UgaWYgKHN0cltpXSA9PT0gYlsxXSkge1xuICAgICAgbGV2ZWwtLTtcbiAgICAgIGlmIChsZXZlbCA8IDApIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gY2hlY2tTYW5pdGl6ZURlcHJlY2F0aW9uKG9wdCkge1xuICBpZiAob3B0ICYmIG9wdC5zYW5pdGl6ZSAmJiAhb3B0LnNpbGVudCkge1xuICAgIGNvbnNvbGUud2FybignbWFya2VkKCk6IHNhbml0aXplIGFuZCBzYW5pdGl6ZXIgcGFyYW1ldGVycyBhcmUgZGVwcmVjYXRlZCBzaW5jZSB2ZXJzaW9uIDAuNy4wLCBzaG91bGQgbm90IGJlIHVzZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLiBSZWFkIG1vcmUgaGVyZTogaHR0cHM6Ly9tYXJrZWQuanMub3JnLyMvVVNJTkdfQURWQU5DRUQubWQjb3B0aW9ucycpO1xuICB9XG59XG5cbi8vIGNvcGllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81NDUwMTEzLzgwNjc3N1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0dGVyblxuICogQHBhcmFtIHtudW1iZXJ9IGNvdW50XG4gKi9cbmZ1bmN0aW9uIHJlcGVhdFN0cmluZyhwYXR0ZXJuLCBjb3VudCkge1xuICBpZiAoY291bnQgPCAxKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGxldCByZXN1bHQgPSAnJztcbiAgd2hpbGUgKGNvdW50ID4gMSkge1xuICAgIGlmIChjb3VudCAmIDEpIHtcbiAgICAgIHJlc3VsdCArPSBwYXR0ZXJuO1xuICAgIH1cbiAgICBjb3VudCA+Pj0gMTtcbiAgICBwYXR0ZXJuICs9IHBhdHRlcm47XG4gIH1cbiAgcmV0dXJuIHJlc3VsdCArIHBhdHRlcm47XG59XG5cbmZ1bmN0aW9uIG91dHB1dExpbmsoY2FwLCBsaW5rLCByYXcsIGxleGVyKSB7XG4gIGNvbnN0IGhyZWYgPSBsaW5rLmhyZWY7XG4gIGNvbnN0IHRpdGxlID0gbGluay50aXRsZSA/IGVzY2FwZShsaW5rLnRpdGxlKSA6IG51bGw7XG4gIGNvbnN0IHRleHQgPSBjYXBbMV0ucmVwbGFjZSgvXFxcXChbXFxbXFxdXSkvZywgJyQxJyk7XG5cbiAgaWYgKGNhcFswXS5jaGFyQXQoMCkgIT09ICchJykge1xuICAgIGxleGVyLnN0YXRlLmluTGluayA9IHRydWU7XG4gICAgY29uc3QgdG9rZW4gPSB7XG4gICAgICB0eXBlOiAnbGluaycsXG4gICAgICByYXcsXG4gICAgICBocmVmLFxuICAgICAgdGl0bGUsXG4gICAgICB0ZXh0LFxuICAgICAgdG9rZW5zOiBsZXhlci5pbmxpbmVUb2tlbnModGV4dClcbiAgICB9O1xuICAgIGxleGVyLnN0YXRlLmluTGluayA9IGZhbHNlO1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuICByZXR1cm4ge1xuICAgIHR5cGU6ICdpbWFnZScsXG4gICAgcmF3LFxuICAgIGhyZWYsXG4gICAgdGl0bGUsXG4gICAgdGV4dDogZXNjYXBlKHRleHQpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGluZGVudENvZGVDb21wZW5zYXRpb24ocmF3LCB0ZXh0KSB7XG4gIGNvbnN0IG1hdGNoSW5kZW50VG9Db2RlID0gcmF3Lm1hdGNoKC9eKFxccyspKD86YGBgKS8pO1xuXG4gIGlmIChtYXRjaEluZGVudFRvQ29kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgY29uc3QgaW5kZW50VG9Db2RlID0gbWF0Y2hJbmRlbnRUb0NvZGVbMV07XG5cbiAgcmV0dXJuIHRleHRcbiAgICAuc3BsaXQoJ1xcbicpXG4gICAgLm1hcChub2RlID0+IHtcbiAgICAgIGNvbnN0IG1hdGNoSW5kZW50SW5Ob2RlID0gbm9kZS5tYXRjaCgvXlxccysvKTtcbiAgICAgIGlmIChtYXRjaEluZGVudEluTm9kZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgW2luZGVudEluTm9kZV0gPSBtYXRjaEluZGVudEluTm9kZTtcblxuICAgICAgaWYgKGluZGVudEluTm9kZS5sZW5ndGggPj0gaW5kZW50VG9Db2RlLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbm9kZS5zbGljZShpbmRlbnRUb0NvZGUubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSlcbiAgICAuam9pbignXFxuJyk7XG59XG5cbi8qKlxuICogVG9rZW5pemVyXG4gKi9cbmNsYXNzIFRva2VuaXplciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzO1xuICB9XG5cbiAgc3BhY2Uoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5uZXdsaW5lLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwICYmIGNhcFswXS5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc3BhY2UnLFxuICAgICAgICByYXc6IGNhcFswXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBjb2RlKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2suY29kZS5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgY29uc3QgdGV4dCA9IGNhcFswXS5yZXBsYWNlKC9eIHsxLDR9L2dtLCAnJyk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29kZScsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICBjb2RlQmxvY2tTdHlsZTogJ2luZGVudGVkJyxcbiAgICAgICAgdGV4dDogIXRoaXMub3B0aW9ucy5wZWRhbnRpY1xuICAgICAgICAgID8gcnRyaW0odGV4dCwgJ1xcbicpXG4gICAgICAgICAgOiB0ZXh0XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZlbmNlcyhzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLmZlbmNlcy5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgY29uc3QgcmF3ID0gY2FwWzBdO1xuICAgICAgY29uc3QgdGV4dCA9IGluZGVudENvZGVDb21wZW5zYXRpb24ocmF3LCBjYXBbM10gfHwgJycpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29kZScsXG4gICAgICAgIHJhdyxcbiAgICAgICAgbGFuZzogY2FwWzJdID8gY2FwWzJdLnRyaW0oKS5yZXBsYWNlKHRoaXMucnVsZXMuaW5saW5lLl9lc2NhcGVzLCAnJDEnKSA6IGNhcFsyXSxcbiAgICAgICAgdGV4dFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBoZWFkaW5nKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2suaGVhZGluZy5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgbGV0IHRleHQgPSBjYXBbMl0udHJpbSgpO1xuXG4gICAgICAvLyByZW1vdmUgdHJhaWxpbmcgI3NcbiAgICAgIGlmICgvIyQvLnRlc3QodGV4dCkpIHtcbiAgICAgICAgY29uc3QgdHJpbW1lZCA9IHJ0cmltKHRleHQsICcjJyk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucGVkYW50aWMpIHtcbiAgICAgICAgICB0ZXh0ID0gdHJpbW1lZC50cmltKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRyaW1tZWQgfHwgLyAkLy50ZXN0KHRyaW1tZWQpKSB7XG4gICAgICAgICAgLy8gQ29tbW9uTWFyayByZXF1aXJlcyBzcGFjZSBiZWZvcmUgdHJhaWxpbmcgI3NcbiAgICAgICAgICB0ZXh0ID0gdHJpbW1lZC50cmltKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2hlYWRpbmcnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgZGVwdGg6IGNhcFsxXS5sZW5ndGgsXG4gICAgICAgIHRleHQsXG4gICAgICAgIHRva2VuczogdGhpcy5sZXhlci5pbmxpbmUodGV4dClcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgaHIoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5oci5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2hyJyxcbiAgICAgICAgcmF3OiBjYXBbMF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgYmxvY2txdW90ZShzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLmJsb2NrcXVvdGUuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGNvbnN0IHRleHQgPSBjYXBbMF0ucmVwbGFjZSgvXiAqPlsgXFx0XT8vZ20sICcnKTtcbiAgICAgIGNvbnN0IHRvcCA9IHRoaXMubGV4ZXIuc3RhdGUudG9wO1xuICAgICAgdGhpcy5sZXhlci5zdGF0ZS50b3AgPSB0cnVlO1xuICAgICAgY29uc3QgdG9rZW5zID0gdGhpcy5sZXhlci5ibG9ja1Rva2Vucyh0ZXh0KTtcbiAgICAgIHRoaXMubGV4ZXIuc3RhdGUudG9wID0gdG9wO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Jsb2NrcXVvdGUnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgdG9rZW5zLFxuICAgICAgICB0ZXh0XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGxpc3Qoc3JjKSB7XG4gICAgbGV0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2subGlzdC5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgbGV0IHJhdywgaXN0YXNrLCBpc2NoZWNrZWQsIGluZGVudCwgaSwgYmxhbmtMaW5lLCBlbmRzV2l0aEJsYW5rTGluZSxcbiAgICAgICAgbGluZSwgbmV4dExpbmUsIHJhd0xpbmUsIGl0ZW1Db250ZW50cywgZW5kRWFybHk7XG5cbiAgICAgIGxldCBidWxsID0gY2FwWzFdLnRyaW0oKTtcbiAgICAgIGNvbnN0IGlzb3JkZXJlZCA9IGJ1bGwubGVuZ3RoID4gMTtcblxuICAgICAgY29uc3QgbGlzdCA9IHtcbiAgICAgICAgdHlwZTogJ2xpc3QnLFxuICAgICAgICByYXc6ICcnLFxuICAgICAgICBvcmRlcmVkOiBpc29yZGVyZWQsXG4gICAgICAgIHN0YXJ0OiBpc29yZGVyZWQgPyArYnVsbC5zbGljZSgwLCAtMSkgOiAnJyxcbiAgICAgICAgbG9vc2U6IGZhbHNlLFxuICAgICAgICBpdGVtczogW11cbiAgICAgIH07XG5cbiAgICAgIGJ1bGwgPSBpc29yZGVyZWQgPyBgXFxcXGR7MSw5fVxcXFwke2J1bGwuc2xpY2UoLTEpfWAgOiBgXFxcXCR7YnVsbH1gO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnBlZGFudGljKSB7XG4gICAgICAgIGJ1bGwgPSBpc29yZGVyZWQgPyBidWxsIDogJ1sqKy1dJztcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IG5leHQgbGlzdCBpdGVtXG4gICAgICBjb25zdCBpdGVtUmVnZXggPSBuZXcgUmVnRXhwKGBeKCB7MCwzfSR7YnVsbH0pKCg/OltcXHQgXVteXFxcXG5dKik/KD86XFxcXG58JCkpYCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGN1cnJlbnQgYnVsbGV0IHBvaW50IGNhbiBzdGFydCBhIG5ldyBMaXN0IEl0ZW1cbiAgICAgIHdoaWxlIChzcmMpIHtcbiAgICAgICAgZW5kRWFybHkgPSBmYWxzZTtcbiAgICAgICAgaWYgKCEoY2FwID0gaXRlbVJlZ2V4LmV4ZWMoc3JjKSkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJ1bGVzLmJsb2NrLmhyLnRlc3Qoc3JjKSkgeyAvLyBFbmQgbGlzdCBpZiBidWxsZXQgd2FzIGFjdHVhbGx5IEhSIChwb3NzaWJseSBtb3ZlIGludG8gaXRlbVJlZ2V4PylcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJhdyA9IGNhcFswXTtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhyYXcubGVuZ3RoKTtcblxuICAgICAgICBsaW5lID0gY2FwWzJdLnNwbGl0KCdcXG4nLCAxKVswXS5yZXBsYWNlKC9eXFx0Ky8sICh0KSA9PiAnICcucmVwZWF0KDMgKiB0Lmxlbmd0aCkpO1xuICAgICAgICBuZXh0TGluZSA9IHNyYy5zcGxpdCgnXFxuJywgMSlbMF07XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wZWRhbnRpYykge1xuICAgICAgICAgIGluZGVudCA9IDI7XG4gICAgICAgICAgaXRlbUNvbnRlbnRzID0gbGluZS50cmltTGVmdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluZGVudCA9IGNhcFsyXS5zZWFyY2goL1teIF0vKTsgLy8gRmluZCBmaXJzdCBub24tc3BhY2UgY2hhclxuICAgICAgICAgIGluZGVudCA9IGluZGVudCA+IDQgPyAxIDogaW5kZW50OyAvLyBUcmVhdCBpbmRlbnRlZCBjb2RlIGJsb2NrcyAoPiA0IHNwYWNlcykgYXMgaGF2aW5nIG9ubHkgMSBpbmRlbnRcbiAgICAgICAgICBpdGVtQ29udGVudHMgPSBsaW5lLnNsaWNlKGluZGVudCk7XG4gICAgICAgICAgaW5kZW50ICs9IGNhcFsxXS5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICBibGFua0xpbmUgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIWxpbmUgJiYgL14gKiQvLnRlc3QobmV4dExpbmUpKSB7IC8vIEl0ZW1zIGJlZ2luIHdpdGggYXQgbW9zdCBvbmUgYmxhbmsgbGluZVxuICAgICAgICAgIHJhdyArPSBuZXh0TGluZSArICdcXG4nO1xuICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcobmV4dExpbmUubGVuZ3RoICsgMSk7XG4gICAgICAgICAgZW5kRWFybHkgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFlbmRFYXJseSkge1xuICAgICAgICAgIGNvbnN0IG5leHRCdWxsZXRSZWdleCA9IG5ldyBSZWdFeHAoYF4gezAsJHtNYXRoLm1pbigzLCBpbmRlbnQgLSAxKX19KD86WyorLV18XFxcXGR7MSw5fVsuKV0pKCg/OlsgXFx0XVteXFxcXG5dKik/KD86XFxcXG58JCkpYCk7XG4gICAgICAgICAgY29uc3QgaHJSZWdleCA9IG5ldyBSZWdFeHAoYF4gezAsJHtNYXRoLm1pbigzLCBpbmRlbnQgLSAxKX19KCg/Oi0gKil7Myx9fCg/Ol8gKil7Myx9fCg/OlxcXFwqICopezMsfSkoPzpcXFxcbit8JClgKTtcbiAgICAgICAgICBjb25zdCBmZW5jZXNCZWdpblJlZ2V4ID0gbmV3IFJlZ0V4cChgXiB7MCwke01hdGgubWluKDMsIGluZGVudCAtIDEpfX0oPzpcXGBcXGBcXGB8fn5+KWApO1xuICAgICAgICAgIGNvbnN0IGhlYWRpbmdCZWdpblJlZ2V4ID0gbmV3IFJlZ0V4cChgXiB7MCwke01hdGgubWluKDMsIGluZGVudCAtIDEpfX0jYCk7XG5cbiAgICAgICAgICAvLyBDaGVjayBpZiBmb2xsb3dpbmcgbGluZXMgc2hvdWxkIGJlIGluY2x1ZGVkIGluIExpc3QgSXRlbVxuICAgICAgICAgIHdoaWxlIChzcmMpIHtcbiAgICAgICAgICAgIHJhd0xpbmUgPSBzcmMuc3BsaXQoJ1xcbicsIDEpWzBdO1xuICAgICAgICAgICAgbmV4dExpbmUgPSByYXdMaW5lO1xuXG4gICAgICAgICAgICAvLyBSZS1hbGlnbiB0byBmb2xsb3cgY29tbW9ubWFyayBuZXN0aW5nIHJ1bGVzXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBlZGFudGljKSB7XG4gICAgICAgICAgICAgIG5leHRMaW5lID0gbmV4dExpbmUucmVwbGFjZSgvXiB7MSw0fSg/PSggezR9KSpbXiBdKS9nLCAnICAnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRW5kIGxpc3QgaXRlbSBpZiBmb3VuZCBjb2RlIGZlbmNlc1xuICAgICAgICAgICAgaWYgKGZlbmNlc0JlZ2luUmVnZXgudGVzdChuZXh0TGluZSkpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVuZCBsaXN0IGl0ZW0gaWYgZm91bmQgc3RhcnQgb2YgbmV3IGhlYWRpbmdcbiAgICAgICAgICAgIGlmIChoZWFkaW5nQmVnaW5SZWdleC50ZXN0KG5leHRMaW5lKSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRW5kIGxpc3QgaXRlbSBpZiBmb3VuZCBzdGFydCBvZiBuZXcgYnVsbGV0XG4gICAgICAgICAgICBpZiAobmV4dEJ1bGxldFJlZ2V4LnRlc3QobmV4dExpbmUpKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBIb3Jpem9udGFsIHJ1bGUgZm91bmRcbiAgICAgICAgICAgIGlmIChoclJlZ2V4LnRlc3Qoc3JjKSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5leHRMaW5lLnNlYXJjaCgvW14gXS8pID49IGluZGVudCB8fCAhbmV4dExpbmUudHJpbSgpKSB7IC8vIERlZGVudCBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgICBpdGVtQ29udGVudHMgKz0gJ1xcbicgKyBuZXh0TGluZS5zbGljZShpbmRlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gbm90IGVub3VnaCBpbmRlbnRhdGlvblxuICAgICAgICAgICAgICBpZiAoYmxhbmtMaW5lKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBwYXJhZ3JhcGggY29udGludWF0aW9uIHVubGVzcyBsYXN0IGxpbmUgd2FzIGEgZGlmZmVyZW50IGJsb2NrIGxldmVsIGVsZW1lbnRcbiAgICAgICAgICAgICAgaWYgKGxpbmUuc2VhcmNoKC9bXiBdLykgPj0gNCkgeyAvLyBpbmRlbnRlZCBjb2RlIGJsb2NrXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGZlbmNlc0JlZ2luUmVnZXgudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChoZWFkaW5nQmVnaW5SZWdleC50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGhyUmVnZXgudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaXRlbUNvbnRlbnRzICs9ICdcXG4nICsgbmV4dExpbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghYmxhbmtMaW5lICYmICFuZXh0TGluZS50cmltKCkpIHsgLy8gQ2hlY2sgaWYgY3VycmVudCBsaW5lIGlzIGJsYW5rXG4gICAgICAgICAgICAgIGJsYW5rTGluZSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJhdyArPSByYXdMaW5lICsgJ1xcbic7XG4gICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHJhd0xpbmUubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICBsaW5lID0gbmV4dExpbmUuc2xpY2UoaW5kZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxpc3QubG9vc2UpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgcHJldmlvdXMgaXRlbSBlbmRlZCB3aXRoIGEgYmxhbmsgbGluZSwgdGhlIGxpc3QgaXMgbG9vc2VcbiAgICAgICAgICBpZiAoZW5kc1dpdGhCbGFua0xpbmUpIHtcbiAgICAgICAgICAgIGxpc3QubG9vc2UgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoL1xcbiAqXFxuICokLy50ZXN0KHJhdykpIHtcbiAgICAgICAgICAgIGVuZHNXaXRoQmxhbmtMaW5lID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBmb3IgdGFzayBsaXN0IGl0ZW1zXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2ZtKSB7XG4gICAgICAgICAgaXN0YXNrID0gL15cXFtbIHhYXVxcXSAvLmV4ZWMoaXRlbUNvbnRlbnRzKTtcbiAgICAgICAgICBpZiAoaXN0YXNrKSB7XG4gICAgICAgICAgICBpc2NoZWNrZWQgPSBpc3Rhc2tbMF0gIT09ICdbIF0gJztcbiAgICAgICAgICAgIGl0ZW1Db250ZW50cyA9IGl0ZW1Db250ZW50cy5yZXBsYWNlKC9eXFxbWyB4WF1cXF0gKy8sICcnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsaXN0Lml0ZW1zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdsaXN0X2l0ZW0nLFxuICAgICAgICAgIHJhdyxcbiAgICAgICAgICB0YXNrOiAhIWlzdGFzayxcbiAgICAgICAgICBjaGVja2VkOiBpc2NoZWNrZWQsXG4gICAgICAgICAgbG9vc2U6IGZhbHNlLFxuICAgICAgICAgIHRleHQ6IGl0ZW1Db250ZW50c1xuICAgICAgICB9KTtcblxuICAgICAgICBsaXN0LnJhdyArPSByYXc7XG4gICAgICB9XG5cbiAgICAgIC8vIERvIG5vdCBjb25zdW1lIG5ld2xpbmVzIGF0IGVuZCBvZiBmaW5hbCBpdGVtLiBBbHRlcm5hdGl2ZWx5LCBtYWtlIGl0ZW1SZWdleCAqc3RhcnQqIHdpdGggYW55IG5ld2xpbmVzIHRvIHNpbXBsaWZ5L3NwZWVkIHVwIGVuZHNXaXRoQmxhbmtMaW5lIGxvZ2ljXG4gICAgICBsaXN0Lml0ZW1zW2xpc3QuaXRlbXMubGVuZ3RoIC0gMV0ucmF3ID0gcmF3LnRyaW1SaWdodCgpO1xuICAgICAgbGlzdC5pdGVtc1tsaXN0Lml0ZW1zLmxlbmd0aCAtIDFdLnRleHQgPSBpdGVtQ29udGVudHMudHJpbVJpZ2h0KCk7XG4gICAgICBsaXN0LnJhdyA9IGxpc3QucmF3LnRyaW1SaWdodCgpO1xuXG4gICAgICBjb25zdCBsID0gbGlzdC5pdGVtcy5sZW5ndGg7XG5cbiAgICAgIC8vIEl0ZW0gY2hpbGQgdG9rZW5zIGhhbmRsZWQgaGVyZSBhdCBlbmQgYmVjYXVzZSB3ZSBuZWVkZWQgdG8gaGF2ZSB0aGUgZmluYWwgaXRlbSB0byB0cmltIGl0IGZpcnN0XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMubGV4ZXIuc3RhdGUudG9wID0gZmFsc2U7XG4gICAgICAgIGxpc3QuaXRlbXNbaV0udG9rZW5zID0gdGhpcy5sZXhlci5ibG9ja1Rva2VucyhsaXN0Lml0ZW1zW2ldLnRleHQsIFtdKTtcblxuICAgICAgICBpZiAoIWxpc3QubG9vc2UpIHtcbiAgICAgICAgICAvLyBDaGVjayBpZiBsaXN0IHNob3VsZCBiZSBsb29zZVxuICAgICAgICAgIGNvbnN0IHNwYWNlcnMgPSBsaXN0Lml0ZW1zW2ldLnRva2Vucy5maWx0ZXIodCA9PiB0LnR5cGUgPT09ICdzcGFjZScpO1xuICAgICAgICAgIGNvbnN0IGhhc011bHRpcGxlTGluZUJyZWFrcyA9IHNwYWNlcnMubGVuZ3RoID4gMCAmJiBzcGFjZXJzLnNvbWUodCA9PiAvXFxuLipcXG4vLnRlc3QodC5yYXcpKTtcblxuICAgICAgICAgIGxpc3QubG9vc2UgPSBoYXNNdWx0aXBsZUxpbmVCcmVha3M7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2V0IGFsbCBpdGVtcyB0byBsb29zZSBpZiBsaXN0IGlzIGxvb3NlXG4gICAgICBpZiAobGlzdC5sb29zZSkge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgbGlzdC5pdGVtc1tpXS5sb29zZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuICB9XG5cbiAgaHRtbChzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLmh0bWwuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGNvbnN0IHRva2VuID0ge1xuICAgICAgICB0eXBlOiAnaHRtbCcsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICBwcmU6ICF0aGlzLm9wdGlvbnMuc2FuaXRpemVyXG4gICAgICAgICAgJiYgKGNhcFsxXSA9PT0gJ3ByZScgfHwgY2FwWzFdID09PSAnc2NyaXB0JyB8fCBjYXBbMV0gPT09ICdzdHlsZScpLFxuICAgICAgICB0ZXh0OiBjYXBbMF1cbiAgICAgIH07XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnNhbml0aXplKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLm9wdGlvbnMuc2FuaXRpemVyID8gdGhpcy5vcHRpb25zLnNhbml0aXplcihjYXBbMF0pIDogZXNjYXBlKGNhcFswXSk7XG4gICAgICAgIHRva2VuLnR5cGUgPSAncGFyYWdyYXBoJztcbiAgICAgICAgdG9rZW4udGV4dCA9IHRleHQ7XG4gICAgICAgIHRva2VuLnRva2VucyA9IHRoaXMubGV4ZXIuaW5saW5lKHRleHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH1cbiAgfVxuXG4gIGRlZihzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLmRlZi5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgY29uc3QgdGFnID0gY2FwWzFdLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgICAgY29uc3QgaHJlZiA9IGNhcFsyXSA/IGNhcFsyXS5yZXBsYWNlKC9ePCguKik+JC8sICckMScpLnJlcGxhY2UodGhpcy5ydWxlcy5pbmxpbmUuX2VzY2FwZXMsICckMScpIDogJyc7XG4gICAgICBjb25zdCB0aXRsZSA9IGNhcFszXSA/IGNhcFszXS5zdWJzdHJpbmcoMSwgY2FwWzNdLmxlbmd0aCAtIDEpLnJlcGxhY2UodGhpcy5ydWxlcy5pbmxpbmUuX2VzY2FwZXMsICckMScpIDogY2FwWzNdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2RlZicsXG4gICAgICAgIHRhZyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIGhyZWYsXG4gICAgICAgIHRpdGxlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHRhYmxlKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2sudGFibGUuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB7XG4gICAgICAgIHR5cGU6ICd0YWJsZScsXG4gICAgICAgIGhlYWRlcjogc3BsaXRDZWxscyhjYXBbMV0pLm1hcChjID0+IHsgcmV0dXJuIHsgdGV4dDogYyB9OyB9KSxcbiAgICAgICAgYWxpZ246IGNhcFsyXS5yZXBsYWNlKC9eICp8XFx8ICokL2csICcnKS5zcGxpdCgvICpcXHwgKi8pLFxuICAgICAgICByb3dzOiBjYXBbM10gJiYgY2FwWzNdLnRyaW0oKSA/IGNhcFszXS5yZXBsYWNlKC9cXG5bIFxcdF0qJC8sICcnKS5zcGxpdCgnXFxuJykgOiBbXVxuICAgICAgfTtcblxuICAgICAgaWYgKGl0ZW0uaGVhZGVyLmxlbmd0aCA9PT0gaXRlbS5hbGlnbi5sZW5ndGgpIHtcbiAgICAgICAgaXRlbS5yYXcgPSBjYXBbMF07XG5cbiAgICAgICAgbGV0IGwgPSBpdGVtLmFsaWduLmxlbmd0aDtcbiAgICAgICAgbGV0IGksIGosIGssIHJvdztcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGlmICgvXiAqLSs6ICokLy50ZXN0KGl0ZW0uYWxpZ25baV0pKSB7XG4gICAgICAgICAgICBpdGVtLmFsaWduW2ldID0gJ3JpZ2h0JztcbiAgICAgICAgICB9IGVsc2UgaWYgKC9eICo6LSs6ICokLy50ZXN0KGl0ZW0uYWxpZ25baV0pKSB7XG4gICAgICAgICAgICBpdGVtLmFsaWduW2ldID0gJ2NlbnRlcic7XG4gICAgICAgICAgfSBlbHNlIGlmICgvXiAqOi0rICokLy50ZXN0KGl0ZW0uYWxpZ25baV0pKSB7XG4gICAgICAgICAgICBpdGVtLmFsaWduW2ldID0gJ2xlZnQnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpdGVtLmFsaWduW2ldID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsID0gaXRlbS5yb3dzLmxlbmd0aDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGl0ZW0ucm93c1tpXSA9IHNwbGl0Q2VsbHMoaXRlbS5yb3dzW2ldLCBpdGVtLmhlYWRlci5sZW5ndGgpLm1hcChjID0+IHsgcmV0dXJuIHsgdGV4dDogYyB9OyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHBhcnNlIGNoaWxkIHRva2VucyBpbnNpZGUgaGVhZGVycyBhbmQgY2VsbHNcblxuICAgICAgICAvLyBoZWFkZXIgY2hpbGQgdG9rZW5zXG4gICAgICAgIGwgPSBpdGVtLmhlYWRlci5sZW5ndGg7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBsOyBqKyspIHtcbiAgICAgICAgICBpdGVtLmhlYWRlcltqXS50b2tlbnMgPSB0aGlzLmxleGVyLmlubGluZShpdGVtLmhlYWRlcltqXS50ZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNlbGwgY2hpbGQgdG9rZW5zXG4gICAgICAgIGwgPSBpdGVtLnJvd3MubGVuZ3RoO1xuICAgICAgICBmb3IgKGogPSAwOyBqIDwgbDsgaisrKSB7XG4gICAgICAgICAgcm93ID0gaXRlbS5yb3dzW2pdO1xuICAgICAgICAgIGZvciAoayA9IDA7IGsgPCByb3cubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIHJvd1trXS50b2tlbnMgPSB0aGlzLmxleGVyLmlubGluZShyb3dba10udGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbGhlYWRpbmcoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5saGVhZGluZy5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2hlYWRpbmcnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgZGVwdGg6IGNhcFsyXS5jaGFyQXQoMCkgPT09ICc9JyA/IDEgOiAyLFxuICAgICAgICB0ZXh0OiBjYXBbMV0sXG4gICAgICAgIHRva2VuczogdGhpcy5sZXhlci5pbmxpbmUoY2FwWzFdKVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwYXJhZ3JhcGgoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5wYXJhZ3JhcGguZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGNvbnN0IHRleHQgPSBjYXBbMV0uY2hhckF0KGNhcFsxXS5sZW5ndGggLSAxKSA9PT0gJ1xcbidcbiAgICAgICAgPyBjYXBbMV0uc2xpY2UoMCwgLTEpXG4gICAgICAgIDogY2FwWzFdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICB0ZXh0LFxuICAgICAgICB0b2tlbnM6IHRoaXMubGV4ZXIuaW5saW5lKHRleHQpXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHRleHQoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay50ZXh0LmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICB0ZXh0OiBjYXBbMF0sXG4gICAgICAgIHRva2VuczogdGhpcy5sZXhlci5pbmxpbmUoY2FwWzBdKVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBlc2NhcGUoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUuZXNjYXBlLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZXNjYXBlJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHRleHQ6IGVzY2FwZShjYXBbMV0pXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHRhZyhzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS50YWcuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGlmICghdGhpcy5sZXhlci5zdGF0ZS5pbkxpbmsgJiYgL148YSAvaS50ZXN0KGNhcFswXSkpIHtcbiAgICAgICAgdGhpcy5sZXhlci5zdGF0ZS5pbkxpbmsgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmxleGVyLnN0YXRlLmluTGluayAmJiAvXjxcXC9hPi9pLnRlc3QoY2FwWzBdKSkge1xuICAgICAgICB0aGlzLmxleGVyLnN0YXRlLmluTGluayA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmxleGVyLnN0YXRlLmluUmF3QmxvY2sgJiYgL148KHByZXxjb2RlfGtiZHxzY3JpcHQpKFxcc3w+KS9pLnRlc3QoY2FwWzBdKSkge1xuICAgICAgICB0aGlzLmxleGVyLnN0YXRlLmluUmF3QmxvY2sgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmxleGVyLnN0YXRlLmluUmF3QmxvY2sgJiYgL148XFwvKHByZXxjb2RlfGtiZHxzY3JpcHQpKFxcc3w+KS9pLnRlc3QoY2FwWzBdKSkge1xuICAgICAgICB0aGlzLmxleGVyLnN0YXRlLmluUmF3QmxvY2sgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogdGhpcy5vcHRpb25zLnNhbml0aXplXG4gICAgICAgICAgPyAndGV4dCdcbiAgICAgICAgICA6ICdodG1sJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIGluTGluazogdGhpcy5sZXhlci5zdGF0ZS5pbkxpbmssXG4gICAgICAgIGluUmF3QmxvY2s6IHRoaXMubGV4ZXIuc3RhdGUuaW5SYXdCbG9jayxcbiAgICAgICAgdGV4dDogdGhpcy5vcHRpb25zLnNhbml0aXplXG4gICAgICAgICAgPyAodGhpcy5vcHRpb25zLnNhbml0aXplclxuICAgICAgICAgICAgPyB0aGlzLm9wdGlvbnMuc2FuaXRpemVyKGNhcFswXSlcbiAgICAgICAgICAgIDogZXNjYXBlKGNhcFswXSkpXG4gICAgICAgICAgOiBjYXBbMF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgbGluayhzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS5saW5rLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBjb25zdCB0cmltbWVkVXJsID0gY2FwWzJdLnRyaW0oKTtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnBlZGFudGljICYmIC9ePC8udGVzdCh0cmltbWVkVXJsKSkge1xuICAgICAgICAvLyBjb21tb25tYXJrIHJlcXVpcmVzIG1hdGNoaW5nIGFuZ2xlIGJyYWNrZXRzXG4gICAgICAgIGlmICghKC8+JC8udGVzdCh0cmltbWVkVXJsKSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBlbmRpbmcgYW5nbGUgYnJhY2tldCBjYW5ub3QgYmUgZXNjYXBlZFxuICAgICAgICBjb25zdCBydHJpbVNsYXNoID0gcnRyaW0odHJpbW1lZFVybC5zbGljZSgwLCAtMSksICdcXFxcJyk7XG4gICAgICAgIGlmICgodHJpbW1lZFVybC5sZW5ndGggLSBydHJpbVNsYXNoLmxlbmd0aCkgJSAyID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBmaW5kIGNsb3NpbmcgcGFyZW50aGVzaXNcbiAgICAgICAgY29uc3QgbGFzdFBhcmVuSW5kZXggPSBmaW5kQ2xvc2luZ0JyYWNrZXQoY2FwWzJdLCAnKCknKTtcbiAgICAgICAgaWYgKGxhc3RQYXJlbkluZGV4ID4gLTEpIHtcbiAgICAgICAgICBjb25zdCBzdGFydCA9IGNhcFswXS5pbmRleE9mKCchJykgPT09IDAgPyA1IDogNDtcbiAgICAgICAgICBjb25zdCBsaW5rTGVuID0gc3RhcnQgKyBjYXBbMV0ubGVuZ3RoICsgbGFzdFBhcmVuSW5kZXg7XG4gICAgICAgICAgY2FwWzJdID0gY2FwWzJdLnN1YnN0cmluZygwLCBsYXN0UGFyZW5JbmRleCk7XG4gICAgICAgICAgY2FwWzBdID0gY2FwWzBdLnN1YnN0cmluZygwLCBsaW5rTGVuKS50cmltKCk7XG4gICAgICAgICAgY2FwWzNdID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCBocmVmID0gY2FwWzJdO1xuICAgICAgbGV0IHRpdGxlID0gJyc7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnBlZGFudGljKSB7XG4gICAgICAgIC8vIHNwbGl0IHBlZGFudGljIGhyZWYgYW5kIHRpdGxlXG4gICAgICAgIGNvbnN0IGxpbmsgPSAvXihbXidcIl0qW15cXHNdKVxccysoWydcIl0pKC4qKVxcMi8uZXhlYyhocmVmKTtcblxuICAgICAgICBpZiAobGluaykge1xuICAgICAgICAgIGhyZWYgPSBsaW5rWzFdO1xuICAgICAgICAgIHRpdGxlID0gbGlua1szXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGl0bGUgPSBjYXBbM10gPyBjYXBbM10uc2xpY2UoMSwgLTEpIDogJyc7XG4gICAgICB9XG5cbiAgICAgIGhyZWYgPSBocmVmLnRyaW0oKTtcbiAgICAgIGlmICgvXjwvLnRlc3QoaHJlZikpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wZWRhbnRpYyAmJiAhKC8+JC8udGVzdCh0cmltbWVkVXJsKSkpIHtcbiAgICAgICAgICAvLyBwZWRhbnRpYyBhbGxvd3Mgc3RhcnRpbmcgYW5nbGUgYnJhY2tldCB3aXRob3V0IGVuZGluZyBhbmdsZSBicmFja2V0XG4gICAgICAgICAgaHJlZiA9IGhyZWYuc2xpY2UoMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaHJlZiA9IGhyZWYuc2xpY2UoMSwgLTEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0TGluayhjYXAsIHtcbiAgICAgICAgaHJlZjogaHJlZiA/IGhyZWYucmVwbGFjZSh0aGlzLnJ1bGVzLmlubGluZS5fZXNjYXBlcywgJyQxJykgOiBocmVmLFxuICAgICAgICB0aXRsZTogdGl0bGUgPyB0aXRsZS5yZXBsYWNlKHRoaXMucnVsZXMuaW5saW5lLl9lc2NhcGVzLCAnJDEnKSA6IHRpdGxlXG4gICAgICB9LCBjYXBbMF0sIHRoaXMubGV4ZXIpO1xuICAgIH1cbiAgfVxuXG4gIHJlZmxpbmsoc3JjLCBsaW5rcykge1xuICAgIGxldCBjYXA7XG4gICAgaWYgKChjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS5yZWZsaW5rLmV4ZWMoc3JjKSlcbiAgICAgICAgfHwgKGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLm5vbGluay5leGVjKHNyYykpKSB7XG4gICAgICBsZXQgbGluayA9IChjYXBbMl0gfHwgY2FwWzFdKS5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgICBsaW5rID0gbGlua3NbbGluay50b0xvd2VyQ2FzZSgpXTtcbiAgICAgIGlmICghbGluaykge1xuICAgICAgICBjb25zdCB0ZXh0ID0gY2FwWzBdLmNoYXJBdCgwKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgcmF3OiB0ZXh0LFxuICAgICAgICAgIHRleHRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXRMaW5rKGNhcCwgbGluaywgY2FwWzBdLCB0aGlzLmxleGVyKTtcbiAgICB9XG4gIH1cblxuICBlbVN0cm9uZyhzcmMsIG1hc2tlZFNyYywgcHJldkNoYXIgPSAnJykge1xuICAgIGxldCBtYXRjaCA9IHRoaXMucnVsZXMuaW5saW5lLmVtU3Ryb25nLmxEZWxpbS5leGVjKHNyYyk7XG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuO1xuXG4gICAgLy8gXyBjYW4ndCBiZSBiZXR3ZWVuIHR3byBhbHBoYW51bWVyaWNzLiBcXHB7TH1cXHB7Tn0gaW5jbHVkZXMgbm9uLWVuZ2xpc2ggYWxwaGFiZXQvbnVtYmVycyBhcyB3ZWxsXG4gICAgaWYgKG1hdGNoWzNdICYmIHByZXZDaGFyLm1hdGNoKC9bXFxwe0x9XFxwe059XS91KSkgcmV0dXJuO1xuXG4gICAgY29uc3QgbmV4dENoYXIgPSBtYXRjaFsxXSB8fCBtYXRjaFsyXSB8fCAnJztcblxuICAgIGlmICghbmV4dENoYXIgfHwgKG5leHRDaGFyICYmIChwcmV2Q2hhciA9PT0gJycgfHwgdGhpcy5ydWxlcy5pbmxpbmUucHVuY3R1YXRpb24uZXhlYyhwcmV2Q2hhcikpKSkge1xuICAgICAgY29uc3QgbExlbmd0aCA9IG1hdGNoWzBdLmxlbmd0aCAtIDE7XG4gICAgICBsZXQgckRlbGltLCByTGVuZ3RoLCBkZWxpbVRvdGFsID0gbExlbmd0aCwgbWlkRGVsaW1Ub3RhbCA9IDA7XG5cbiAgICAgIGNvbnN0IGVuZFJlZyA9IG1hdGNoWzBdWzBdID09PSAnKicgPyB0aGlzLnJ1bGVzLmlubGluZS5lbVN0cm9uZy5yRGVsaW1Bc3QgOiB0aGlzLnJ1bGVzLmlubGluZS5lbVN0cm9uZy5yRGVsaW1VbmQ7XG4gICAgICBlbmRSZWcubGFzdEluZGV4ID0gMDtcblxuICAgICAgLy8gQ2xpcCBtYXNrZWRTcmMgdG8gc2FtZSBzZWN0aW9uIG9mIHN0cmluZyBhcyBzcmMgKG1vdmUgdG8gbGV4ZXI/KVxuICAgICAgbWFza2VkU3JjID0gbWFza2VkU3JjLnNsaWNlKC0xICogc3JjLmxlbmd0aCArIGxMZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKG1hdGNoID0gZW5kUmVnLmV4ZWMobWFza2VkU3JjKSkgIT0gbnVsbCkge1xuICAgICAgICByRGVsaW0gPSBtYXRjaFsxXSB8fCBtYXRjaFsyXSB8fCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBtYXRjaFs2XTtcblxuICAgICAgICBpZiAoIXJEZWxpbSkgY29udGludWU7IC8vIHNraXAgc2luZ2xlICogaW4gX19hYmMqYWJjX19cblxuICAgICAgICByTGVuZ3RoID0gckRlbGltLmxlbmd0aDtcblxuICAgICAgICBpZiAobWF0Y2hbM10gfHwgbWF0Y2hbNF0pIHsgLy8gZm91bmQgYW5vdGhlciBMZWZ0IERlbGltXG4gICAgICAgICAgZGVsaW1Ub3RhbCArPSByTGVuZ3RoO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoWzVdIHx8IG1hdGNoWzZdKSB7IC8vIGVpdGhlciBMZWZ0IG9yIFJpZ2h0IERlbGltXG4gICAgICAgICAgaWYgKGxMZW5ndGggJSAzICYmICEoKGxMZW5ndGggKyByTGVuZ3RoKSAlIDMpKSB7XG4gICAgICAgICAgICBtaWREZWxpbVRvdGFsICs9IHJMZW5ndGg7XG4gICAgICAgICAgICBjb250aW51ZTsgLy8gQ29tbW9uTWFyayBFbXBoYXNpcyBSdWxlcyA5LTEwXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZGVsaW1Ub3RhbCAtPSByTGVuZ3RoO1xuXG4gICAgICAgIGlmIChkZWxpbVRvdGFsID4gMCkgY29udGludWU7IC8vIEhhdmVuJ3QgZm91bmQgZW5vdWdoIGNsb3NpbmcgZGVsaW1pdGVyc1xuXG4gICAgICAgIC8vIFJlbW92ZSBleHRyYSBjaGFyYWN0ZXJzLiAqYSoqKiAtPiAqYSpcbiAgICAgICAgckxlbmd0aCA9IE1hdGgubWluKHJMZW5ndGgsIHJMZW5ndGggKyBkZWxpbVRvdGFsICsgbWlkRGVsaW1Ub3RhbCk7XG5cbiAgICAgICAgY29uc3QgcmF3ID0gc3JjLnNsaWNlKDAsIGxMZW5ndGggKyBtYXRjaC5pbmRleCArIChtYXRjaFswXS5sZW5ndGggLSByRGVsaW0ubGVuZ3RoKSArIHJMZW5ndGgpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBgZW1gIGlmIHNtYWxsZXN0IGRlbGltaXRlciBoYXMgb2RkIGNoYXIgY291bnQuICphKioqXG4gICAgICAgIGlmIChNYXRoLm1pbihsTGVuZ3RoLCByTGVuZ3RoKSAlIDIpIHtcbiAgICAgICAgICBjb25zdCB0ZXh0ID0gcmF3LnNsaWNlKDEsIC0xKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2VtJyxcbiAgICAgICAgICAgIHJhdyxcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICB0b2tlbnM6IHRoaXMubGV4ZXIuaW5saW5lVG9rZW5zKHRleHQpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSAnc3Ryb25nJyBpZiBzbWFsbGVzdCBkZWxpbWl0ZXIgaGFzIGV2ZW4gY2hhciBjb3VudC4gKiphKioqXG4gICAgICAgIGNvbnN0IHRleHQgPSByYXcuc2xpY2UoMiwgLTIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6ICdzdHJvbmcnLFxuICAgICAgICAgIHJhdyxcbiAgICAgICAgICB0ZXh0LFxuICAgICAgICAgIHRva2VuczogdGhpcy5sZXhlci5pbmxpbmVUb2tlbnModGV4dClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb2Rlc3BhbihzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS5jb2RlLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBsZXQgdGV4dCA9IGNhcFsyXS5yZXBsYWNlKC9cXG4vZywgJyAnKTtcbiAgICAgIGNvbnN0IGhhc05vblNwYWNlQ2hhcnMgPSAvW14gXS8udGVzdCh0ZXh0KTtcbiAgICAgIGNvbnN0IGhhc1NwYWNlQ2hhcnNPbkJvdGhFbmRzID0gL14gLy50ZXN0KHRleHQpICYmIC8gJC8udGVzdCh0ZXh0KTtcbiAgICAgIGlmIChoYXNOb25TcGFjZUNoYXJzICYmIGhhc1NwYWNlQ2hhcnNPbkJvdGhFbmRzKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cmluZygxLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgfVxuICAgICAgdGV4dCA9IGVzY2FwZSh0ZXh0LCB0cnVlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdjb2Rlc3BhbicsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICB0ZXh0XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGJyKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLmJyLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYnInLFxuICAgICAgICByYXc6IGNhcFswXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBkZWwoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUuZGVsLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZGVsJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHRleHQ6IGNhcFsyXSxcbiAgICAgICAgdG9rZW5zOiB0aGlzLmxleGVyLmlubGluZVRva2VucyhjYXBbMl0pXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGF1dG9saW5rKHNyYywgbWFuZ2xlKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUuYXV0b2xpbmsuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGxldCB0ZXh0LCBocmVmO1xuICAgICAgaWYgKGNhcFsyXSA9PT0gJ0AnKSB7XG4gICAgICAgIHRleHQgPSBlc2NhcGUodGhpcy5vcHRpb25zLm1hbmdsZSA/IG1hbmdsZShjYXBbMV0pIDogY2FwWzFdKTtcbiAgICAgICAgaHJlZiA9ICdtYWlsdG86JyArIHRleHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0ID0gZXNjYXBlKGNhcFsxXSk7XG4gICAgICAgIGhyZWYgPSB0ZXh0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbGluaycsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICB0ZXh0LFxuICAgICAgICBocmVmLFxuICAgICAgICB0b2tlbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICByYXc6IHRleHQsXG4gICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHVybChzcmMsIG1hbmdsZSkge1xuICAgIGxldCBjYXA7XG4gICAgaWYgKGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLnVybC5leGVjKHNyYykpIHtcbiAgICAgIGxldCB0ZXh0LCBocmVmO1xuICAgICAgaWYgKGNhcFsyXSA9PT0gJ0AnKSB7XG4gICAgICAgIHRleHQgPSBlc2NhcGUodGhpcy5vcHRpb25zLm1hbmdsZSA/IG1hbmdsZShjYXBbMF0pIDogY2FwWzBdKTtcbiAgICAgICAgaHJlZiA9ICdtYWlsdG86JyArIHRleHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkbyBleHRlbmRlZCBhdXRvbGluayBwYXRoIHZhbGlkYXRpb25cbiAgICAgICAgbGV0IHByZXZDYXBaZXJvO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgcHJldkNhcFplcm8gPSBjYXBbMF07XG4gICAgICAgICAgY2FwWzBdID0gdGhpcy5ydWxlcy5pbmxpbmUuX2JhY2twZWRhbC5leGVjKGNhcFswXSlbMF07XG4gICAgICAgIH0gd2hpbGUgKHByZXZDYXBaZXJvICE9PSBjYXBbMF0pO1xuICAgICAgICB0ZXh0ID0gZXNjYXBlKGNhcFswXSk7XG4gICAgICAgIGlmIChjYXBbMV0gPT09ICd3d3cuJykge1xuICAgICAgICAgIGhyZWYgPSAnaHR0cDovLycgKyBjYXBbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaHJlZiA9IGNhcFswXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2xpbmsnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgdGV4dCxcbiAgICAgICAgaHJlZixcbiAgICAgICAgdG9rZW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgcmF3OiB0ZXh0LFxuICAgICAgICAgICAgdGV4dFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBpbmxpbmVUZXh0KHNyYywgc21hcnR5cGFudHMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS50ZXh0LmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBsZXQgdGV4dDtcbiAgICAgIGlmICh0aGlzLmxleGVyLnN0YXRlLmluUmF3QmxvY2spIHtcbiAgICAgICAgdGV4dCA9IHRoaXMub3B0aW9ucy5zYW5pdGl6ZSA/ICh0aGlzLm9wdGlvbnMuc2FuaXRpemVyID8gdGhpcy5vcHRpb25zLnNhbml0aXplcihjYXBbMF0pIDogZXNjYXBlKGNhcFswXSkpIDogY2FwWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGV4dCA9IGVzY2FwZSh0aGlzLm9wdGlvbnMuc21hcnR5cGFudHMgPyBzbWFydHlwYW50cyhjYXBbMF0pIDogY2FwWzBdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHRleHRcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQmxvY2stTGV2ZWwgR3JhbW1hclxuICovXG5jb25zdCBibG9jayA9IHtcbiAgbmV3bGluZTogL14oPzogKig/OlxcbnwkKSkrLyxcbiAgY29kZTogL14oIHs0fVteXFxuXSsoPzpcXG4oPzogKig/OlxcbnwkKSkqKT8pKy8sXG4gIGZlbmNlczogL14gezAsM30oYHszLH0oPz1bXmBcXG5dKig/OlxcbnwkKSl8fnszLH0pKFteXFxuXSopKD86XFxufCQpKD86fChbXFxzXFxTXSo/KSg/OlxcbnwkKSkoPzogezAsM31cXDFbfmBdKiAqKD89XFxufCQpfCQpLyxcbiAgaHI6IC9eIHswLDN9KCg/Oi1bXFx0IF0qKXszLH18KD86X1sgXFx0XSopezMsfXwoPzpcXCpbIFxcdF0qKXszLH0pKD86XFxuK3wkKS8sXG4gIGhlYWRpbmc6IC9eIHswLDN9KCN7MSw2fSkoPz1cXHN8JCkoLiopKD86XFxuK3wkKS8sXG4gIGJsb2NrcXVvdGU6IC9eKCB7MCwzfT4gPyhwYXJhZ3JhcGh8W15cXG5dKikoPzpcXG58JCkpKy8sXG4gIGxpc3Q6IC9eKCB7MCwzfWJ1bGwpKFsgXFx0XVteXFxuXSs/KT8oPzpcXG58JCkvLFxuICBodG1sOiAnXiB7MCwzfSg/OicgLy8gb3B0aW9uYWwgaW5kZW50YXRpb25cbiAgICArICc8KHNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWEpW1xcXFxzPl1bXFxcXHNcXFxcU10qPyg/OjwvXFxcXDE+W15cXFxcbl0qXFxcXG4rfCQpJyAvLyAoMSlcbiAgICArICd8Y29tbWVudFteXFxcXG5dKihcXFxcbit8JCknIC8vICgyKVxuICAgICsgJ3w8XFxcXD9bXFxcXHNcXFxcU10qPyg/OlxcXFw/PlxcXFxuKnwkKScgLy8gKDMpXG4gICAgKyAnfDwhW0EtWl1bXFxcXHNcXFxcU10qPyg/Oj5cXFxcbip8JCknIC8vICg0KVxuICAgICsgJ3w8IVxcXFxbQ0RBVEFcXFxcW1tcXFxcc1xcXFxTXSo/KD86XFxcXF1cXFxcXT5cXFxcbip8JCknIC8vICg1KVxuICAgICsgJ3w8Lz8odGFnKSg/OiArfFxcXFxufC8/PilbXFxcXHNcXFxcU10qPyg/Oig/OlxcXFxuICopK1xcXFxufCQpJyAvLyAoNilcbiAgICArICd8PCg/IXNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWEpKFthLXpdW1xcXFx3LV0qKSg/OmF0dHJpYnV0ZSkqPyAqLz8+KD89WyBcXFxcdF0qKD86XFxcXG58JCkpW1xcXFxzXFxcXFNdKj8oPzooPzpcXFxcbiAqKStcXFxcbnwkKScgLy8gKDcpIG9wZW4gdGFnXG4gICAgKyAnfDwvKD8hc2NyaXB0fHByZXxzdHlsZXx0ZXh0YXJlYSlbYS16XVtcXFxcdy1dKlxcXFxzKj4oPz1bIFxcXFx0XSooPzpcXFxcbnwkKSlbXFxcXHNcXFxcU10qPyg/Oig/OlxcXFxuICopK1xcXFxufCQpJyAvLyAoNykgY2xvc2luZyB0YWdcbiAgICArICcpJyxcbiAgZGVmOiAvXiB7MCwzfVxcWyhsYWJlbClcXF06ICooPzpcXG4gKik/KFtePFxcc11bXlxcc10qfDwuKj8+KSg/Oig/OiArKD86XFxuICopP3wgKlxcbiAqKSh0aXRsZSkpPyAqKD86XFxuK3wkKS8sXG4gIHRhYmxlOiBub29wVGVzdCxcbiAgbGhlYWRpbmc6IC9eKCg/Oi58XFxuKD8hXFxuKSkrPylcXG4gezAsM30oPSt8LSspICooPzpcXG4rfCQpLyxcbiAgLy8gcmVnZXggdGVtcGxhdGUsIHBsYWNlaG9sZGVycyB3aWxsIGJlIHJlcGxhY2VkIGFjY29yZGluZyB0byBkaWZmZXJlbnQgcGFyYWdyYXBoXG4gIC8vIGludGVycnVwdGlvbiBydWxlcyBvZiBjb21tb25tYXJrIGFuZCB0aGUgb3JpZ2luYWwgbWFya2Rvd24gc3BlYzpcbiAgX3BhcmFncmFwaDogL14oW15cXG5dKyg/Olxcbig/IWhyfGhlYWRpbmd8bGhlYWRpbmd8YmxvY2txdW90ZXxmZW5jZXN8bGlzdHxodG1sfHRhYmxlfCArXFxuKVteXFxuXSspKikvLFxuICB0ZXh0OiAvXlteXFxuXSsvXG59O1xuXG5ibG9jay5fbGFiZWwgPSAvKD8hXFxzKlxcXSkoPzpcXFxcLnxbXlxcW1xcXVxcXFxdKSsvO1xuYmxvY2suX3RpdGxlID0gLyg/OlwiKD86XFxcXFwiP3xbXlwiXFxcXF0pKlwifCdbXidcXG5dKig/OlxcblteJ1xcbl0rKSpcXG4/J3xcXChbXigpXSpcXCkpLztcbmJsb2NrLmRlZiA9IGVkaXQoYmxvY2suZGVmKVxuICAucmVwbGFjZSgnbGFiZWwnLCBibG9jay5fbGFiZWwpXG4gIC5yZXBsYWNlKCd0aXRsZScsIGJsb2NrLl90aXRsZSlcbiAgLmdldFJlZ2V4KCk7XG5cbmJsb2NrLmJ1bGxldCA9IC8oPzpbKistXXxcXGR7MSw5fVsuKV0pLztcbmJsb2NrLmxpc3RJdGVtU3RhcnQgPSBlZGl0KC9eKCAqKShidWxsKSAqLylcbiAgLnJlcGxhY2UoJ2J1bGwnLCBibG9jay5idWxsZXQpXG4gIC5nZXRSZWdleCgpO1xuXG5ibG9jay5saXN0ID0gZWRpdChibG9jay5saXN0KVxuICAucmVwbGFjZSgvYnVsbC9nLCBibG9jay5idWxsZXQpXG4gIC5yZXBsYWNlKCdocicsICdcXFxcbisoPz1cXFxcMT8oPzooPzotICopezMsfXwoPzpfICopezMsfXwoPzpcXFxcKiAqKXszLH0pKD86XFxcXG4rfCQpKScpXG4gIC5yZXBsYWNlKCdkZWYnLCAnXFxcXG4rKD89JyArIGJsb2NrLmRlZi5zb3VyY2UgKyAnKScpXG4gIC5nZXRSZWdleCgpO1xuXG5ibG9jay5fdGFnID0gJ2FkZHJlc3N8YXJ0aWNsZXxhc2lkZXxiYXNlfGJhc2Vmb250fGJsb2NrcXVvdGV8Ym9keXxjYXB0aW9uJ1xuICArICd8Y2VudGVyfGNvbHxjb2xncm91cHxkZHxkZXRhaWxzfGRpYWxvZ3xkaXJ8ZGl2fGRsfGR0fGZpZWxkc2V0fGZpZ2NhcHRpb24nXG4gICsgJ3xmaWd1cmV8Zm9vdGVyfGZvcm18ZnJhbWV8ZnJhbWVzZXR8aFsxLTZdfGhlYWR8aGVhZGVyfGhyfGh0bWx8aWZyYW1lJ1xuICArICd8bGVnZW5kfGxpfGxpbmt8bWFpbnxtZW51fG1lbnVpdGVtfG1ldGF8bmF2fG5vZnJhbWVzfG9sfG9wdGdyb3VwfG9wdGlvbidcbiAgKyAnfHB8cGFyYW18c2VjdGlvbnxzb3VyY2V8c3VtbWFyeXx0YWJsZXx0Ym9keXx0ZHx0Zm9vdHx0aHx0aGVhZHx0aXRsZXx0cidcbiAgKyAnfHRyYWNrfHVsJztcbmJsb2NrLl9jb21tZW50ID0gLzwhLS0oPyEtPz4pW1xcc1xcU10qPyg/Oi0tPnwkKS87XG5ibG9jay5odG1sID0gZWRpdChibG9jay5odG1sLCAnaScpXG4gIC5yZXBsYWNlKCdjb21tZW50JywgYmxvY2suX2NvbW1lbnQpXG4gIC5yZXBsYWNlKCd0YWcnLCBibG9jay5fdGFnKVxuICAucmVwbGFjZSgnYXR0cmlidXRlJywgLyArW2EtekEtWjpfXVtcXHcuOi1dKig/OiAqPSAqXCJbXlwiXFxuXSpcInwgKj0gKidbXidcXG5dKid8ICo9ICpbXlxcc1wiJz08PmBdKyk/LylcbiAgLmdldFJlZ2V4KCk7XG5cbmJsb2NrLnBhcmFncmFwaCA9IGVkaXQoYmxvY2suX3BhcmFncmFwaClcbiAgLnJlcGxhY2UoJ2hyJywgYmxvY2suaHIpXG4gIC5yZXBsYWNlKCdoZWFkaW5nJywgJyB7MCwzfSN7MSw2fSAnKVxuICAucmVwbGFjZSgnfGxoZWFkaW5nJywgJycpIC8vIHNldGV4IGhlYWRpbmdzIGRvbid0IGludGVycnVwdCBjb21tb25tYXJrIHBhcmFncmFwaHNcbiAgLnJlcGxhY2UoJ3x0YWJsZScsICcnKVxuICAucmVwbGFjZSgnYmxvY2txdW90ZScsICcgezAsM30+JylcbiAgLnJlcGxhY2UoJ2ZlbmNlcycsICcgezAsM30oPzpgezMsfSg/PVteYFxcXFxuXSpcXFxcbil8fnszLH0pW15cXFxcbl0qXFxcXG4nKVxuICAucmVwbGFjZSgnbGlzdCcsICcgezAsM30oPzpbKistXXwxWy4pXSkgJykgLy8gb25seSBsaXN0cyBzdGFydGluZyBmcm9tIDEgY2FuIGludGVycnVwdFxuICAucmVwbGFjZSgnaHRtbCcsICc8Lz8oPzp0YWcpKD86ICt8XFxcXG58Lz8+KXw8KD86c2NyaXB0fHByZXxzdHlsZXx0ZXh0YXJlYXwhLS0pJylcbiAgLnJlcGxhY2UoJ3RhZycsIGJsb2NrLl90YWcpIC8vIHBhcnMgY2FuIGJlIGludGVycnVwdGVkIGJ5IHR5cGUgKDYpIGh0bWwgYmxvY2tzXG4gIC5nZXRSZWdleCgpO1xuXG5ibG9jay5ibG9ja3F1b3RlID0gZWRpdChibG9jay5ibG9ja3F1b3RlKVxuICAucmVwbGFjZSgncGFyYWdyYXBoJywgYmxvY2sucGFyYWdyYXBoKVxuICAuZ2V0UmVnZXgoKTtcblxuLyoqXG4gKiBOb3JtYWwgQmxvY2sgR3JhbW1hclxuICovXG5cbmJsb2NrLm5vcm1hbCA9IHsgLi4uYmxvY2sgfTtcblxuLyoqXG4gKiBHRk0gQmxvY2sgR3JhbW1hclxuICovXG5cbmJsb2NrLmdmbSA9IHtcbiAgLi4uYmxvY2subm9ybWFsLFxuICB0YWJsZTogJ14gKihbXlxcXFxuIF0uKlxcXFx8LiopXFxcXG4nIC8vIEhlYWRlclxuICAgICsgJyB7MCwzfSg/OlxcXFx8ICopPyg6Py0rOj8gKig/OlxcXFx8ICo6Py0rOj8gKikqKSg/OlxcXFx8ICopPycgLy8gQWxpZ25cbiAgICArICcoPzpcXFxcbigoPzooPyEgKlxcXFxufGhyfGhlYWRpbmd8YmxvY2txdW90ZXxjb2RlfGZlbmNlc3xsaXN0fGh0bWwpLiooPzpcXFxcbnwkKSkqKVxcXFxuKnwkKScgLy8gQ2VsbHNcbn07XG5cbmJsb2NrLmdmbS50YWJsZSA9IGVkaXQoYmxvY2suZ2ZtLnRhYmxlKVxuICAucmVwbGFjZSgnaHInLCBibG9jay5ocilcbiAgLnJlcGxhY2UoJ2hlYWRpbmcnLCAnIHswLDN9I3sxLDZ9ICcpXG4gIC5yZXBsYWNlKCdibG9ja3F1b3RlJywgJyB7MCwzfT4nKVxuICAucmVwbGFjZSgnY29kZScsICcgezR9W15cXFxcbl0nKVxuICAucmVwbGFjZSgnZmVuY2VzJywgJyB7MCwzfSg/OmB7Myx9KD89W15gXFxcXG5dKlxcXFxuKXx+ezMsfSlbXlxcXFxuXSpcXFxcbicpXG4gIC5yZXBsYWNlKCdsaXN0JywgJyB7MCwzfSg/OlsqKy1dfDFbLildKSAnKSAvLyBvbmx5IGxpc3RzIHN0YXJ0aW5nIGZyb20gMSBjYW4gaW50ZXJydXB0XG4gIC5yZXBsYWNlKCdodG1sJywgJzwvPyg/OnRhZykoPzogK3xcXFxcbnwvPz4pfDwoPzpzY3JpcHR8cHJlfHN0eWxlfHRleHRhcmVhfCEtLSknKVxuICAucmVwbGFjZSgndGFnJywgYmxvY2suX3RhZykgLy8gdGFibGVzIGNhbiBiZSBpbnRlcnJ1cHRlZCBieSB0eXBlICg2KSBodG1sIGJsb2Nrc1xuICAuZ2V0UmVnZXgoKTtcblxuYmxvY2suZ2ZtLnBhcmFncmFwaCA9IGVkaXQoYmxvY2suX3BhcmFncmFwaClcbiAgLnJlcGxhY2UoJ2hyJywgYmxvY2suaHIpXG4gIC5yZXBsYWNlKCdoZWFkaW5nJywgJyB7MCwzfSN7MSw2fSAnKVxuICAucmVwbGFjZSgnfGxoZWFkaW5nJywgJycpIC8vIHNldGV4IGhlYWRpbmdzIGRvbid0IGludGVycnVwdCBjb21tb25tYXJrIHBhcmFncmFwaHNcbiAgLnJlcGxhY2UoJ3RhYmxlJywgYmxvY2suZ2ZtLnRhYmxlKSAvLyBpbnRlcnJ1cHQgcGFyYWdyYXBocyB3aXRoIHRhYmxlXG4gIC5yZXBsYWNlKCdibG9ja3F1b3RlJywgJyB7MCwzfT4nKVxuICAucmVwbGFjZSgnZmVuY2VzJywgJyB7MCwzfSg/OmB7Myx9KD89W15gXFxcXG5dKlxcXFxuKXx+ezMsfSlbXlxcXFxuXSpcXFxcbicpXG4gIC5yZXBsYWNlKCdsaXN0JywgJyB7MCwzfSg/OlsqKy1dfDFbLildKSAnKSAvLyBvbmx5IGxpc3RzIHN0YXJ0aW5nIGZyb20gMSBjYW4gaW50ZXJydXB0XG4gIC5yZXBsYWNlKCdodG1sJywgJzwvPyg/OnRhZykoPzogK3xcXFxcbnwvPz4pfDwoPzpzY3JpcHR8cHJlfHN0eWxlfHRleHRhcmVhfCEtLSknKVxuICAucmVwbGFjZSgndGFnJywgYmxvY2suX3RhZykgLy8gcGFycyBjYW4gYmUgaW50ZXJydXB0ZWQgYnkgdHlwZSAoNikgaHRtbCBibG9ja3NcbiAgLmdldFJlZ2V4KCk7XG4vKipcbiAqIFBlZGFudGljIGdyYW1tYXIgKG9yaWdpbmFsIEpvaG4gR3J1YmVyJ3MgbG9vc2UgbWFya2Rvd24gc3BlY2lmaWNhdGlvbilcbiAqL1xuXG5ibG9jay5wZWRhbnRpYyA9IHtcbiAgLi4uYmxvY2subm9ybWFsLFxuICBodG1sOiBlZGl0KFxuICAgICdeICooPzpjb21tZW50ICooPzpcXFxcbnxcXFxccyokKSdcbiAgICArICd8PCh0YWcpW1xcXFxzXFxcXFNdKz88L1xcXFwxPiAqKD86XFxcXG57Mix9fFxcXFxzKiQpJyAvLyBjbG9zZWQgdGFnXG4gICAgKyAnfDx0YWcoPzpcIlteXCJdKlwifFxcJ1teXFwnXSpcXCd8XFxcXHNbXlxcJ1wiLz5cXFxcc10qKSo/Lz8+ICooPzpcXFxcbnsyLH18XFxcXHMqJCkpJylcbiAgICAucmVwbGFjZSgnY29tbWVudCcsIGJsb2NrLl9jb21tZW50KVxuICAgIC5yZXBsYWNlKC90YWcvZywgJyg/ISg/OidcbiAgICAgICsgJ2F8ZW18c3Ryb25nfHNtYWxsfHN8Y2l0ZXxxfGRmbnxhYmJyfGRhdGF8dGltZXxjb2RlfHZhcnxzYW1wfGtiZHxzdWInXG4gICAgICArICd8c3VwfGl8Ynx1fG1hcmt8cnVieXxydHxycHxiZGl8YmRvfHNwYW58YnJ8d2JyfGluc3xkZWx8aW1nKSdcbiAgICAgICsgJ1xcXFxiKVxcXFx3Kyg/ITp8W15cXFxcd1xcXFxzQF0qQClcXFxcYicpXG4gICAgLmdldFJlZ2V4KCksXG4gIGRlZjogL14gKlxcWyhbXlxcXV0rKVxcXTogKjw/KFteXFxzPl0rKT4/KD86ICsoW1wiKF1bXlxcbl0rW1wiKV0pKT8gKig/Olxcbit8JCkvLFxuICBoZWFkaW5nOiAvXigjezEsNn0pKC4qKSg/Olxcbit8JCkvLFxuICBmZW5jZXM6IG5vb3BUZXN0LCAvLyBmZW5jZXMgbm90IHN1cHBvcnRlZFxuICBsaGVhZGluZzogL14oLis/KVxcbiB7MCwzfSg9K3wtKykgKig/Olxcbit8JCkvLFxuICBwYXJhZ3JhcGg6IGVkaXQoYmxvY2subm9ybWFsLl9wYXJhZ3JhcGgpXG4gICAgLnJlcGxhY2UoJ2hyJywgYmxvY2suaHIpXG4gICAgLnJlcGxhY2UoJ2hlYWRpbmcnLCAnICojezEsNn0gKlteXFxuXScpXG4gICAgLnJlcGxhY2UoJ2xoZWFkaW5nJywgYmxvY2subGhlYWRpbmcpXG4gICAgLnJlcGxhY2UoJ2Jsb2NrcXVvdGUnLCAnIHswLDN9PicpXG4gICAgLnJlcGxhY2UoJ3xmZW5jZXMnLCAnJylcbiAgICAucmVwbGFjZSgnfGxpc3QnLCAnJylcbiAgICAucmVwbGFjZSgnfGh0bWwnLCAnJylcbiAgICAuZ2V0UmVnZXgoKVxufTtcblxuLyoqXG4gKiBJbmxpbmUtTGV2ZWwgR3JhbW1hclxuICovXG5jb25zdCBpbmxpbmUgPSB7XG4gIGVzY2FwZTogL15cXFxcKFshXCIjJCUmJygpKissXFwtLi86Ozw9Pj9AXFxbXFxdXFxcXF5fYHt8fX5dKS8sXG4gIGF1dG9saW5rOiAvXjwoc2NoZW1lOlteXFxzXFx4MDAtXFx4MWY8Pl0qfGVtYWlsKT4vLFxuICB1cmw6IG5vb3BUZXN0LFxuICB0YWc6ICdeY29tbWVudCdcbiAgICArICd8XjwvW2EtekEtWl1bXFxcXHc6LV0qXFxcXHMqPicgLy8gc2VsZi1jbG9zaW5nIHRhZ1xuICAgICsgJ3xePFthLXpBLVpdW1xcXFx3LV0qKD86YXR0cmlidXRlKSo/XFxcXHMqLz8+JyAvLyBvcGVuIHRhZ1xuICAgICsgJ3xePFxcXFw/W1xcXFxzXFxcXFNdKj9cXFxcPz4nIC8vIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24sIGUuZy4gPD9waHAgPz5cbiAgICArICd8XjwhW2EtekEtWl0rXFxcXHNbXFxcXHNcXFxcU10qPz4nIC8vIGRlY2xhcmF0aW9uLCBlLmcuIDwhRE9DVFlQRSBodG1sPlxuICAgICsgJ3xePCFcXFxcW0NEQVRBXFxcXFtbXFxcXHNcXFxcU10qP1xcXFxdXFxcXF0+JywgLy8gQ0RBVEEgc2VjdGlvblxuICBsaW5rOiAvXiE/XFxbKGxhYmVsKVxcXVxcKFxccyooaHJlZikoPzpcXHMrKHRpdGxlKSk/XFxzKlxcKS8sXG4gIHJlZmxpbms6IC9eIT9cXFsobGFiZWwpXFxdXFxbKHJlZilcXF0vLFxuICBub2xpbms6IC9eIT9cXFsocmVmKVxcXSg/OlxcW1xcXSk/LyxcbiAgcmVmbGlua1NlYXJjaDogJ3JlZmxpbmt8bm9saW5rKD8hXFxcXCgpJyxcbiAgZW1TdHJvbmc6IHtcbiAgICBsRGVsaW06IC9eKD86XFwqKyg/OihbcHVuY3RfXSl8W15cXHMqXSkpfF5fKyg/OihbcHVuY3QqXSl8KFteXFxzX10pKS8sXG4gICAgLy8gICAgICAgICgxKSBhbmQgKDIpIGNhbiBvbmx5IGJlIGEgUmlnaHQgRGVsaW1pdGVyLiAoMykgYW5kICg0KSBjYW4gb25seSBiZSBMZWZ0LiAgKDUpIGFuZCAoNikgY2FuIGJlIGVpdGhlciBMZWZ0IG9yIFJpZ2h0LlxuICAgIC8vICAgICAgICAgICgpIFNraXAgb3JwaGFuIGluc2lkZSBzdHJvbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpIENvbnN1bWUgdG8gZGVsaW0gICAgICgxKSAjKioqICAgICAgICAgICAgICAgICgyKSBhKioqIywgYSoqKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDMpICMqKiphLCAqKiphICAgICAgICAgICAgICAgICAoNCkgKioqIyAgICAgICAgICAgICAgKDUpICMqKiojICAgICAgICAgICAgICAgICAoNikgYSoqKmFcbiAgICByRGVsaW1Bc3Q6IC9eKD86W15fKlxcXFxdfFxcXFwuKSo/XFxfXFxfKD86W15fKlxcXFxdfFxcXFwuKSo/XFwqKD86W15fKlxcXFxdfFxcXFwuKSo/KD89XFxfXFxfKXwoPzpbXipcXFxcXXxcXFxcLikrKD89W14qXSl8W3B1bmN0X10oXFwqKykoPz1bXFxzXXwkKXwoPzpbXnB1bmN0Kl9cXHNcXFxcXXxcXFxcLikoXFwqKykoPz1bcHVuY3RfXFxzXXwkKXxbcHVuY3RfXFxzXShcXCorKSg/PVtecHVuY3QqX1xcc10pfFtcXHNdKFxcKispKD89W3B1bmN0X10pfFtwdW5jdF9dKFxcKispKD89W3B1bmN0X10pfCg/OltecHVuY3QqX1xcc1xcXFxdfFxcXFwuKShcXCorKSg/PVtecHVuY3QqX1xcc10pLyxcbiAgICByRGVsaW1VbmQ6IC9eKD86W15fKlxcXFxdfFxcXFwuKSo/XFwqXFwqKD86W15fKlxcXFxdfFxcXFwuKSo/XFxfKD86W15fKlxcXFxdfFxcXFwuKSo/KD89XFwqXFwqKXwoPzpbXl9cXFxcXXxcXFxcLikrKD89W15fXSl8W3B1bmN0Kl0oXFxfKykoPz1bXFxzXXwkKXwoPzpbXnB1bmN0Kl9cXHNcXFxcXXxcXFxcLikoXFxfKykoPz1bcHVuY3QqXFxzXXwkKXxbcHVuY3QqXFxzXShcXF8rKSg/PVtecHVuY3QqX1xcc10pfFtcXHNdKFxcXyspKD89W3B1bmN0Kl0pfFtwdW5jdCpdKFxcXyspKD89W3B1bmN0Kl0pLyAvLyBeLSBOb3QgYWxsb3dlZCBmb3IgX1xuICB9LFxuICBjb2RlOiAvXihgKykoW15gXXxbXmBdW1xcc1xcU10qP1teYF0pXFwxKD8hYCkvLFxuICBicjogL14oIHsyLH18XFxcXClcXG4oPyFcXHMqJCkvLFxuICBkZWw6IG5vb3BUZXN0LFxuICB0ZXh0OiAvXihgK3xbXmBdKSg/Oig/PSB7Mix9XFxuKXxbXFxzXFxTXSo/KD86KD89W1xcXFw8IVxcW2AqX118XFxiX3wkKXxbXiBdKD89IHsyLH1cXG4pKSkvLFxuICBwdW5jdHVhdGlvbjogL14oW1xcc3B1bmN0dWF0aW9uXSkvXG59O1xuXG4vLyBsaXN0IG9mIHB1bmN0dWF0aW9uIG1hcmtzIGZyb20gQ29tbW9uTWFyayBzcGVjXG4vLyB3aXRob3V0ICogYW5kIF8gdG8gaGFuZGxlIHRoZSBkaWZmZXJlbnQgZW1waGFzaXMgbWFya2VycyAqIGFuZCBfXG5pbmxpbmUuX3B1bmN0dWF0aW9uID0gJyFcIiMkJSZcXCcoKStcXFxcLS4sLzo7PD0+P0BcXFxcW1xcXFxdYF57fH1+JztcbmlubGluZS5wdW5jdHVhdGlvbiA9IGVkaXQoaW5saW5lLnB1bmN0dWF0aW9uKS5yZXBsYWNlKC9wdW5jdHVhdGlvbi9nLCBpbmxpbmUuX3B1bmN0dWF0aW9uKS5nZXRSZWdleCgpO1xuXG4vLyBzZXF1ZW5jZXMgZW0gc2hvdWxkIHNraXAgb3ZlciBbdGl0bGVdKGxpbmspLCBgY29kZWAsIDxodG1sPlxuaW5saW5lLmJsb2NrU2tpcCA9IC9cXFtbXlxcXV0qP1xcXVxcKFteXFwpXSo/XFwpfGBbXmBdKj9gfDxbXj5dKj8+L2c7XG4vLyBsb29rYmVoaW5kIGlzIG5vdCBhdmFpbGFibGUgb24gU2FmYXJpIGFzIG9mIHZlcnNpb24gMTZcbi8vIGlubGluZS5lc2NhcGVkRW1TdCA9IC8oPzw9KD86XnxbXlxcXFwpKD86XFxcXFteXSkqKVxcXFxbKl9dL2c7XG5pbmxpbmUuZXNjYXBlZEVtU3QgPSAvKD86XnxbXlxcXFxdKSg/OlxcXFxcXFxcKSpcXFxcWypfXS9nO1xuXG5pbmxpbmUuX2NvbW1lbnQgPSBlZGl0KGJsb2NrLl9jb21tZW50KS5yZXBsYWNlKCcoPzotLT58JCknLCAnLS0+JykuZ2V0UmVnZXgoKTtcblxuaW5saW5lLmVtU3Ryb25nLmxEZWxpbSA9IGVkaXQoaW5saW5lLmVtU3Ryb25nLmxEZWxpbSlcbiAgLnJlcGxhY2UoL3B1bmN0L2csIGlubGluZS5fcHVuY3R1YXRpb24pXG4gIC5nZXRSZWdleCgpO1xuXG5pbmxpbmUuZW1TdHJvbmcuckRlbGltQXN0ID0gZWRpdChpbmxpbmUuZW1TdHJvbmcuckRlbGltQXN0LCAnZycpXG4gIC5yZXBsYWNlKC9wdW5jdC9nLCBpbmxpbmUuX3B1bmN0dWF0aW9uKVxuICAuZ2V0UmVnZXgoKTtcblxuaW5saW5lLmVtU3Ryb25nLnJEZWxpbVVuZCA9IGVkaXQoaW5saW5lLmVtU3Ryb25nLnJEZWxpbVVuZCwgJ2cnKVxuICAucmVwbGFjZSgvcHVuY3QvZywgaW5saW5lLl9wdW5jdHVhdGlvbilcbiAgLmdldFJlZ2V4KCk7XG5cbmlubGluZS5fZXNjYXBlcyA9IC9cXFxcKFshXCIjJCUmJygpKissXFwtLi86Ozw9Pj9AXFxbXFxdXFxcXF5fYHt8fX5dKS9nO1xuXG5pbmxpbmUuX3NjaGVtZSA9IC9bYS16QS1aXVthLXpBLVowLTkrLi1dezEsMzF9LztcbmlubGluZS5fZW1haWwgPSAvW2EtekEtWjAtOS4hIyQlJicqKy89P15fYHt8fX4tXSsoQClbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKyg/IVstX10pLztcbmlubGluZS5hdXRvbGluayA9IGVkaXQoaW5saW5lLmF1dG9saW5rKVxuICAucmVwbGFjZSgnc2NoZW1lJywgaW5saW5lLl9zY2hlbWUpXG4gIC5yZXBsYWNlKCdlbWFpbCcsIGlubGluZS5fZW1haWwpXG4gIC5nZXRSZWdleCgpO1xuXG5pbmxpbmUuX2F0dHJpYnV0ZSA9IC9cXHMrW2EtekEtWjpfXVtcXHcuOi1dKig/Olxccyo9XFxzKlwiW15cIl0qXCJ8XFxzKj1cXHMqJ1teJ10qJ3xcXHMqPVxccypbXlxcc1wiJz08PmBdKyk/LztcblxuaW5saW5lLnRhZyA9IGVkaXQoaW5saW5lLnRhZylcbiAgLnJlcGxhY2UoJ2NvbW1lbnQnLCBpbmxpbmUuX2NvbW1lbnQpXG4gIC5yZXBsYWNlKCdhdHRyaWJ1dGUnLCBpbmxpbmUuX2F0dHJpYnV0ZSlcbiAgLmdldFJlZ2V4KCk7XG5cbmlubGluZS5fbGFiZWwgPSAvKD86XFxbKD86XFxcXC58W15cXFtcXF1cXFxcXSkqXFxdfFxcXFwufGBbXmBdKmB8W15cXFtcXF1cXFxcYF0pKj8vO1xuaW5saW5lLl9ocmVmID0gLzwoPzpcXFxcLnxbXlxcbjw+XFxcXF0pKz58W15cXHNcXHgwMC1cXHgxZl0qLztcbmlubGluZS5fdGl0bGUgPSAvXCIoPzpcXFxcXCI/fFteXCJcXFxcXSkqXCJ8Jyg/OlxcXFwnP3xbXidcXFxcXSkqJ3xcXCgoPzpcXFxcXFwpP3xbXilcXFxcXSkqXFwpLztcblxuaW5saW5lLmxpbmsgPSBlZGl0KGlubGluZS5saW5rKVxuICAucmVwbGFjZSgnbGFiZWwnLCBpbmxpbmUuX2xhYmVsKVxuICAucmVwbGFjZSgnaHJlZicsIGlubGluZS5faHJlZilcbiAgLnJlcGxhY2UoJ3RpdGxlJywgaW5saW5lLl90aXRsZSlcbiAgLmdldFJlZ2V4KCk7XG5cbmlubGluZS5yZWZsaW5rID0gZWRpdChpbmxpbmUucmVmbGluaylcbiAgLnJlcGxhY2UoJ2xhYmVsJywgaW5saW5lLl9sYWJlbClcbiAgLnJlcGxhY2UoJ3JlZicsIGJsb2NrLl9sYWJlbClcbiAgLmdldFJlZ2V4KCk7XG5cbmlubGluZS5ub2xpbmsgPSBlZGl0KGlubGluZS5ub2xpbmspXG4gIC5yZXBsYWNlKCdyZWYnLCBibG9jay5fbGFiZWwpXG4gIC5nZXRSZWdleCgpO1xuXG5pbmxpbmUucmVmbGlua1NlYXJjaCA9IGVkaXQoaW5saW5lLnJlZmxpbmtTZWFyY2gsICdnJylcbiAgLnJlcGxhY2UoJ3JlZmxpbmsnLCBpbmxpbmUucmVmbGluaylcbiAgLnJlcGxhY2UoJ25vbGluaycsIGlubGluZS5ub2xpbmspXG4gIC5nZXRSZWdleCgpO1xuXG4vKipcbiAqIE5vcm1hbCBJbmxpbmUgR3JhbW1hclxuICovXG5cbmlubGluZS5ub3JtYWwgPSB7IC4uLmlubGluZSB9O1xuXG4vKipcbiAqIFBlZGFudGljIElubGluZSBHcmFtbWFyXG4gKi9cblxuaW5saW5lLnBlZGFudGljID0ge1xuICAuLi5pbmxpbmUubm9ybWFsLFxuICBzdHJvbmc6IHtcbiAgICBzdGFydDogL15fX3xcXCpcXCovLFxuICAgIG1pZGRsZTogL15fXyg/PVxcUykoW1xcc1xcU10qP1xcUylfXyg/IV8pfF5cXCpcXCooPz1cXFMpKFtcXHNcXFNdKj9cXFMpXFwqXFwqKD8hXFwqKS8sXG4gICAgZW5kQXN0OiAvXFwqXFwqKD8hXFwqKS9nLFxuICAgIGVuZFVuZDogL19fKD8hXykvZ1xuICB9LFxuICBlbToge1xuICAgIHN0YXJ0OiAvXl98XFwqLyxcbiAgICBtaWRkbGU6IC9eKClcXCooPz1cXFMpKFtcXHNcXFNdKj9cXFMpXFwqKD8hXFwqKXxeXyg/PVxcUykoW1xcc1xcU10qP1xcUylfKD8hXykvLFxuICAgIGVuZEFzdDogL1xcKig/IVxcKikvZyxcbiAgICBlbmRVbmQ6IC9fKD8hXykvZ1xuICB9LFxuICBsaW5rOiBlZGl0KC9eIT9cXFsobGFiZWwpXFxdXFwoKC4qPylcXCkvKVxuICAgIC5yZXBsYWNlKCdsYWJlbCcsIGlubGluZS5fbGFiZWwpXG4gICAgLmdldFJlZ2V4KCksXG4gIHJlZmxpbms6IGVkaXQoL14hP1xcWyhsYWJlbClcXF1cXHMqXFxbKFteXFxdXSopXFxdLylcbiAgICAucmVwbGFjZSgnbGFiZWwnLCBpbmxpbmUuX2xhYmVsKVxuICAgIC5nZXRSZWdleCgpXG59O1xuXG4vKipcbiAqIEdGTSBJbmxpbmUgR3JhbW1hclxuICovXG5cbmlubGluZS5nZm0gPSB7XG4gIC4uLmlubGluZS5ub3JtYWwsXG4gIGVzY2FwZTogZWRpdChpbmxpbmUuZXNjYXBlKS5yZXBsYWNlKCddKScsICd+fF0pJykuZ2V0UmVnZXgoKSxcbiAgX2V4dGVuZGVkX2VtYWlsOiAvW0EtWmEtejAtOS5fKy1dKyhAKVthLXpBLVowLTktX10rKD86XFwuW2EtekEtWjAtOS1fXSpbYS16QS1aMC05XSkrKD8hWy1fXSkvLFxuICB1cmw6IC9eKCg/OmZ0cHxodHRwcz8pOlxcL1xcL3x3d3dcXC4pKD86W2EtekEtWjAtOVxcLV0rXFwuPykrW15cXHM8XSp8XmVtYWlsLyxcbiAgX2JhY2twZWRhbDogLyg/OltePyEuLDo7Kl8nXCJ+KCkmXSt8XFwoW14pXSpcXCl8Jig/IVthLXpBLVowLTldKzskKXxbPyEuLDo7Kl8nXCJ+KV0rKD8hJCkpKy8sXG4gIGRlbDogL14ofn4/KSg/PVteXFxzfl0pKFtcXHNcXFNdKj9bXlxcc35dKVxcMSg/PVtefl18JCkvLFxuICB0ZXh0OiAvXihbYH5dK3xbXmB+XSkoPzooPz0gezIsfVxcbil8KD89W2EtekEtWjAtOS4hIyQlJicqK1xcLz0/X2B7XFx8fX4tXStAKXxbXFxzXFxTXSo/KD86KD89W1xcXFw8IVxcW2Aqfl9dfFxcYl98aHR0cHM/OlxcL1xcL3xmdHA6XFwvXFwvfHd3d1xcLnwkKXxbXiBdKD89IHsyLH1cXG4pfFteYS16QS1aMC05LiEjJCUmJyorXFwvPT9fYHtcXHx9fi1dKD89W2EtekEtWjAtOS4hIyQlJicqK1xcLz0/X2B7XFx8fX4tXStAKSkpL1xufTtcblxuaW5saW5lLmdmbS51cmwgPSBlZGl0KGlubGluZS5nZm0udXJsLCAnaScpXG4gIC5yZXBsYWNlKCdlbWFpbCcsIGlubGluZS5nZm0uX2V4dGVuZGVkX2VtYWlsKVxuICAuZ2V0UmVnZXgoKTtcbi8qKlxuICogR0ZNICsgTGluZSBCcmVha3MgSW5saW5lIEdyYW1tYXJcbiAqL1xuXG5pbmxpbmUuYnJlYWtzID0ge1xuICAuLi5pbmxpbmUuZ2ZtLFxuICBicjogZWRpdChpbmxpbmUuYnIpLnJlcGxhY2UoJ3syLH0nLCAnKicpLmdldFJlZ2V4KCksXG4gIHRleHQ6IGVkaXQoaW5saW5lLmdmbS50ZXh0KVxuICAgIC5yZXBsYWNlKCdcXFxcYl8nLCAnXFxcXGJffCB7Mix9XFxcXG4nKVxuICAgIC5yZXBsYWNlKC9cXHsyLFxcfS9nLCAnKicpXG4gICAgLmdldFJlZ2V4KClcbn07XG5cbi8qKlxuICogc21hcnR5cGFudHMgdGV4dCByZXBsYWNlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqL1xuZnVuY3Rpb24gc21hcnR5cGFudHModGV4dCkge1xuICByZXR1cm4gdGV4dFxuICAgIC8vIGVtLWRhc2hlc1xuICAgIC5yZXBsYWNlKC8tLS0vZywgJ1xcdTIwMTQnKVxuICAgIC8vIGVuLWRhc2hlc1xuICAgIC5yZXBsYWNlKC8tLS9nLCAnXFx1MjAxMycpXG4gICAgLy8gb3BlbmluZyBzaW5nbGVzXG4gICAgLnJlcGxhY2UoLyhefFstXFx1MjAxNC8oXFxbe1wiXFxzXSknL2csICckMVxcdTIwMTgnKVxuICAgIC8vIGNsb3Npbmcgc2luZ2xlcyAmIGFwb3N0cm9waGVzXG4gICAgLnJlcGxhY2UoLycvZywgJ1xcdTIwMTknKVxuICAgIC8vIG9wZW5pbmcgZG91Ymxlc1xuICAgIC5yZXBsYWNlKC8oXnxbLVxcdTIwMTQvKFxcW3tcXHUyMDE4XFxzXSlcIi9nLCAnJDFcXHUyMDFjJylcbiAgICAvLyBjbG9zaW5nIGRvdWJsZXNcbiAgICAucmVwbGFjZSgvXCIvZywgJ1xcdTIwMWQnKVxuICAgIC8vIGVsbGlwc2VzXG4gICAgLnJlcGxhY2UoL1xcLnszfS9nLCAnXFx1MjAyNicpO1xufVxuXG4vKipcbiAqIG1hbmdsZSBlbWFpbCBhZGRyZXNzZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKi9cbmZ1bmN0aW9uIG1hbmdsZSh0ZXh0KSB7XG4gIGxldCBvdXQgPSAnJyxcbiAgICBpLFxuICAgIGNoO1xuXG4gIGNvbnN0IGwgPSB0ZXh0Lmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIGNoID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG4gICAgICBjaCA9ICd4JyArIGNoLnRvU3RyaW5nKDE2KTtcbiAgICB9XG4gICAgb3V0ICs9ICcmIycgKyBjaCArICc7JztcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG5cbi8qKlxuICogQmxvY2sgTGV4ZXJcbiAqL1xuY2xhc3MgTGV4ZXIge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy50b2tlbnMgPSBbXTtcbiAgICB0aGlzLnRva2Vucy5saW5rcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCBkZWZhdWx0cztcbiAgICB0aGlzLm9wdGlvbnMudG9rZW5pemVyID0gdGhpcy5vcHRpb25zLnRva2VuaXplciB8fCBuZXcgVG9rZW5pemVyKCk7XG4gICAgdGhpcy50b2tlbml6ZXIgPSB0aGlzLm9wdGlvbnMudG9rZW5pemVyO1xuICAgIHRoaXMudG9rZW5pemVyLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgdGhpcy50b2tlbml6ZXIubGV4ZXIgPSB0aGlzO1xuICAgIHRoaXMuaW5saW5lUXVldWUgPSBbXTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaW5MaW5rOiBmYWxzZSxcbiAgICAgIGluUmF3QmxvY2s6IGZhbHNlLFxuICAgICAgdG9wOiB0cnVlXG4gICAgfTtcblxuICAgIGNvbnN0IHJ1bGVzID0ge1xuICAgICAgYmxvY2s6IGJsb2NrLm5vcm1hbCxcbiAgICAgIGlubGluZTogaW5saW5lLm5vcm1hbFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnBlZGFudGljKSB7XG4gICAgICBydWxlcy5ibG9jayA9IGJsb2NrLnBlZGFudGljO1xuICAgICAgcnVsZXMuaW5saW5lID0gaW5saW5lLnBlZGFudGljO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmdmbSkge1xuICAgICAgcnVsZXMuYmxvY2sgPSBibG9jay5nZm07XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmJyZWFrcykge1xuICAgICAgICBydWxlcy5pbmxpbmUgPSBpbmxpbmUuYnJlYWtzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcnVsZXMuaW5saW5lID0gaW5saW5lLmdmbTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy50b2tlbml6ZXIucnVsZXMgPSBydWxlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvc2UgUnVsZXNcbiAgICovXG4gIHN0YXRpYyBnZXQgcnVsZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJsb2NrLFxuICAgICAgaW5saW5lXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgTGV4IE1ldGhvZFxuICAgKi9cbiAgc3RhdGljIGxleChzcmMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBsZXhlciA9IG5ldyBMZXhlcihvcHRpb25zKTtcbiAgICByZXR1cm4gbGV4ZXIubGV4KHNyYyk7XG4gIH1cblxuICAvKipcbiAgICogU3RhdGljIExleCBJbmxpbmUgTWV0aG9kXG4gICAqL1xuICBzdGF0aWMgbGV4SW5saW5lKHNyYywgb3B0aW9ucykge1xuICAgIGNvbnN0IGxleGVyID0gbmV3IExleGVyKG9wdGlvbnMpO1xuICAgIHJldHVybiBsZXhlci5pbmxpbmVUb2tlbnMoc3JjKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwcm9jZXNzaW5nXG4gICAqL1xuICBsZXgoc3JjKSB7XG4gICAgc3JjID0gc3JjXG4gICAgICAucmVwbGFjZSgvXFxyXFxufFxcci9nLCAnXFxuJyk7XG5cbiAgICB0aGlzLmJsb2NrVG9rZW5zKHNyYywgdGhpcy50b2tlbnMpO1xuXG4gICAgbGV0IG5leHQ7XG4gICAgd2hpbGUgKG5leHQgPSB0aGlzLmlubGluZVF1ZXVlLnNoaWZ0KCkpIHtcbiAgICAgIHRoaXMuaW5saW5lVG9rZW5zKG5leHQuc3JjLCBuZXh0LnRva2Vucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudG9rZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIExleGluZ1xuICAgKi9cbiAgYmxvY2tUb2tlbnMoc3JjLCB0b2tlbnMgPSBbXSkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMucGVkYW50aWMpIHtcbiAgICAgIHNyYyA9IHNyYy5yZXBsYWNlKC9cXHQvZywgJyAgICAnKS5yZXBsYWNlKC9eICskL2dtLCAnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNyYyA9IHNyYy5yZXBsYWNlKC9eKCAqKShcXHQrKS9nbSwgKF8sIGxlYWRpbmcsIHRhYnMpID0+IHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmcgKyAnICAgICcucmVwZWF0KHRhYnMubGVuZ3RoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCB0b2tlbiwgbGFzdFRva2VuLCBjdXRTcmMsIGxhc3RQYXJhZ3JhcGhDbGlwcGVkO1xuXG4gICAgd2hpbGUgKHNyYykge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHRlbnNpb25zXG4gICAgICAgICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLmJsb2NrXG4gICAgICAgICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLmJsb2NrLnNvbWUoKGV4dFRva2VuaXplcikgPT4ge1xuICAgICAgICAgIGlmICh0b2tlbiA9IGV4dFRva2VuaXplci5jYWxsKHsgbGV4ZXI6IHRoaXMgfSwgc3JjLCB0b2tlbnMpKSB7XG4gICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG5ld2xpbmVcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLnNwYWNlKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgaWYgKHRva2VuLnJhdy5sZW5ndGggPT09IDEgJiYgdG9rZW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBpZiB0aGVyZSdzIGEgc2luZ2xlIFxcbiBhcyBhIHNwYWNlciwgaXQncyB0ZXJtaW5hdGluZyB0aGUgbGFzdCBsaW5lLFxuICAgICAgICAgIC8vIHNvIG1vdmUgaXQgdGhlcmUgc28gdGhhdCB3ZSBkb24ndCBnZXQgdW5lY2Vzc2FyeSBwYXJhZ3JhcGggdGFnc1xuICAgICAgICAgIHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV0ucmF3ICs9ICdcXG4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gY29kZVxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuY29kZShzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIGxhc3RUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIC8vIEFuIGluZGVudGVkIGNvZGUgYmxvY2sgY2Fubm90IGludGVycnVwdCBhIHBhcmFncmFwaC5cbiAgICAgICAgaWYgKGxhc3RUb2tlbiAmJiAobGFzdFRva2VuLnR5cGUgPT09ICdwYXJhZ3JhcGgnIHx8IGxhc3RUb2tlbi50eXBlID09PSAndGV4dCcpKSB7XG4gICAgICAgICAgbGFzdFRva2VuLnJhdyArPSAnXFxuJyArIHRva2VuLnJhdztcbiAgICAgICAgICBsYXN0VG9rZW4udGV4dCArPSAnXFxuJyArIHRva2VuLnRleHQ7XG4gICAgICAgICAgdGhpcy5pbmxpbmVRdWV1ZVt0aGlzLmlubGluZVF1ZXVlLmxlbmd0aCAtIDFdLnNyYyA9IGxhc3RUb2tlbi50ZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZmVuY2VzXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5mZW5jZXMoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBoZWFkaW5nXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5oZWFkaW5nKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gaHJcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmhyKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gYmxvY2txdW90ZVxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuYmxvY2txdW90ZShzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGxpc3RcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmxpc3Qoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBodG1sXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5odG1sKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZGVmXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5kZWYoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdFRva2VuICYmIChsYXN0VG9rZW4udHlwZSA9PT0gJ3BhcmFncmFwaCcgfHwgbGFzdFRva2VuLnR5cGUgPT09ICd0ZXh0JykpIHtcbiAgICAgICAgICBsYXN0VG9rZW4ucmF3ICs9ICdcXG4nICsgdG9rZW4ucmF3O1xuICAgICAgICAgIGxhc3RUb2tlbi50ZXh0ICs9ICdcXG4nICsgdG9rZW4ucmF3O1xuICAgICAgICAgIHRoaXMuaW5saW5lUXVldWVbdGhpcy5pbmxpbmVRdWV1ZS5sZW5ndGggLSAxXS5zcmMgPSBsYXN0VG9rZW4udGV4dDtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy50b2tlbnMubGlua3NbdG9rZW4udGFnXSkge1xuICAgICAgICAgIHRoaXMudG9rZW5zLmxpbmtzW3Rva2VuLnRhZ10gPSB7XG4gICAgICAgICAgICBocmVmOiB0b2tlbi5ocmVmLFxuICAgICAgICAgICAgdGl0bGU6IHRva2VuLnRpdGxlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gdGFibGUgKGdmbSlcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLnRhYmxlKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gbGhlYWRpbmdcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmxoZWFkaW5nKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gdG9wLWxldmVsIHBhcmFncmFwaFxuICAgICAgLy8gcHJldmVudCBwYXJhZ3JhcGggY29uc3VtaW5nIGV4dGVuc2lvbnMgYnkgY2xpcHBpbmcgJ3NyYycgdG8gZXh0ZW5zaW9uIHN0YXJ0XG4gICAgICBjdXRTcmMgPSBzcmM7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4dGVuc2lvbnMgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMuc3RhcnRCbG9jaykge1xuICAgICAgICBsZXQgc3RhcnRJbmRleCA9IEluZmluaXR5O1xuICAgICAgICBjb25zdCB0ZW1wU3JjID0gc3JjLnNsaWNlKDEpO1xuICAgICAgICBsZXQgdGVtcFN0YXJ0O1xuICAgICAgICB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5zdGFydEJsb2NrLmZvckVhY2goZnVuY3Rpb24oZ2V0U3RhcnRJbmRleCkge1xuICAgICAgICAgIHRlbXBTdGFydCA9IGdldFN0YXJ0SW5kZXguY2FsbCh7IGxleGVyOiB0aGlzIH0sIHRlbXBTcmMpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdGVtcFN0YXJ0ID09PSAnbnVtYmVyJyAmJiB0ZW1wU3RhcnQgPj0gMCkgeyBzdGFydEluZGV4ID0gTWF0aC5taW4oc3RhcnRJbmRleCwgdGVtcFN0YXJ0KTsgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHN0YXJ0SW5kZXggPCBJbmZpbml0eSAmJiBzdGFydEluZGV4ID49IDApIHtcbiAgICAgICAgICBjdXRTcmMgPSBzcmMuc3Vic3RyaW5nKDAsIHN0YXJ0SW5kZXggKyAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3RhdGUudG9wICYmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLnBhcmFncmFwaChjdXRTcmMpKSkge1xuICAgICAgICBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdFBhcmFncmFwaENsaXBwZWQgJiYgbGFzdFRva2VuLnR5cGUgPT09ICdwYXJhZ3JhcGgnKSB7XG4gICAgICAgICAgbGFzdFRva2VuLnJhdyArPSAnXFxuJyArIHRva2VuLnJhdztcbiAgICAgICAgICBsYXN0VG9rZW4udGV4dCArPSAnXFxuJyArIHRva2VuLnRleHQ7XG4gICAgICAgICAgdGhpcy5pbmxpbmVRdWV1ZS5wb3AoKTtcbiAgICAgICAgICB0aGlzLmlubGluZVF1ZXVlW3RoaXMuaW5saW5lUXVldWUubGVuZ3RoIC0gMV0uc3JjID0gbGFzdFRva2VuLnRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RQYXJhZ3JhcGhDbGlwcGVkID0gKGN1dFNyYy5sZW5ndGggIT09IHNyYy5sZW5ndGgpO1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gdGV4dFxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIudGV4dChzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIGxhc3RUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0VG9rZW4gJiYgbGFzdFRva2VuLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIGxhc3RUb2tlbi5yYXcgKz0gJ1xcbicgKyB0b2tlbi5yYXc7XG4gICAgICAgICAgbGFzdFRva2VuLnRleHQgKz0gJ1xcbicgKyB0b2tlbi50ZXh0O1xuICAgICAgICAgIHRoaXMuaW5saW5lUXVldWUucG9wKCk7XG4gICAgICAgICAgdGhpcy5pbmxpbmVRdWV1ZVt0aGlzLmlubGluZVF1ZXVlLmxlbmd0aCAtIDFdLnNyYyA9IGxhc3RUb2tlbi50ZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNyYykge1xuICAgICAgICBjb25zdCBlcnJNc2cgPSAnSW5maW5pdGUgbG9vcCBvbiBieXRlOiAnICsgc3JjLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJNc2cpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJNc2cpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZS50b3AgPSB0cnVlO1xuICAgIHJldHVybiB0b2tlbnM7XG4gIH1cblxuICBpbmxpbmUoc3JjLCB0b2tlbnMgPSBbXSkge1xuICAgIHRoaXMuaW5saW5lUXVldWUucHVzaCh7IHNyYywgdG9rZW5zIH0pO1xuICAgIHJldHVybiB0b2tlbnM7XG4gIH1cblxuICAvKipcbiAgICogTGV4aW5nL0NvbXBpbGluZ1xuICAgKi9cbiAgaW5saW5lVG9rZW5zKHNyYywgdG9rZW5zID0gW10pIHtcbiAgICBsZXQgdG9rZW4sIGxhc3RUb2tlbiwgY3V0U3JjO1xuXG4gICAgLy8gU3RyaW5nIHdpdGggbGlua3MgbWFza2VkIHRvIGF2b2lkIGludGVyZmVyZW5jZSB3aXRoIGVtIGFuZCBzdHJvbmdcbiAgICBsZXQgbWFza2VkU3JjID0gc3JjO1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQga2VlcFByZXZDaGFyLCBwcmV2Q2hhcjtcblxuICAgIC8vIE1hc2sgb3V0IHJlZmxpbmtzXG4gICAgaWYgKHRoaXMudG9rZW5zLmxpbmtzKSB7XG4gICAgICBjb25zdCBsaW5rcyA9IE9iamVjdC5rZXlzKHRoaXMudG9rZW5zLmxpbmtzKTtcbiAgICAgIGlmIChsaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSB0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUucmVmbGlua1NlYXJjaC5leGVjKG1hc2tlZFNyYykpICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAobGlua3MuaW5jbHVkZXMobWF0Y2hbMF0uc2xpY2UobWF0Y2hbMF0ubGFzdEluZGV4T2YoJ1snKSArIDEsIC0xKSkpIHtcbiAgICAgICAgICAgIG1hc2tlZFNyYyA9IG1hc2tlZFNyYy5zbGljZSgwLCBtYXRjaC5pbmRleCkgKyAnWycgKyByZXBlYXRTdHJpbmcoJ2EnLCBtYXRjaFswXS5sZW5ndGggLSAyKSArICddJyArIG1hc2tlZFNyYy5zbGljZSh0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUucmVmbGlua1NlYXJjaC5sYXN0SW5kZXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBNYXNrIG91dCBvdGhlciBibG9ja3NcbiAgICB3aGlsZSAoKG1hdGNoID0gdGhpcy50b2tlbml6ZXIucnVsZXMuaW5saW5lLmJsb2NrU2tpcC5leGVjKG1hc2tlZFNyYykpICE9IG51bGwpIHtcbiAgICAgIG1hc2tlZFNyYyA9IG1hc2tlZFNyYy5zbGljZSgwLCBtYXRjaC5pbmRleCkgKyAnWycgKyByZXBlYXRTdHJpbmcoJ2EnLCBtYXRjaFswXS5sZW5ndGggLSAyKSArICddJyArIG1hc2tlZFNyYy5zbGljZSh0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUuYmxvY2tTa2lwLmxhc3RJbmRleCk7XG4gICAgfVxuXG4gICAgLy8gTWFzayBvdXQgZXNjYXBlZCBlbSAmIHN0cm9uZyBkZWxpbWl0ZXJzXG4gICAgd2hpbGUgKChtYXRjaCA9IHRoaXMudG9rZW5pemVyLnJ1bGVzLmlubGluZS5lc2NhcGVkRW1TdC5leGVjKG1hc2tlZFNyYykpICE9IG51bGwpIHtcbiAgICAgIG1hc2tlZFNyYyA9IG1hc2tlZFNyYy5zbGljZSgwLCBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCAtIDIpICsgJysrJyArIG1hc2tlZFNyYy5zbGljZSh0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUuZXNjYXBlZEVtU3QubGFzdEluZGV4KTtcbiAgICAgIHRoaXMudG9rZW5pemVyLnJ1bGVzLmlubGluZS5lc2NhcGVkRW1TdC5sYXN0SW5kZXgtLTtcbiAgICB9XG5cbiAgICB3aGlsZSAoc3JjKSB7XG4gICAgICBpZiAoIWtlZXBQcmV2Q2hhcikge1xuICAgICAgICBwcmV2Q2hhciA9ICcnO1xuICAgICAgfVxuICAgICAga2VlcFByZXZDaGFyID0gZmFsc2U7XG5cbiAgICAgIC8vIGV4dGVuc2lvbnNcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9uc1xuICAgICAgICAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5pbmxpbmVcbiAgICAgICAgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMuaW5saW5lLnNvbWUoKGV4dFRva2VuaXplcikgPT4ge1xuICAgICAgICAgIGlmICh0b2tlbiA9IGV4dFRva2VuaXplci5jYWxsKHsgbGV4ZXI6IHRoaXMgfSwgc3JjLCB0b2tlbnMpKSB7XG4gICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGVzY2FwZVxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuZXNjYXBlKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gdGFnXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci50YWcoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdFRva2VuICYmIHRva2VuLnR5cGUgPT09ICd0ZXh0JyAmJiBsYXN0VG9rZW4udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgbGFzdFRva2VuLnJhdyArPSB0b2tlbi5yYXc7XG4gICAgICAgICAgbGFzdFRva2VuLnRleHQgKz0gdG9rZW4udGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGxpbmtcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmxpbmsoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyByZWZsaW5rLCBub2xpbmtcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLnJlZmxpbmsoc3JjLCB0aGlzLnRva2Vucy5saW5rcykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgbGFzdFRva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RUb2tlbiAmJiB0b2tlbi50eXBlID09PSAndGV4dCcgJiYgbGFzdFRva2VuLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIGxhc3RUb2tlbi5yYXcgKz0gdG9rZW4ucmF3O1xuICAgICAgICAgIGxhc3RUb2tlbi50ZXh0ICs9IHRva2VuLnRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBlbSAmIHN0cm9uZ1xuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuZW1TdHJvbmcoc3JjLCBtYXNrZWRTcmMsIHByZXZDaGFyKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBjb2RlXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5jb2Rlc3BhbihzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGJyXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5icihzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGRlbCAoZ2ZtKVxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuZGVsKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gYXV0b2xpbmtcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmF1dG9saW5rKHNyYywgbWFuZ2xlKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyB1cmwgKGdmbSlcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5pbkxpbmsgJiYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIudXJsKHNyYywgbWFuZ2xlKSkpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gdGV4dFxuICAgICAgLy8gcHJldmVudCBpbmxpbmVUZXh0IGNvbnN1bWluZyBleHRlbnNpb25zIGJ5IGNsaXBwaW5nICdzcmMnIHRvIGV4dGVuc2lvbiBzdGFydFxuICAgICAgY3V0U3JjID0gc3JjO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHRlbnNpb25zICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnN0YXJ0SW5saW5lKSB7XG4gICAgICAgIGxldCBzdGFydEluZGV4ID0gSW5maW5pdHk7XG4gICAgICAgIGNvbnN0IHRlbXBTcmMgPSBzcmMuc2xpY2UoMSk7XG4gICAgICAgIGxldCB0ZW1wU3RhcnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnN0YXJ0SW5saW5lLmZvckVhY2goZnVuY3Rpb24oZ2V0U3RhcnRJbmRleCkge1xuICAgICAgICAgIHRlbXBTdGFydCA9IGdldFN0YXJ0SW5kZXguY2FsbCh7IGxleGVyOiB0aGlzIH0sIHRlbXBTcmMpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdGVtcFN0YXJ0ID09PSAnbnVtYmVyJyAmJiB0ZW1wU3RhcnQgPj0gMCkgeyBzdGFydEluZGV4ID0gTWF0aC5taW4oc3RhcnRJbmRleCwgdGVtcFN0YXJ0KTsgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHN0YXJ0SW5kZXggPCBJbmZpbml0eSAmJiBzdGFydEluZGV4ID49IDApIHtcbiAgICAgICAgICBjdXRTcmMgPSBzcmMuc3Vic3RyaW5nKDAsIHN0YXJ0SW5kZXggKyAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuaW5saW5lVGV4dChjdXRTcmMsIHNtYXJ0eXBhbnRzKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICBpZiAodG9rZW4ucmF3LnNsaWNlKC0xKSAhPT0gJ18nKSB7IC8vIFRyYWNrIHByZXZDaGFyIGJlZm9yZSBzdHJpbmcgb2YgX19fXyBzdGFydGVkXG4gICAgICAgICAgcHJldkNoYXIgPSB0b2tlbi5yYXcuc2xpY2UoLTEpO1xuICAgICAgICB9XG4gICAgICAgIGtlZXBQcmV2Q2hhciA9IHRydWU7XG4gICAgICAgIGxhc3RUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0VG9rZW4gJiYgbGFzdFRva2VuLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIGxhc3RUb2tlbi5yYXcgKz0gdG9rZW4ucmF3O1xuICAgICAgICAgIGxhc3RUb2tlbi50ZXh0ICs9IHRva2VuLnRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3JjKSB7XG4gICAgICAgIGNvbnN0IGVyck1zZyA9ICdJbmZpbml0ZSBsb29wIG9uIGJ5dGU6ICcgKyBzcmMuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVyck1zZyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVyck1zZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdG9rZW5zO1xuICB9XG59XG5cbi8qKlxuICogUmVuZGVyZXJcbiAqL1xuY2xhc3MgUmVuZGVyZXIge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCBkZWZhdWx0cztcbiAgfVxuXG4gIGNvZGUoY29kZSwgaW5mb3N0cmluZywgZXNjYXBlZCkge1xuICAgIGNvbnN0IGxhbmcgPSAoaW5mb3N0cmluZyB8fCAnJykubWF0Y2goL1xcUyovKVswXTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmhpZ2hsaWdodCkge1xuICAgICAgY29uc3Qgb3V0ID0gdGhpcy5vcHRpb25zLmhpZ2hsaWdodChjb2RlLCBsYW5nKTtcbiAgICAgIGlmIChvdXQgIT0gbnVsbCAmJiBvdXQgIT09IGNvZGUpIHtcbiAgICAgICAgZXNjYXBlZCA9IHRydWU7XG4gICAgICAgIGNvZGUgPSBvdXQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXFxuJC8sICcnKSArICdcXG4nO1xuXG4gICAgaWYgKCFsYW5nKSB7XG4gICAgICByZXR1cm4gJzxwcmU+PGNvZGU+J1xuICAgICAgICArIChlc2NhcGVkID8gY29kZSA6IGVzY2FwZShjb2RlLCB0cnVlKSlcbiAgICAgICAgKyAnPC9jb2RlPjwvcHJlPlxcbic7XG4gICAgfVxuXG4gICAgcmV0dXJuICc8cHJlPjxjb2RlIGNsYXNzPVwiJ1xuICAgICAgKyB0aGlzLm9wdGlvbnMubGFuZ1ByZWZpeFxuICAgICAgKyBlc2NhcGUobGFuZylcbiAgICAgICsgJ1wiPidcbiAgICAgICsgKGVzY2FwZWQgPyBjb2RlIDogZXNjYXBlKGNvZGUsIHRydWUpKVxuICAgICAgKyAnPC9jb2RlPjwvcHJlPlxcbic7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHF1b3RlXG4gICAqL1xuICBibG9ja3F1b3RlKHF1b3RlKSB7XG4gICAgcmV0dXJuIGA8YmxvY2txdW90ZT5cXG4ke3F1b3RlfTwvYmxvY2txdW90ZT5cXG5gO1xuICB9XG5cbiAgaHRtbChodG1sKSB7XG4gICAgcmV0dXJuIGh0bWw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxldmVsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHthbnl9IHNsdWdnZXJcbiAgICovXG4gIGhlYWRpbmcodGV4dCwgbGV2ZWwsIHJhdywgc2x1Z2dlcikge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuaGVhZGVySWRzKSB7XG4gICAgICBjb25zdCBpZCA9IHRoaXMub3B0aW9ucy5oZWFkZXJQcmVmaXggKyBzbHVnZ2VyLnNsdWcocmF3KTtcbiAgICAgIHJldHVybiBgPGgke2xldmVsfSBpZD1cIiR7aWR9XCI+JHt0ZXh0fTwvaCR7bGV2ZWx9PlxcbmA7XG4gICAgfVxuXG4gICAgLy8gaWdub3JlIElEc1xuICAgIHJldHVybiBgPGgke2xldmVsfT4ke3RleHR9PC9oJHtsZXZlbH0+XFxuYDtcbiAgfVxuXG4gIGhyKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMueGh0bWwgPyAnPGhyLz5cXG4nIDogJzxocj5cXG4nO1xuICB9XG5cbiAgbGlzdChib2R5LCBvcmRlcmVkLCBzdGFydCkge1xuICAgIGNvbnN0IHR5cGUgPSBvcmRlcmVkID8gJ29sJyA6ICd1bCcsXG4gICAgICBzdGFydGF0dCA9IChvcmRlcmVkICYmIHN0YXJ0ICE9PSAxKSA/ICgnIHN0YXJ0PVwiJyArIHN0YXJ0ICsgJ1wiJykgOiAnJztcbiAgICByZXR1cm4gJzwnICsgdHlwZSArIHN0YXJ0YXR0ICsgJz5cXG4nICsgYm9keSArICc8LycgKyB0eXBlICsgJz5cXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqL1xuICBsaXN0aXRlbSh0ZXh0KSB7XG4gICAgcmV0dXJuIGA8bGk+JHt0ZXh0fTwvbGk+XFxuYDtcbiAgfVxuXG4gIGNoZWNrYm94KGNoZWNrZWQpIHtcbiAgICByZXR1cm4gJzxpbnB1dCAnXG4gICAgICArIChjaGVja2VkID8gJ2NoZWNrZWQ9XCJcIiAnIDogJycpXG4gICAgICArICdkaXNhYmxlZD1cIlwiIHR5cGU9XCJjaGVja2JveFwiJ1xuICAgICAgKyAodGhpcy5vcHRpb25zLnhodG1sID8gJyAvJyA6ICcnKVxuICAgICAgKyAnPiAnO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqL1xuICBwYXJhZ3JhcGgodGV4dCkge1xuICAgIHJldHVybiBgPHA+JHt0ZXh0fTwvcD5cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoZWFkZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGJvZHlcbiAgICovXG4gIHRhYmxlKGhlYWRlciwgYm9keSkge1xuICAgIGlmIChib2R5KSBib2R5ID0gYDx0Ym9keT4ke2JvZHl9PC90Ym9keT5gO1xuXG4gICAgcmV0dXJuICc8dGFibGU+XFxuJ1xuICAgICAgKyAnPHRoZWFkPlxcbidcbiAgICAgICsgaGVhZGVyXG4gICAgICArICc8L3RoZWFkPlxcbidcbiAgICAgICsgYm9keVxuICAgICAgKyAnPC90YWJsZT5cXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50XG4gICAqL1xuICB0YWJsZXJvdyhjb250ZW50KSB7XG4gICAgcmV0dXJuIGA8dHI+XFxuJHtjb250ZW50fTwvdHI+XFxuYDtcbiAgfVxuXG4gIHRhYmxlY2VsbChjb250ZW50LCBmbGFncykge1xuICAgIGNvbnN0IHR5cGUgPSBmbGFncy5oZWFkZXIgPyAndGgnIDogJ3RkJztcbiAgICBjb25zdCB0YWcgPSBmbGFncy5hbGlnblxuICAgICAgPyBgPCR7dHlwZX0gYWxpZ249XCIke2ZsYWdzLmFsaWdufVwiPmBcbiAgICAgIDogYDwke3R5cGV9PmA7XG4gICAgcmV0dXJuIHRhZyArIGNvbnRlbnQgKyBgPC8ke3R5cGV9PlxcbmA7XG4gIH1cblxuICAvKipcbiAgICogc3BhbiBsZXZlbCByZW5kZXJlclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKi9cbiAgc3Ryb25nKHRleHQpIHtcbiAgICByZXR1cm4gYDxzdHJvbmc+JHt0ZXh0fTwvc3Ryb25nPmA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICovXG4gIGVtKHRleHQpIHtcbiAgICByZXR1cm4gYDxlbT4ke3RleHR9PC9lbT5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqL1xuICBjb2Rlc3Bhbih0ZXh0KSB7XG4gICAgcmV0dXJuIGA8Y29kZT4ke3RleHR9PC9jb2RlPmA7XG4gIH1cblxuICBicigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnhodG1sID8gJzxici8+JyA6ICc8YnI+JztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKi9cbiAgZGVsKHRleHQpIHtcbiAgICByZXR1cm4gYDxkZWw+JHt0ZXh0fTwvZGVsPmA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGhyZWZcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqL1xuICBsaW5rKGhyZWYsIHRpdGxlLCB0ZXh0KSB7XG4gICAgaHJlZiA9IGNsZWFuVXJsKHRoaXMub3B0aW9ucy5zYW5pdGl6ZSwgdGhpcy5vcHRpb25zLmJhc2VVcmwsIGhyZWYpO1xuICAgIGlmIChocmVmID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gICAgbGV0IG91dCA9ICc8YSBocmVmPVwiJyArIGhyZWYgKyAnXCInO1xuICAgIGlmICh0aXRsZSkge1xuICAgICAgb3V0ICs9ICcgdGl0bGU9XCInICsgdGl0bGUgKyAnXCInO1xuICAgIH1cbiAgICBvdXQgKz0gJz4nICsgdGV4dCArICc8L2E+JztcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBocmVmXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKi9cbiAgaW1hZ2UoaHJlZiwgdGl0bGUsIHRleHQpIHtcbiAgICBocmVmID0gY2xlYW5VcmwodGhpcy5vcHRpb25zLnNhbml0aXplLCB0aGlzLm9wdGlvbnMuYmFzZVVybCwgaHJlZik7XG4gICAgaWYgKGhyZWYgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cblxuICAgIGxldCBvdXQgPSBgPGltZyBzcmM9XCIke2hyZWZ9XCIgYWx0PVwiJHt0ZXh0fVwiYDtcbiAgICBpZiAodGl0bGUpIHtcbiAgICAgIG91dCArPSBgIHRpdGxlPVwiJHt0aXRsZX1cImA7XG4gICAgfVxuICAgIG91dCArPSB0aGlzLm9wdGlvbnMueGh0bWwgPyAnLz4nIDogJz4nO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICB0ZXh0KHRleHQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxufVxuXG4vKipcbiAqIFRleHRSZW5kZXJlclxuICogcmV0dXJucyBvbmx5IHRoZSB0ZXh0dWFsIHBhcnQgb2YgdGhlIHRva2VuXG4gKi9cbmNsYXNzIFRleHRSZW5kZXJlciB7XG4gIC8vIG5vIG5lZWQgZm9yIGJsb2NrIGxldmVsIHJlbmRlcmVyc1xuICBzdHJvbmcodGV4dCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgZW0odGV4dCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgY29kZXNwYW4odGV4dCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgZGVsKHRleHQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIGh0bWwodGV4dCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgdGV4dCh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBsaW5rKGhyZWYsIHRpdGxlLCB0ZXh0KSB7XG4gICAgcmV0dXJuICcnICsgdGV4dDtcbiAgfVxuXG4gIGltYWdlKGhyZWYsIHRpdGxlLCB0ZXh0KSB7XG4gICAgcmV0dXJuICcnICsgdGV4dDtcbiAgfVxuXG4gIGJyKCkge1xuICAgIHJldHVybiAnJztcbiAgfVxufVxuXG4vKipcbiAqIFNsdWdnZXIgZ2VuZXJhdGVzIGhlYWRlciBpZFxuICovXG5jbGFzcyBTbHVnZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zZWVuID0ge307XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqL1xuICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAudHJpbSgpXG4gICAgICAvLyByZW1vdmUgaHRtbCB0YWdzXG4gICAgICAucmVwbGFjZSgvPFshXFwvYS16XS4qPz4vaWcsICcnKVxuICAgICAgLy8gcmVtb3ZlIHVud2FudGVkIGNoYXJzXG4gICAgICAucmVwbGFjZSgvW1xcdTIwMDAtXFx1MjA2RlxcdTJFMDAtXFx1MkU3RlxcXFwnIVwiIyQlJigpKissLi86Ozw9Pj9AW1xcXV5ge3x9fl0vZywgJycpXG4gICAgICAucmVwbGFjZSgvXFxzL2csICctJyk7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgdGhlIG5leHQgc2FmZSAodW5pcXVlKSBzbHVnIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luYWxTbHVnXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNEcnlSdW5cbiAgICovXG4gIGdldE5leHRTYWZlU2x1ZyhvcmlnaW5hbFNsdWcsIGlzRHJ5UnVuKSB7XG4gICAgbGV0IHNsdWcgPSBvcmlnaW5hbFNsdWc7XG4gICAgbGV0IG9jY3VyZW5jZUFjY3VtdWxhdG9yID0gMDtcbiAgICBpZiAodGhpcy5zZWVuLmhhc093blByb3BlcnR5KHNsdWcpKSB7XG4gICAgICBvY2N1cmVuY2VBY2N1bXVsYXRvciA9IHRoaXMuc2VlbltvcmlnaW5hbFNsdWddO1xuICAgICAgZG8ge1xuICAgICAgICBvY2N1cmVuY2VBY2N1bXVsYXRvcisrO1xuICAgICAgICBzbHVnID0gb3JpZ2luYWxTbHVnICsgJy0nICsgb2NjdXJlbmNlQWNjdW11bGF0b3I7XG4gICAgICB9IHdoaWxlICh0aGlzLnNlZW4uaGFzT3duUHJvcGVydHkoc2x1ZykpO1xuICAgIH1cbiAgICBpZiAoIWlzRHJ5UnVuKSB7XG4gICAgICB0aGlzLnNlZW5bb3JpZ2luYWxTbHVnXSA9IG9jY3VyZW5jZUFjY3VtdWxhdG9yO1xuICAgICAgdGhpcy5zZWVuW3NsdWddID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHNsdWc7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBzdHJpbmcgdG8gdW5pcXVlIGlkXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5kcnlydW5dIEdlbmVyYXRlcyB0aGUgbmV4dCB1bmlxdWUgc2x1ZyB3aXRob3V0XG4gICAqIHVwZGF0aW5nIHRoZSBpbnRlcm5hbCBhY2N1bXVsYXRvci5cbiAgICovXG4gIHNsdWcodmFsdWUsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHNsdWcgPSB0aGlzLnNlcmlhbGl6ZSh2YWx1ZSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TmV4dFNhZmVTbHVnKHNsdWcsIG9wdGlvbnMuZHJ5cnVuKTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNpbmcgJiBDb21waWxpbmdcbiAqL1xuY2xhc3MgUGFyc2VyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHM7XG4gICAgdGhpcy5vcHRpb25zLnJlbmRlcmVyID0gdGhpcy5vcHRpb25zLnJlbmRlcmVyIHx8IG5ldyBSZW5kZXJlcigpO1xuICAgIHRoaXMucmVuZGVyZXIgPSB0aGlzLm9wdGlvbnMucmVuZGVyZXI7XG4gICAgdGhpcy5yZW5kZXJlci5vcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIHRoaXMudGV4dFJlbmRlcmVyID0gbmV3IFRleHRSZW5kZXJlcigpO1xuICAgIHRoaXMuc2x1Z2dlciA9IG5ldyBTbHVnZ2VyKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhdGljIFBhcnNlIE1ldGhvZFxuICAgKi9cbiAgc3RhdGljIHBhcnNlKHRva2Vucywgb3B0aW9ucykge1xuICAgIGNvbnN0IHBhcnNlciA9IG5ldyBQYXJzZXIob3B0aW9ucyk7XG4gICAgcmV0dXJuIHBhcnNlci5wYXJzZSh0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXRpYyBQYXJzZSBJbmxpbmUgTWV0aG9kXG4gICAqL1xuICBzdGF0aWMgcGFyc2VJbmxpbmUodG9rZW5zLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IFBhcnNlcihvcHRpb25zKTtcbiAgICByZXR1cm4gcGFyc2VyLnBhcnNlSW5saW5lKHRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgTG9vcFxuICAgKi9cbiAgcGFyc2UodG9rZW5zLCB0b3AgPSB0cnVlKSB7XG4gICAgbGV0IG91dCA9ICcnLFxuICAgICAgaSxcbiAgICAgIGosXG4gICAgICBrLFxuICAgICAgbDIsXG4gICAgICBsMyxcbiAgICAgIHJvdyxcbiAgICAgIGNlbGwsXG4gICAgICBoZWFkZXIsXG4gICAgICBib2R5LFxuICAgICAgdG9rZW4sXG4gICAgICBvcmRlcmVkLFxuICAgICAgc3RhcnQsXG4gICAgICBsb29zZSxcbiAgICAgIGl0ZW1Cb2R5LFxuICAgICAgaXRlbSxcbiAgICAgIGNoZWNrZWQsXG4gICAgICB0YXNrLFxuICAgICAgY2hlY2tib3gsXG4gICAgICByZXQ7XG5cbiAgICBjb25zdCBsID0gdG9rZW5zLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcblxuICAgICAgLy8gUnVuIGFueSByZW5kZXJlciBleHRlbnNpb25zXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4dGVuc2lvbnMgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMucmVuZGVyZXJzICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnJlbmRlcmVyc1t0b2tlbi50eXBlXSkge1xuICAgICAgICByZXQgPSB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5yZW5kZXJlcnNbdG9rZW4udHlwZV0uY2FsbCh7IHBhcnNlcjogdGhpcyB9LCB0b2tlbik7XG4gICAgICAgIGlmIChyZXQgIT09IGZhbHNlIHx8ICFbJ3NwYWNlJywgJ2hyJywgJ2hlYWRpbmcnLCAnY29kZScsICd0YWJsZScsICdibG9ja3F1b3RlJywgJ2xpc3QnLCAnaHRtbCcsICdwYXJhZ3JhcGgnLCAndGV4dCddLmluY2x1ZGVzKHRva2VuLnR5cGUpKSB7XG4gICAgICAgICAgb3V0ICs9IHJldCB8fCAnJztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnc3BhY2UnOiB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnaHInOiB7XG4gICAgICAgICAgb3V0ICs9IHRoaXMucmVuZGVyZXIuaHIoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdoZWFkaW5nJzoge1xuICAgICAgICAgIG91dCArPSB0aGlzLnJlbmRlcmVyLmhlYWRpbmcoXG4gICAgICAgICAgICB0aGlzLnBhcnNlSW5saW5lKHRva2VuLnRva2VucyksXG4gICAgICAgICAgICB0b2tlbi5kZXB0aCxcbiAgICAgICAgICAgIHVuZXNjYXBlKHRoaXMucGFyc2VJbmxpbmUodG9rZW4udG9rZW5zLCB0aGlzLnRleHRSZW5kZXJlcikpLFxuICAgICAgICAgICAgdGhpcy5zbHVnZ2VyKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdjb2RlJzoge1xuICAgICAgICAgIG91dCArPSB0aGlzLnJlbmRlcmVyLmNvZGUodG9rZW4udGV4dCxcbiAgICAgICAgICAgIHRva2VuLmxhbmcsXG4gICAgICAgICAgICB0b2tlbi5lc2NhcGVkKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICd0YWJsZSc6IHtcbiAgICAgICAgICBoZWFkZXIgPSAnJztcblxuICAgICAgICAgIC8vIGhlYWRlclxuICAgICAgICAgIGNlbGwgPSAnJztcbiAgICAgICAgICBsMiA9IHRva2VuLmhlYWRlci5sZW5ndGg7XG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IGwyOyBqKyspIHtcbiAgICAgICAgICAgIGNlbGwgKz0gdGhpcy5yZW5kZXJlci50YWJsZWNlbGwoXG4gICAgICAgICAgICAgIHRoaXMucGFyc2VJbmxpbmUodG9rZW4uaGVhZGVyW2pdLnRva2VucyksXG4gICAgICAgICAgICAgIHsgaGVhZGVyOiB0cnVlLCBhbGlnbjogdG9rZW4uYWxpZ25bal0gfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGVhZGVyICs9IHRoaXMucmVuZGVyZXIudGFibGVyb3coY2VsbCk7XG5cbiAgICAgICAgICBib2R5ID0gJyc7XG4gICAgICAgICAgbDIgPSB0b2tlbi5yb3dzLmxlbmd0aDtcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbDI7IGorKykge1xuICAgICAgICAgICAgcm93ID0gdG9rZW4ucm93c1tqXTtcblxuICAgICAgICAgICAgY2VsbCA9ICcnO1xuICAgICAgICAgICAgbDMgPSByb3cubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IGwzOyBrKyspIHtcbiAgICAgICAgICAgICAgY2VsbCArPSB0aGlzLnJlbmRlcmVyLnRhYmxlY2VsbChcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlSW5saW5lKHJvd1trXS50b2tlbnMpLFxuICAgICAgICAgICAgICAgIHsgaGVhZGVyOiBmYWxzZSwgYWxpZ246IHRva2VuLmFsaWduW2tdIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYm9keSArPSB0aGlzLnJlbmRlcmVyLnRhYmxlcm93KGNlbGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvdXQgKz0gdGhpcy5yZW5kZXJlci50YWJsZShoZWFkZXIsIGJvZHkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2Jsb2NrcXVvdGUnOiB7XG4gICAgICAgICAgYm9keSA9IHRoaXMucGFyc2UodG9rZW4udG9rZW5zKTtcbiAgICAgICAgICBvdXQgKz0gdGhpcy5yZW5kZXJlci5ibG9ja3F1b3RlKGJvZHkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2xpc3QnOiB7XG4gICAgICAgICAgb3JkZXJlZCA9IHRva2VuLm9yZGVyZWQ7XG4gICAgICAgICAgc3RhcnQgPSB0b2tlbi5zdGFydDtcbiAgICAgICAgICBsb29zZSA9IHRva2VuLmxvb3NlO1xuICAgICAgICAgIGwyID0gdG9rZW4uaXRlbXMubGVuZ3RoO1xuXG4gICAgICAgICAgYm9keSA9ICcnO1xuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsMjsgaisrKSB7XG4gICAgICAgICAgICBpdGVtID0gdG9rZW4uaXRlbXNbal07XG4gICAgICAgICAgICBjaGVja2VkID0gaXRlbS5jaGVja2VkO1xuICAgICAgICAgICAgdGFzayA9IGl0ZW0udGFzaztcblxuICAgICAgICAgICAgaXRlbUJvZHkgPSAnJztcbiAgICAgICAgICAgIGlmIChpdGVtLnRhc2spIHtcbiAgICAgICAgICAgICAgY2hlY2tib3ggPSB0aGlzLnJlbmRlcmVyLmNoZWNrYm94KGNoZWNrZWQpO1xuICAgICAgICAgICAgICBpZiAobG9vc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50b2tlbnMubGVuZ3RoID4gMCAmJiBpdGVtLnRva2Vuc1swXS50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgICAgICAgICAgICAgICAgaXRlbS50b2tlbnNbMF0udGV4dCA9IGNoZWNrYm94ICsgJyAnICsgaXRlbS50b2tlbnNbMF0udGV4dDtcbiAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnRva2Vuc1swXS50b2tlbnMgJiYgaXRlbS50b2tlbnNbMF0udG9rZW5zLmxlbmd0aCA+IDAgJiYgaXRlbS50b2tlbnNbMF0udG9rZW5zWzBdLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnRva2Vuc1swXS50b2tlbnNbMF0udGV4dCA9IGNoZWNrYm94ICsgJyAnICsgaXRlbS50b2tlbnNbMF0udG9rZW5zWzBdLnRleHQ7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGl0ZW0udG9rZW5zLnVuc2hpZnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGNoZWNrYm94XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbUJvZHkgKz0gY2hlY2tib3g7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXRlbUJvZHkgKz0gdGhpcy5wYXJzZShpdGVtLnRva2VucywgbG9vc2UpO1xuICAgICAgICAgICAgYm9keSArPSB0aGlzLnJlbmRlcmVyLmxpc3RpdGVtKGl0ZW1Cb2R5LCB0YXNrLCBjaGVja2VkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvdXQgKz0gdGhpcy5yZW5kZXJlci5saXN0KGJvZHksIG9yZGVyZWQsIHN0YXJ0KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdodG1sJzoge1xuICAgICAgICAgIC8vIFRPRE8gcGFyc2UgaW5saW5lIGNvbnRlbnQgaWYgcGFyYW1ldGVyIG1hcmtkb3duPTFcbiAgICAgICAgICBvdXQgKz0gdGhpcy5yZW5kZXJlci5odG1sKHRva2VuLnRleHQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3BhcmFncmFwaCc6IHtcbiAgICAgICAgICBvdXQgKz0gdGhpcy5yZW5kZXJlci5wYXJhZ3JhcGgodGhpcy5wYXJzZUlubGluZSh0b2tlbi50b2tlbnMpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICd0ZXh0Jzoge1xuICAgICAgICAgIGJvZHkgPSB0b2tlbi50b2tlbnMgPyB0aGlzLnBhcnNlSW5saW5lKHRva2VuLnRva2VucykgOiB0b2tlbi50ZXh0O1xuICAgICAgICAgIHdoaWxlIChpICsgMSA8IGwgJiYgdG9rZW5zW2kgKyAxXS50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHRva2VuID0gdG9rZW5zWysraV07XG4gICAgICAgICAgICBib2R5ICs9ICdcXG4nICsgKHRva2VuLnRva2VucyA/IHRoaXMucGFyc2VJbmxpbmUodG9rZW4udG9rZW5zKSA6IHRva2VuLnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvdXQgKz0gdG9wID8gdGhpcy5yZW5kZXJlci5wYXJhZ3JhcGgoYm9keSkgOiBib2R5O1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIGNvbnN0IGVyck1zZyA9ICdUb2tlbiB3aXRoIFwiJyArIHRva2VuLnR5cGUgKyAnXCIgdHlwZSB3YXMgbm90IGZvdW5kLic7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyTXNnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVyck1zZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBJbmxpbmUgVG9rZW5zXG4gICAqL1xuICBwYXJzZUlubGluZSh0b2tlbnMsIHJlbmRlcmVyKSB7XG4gICAgcmVuZGVyZXIgPSByZW5kZXJlciB8fCB0aGlzLnJlbmRlcmVyO1xuICAgIGxldCBvdXQgPSAnJyxcbiAgICAgIGksXG4gICAgICB0b2tlbixcbiAgICAgIHJldDtcblxuICAgIGNvbnN0IGwgPSB0b2tlbnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXG4gICAgICAvLyBSdW4gYW55IHJlbmRlcmVyIGV4dGVuc2lvbnNcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5yZW5kZXJlcnMgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMucmVuZGVyZXJzW3Rva2VuLnR5cGVdKSB7XG4gICAgICAgIHJldCA9IHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnJlbmRlcmVyc1t0b2tlbi50eXBlXS5jYWxsKHsgcGFyc2VyOiB0aGlzIH0sIHRva2VuKTtcbiAgICAgICAgaWYgKHJldCAhPT0gZmFsc2UgfHwgIVsnZXNjYXBlJywgJ2h0bWwnLCAnbGluaycsICdpbWFnZScsICdzdHJvbmcnLCAnZW0nLCAnY29kZXNwYW4nLCAnYnInLCAnZGVsJywgJ3RleHQnXS5pbmNsdWRlcyh0b2tlbi50eXBlKSkge1xuICAgICAgICAgIG91dCArPSByZXQgfHwgJyc7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3dpdGNoICh0b2tlbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2VzY2FwZSc6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIudGV4dCh0b2tlbi50ZXh0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdodG1sJzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci5odG1sKHRva2VuLnRleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2xpbmsnOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLmxpbmsodG9rZW4uaHJlZiwgdG9rZW4udGl0bGUsIHRoaXMucGFyc2VJbmxpbmUodG9rZW4udG9rZW5zLCByZW5kZXJlcikpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2ltYWdlJzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci5pbWFnZSh0b2tlbi5ocmVmLCB0b2tlbi50aXRsZSwgdG9rZW4udGV4dCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnc3Ryb25nJzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci5zdHJvbmcodGhpcy5wYXJzZUlubGluZSh0b2tlbi50b2tlbnMsIHJlbmRlcmVyKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnZW0nOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLmVtKHRoaXMucGFyc2VJbmxpbmUodG9rZW4udG9rZW5zLCByZW5kZXJlcikpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2NvZGVzcGFuJzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci5jb2Rlc3Bhbih0b2tlbi50ZXh0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdicic6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIuYnIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdkZWwnOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLmRlbCh0aGlzLnBhcnNlSW5saW5lKHRva2VuLnRva2VucywgcmVuZGVyZXIpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICd0ZXh0Jzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci50ZXh0KHRva2VuLnRleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBjb25zdCBlcnJNc2cgPSAnVG9rZW4gd2l0aCBcIicgKyB0b2tlbi50eXBlICsgJ1wiIHR5cGUgd2FzIG5vdCBmb3VuZC4nO1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVyck1zZyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJNc2cpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0O1xuICB9XG59XG5cbmNsYXNzIEhvb2tzIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHM7XG4gIH1cblxuICBzdGF0aWMgcGFzc1Rocm91Z2hIb29rcyA9IG5ldyBTZXQoW1xuICAgICdwcmVwcm9jZXNzJyxcbiAgICAncG9zdHByb2Nlc3MnXG4gIF0pO1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzIG1hcmtkb3duIGJlZm9yZSBtYXJrZWRcbiAgICovXG4gIHByZXByb2Nlc3MobWFya2Rvd24pIHtcbiAgICByZXR1cm4gbWFya2Rvd247XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyBIVE1MIGFmdGVyIG1hcmtlZCBpcyBmaW5pc2hlZFxuICAgKi9cbiAgcG9zdHByb2Nlc3MoaHRtbCkge1xuICAgIHJldHVybiBodG1sO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9uRXJyb3Ioc2lsZW50LCBhc3luYywgY2FsbGJhY2spIHtcbiAgcmV0dXJuIChlKSA9PiB7XG4gICAgZS5tZXNzYWdlICs9ICdcXG5QbGVhc2UgcmVwb3J0IHRoaXMgdG8gaHR0cHM6Ly9naXRodWIuY29tL21hcmtlZGpzL21hcmtlZC4nO1xuXG4gICAgaWYgKHNpbGVudCkge1xuICAgICAgY29uc3QgbXNnID0gJzxwPkFuIGVycm9yIG9jY3VycmVkOjwvcD48cHJlPidcbiAgICAgICAgKyBlc2NhcGUoZS5tZXNzYWdlICsgJycsIHRydWUpXG4gICAgICAgICsgJzwvcHJlPic7XG4gICAgICBpZiAoYXN5bmMpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShtc2cpO1xuICAgICAgfVxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIG1zZyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtc2c7XG4gICAgfVxuXG4gICAgaWYgKGFzeW5jKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgfVxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRocm93IGU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlTWFya2Rvd24obGV4ZXIsIHBhcnNlcikge1xuICByZXR1cm4gKHNyYywgb3B0LCBjYWxsYmFjaykgPT4ge1xuICAgIGlmICh0eXBlb2Ygb3B0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdDtcbiAgICAgIG9wdCA9IG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgb3JpZ09wdCA9IHsgLi4ub3B0IH07XG4gICAgb3B0ID0geyAuLi5tYXJrZWQuZGVmYXVsdHMsIC4uLm9yaWdPcHQgfTtcbiAgICBjb25zdCB0aHJvd0Vycm9yID0gb25FcnJvcihvcHQuc2lsZW50LCBvcHQuYXN5bmMsIGNhbGxiYWNrKTtcblxuICAgIC8vIHRocm93IGVycm9yIGluIGNhc2Ugb2Ygbm9uIHN0cmluZyBpbnB1dFxuICAgIGlmICh0eXBlb2Ygc3JjID09PSAndW5kZWZpbmVkJyB8fCBzcmMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd0Vycm9yKG5ldyBFcnJvcignbWFya2VkKCk6IGlucHV0IHBhcmFtZXRlciBpcyB1bmRlZmluZWQgb3IgbnVsbCcpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzcmMgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gdGhyb3dFcnJvcihuZXcgRXJyb3IoJ21hcmtlZCgpOiBpbnB1dCBwYXJhbWV0ZXIgaXMgb2YgdHlwZSAnXG4gICAgICAgICsgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNyYykgKyAnLCBzdHJpbmcgZXhwZWN0ZWQnKSk7XG4gICAgfVxuXG4gICAgY2hlY2tTYW5pdGl6ZURlcHJlY2F0aW9uKG9wdCk7XG5cbiAgICBpZiAob3B0Lmhvb2tzKSB7XG4gICAgICBvcHQuaG9va3Mub3B0aW9ucyA9IG9wdDtcbiAgICB9XG5cbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IGhpZ2hsaWdodCA9IG9wdC5oaWdobGlnaHQ7XG4gICAgICBsZXQgdG9rZW5zO1xuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAob3B0Lmhvb2tzKSB7XG4gICAgICAgICAgc3JjID0gb3B0Lmhvb2tzLnByZXByb2Nlc3Moc3JjKTtcbiAgICAgICAgfVxuICAgICAgICB0b2tlbnMgPSBsZXhlcihzcmMsIG9wdCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB0aHJvd0Vycm9yKGUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkb25lID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGxldCBvdXQ7XG5cbiAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKG9wdC53YWxrVG9rZW5zKSB7XG4gICAgICAgICAgICAgIG1hcmtlZC53YWxrVG9rZW5zKHRva2Vucywgb3B0LndhbGtUb2tlbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0ID0gcGFyc2VyKHRva2Vucywgb3B0KTtcbiAgICAgICAgICAgIGlmIChvcHQuaG9va3MpIHtcbiAgICAgICAgICAgICAgb3V0ID0gb3B0Lmhvb2tzLnBvc3Rwcm9jZXNzKG91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZXJyID0gZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvcHQuaGlnaGxpZ2h0ID0gaGlnaGxpZ2h0O1xuXG4gICAgICAgIHJldHVybiBlcnJcbiAgICAgICAgICA/IHRocm93RXJyb3IoZXJyKVxuICAgICAgICAgIDogY2FsbGJhY2sobnVsbCwgb3V0KTtcbiAgICAgIH07XG5cbiAgICAgIGlmICghaGlnaGxpZ2h0IHx8IGhpZ2hsaWdodC5sZW5ndGggPCAzKSB7XG4gICAgICAgIHJldHVybiBkb25lKCk7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBvcHQuaGlnaGxpZ2h0O1xuXG4gICAgICBpZiAoIXRva2Vucy5sZW5ndGgpIHJldHVybiBkb25lKCk7XG5cbiAgICAgIGxldCBwZW5kaW5nID0gMDtcbiAgICAgIG1hcmtlZC53YWxrVG9rZW5zKHRva2VucywgZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdjb2RlJykge1xuICAgICAgICAgIHBlbmRpbmcrKztcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGhpZ2hsaWdodCh0b2tlbi50ZXh0LCB0b2tlbi5sYW5nLCBmdW5jdGlvbihlcnIsIGNvZGUpIHtcbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb25lKGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGNvZGUgIT0gbnVsbCAmJiBjb2RlICE9PSB0b2tlbi50ZXh0KSB7XG4gICAgICAgICAgICAgICAgdG9rZW4udGV4dCA9IGNvZGU7XG4gICAgICAgICAgICAgICAgdG9rZW4uZXNjYXBlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBwZW5kaW5nLS07XG4gICAgICAgICAgICAgIGlmIChwZW5kaW5nID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChwZW5kaW5nID09PSAwKSB7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvcHQuYXN5bmMpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUob3B0Lmhvb2tzID8gb3B0Lmhvb2tzLnByZXByb2Nlc3Moc3JjKSA6IHNyYylcbiAgICAgICAgLnRoZW4oc3JjID0+IGxleGVyKHNyYywgb3B0KSlcbiAgICAgICAgLnRoZW4odG9rZW5zID0+IG9wdC53YWxrVG9rZW5zID8gUHJvbWlzZS5hbGwobWFya2VkLndhbGtUb2tlbnModG9rZW5zLCBvcHQud2Fsa1Rva2VucykpLnRoZW4oKCkgPT4gdG9rZW5zKSA6IHRva2VucylcbiAgICAgICAgLnRoZW4odG9rZW5zID0+IHBhcnNlcih0b2tlbnMsIG9wdCkpXG4gICAgICAgIC50aGVuKGh0bWwgPT4gb3B0Lmhvb2tzID8gb3B0Lmhvb2tzLnBvc3Rwcm9jZXNzKGh0bWwpIDogaHRtbClcbiAgICAgICAgLmNhdGNoKHRocm93RXJyb3IpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAob3B0Lmhvb2tzKSB7XG4gICAgICAgIHNyYyA9IG9wdC5ob29rcy5wcmVwcm9jZXNzKHNyYyk7XG4gICAgICB9XG4gICAgICBjb25zdCB0b2tlbnMgPSBsZXhlcihzcmMsIG9wdCk7XG4gICAgICBpZiAob3B0LndhbGtUb2tlbnMpIHtcbiAgICAgICAgbWFya2VkLndhbGtUb2tlbnModG9rZW5zLCBvcHQud2Fsa1Rva2Vucyk7XG4gICAgICB9XG4gICAgICBsZXQgaHRtbCA9IHBhcnNlcih0b2tlbnMsIG9wdCk7XG4gICAgICBpZiAob3B0Lmhvb2tzKSB7XG4gICAgICAgIGh0bWwgPSBvcHQuaG9va3MucG9zdHByb2Nlc3MoaHRtbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaHRtbDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gdGhyb3dFcnJvcihlKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogTWFya2VkXG4gKi9cbmZ1bmN0aW9uIG1hcmtlZChzcmMsIG9wdCwgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHBhcnNlTWFya2Rvd24oTGV4ZXIubGV4LCBQYXJzZXIucGFyc2UpKHNyYywgb3B0LCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICogT3B0aW9uc1xuICovXG5cbm1hcmtlZC5vcHRpb25zID1cbm1hcmtlZC5zZXRPcHRpb25zID0gZnVuY3Rpb24ob3B0KSB7XG4gIG1hcmtlZC5kZWZhdWx0cyA9IHsgLi4ubWFya2VkLmRlZmF1bHRzLCAuLi5vcHQgfTtcbiAgY2hhbmdlRGVmYXVsdHMobWFya2VkLmRlZmF1bHRzKTtcbiAgcmV0dXJuIG1hcmtlZDtcbn07XG5cbm1hcmtlZC5nZXREZWZhdWx0cyA9IGdldERlZmF1bHRzO1xuXG5tYXJrZWQuZGVmYXVsdHMgPSBkZWZhdWx0cztcblxuLyoqXG4gKiBVc2UgRXh0ZW5zaW9uXG4gKi9cblxubWFya2VkLnVzZSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgY29uc3QgZXh0ZW5zaW9ucyA9IG1hcmtlZC5kZWZhdWx0cy5leHRlbnNpb25zIHx8IHsgcmVuZGVyZXJzOiB7fSwgY2hpbGRUb2tlbnM6IHt9IH07XG5cbiAgYXJncy5mb3JFYWNoKChwYWNrKSA9PiB7XG4gICAgLy8gY29weSBvcHRpb25zIHRvIG5ldyBvYmplY3RcbiAgICBjb25zdCBvcHRzID0geyAuLi5wYWNrIH07XG5cbiAgICAvLyBzZXQgYXN5bmMgdG8gdHJ1ZSBpZiBpdCB3YXMgc2V0IHRvIHRydWUgYmVmb3JlXG4gICAgb3B0cy5hc3luYyA9IG1hcmtlZC5kZWZhdWx0cy5hc3luYyB8fCBvcHRzLmFzeW5jIHx8IGZhbHNlO1xuXG4gICAgLy8gPT0tLSBQYXJzZSBcImFkZG9uXCIgZXh0ZW5zaW9ucyAtLT09IC8vXG4gICAgaWYgKHBhY2suZXh0ZW5zaW9ucykge1xuICAgICAgcGFjay5leHRlbnNpb25zLmZvckVhY2goKGV4dCkgPT4ge1xuICAgICAgICBpZiAoIWV4dC5uYW1lKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdleHRlbnNpb24gbmFtZSByZXF1aXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHQucmVuZGVyZXIpIHsgLy8gUmVuZGVyZXIgZXh0ZW5zaW9uc1xuICAgICAgICAgIGNvbnN0IHByZXZSZW5kZXJlciA9IGV4dGVuc2lvbnMucmVuZGVyZXJzW2V4dC5uYW1lXTtcbiAgICAgICAgICBpZiAocHJldlJlbmRlcmVyKSB7XG4gICAgICAgICAgICAvLyBSZXBsYWNlIGV4dGVuc2lvbiB3aXRoIGZ1bmMgdG8gcnVuIG5ldyBleHRlbnNpb24gYnV0IGZhbGwgYmFjayBpZiBmYWxzZVxuICAgICAgICAgICAgZXh0ZW5zaW9ucy5yZW5kZXJlcnNbZXh0Lm5hbWVdID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgICAgICBsZXQgcmV0ID0gZXh0LnJlbmRlcmVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldCA9IHByZXZSZW5kZXJlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXh0ZW5zaW9ucy5yZW5kZXJlcnNbZXh0Lm5hbWVdID0gZXh0LnJlbmRlcmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0LnRva2VuaXplcikgeyAvLyBUb2tlbml6ZXIgRXh0ZW5zaW9uc1xuICAgICAgICAgIGlmICghZXh0LmxldmVsIHx8IChleHQubGV2ZWwgIT09ICdibG9jaycgJiYgZXh0LmxldmVsICE9PSAnaW5saW5lJykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImV4dGVuc2lvbiBsZXZlbCBtdXN0IGJlICdibG9jaycgb3IgJ2lubGluZSdcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChleHRlbnNpb25zW2V4dC5sZXZlbF0pIHtcbiAgICAgICAgICAgIGV4dGVuc2lvbnNbZXh0LmxldmVsXS51bnNoaWZ0KGV4dC50b2tlbml6ZXIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHRlbnNpb25zW2V4dC5sZXZlbF0gPSBbZXh0LnRva2VuaXplcl07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChleHQuc3RhcnQpIHsgLy8gRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHN0YXJ0IG9mIHRva2VuXG4gICAgICAgICAgICBpZiAoZXh0LmxldmVsID09PSAnYmxvY2snKSB7XG4gICAgICAgICAgICAgIGlmIChleHRlbnNpb25zLnN0YXJ0QmxvY2spIHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zLnN0YXJ0QmxvY2sucHVzaChleHQuc3RhcnQpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnMuc3RhcnRCbG9jayA9IFtleHQuc3RhcnRdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4dC5sZXZlbCA9PT0gJ2lubGluZScpIHtcbiAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbnMuc3RhcnRJbmxpbmUpIHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zLnN0YXJ0SW5saW5lLnB1c2goZXh0LnN0YXJ0KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zLnN0YXJ0SW5saW5lID0gW2V4dC5zdGFydF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dC5jaGlsZFRva2VucykgeyAvLyBDaGlsZCB0b2tlbnMgdG8gYmUgdmlzaXRlZCBieSB3YWxrVG9rZW5zXG4gICAgICAgICAgZXh0ZW5zaW9ucy5jaGlsZFRva2Vuc1tleHQubmFtZV0gPSBleHQuY2hpbGRUb2tlbnM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgb3B0cy5leHRlbnNpb25zID0gZXh0ZW5zaW9ucztcbiAgICB9XG5cbiAgICAvLyA9PS0tIFBhcnNlIFwib3ZlcndyaXRlXCIgZXh0ZW5zaW9ucyAtLT09IC8vXG4gICAgaWYgKHBhY2sucmVuZGVyZXIpIHtcbiAgICAgIGNvbnN0IHJlbmRlcmVyID0gbWFya2VkLmRlZmF1bHRzLnJlbmRlcmVyIHx8IG5ldyBSZW5kZXJlcigpO1xuICAgICAgZm9yIChjb25zdCBwcm9wIGluIHBhY2sucmVuZGVyZXIpIHtcbiAgICAgICAgY29uc3QgcHJldlJlbmRlcmVyID0gcmVuZGVyZXJbcHJvcF07XG4gICAgICAgIC8vIFJlcGxhY2UgcmVuZGVyZXIgd2l0aCBmdW5jIHRvIHJ1biBleHRlbnNpb24sIGJ1dCBmYWxsIGJhY2sgaWYgZmFsc2VcbiAgICAgICAgcmVuZGVyZXJbcHJvcF0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgIGxldCByZXQgPSBwYWNrLnJlbmRlcmVyW3Byb3BdLmFwcGx5KHJlbmRlcmVyLCBhcmdzKTtcbiAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0ID0gcHJldlJlbmRlcmVyLmFwcGx5KHJlbmRlcmVyLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIG9wdHMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB9XG4gICAgaWYgKHBhY2sudG9rZW5pemVyKSB7XG4gICAgICBjb25zdCB0b2tlbml6ZXIgPSBtYXJrZWQuZGVmYXVsdHMudG9rZW5pemVyIHx8IG5ldyBUb2tlbml6ZXIoKTtcbiAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBwYWNrLnRva2VuaXplcikge1xuICAgICAgICBjb25zdCBwcmV2VG9rZW5pemVyID0gdG9rZW5pemVyW3Byb3BdO1xuICAgICAgICAvLyBSZXBsYWNlIHRva2VuaXplciB3aXRoIGZ1bmMgdG8gcnVuIGV4dGVuc2lvbiwgYnV0IGZhbGwgYmFjayBpZiBmYWxzZVxuICAgICAgICB0b2tlbml6ZXJbcHJvcF0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgIGxldCByZXQgPSBwYWNrLnRva2VuaXplcltwcm9wXS5hcHBseSh0b2tlbml6ZXIsIGFyZ3MpO1xuICAgICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXQgPSBwcmV2VG9rZW5pemVyLmFwcGx5KHRva2VuaXplciwgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBvcHRzLnRva2VuaXplciA9IHRva2VuaXplcjtcbiAgICB9XG5cbiAgICAvLyA9PS0tIFBhcnNlIEhvb2tzIGV4dGVuc2lvbnMgLS09PSAvL1xuICAgIGlmIChwYWNrLmhvb2tzKSB7XG4gICAgICBjb25zdCBob29rcyA9IG1hcmtlZC5kZWZhdWx0cy5ob29rcyB8fCBuZXcgSG9va3MoKTtcbiAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBwYWNrLmhvb2tzKSB7XG4gICAgICAgIGNvbnN0IHByZXZIb29rID0gaG9va3NbcHJvcF07XG4gICAgICAgIGlmIChIb29rcy5wYXNzVGhyb3VnaEhvb2tzLmhhcyhwcm9wKSkge1xuICAgICAgICAgIGhvb2tzW3Byb3BdID0gKGFyZykgPT4ge1xuICAgICAgICAgICAgaWYgKG1hcmtlZC5kZWZhdWx0cy5hc3luYykge1xuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHBhY2suaG9va3NbcHJvcF0uY2FsbChob29rcywgYXJnKSkudGhlbihyZXQgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2SG9vay5jYWxsKGhvb2tzLCByZXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmV0ID0gcGFjay5ob29rc1twcm9wXS5jYWxsKGhvb2tzLCBhcmcpO1xuICAgICAgICAgICAgcmV0dXJuIHByZXZIb29rLmNhbGwoaG9va3MsIHJldCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBob29rc1twcm9wXSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmV0ID0gcGFjay5ob29rc1twcm9wXS5hcHBseShob29rcywgYXJncyk7XG4gICAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICByZXQgPSBwcmV2SG9vay5hcHBseShob29rcywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9wdHMuaG9va3MgPSBob29rcztcbiAgICB9XG5cbiAgICAvLyA9PS0tIFBhcnNlIFdhbGtUb2tlbnMgZXh0ZW5zaW9ucyAtLT09IC8vXG4gICAgaWYgKHBhY2sud2Fsa1Rva2Vucykge1xuICAgICAgY29uc3Qgd2Fsa1Rva2VucyA9IG1hcmtlZC5kZWZhdWx0cy53YWxrVG9rZW5zO1xuICAgICAgb3B0cy53YWxrVG9rZW5zID0gZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgbGV0IHZhbHVlcyA9IFtdO1xuICAgICAgICB2YWx1ZXMucHVzaChwYWNrLndhbGtUb2tlbnMuY2FsbCh0aGlzLCB0b2tlbikpO1xuICAgICAgICBpZiAod2Fsa1Rva2Vucykge1xuICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5jb25jYXQod2Fsa1Rva2Vucy5jYWxsKHRoaXMsIHRva2VuKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgIH07XG4gICAgfVxuXG4gICAgbWFya2VkLnNldE9wdGlvbnMob3B0cyk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBSdW4gY2FsbGJhY2sgZm9yIGV2ZXJ5IHRva2VuXG4gKi9cblxubWFya2VkLndhbGtUb2tlbnMgPSBmdW5jdGlvbih0b2tlbnMsIGNhbGxiYWNrKSB7XG4gIGxldCB2YWx1ZXMgPSBbXTtcbiAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcbiAgICB2YWx1ZXMgPSB2YWx1ZXMuY29uY2F0KGNhbGxiYWNrLmNhbGwobWFya2VkLCB0b2tlbikpO1xuICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAgICAgY2FzZSAndGFibGUnOiB7XG4gICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiB0b2tlbi5oZWFkZXIpIHtcbiAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuY29uY2F0KG1hcmtlZC53YWxrVG9rZW5zKGNlbGwudG9rZW5zLCBjYWxsYmFjaykpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgcm93IG9mIHRva2VuLnJvd3MpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNlbGwgb2Ygcm93KSB7XG4gICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuY29uY2F0KG1hcmtlZC53YWxrVG9rZW5zKGNlbGwudG9rZW5zLCBjYWxsYmFjaykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2xpc3QnOiB7XG4gICAgICAgIHZhbHVlcyA9IHZhbHVlcy5jb25jYXQobWFya2VkLndhbGtUb2tlbnModG9rZW4uaXRlbXMsIGNhbGxiYWNrKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBpZiAobWFya2VkLmRlZmF1bHRzLmV4dGVuc2lvbnMgJiYgbWFya2VkLmRlZmF1bHRzLmV4dGVuc2lvbnMuY2hpbGRUb2tlbnMgJiYgbWFya2VkLmRlZmF1bHRzLmV4dGVuc2lvbnMuY2hpbGRUb2tlbnNbdG9rZW4udHlwZV0pIHsgLy8gV2FsayBhbnkgZXh0ZW5zaW9uc1xuICAgICAgICAgIG1hcmtlZC5kZWZhdWx0cy5leHRlbnNpb25zLmNoaWxkVG9rZW5zW3Rva2VuLnR5cGVdLmZvckVhY2goZnVuY3Rpb24oY2hpbGRUb2tlbnMpIHtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5jb25jYXQobWFya2VkLndhbGtUb2tlbnModG9rZW5bY2hpbGRUb2tlbnNdLCBjYWxsYmFjaykpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHRva2VuLnRva2Vucykge1xuICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5jb25jYXQobWFya2VkLndhbGtUb2tlbnModG9rZW4udG9rZW5zLCBjYWxsYmFjaykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZXM7XG59O1xuXG4vKipcbiAqIFBhcnNlIElubGluZVxuICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICovXG5tYXJrZWQucGFyc2VJbmxpbmUgPSBwYXJzZU1hcmtkb3duKExleGVyLmxleElubGluZSwgUGFyc2VyLnBhcnNlSW5saW5lKTtcblxuLyoqXG4gKiBFeHBvc2VcbiAqL1xubWFya2VkLlBhcnNlciA9IFBhcnNlcjtcbm1hcmtlZC5wYXJzZXIgPSBQYXJzZXIucGFyc2U7XG5tYXJrZWQuUmVuZGVyZXIgPSBSZW5kZXJlcjtcbm1hcmtlZC5UZXh0UmVuZGVyZXIgPSBUZXh0UmVuZGVyZXI7XG5tYXJrZWQuTGV4ZXIgPSBMZXhlcjtcbm1hcmtlZC5sZXhlciA9IExleGVyLmxleDtcbm1hcmtlZC5Ub2tlbml6ZXIgPSBUb2tlbml6ZXI7XG5tYXJrZWQuU2x1Z2dlciA9IFNsdWdnZXI7XG5tYXJrZWQuSG9va3MgPSBIb29rcztcbm1hcmtlZC5wYXJzZSA9IG1hcmtlZDtcblxuY29uc3Qgb3B0aW9ucyA9IG1hcmtlZC5vcHRpb25zO1xuY29uc3Qgc2V0T3B0aW9ucyA9IG1hcmtlZC5zZXRPcHRpb25zO1xuY29uc3QgdXNlID0gbWFya2VkLnVzZTtcbmNvbnN0IHdhbGtUb2tlbnMgPSBtYXJrZWQud2Fsa1Rva2VucztcbmNvbnN0IHBhcnNlSW5saW5lID0gbWFya2VkLnBhcnNlSW5saW5lO1xuY29uc3QgcGFyc2UgPSBtYXJrZWQ7XG5jb25zdCBwYXJzZXIgPSBQYXJzZXIucGFyc2U7XG5jb25zdCBsZXhlciA9IExleGVyLmxleDtcblxuZXhwb3J0IHsgSG9va3MsIExleGVyLCBQYXJzZXIsIFJlbmRlcmVyLCBTbHVnZ2VyLCBUZXh0UmVuZGVyZXIsIFRva2VuaXplciwgZGVmYXVsdHMsIGdldERlZmF1bHRzLCBsZXhlciwgbWFya2VkLCBvcHRpb25zLCBwYXJzZSwgcGFyc2VJbmxpbmUsIHBhcnNlciwgc2V0T3B0aW9ucywgdXNlLCB3YWxrVG9rZW5zIH07XG4iLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQk1PU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgY29sb3JUb0hleCB9IGZyb20gXCIuLi91dGlscy9Db2xvckNvbnZlcnRlclwiO1xuaW1wb3J0IHsgYWRkTWVzc2FnZSwgZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04sIGdldEFjdGl2ZUZpbGVDb250ZW50LCByZW1vdmVNZXNzYWdlVGhyZWFkIH0gZnJvbSBcIi4uL3ZpZXdcIjtcbmltcG9ydCBCTU9HUFQgZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBmZXRjaE1vZGVsUmVuYW1lVGl0bGUsIGdldEFib3J0Q29udHJvbGxlciB9IGZyb20gJy4vRmV0Y2hNb2RlbCc7XG5cbi8vIENvbW1hbmRzXG5leHBvcnQgZnVuY3Rpb24gZXhlY3V0ZUNvbW1hbmQoaW5wdXQ6IHN0cmluZywgc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBjb21tYW5kID0gaW5wdXQuc3BsaXQoJyAnKVswXTsgLy8gR2V0IHRoZSBmaXJzdCB3b3JkIGZyb20gdGhlIGlucHV0XG4gIFxuICBzd2l0Y2ggKGNvbW1hbmQpIHtcbiAgICAgIGNhc2UgJy9jb21tYW5kcyc6XG4gICAgICBjYXNlICcvaGVscCc6XG4gICAgICAgICAgY29tbWFuZEhlbHAoc2V0dGluZ3MpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnL21vZGVsJzpcbiAgICAgICAgICByZXR1cm4gY29tbWFuZE1vZGVsKGlucHV0LCBzZXR0aW5ncywgcGx1Z2luKTtcbiAgICAgIGNhc2UgJy9saXN0JzpcbiAgICAgICAgICByZXR1cm4gY29tbWFuZExpc3RNb2RlbHMoaW5wdXQsIHNldHRpbmdzLCBwbHVnaW4pO1xuICAgICAgY2FzZSAnL3JlZmVyZW5jZSc6XG4gICAgICBjYXNlICcvcmVmJzpcbiAgICAgICAgICBjb21tYW5kUmVmZXJlbmNlKGlucHV0LCBzZXR0aW5ncywgcGx1Z2luKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy90ZW1wJzpcbiAgICAgICAgICBjb21tYW5kVGVtcGVyYXR1cmUoaW5wdXQsIHNldHRpbmdzLCBwbHVnaW4pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnL21heHRva2Vucyc6XG4gICAgICAgICAgY29tbWFuZE1heFRva2VucyhpbnB1dCwgc2V0dGluZ3MsIHBsdWdpbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcvc3lzdGVtJzpcbiAgICAgICAgICBjb21tYW5kU3lzdGVtKGlucHV0LCBzZXR0aW5ncywgcGx1Z2luKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9hcHBlbmQnOlxuICAgICAgICAgIGNvbW1hbmRBcHBlbmQoc2V0dGluZ3MpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnL3NhdmUnOlxuICAgICAgICAgIGNvbW1hbmRTYXZlKHNldHRpbmdzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9jbGVhcic6XG4gICAgICBjYXNlICcvYyc6XG4gICAgICAgICAgcmVtb3ZlTWVzc2FnZVRocmVhZCgwKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9zdG9wJzpcbiAgICAgIGNhc2UgJy9zJzpcbiAgICAgICAgICBjb21tYW5kU3RvcCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb21tYW5kRmFsc2Uoc2V0dGluZ3MsIHBsdWdpbik7XG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGFuZCBhcHBlbmQgYSBib3QgbWVzc2FnZVxuZnVuY3Rpb24gY3JlYXRlQm90TWVzc2FnZShjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZXNzYWdlQ29udGFpbmVyXCIpO1xuICBjb25zdCBib3RNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgYm90TWVzc2FnZS5jbGFzc0xpc3QuYWRkKFwiYm90TWVzc2FnZVwiKTtcbiAgYm90TWVzc2FnZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclRvSGV4KFxuICAgIGN1cnJlbnRTZXR0aW5ncy5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yIHx8XG4gICAgICBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKClcbiAgKTtcbiAgbWVzc2FnZUNvbnRhaW5lcj8uYXBwZW5kQ2hpbGQoYm90TWVzc2FnZSk7XG5cbiAgY29uc3QgYm90TmFtZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgYm90TmFtZVNwYW4udGV4dENvbnRlbnQgPVxuICAgIGN1cnJlbnRTZXR0aW5ncy5jaGF0Ym90TmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLmNoYXRib3ROYW1lO1xuICAvLyBib3ROYW1lU3Bhbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImNoYXRib3ROYW1lXCIpO1xuICBib3ROYW1lU3Bhbi5jbGFzc05hbWUgPSBcImNoYXRib3ROYW1lXCI7XG4gIGJvdE1lc3NhZ2UuYXBwZW5kQ2hpbGQoYm90TmFtZVNwYW4pO1xuXG4gIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG1lc3NhZ2VCbG9jay5jbGFzc0xpc3QuYWRkKFwibWVzc2FnZUJsb2NrXCIpO1xuICBib3RNZXNzYWdlLmFwcGVuZENoaWxkKG1lc3NhZ2VCbG9jayk7XG5cbiAgcmV0dXJuIG1lc3NhZ2VCbG9jaztcbn1cblxuLy8gRnVuY3Rpb24gdG8gZGlzcGxheSB0aGUgbWVzc2FnZSBpbiB0aGUgQ2hhdGJvdFxuZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2UobWVzc2FnZUJsb2NrOiBIVE1MRGl2RWxlbWVudCwgbWVzc2FnZUh0bWw6IHN0cmluZywgY3VycmVudFNldHRpbmdzOiBCTU9TZXR0aW5ncykge1xuICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZXNzYWdlQ29udGFpbmVyXCIpO1xuXG4gIGlmIChtZXNzYWdlQ29udGFpbmVyKSB7XG4gICAgY29uc3QgYm90TWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm90TWVzc2FnZVwiKTtcbiAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuXG4gICAgY29uc3QgbWVzc2FnZUJsb2NrMiA9IGxhc3RCb3RNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZUJsb2NrXCIpO1xuXG4gICAgaWYgKG1lc3NhZ2VCbG9jazIpIHtcbiAgICAgIG1lc3NhZ2VCbG9jazIuaW5uZXJIVE1MID0gbWVzc2FnZUh0bWw7XG4gICAgICBhZGRNZXNzYWdlKG1lc3NhZ2VCbG9jay5pbm5lckhUTUwsICdib3RNZXNzYWdlJywgY3VycmVudFNldHRpbmdzKTtcblxuICAgICAgbGFzdEJvdE1lc3NhZ2UuYXBwZW5kQ2hpbGQobWVzc2FnZUJsb2NrMik7XG4gICAgICBsYXN0Qm90TWVzc2FnZS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21tYW5kRmFsc2UoY3VycmVudFNldHRpbmdzOiBCTU9TZXR0aW5ncywgcGx1Z2luOiBCTU9HUFQpIHtcbiAgY29uc3QgbWVzc2FnZUJsb2NrID0gY3JlYXRlQm90TWVzc2FnZShjdXJyZW50U2V0dGluZ3MpO1xuXG4gIGNvbnN0IGZvcm1hdHRlZFNldHRpbmdzID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICAgICAgPHA+PHN0cm9uZz5Db21tYW5kIG5vdCByZWNvZ25pemVkLjwvc3Ryb25nPjwvcD5cbiAgICAgIDwvZGl2PlxuICBgO1xuXG4gIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VCbG9jaywgZm9ybWF0dGVkU2V0dGluZ3MsIGN1cnJlbnRTZXR0aW5ncyk7XG4gIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgLy8gbmV3IE5vdGljZShcIkludmFsaWQgY29tbWFuZC5cIik7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT0gQ09NTUFORCBGVU5DVElPTlMgPT09PT09PT09PT09PT09PT09PVxuXG4vLyBgL2hlbHBgIGZvciBoZWxwIGNvbW1hbmRzXG5leHBvcnQgZnVuY3Rpb24gY29tbWFuZEhlbHAoY3VycmVudFNldHRpbmdzOiBCTU9TZXR0aW5ncykge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgY29uc3QgZm9ybWF0dGVkU2V0dGluZ3MgPSBgXG4gICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICA8aDI+Q29tbWFuZHM8L2gyPlxuICAgICAgPHA+PGNvZGU+L2xpc3Q8L2NvZGU+IC0gTGlzdCBtb2RlbHMuPC9wPlxuICAgICAgPHA+PGNvZGU+L21vZGVsIFwiW01PREVMLU5BTUVdXCIgb3IgW1ZBTFVFXTwvY29kZT4gLSBDaGFuZ2UgbW9kZWwuPC9wPlxuICAgICAgPHA+PGNvZGU+L3N5c3RlbSBcIltQUk9NUFRdXCI8L2NvZGU+IC0gQ2hhbmdlIHN5c3RlbSBzZXR0aW5nLjwvcD5cbiAgICAgIDxwPjxjb2RlPi9tYXh0b2tlbnMgW1ZBTFVFXTwvY29kZT4gLSBTZXQgbWF4IHRva2Vucy48L3A+XG4gICAgICA8cD48Y29kZT4vdGVtcCBbVkFMVUVdPC9jb2RlPiAtIENoYW5nZSB0ZW1wZXJhdHVyZSByYW5nZSAwIGZyb20gdG8gMS48L3A+XG4gICAgICA8cD48Y29kZT4vcmVmIG9uIHwgb2ZmPC9jb2RlPiAtIFR1cm4gb24gb3Igb2ZmIFwicmVmZXJlbmNlIGN1cnJlbnQgbm90ZVwiLjwvcD5cbiAgICAgIDxwPjxjb2RlPi9hcHBlbmQ8L2NvZGU+IC0gQXBwZW5kIGN1cnJlbnQgY2hhdCBoaXN0b3J5IHRvIGN1cnJlbnQgYWN0aXZlIG5vdGUuPC9wPlxuICAgICAgPHA+PGNvZGU+L3NhdmU8L2NvZGU+IC0gU2F2ZSBjdXJyZW50IGNoYXQgaGlzdG9yeSB0byBhIG5vdGUuPC9wPlxuICAgICAgPHA+PGNvZGU+L2NsZWFyPC9jb2RlPiBvciA8Y29kZT4vYzwvY29kZT4gLSBDbGVhciBjaGF0IGhpc3RvcnkuPC9wPlxuICAgICAgPHA+PGNvZGU+L3N0b3A8L2NvZGU+IG9yIDxjb2RlPi9zPC9jb2RlPiAtIFtTVFJFQU1JTkcgTU9ERUxTIE9OTFldOiBTdG9wIGZldGNoaW5nIHJlc3BvbnNlLjwvcD5cbiAgICA8L2Rpdj5cbiAgYDtcblxuICBkaXNwbGF5TWVzc2FnZShtZXNzYWdlQmxvY2ssIGZvcm1hdHRlZFNldHRpbmdzLCBjdXJyZW50U2V0dGluZ3MpO1xufVxuXG4vLyBgL21vZGVsIFwiW1ZBTFVFXVwiYCB0byBjaGFuZ2UgbW9kZWwuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZE1vZGVsKGlucHV0OiBzdHJpbmcsIGN1cnJlbnRTZXR0aW5nczogQk1PU2V0dGluZ3MsIHBsdWdpbjogQk1PR1BUKSB7XG4gIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGNyZWF0ZUJvdE1lc3NhZ2UoY3VycmVudFNldHRpbmdzKTtcblxuICAvLyBDaGVjayBpZiB0aGUgdXNlciBoYXMgbm90IHNwZWNpZmllZCBhIG1vZGVsIGFmdGVyIHRoZSBcIi9tb2RlbFwiIGNvbW1hbmRcbiAgaWYgKCFpbnB1dC5zcGxpdCgnICcpWzFdKSB7XG4gICAgY29uc3QgbWVzc2FnZUh0bWwgPSBgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+PHA+PHN0cm9uZz5QbGVhc2Ugc2VsZWN0IGEgbW9kZWwuPC9zdHJvbmc+PC9wPjwvZGl2PmA7XG4gICAgZGlzcGxheU1lc3NhZ2UobWVzc2FnZUJsb2NrLCBtZXNzYWdlSHRtbCwgY3VycmVudFNldHRpbmdzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBDaGVjayBpZiB0aGUgdXNlciBoYXMgc3BlY2lmaWVkIGEgbW9kZWwgYWZ0ZXIgdGhlIFwiL21vZGVsXCIgY29tbWFuZFxuICBpZiAoaW5wdXQuc3BsaXQoJyAnKVsxXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgaW5wdXRNb2RlbCA9IGlucHV0LnNwbGl0KCcgJylbMV0ucmVwbGFjZSgvXlwiKC4qKVwiJC8sICckMScpO1xuXG4gICAgbGV0IG1lc3NhZ2VIdG1sID0gXCJcIjtcblxuICAgIGNvbnN0IG1vZGVsQWxpYXNlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gY3VycmVudFNldHRpbmdzLmFsbE1vZGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbW9kZWwgPSBjdXJyZW50U2V0dGluZ3MuYWxsTW9kZWxzW2kgLSAxXTtcbiAgICAgIG1vZGVsQWxpYXNlc1tpXSA9IG1vZGVsO1xuICAgIH1cblxuICAgIGlmIChPYmplY3QuZW50cmllcyhtb2RlbEFsaWFzZXMpLmZpbmQoKFtrZXksIHZhbF0pID0+IGtleSA9PT0gaW5wdXRNb2RlbCkpe1xuICAgICAgY3VycmVudFNldHRpbmdzLm1vZGVsID0gbW9kZWxBbGlhc2VzW2lucHV0TW9kZWxdO1xuICAgICAgbWVzc2FnZUh0bWwgPSBgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+PHA+PHN0cm9uZz5VcGRhdGVkIE1vZGVsIHRvICR7Y3VycmVudFNldHRpbmdzLm1vZGVsfTwvc3Ryb25nPjwvcD48L2Rpdj5gO1xuICAgIH1cbiAgICBlbHNlIGlmIChPYmplY3QuZW50cmllcyhtb2RlbEFsaWFzZXMpLmZpbmQoKFtrZXksIHZhbF0pID0+IHZhbCA9PT0gaW5wdXRNb2RlbCkpIHtcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy5tb2RlbCA9IG1vZGVsQWxpYXNlc1tPYmplY3Qua2V5cyhtb2RlbEFsaWFzZXMpLmZpbmQoa2V5ID0+IG1vZGVsQWxpYXNlc1trZXldID09PSBpbnB1dE1vZGVsKSB8fCAnJ107XG4gICAgICBtZXNzYWdlSHRtbCA9IGA8ZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIj48cD48c3Ryb25nPlVwZGF0ZWQgTW9kZWwgdG8gJHtjdXJyZW50U2V0dGluZ3MubW9kZWx9PC9zdHJvbmc+PC9wPjwvZGl2PmA7XG4gICAgfVxuICAgICBlbHNlIHtcbiAgICAgIG1lc3NhZ2VIdG1sID0gYDxkaXYgY2xhc3M9XCJmb3JtYXR0ZWRTZXR0aW5nc1wiPjxwPjxzdHJvbmc+TW9kZWwgJyR7aW5wdXRNb2RlbH0nIGRvZXMgbm90IGV4aXN0IGZvciB0aGlzIEFQSSBrZXkuPC9zdHJvbmc+PC9wPjwvZGl2PmA7XG4gICAgICBuZXcgTm90aWNlKFwiSW52YWxpZCBtb2RlbC5cIik7XG4gICAgfVxuXG4gICAgZGlzcGxheU1lc3NhZ2UobWVzc2FnZUJsb2NrLCBtZXNzYWdlSHRtbCwgY3VycmVudFNldHRpbmdzKTtcbiAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgcmV0dXJuIGN1cnJlbnRTZXR0aW5ncztcbiAgfVxufVxuXG4vLyBgL2xpc3RgIHRvIGxpc3QgYWxsIG1vZGVscy5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21tYW5kTGlzdE1vZGVscyhpbnB1dDogc3RyaW5nLCBjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgLy8gTG9vcCB0aHJvdWdoIGFsbE1vZGVscyBhbmQgY3JlYXRlIGxpc3QgaXRlbXNcbiAgY29uc3QgbW9kZWxMaXN0SXRlbXMgPSBjdXJyZW50U2V0dGluZ3MuYWxsTW9kZWxzLm1hcChtb2RlbCA9PiBgPGxpPiR7bW9kZWx9PC9saT5gKS5qb2luKCcnKTtcblxuICBjb25zdCBmb3JtYXR0ZWRTZXR0aW5ncyA9IGA8b2w+JHttb2RlbExpc3RJdGVtc308L29sPmA7XG5cbiAgZGlzcGxheU1lc3NhZ2UobWVzc2FnZUJsb2NrLCBmb3JtYXR0ZWRTZXR0aW5ncywgY3VycmVudFNldHRpbmdzKTtcbn1cblxuXG4vLyBgL3JlZmAgdG8gdHVybiBvbi9vZmYgcmVmZXJlbmNlQ3VycmVudE5vdGUuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZFJlZmVyZW5jZShpbnB1dDogc3RyaW5nLCBjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgbGV0IGZvcm1hdHRlZFNldHRpbmdzID0gJyc7XG4gIGNvbnN0IHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWZlcmVuY2VDdXJyZW50Tm90ZScpO1xuICBjb25zdCBpbnB1dFZhbHVlID0gaW5wdXQuc3BsaXQoJyAnKVsxXT8udG9Mb3dlckNhc2UoKTtcblxuICBpZiAoaW5wdXRWYWx1ZSA9PT0gXCJ0cnVlXCIgfHwgaW5wdXRWYWx1ZSA9PT0gXCJvblwiKSB7XG4gICAgICBjdXJyZW50U2V0dGluZ3MucmVmZXJlbmNlQ3VycmVudE5vdGUgPSB0cnVlO1xuICAgICAgaWYgKHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudCkge1xuICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIH1cbiAgICAgIGZvcm1hdHRlZFNldHRpbmdzICs9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIj5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+UmVmZXJlbmNlIHVwZGF0ZWQ6IG9uPC9zdHJvbmc+PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgfSBlbHNlIGlmIChpbnB1dFZhbHVlID09PSBcImZhbHNlXCIgfHwgaW5wdXRWYWx1ZSA9PT0gXCJvZmZcIikge1xuICAgICAgY3VycmVudFNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlID0gZmFsc2U7XG4gICAgICBpZiAocmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50KSB7XG4gICAgICAgICAgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgICBmb3JtYXR0ZWRTZXR0aW5ncyArPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICAgICAgICA8cD48c3Ryb25nPlJlZmVyZW5jZSB1cGRhdGVkOiBvZmY8L3N0cm9uZz48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICB9IGVsc2Uge1xuICAgIGZvcm1hdHRlZFNldHRpbmdzICs9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICAgICAgPHA+PHN0cm9uZz5JbnZhbGlkIGNvbW1hbmQuPC9zdHJvbmc+PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgZGlzcGxheU1lc3NhZ2UobWVzc2FnZUJsb2NrLCBmb3JtYXR0ZWRTZXR0aW5ncywgY3VycmVudFNldHRpbmdzKTtcbiAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xufVxuXG4vLyBgL3RlbXAgXCJWQUxVRVwiYCB0byBjaGFuZ2UgdGhlIHRlbXBlcmF0dXJlLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbW1hbmRUZW1wZXJhdHVyZShpbnB1dDogc3RyaW5nLCBjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgY29uc3QgaW5wdXRWYWx1ZSA9IGlucHV0LnNwbGl0KCcgJylbMV07XG4gIGNvbnN0IGZsb2F0VmFsdWUgPSBwYXJzZUZsb2F0KGlucHV0VmFsdWUpO1xuICBsZXQgdGVtcGVyYXR1cmVTZXR0aW5nTWVzc2FnZTogc3RyaW5nO1xuXG4gIGlmIChjdXJyZW50U2V0dGluZ3MgJiYgIWlzTmFOKGZsb2F0VmFsdWUpICYmIGZsb2F0VmFsdWUgPj0gMC4wMCAmJiBmbG9hdFZhbHVlIDw9IDEuMDApIHtcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy50ZW1wZXJhdHVyZSA9IHBhcnNlRmxvYXQoKE1hdGgucm91bmQoZmxvYXRWYWx1ZSAvIDAuMDUpICogMC4wNSkudG9GaXhlZCgyKSk7XG4gICAgICB0ZW1wZXJhdHVyZVNldHRpbmdNZXNzYWdlID0gYCR7Y3VycmVudFNldHRpbmdzLnRlbXBlcmF0dXJlfWA7XG4gIH0gZWxzZSB7XG4gICAgICB0ZW1wZXJhdHVyZVNldHRpbmdNZXNzYWdlID0gXCJJbnZhbGlkLlwiO1xuICB9XG5cbiAgY29uc3QgZm9ybWF0dGVkU2V0dGluZ3MgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIj5cbiAgICAgICAgPHA+PHN0cm9uZz5UZW1wZXJhdHVyZSB1cGRhdGVkOiAke3RlbXBlcmF0dXJlU2V0dGluZ01lc3NhZ2V9PC9zdHJvbmc+PC9wPlxuICAgICAgPC9kaXY+XG4gIGA7XG5cbiAgZGlzcGxheU1lc3NhZ2UobWVzc2FnZUJsb2NrLCBmb3JtYXR0ZWRTZXR0aW5ncywgY3VycmVudFNldHRpbmdzKTtcbiAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xufVxuXG4vLyBgL21heHRva2Vuc2AgdG8gY2hhbmdlIG1heF90b2tlbnMuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZE1heFRva2VucyhpbnB1dDogc3RyaW5nLCBjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgbGV0IGZvcm1hdHRlZFNldHRpbmdzID0gJyc7XG4gIGNvbnN0IG1heFRva2Vuc1ZhbHVlID0gaW5wdXQuc3BsaXQoJyAnKVsxXTtcbiAgbGV0IG1heFRva2Vuc1NldHRpbmdNZXNzYWdlOiBzdHJpbmc7XG5cbiAgaWYgKG1heFRva2Vuc1ZhbHVlICE9PSB1bmRlZmluZWQgJiYgbWF4VG9rZW5zVmFsdWUgIT09ICcnKSB7XG4gICAgICBjb25zdCBpbnB1dFZhbHVlID0gcGFyc2VJbnQobWF4VG9rZW5zVmFsdWUpO1xuICBcbiAgICAgIGlmICghaXNOYU4oaW5wdXRWYWx1ZSkgJiYgaW5wdXRWYWx1ZSA+PSAwKSB7XG4gICAgICAgICAgLy8gVXBkYXRlIG1heF90b2tlbnMgd2l0aCB0aGUgdmFsaWQgaW50ZWdlciB2YWx1ZVxuICAgICAgICAgIGN1cnJlbnRTZXR0aW5ncy5tYXhfdG9rZW5zID0gaW5wdXRWYWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgIG1heFRva2Vuc1NldHRpbmdNZXNzYWdlID0gYE1heCB0b2tlbnMgdXBkYXRlZDogJHtpbnB1dFZhbHVlfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElucHV0IGlzIG5vdCBhIHZhbGlkIGludGVnZXJcbiAgICAgICAgICBtYXhUb2tlbnNTZXR0aW5nTWVzc2FnZSA9IFwiTWF4IHRva2VucyB1cGRhdGU6IGludmFsaWRcIjtcbiAgICAgIH1cbiAgfSBlbHNlIHtcbiAgICAgIC8vIENsZWFyIG1heF90b2tlbnMgYW5kIGluZm9ybSB0aGUgdXNlclxuICAgICAgY3VycmVudFNldHRpbmdzLm1heF90b2tlbnMgPSBcIlwiO1xuICAgICAgbWF4VG9rZW5zU2V0dGluZ01lc3NhZ2UgPSBcIk1heCB0b2tlbnMgY2xlYXJlZC5cIjtcbiAgfVxuICBcbiAgZm9ybWF0dGVkU2V0dGluZ3MgKz0gYFxuICAgICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICAgICAgPHA+PHN0cm9uZz4ke21heFRva2Vuc1NldHRpbmdNZXNzYWdlfTwvc3Ryb25nPjwvcD5cbiAgICAgIDwvZGl2PlxuICBgO1xuXG4gIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VCbG9jaywgZm9ybWF0dGVkU2V0dGluZ3MsIGN1cnJlbnRTZXR0aW5ncyk7XG4gIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbn1cblxuLy8gYC9zeXN0ZW0gXCJbVkFMVUVdXCJgIHRvIGNoYW5nZSBzeXN0ZW0gcHJvbXB0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZFN5c3RlbShpbnB1dDogc3RyaW5nLCBjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgbGV0IGZvcm1hdHRlZFNldHRpbmdzID0gJyc7XG4gIGNvbnN0IHN5c3RlbVByb21wdFZhbHVlID0gaW5wdXQubWF0Y2goL1wiKFteXCJdKylcIi8pO1xuXG4gIGlmIChzeXN0ZW1Qcm9tcHRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgaWYgKHN5c3RlbVByb21wdFZhbHVlWzFdKSB7XG4gICAgICAgICAgY3VycmVudFNldHRpbmdzLnN5c3RlbV9yb2xlID0gc3lzdGVtUHJvbXB0VmFsdWVbMV07XG4gICAgICAgICAgZm9ybWF0dGVkU2V0dGluZ3MgKz0gYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIj5cbiAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+U3lzdGVtIHVwZGF0ZWQ6IFwiJHtzeXN0ZW1Qcm9tcHRWYWx1ZVsxXX1cIjwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgYDtcbiAgICAgIH1cbiAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy5zeXN0ZW1fcm9sZSA9IFwiXCI7XG4gICAgICBmb3JtYXR0ZWRTZXR0aW5ncyArPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+U3lzdGVtIGNsZWFyZWQuPC9zdHJvbmc+PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgfVxuXG4gIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VCbG9jaywgZm9ybWF0dGVkU2V0dGluZ3MsIGN1cnJlbnRTZXR0aW5ncyk7XG4gIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbW1hbmRBcHBlbmQoY3VycmVudFNldHRpbmdzOiBCTU9TZXR0aW5ncykge1xuICBsZXQgbWFya2Rvd25Db250ZW50ID0gJyc7XG5cbiAgY29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXG4gIGlmIChhY3RpdmVGaWxlPy5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICBjb25zdCBleGlzdGluZ0NvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblxuICAgIC8vIFJldHJpZXZlIHVzZXIgYW5kIGNoYXRib3QgbmFtZXNcbiAgICBjb25zdCB1c2VyTmFtZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudXNlck5hbWUnKSBhcyBOb2RlTGlzdE9mPEhUTUxIZWFkaW5nRWxlbWVudD47XG5cbiAgICBsZXQgdXNlck5hbWVUZXh0ID0gJ1VTRVInO1xuICAgIGlmICh1c2VyTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB1c2VyTmFtZU5vZGUgPSB1c2VyTmFtZXNbMF07XG4gICAgICAgIEFycmF5LmZyb20odXNlck5hbWVOb2RlLmNoaWxkTm9kZXMpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGlzIGEgdGV4dCBub2RlIGFuZCBpdHMgdGV4dENvbnRlbnQgaXMgbm90IG51bGxcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBub2RlLnRleHRDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgdXNlck5hbWVUZXh0ID0gbm9kZS50ZXh0Q29udGVudC50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gY29uc3QgY2hhdGJvdE5hbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2NoYXRib3ROYW1lJykgYXMgTm9kZUxpc3RPZjxIVE1MSGVhZGluZ0VsZW1lbnQ+O1xuICAgIGNvbnN0IGNoYXRib3ROYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGF0Ym90TmFtZScpIGFzIE5vZGVMaXN0T2Y8SFRNTEhlYWRpbmdFbGVtZW50PjtcbiAgICBjb25zdCBjaGF0Ym90TmFtZVRleHQgPSBjaGF0Ym90TmFtZXMubGVuZ3RoID4gMCAmJiBjaGF0Ym90TmFtZXNbMF0udGV4dENvbnRlbnQgPyBjaGF0Ym90TmFtZXNbMF0udGV4dENvbnRlbnQudG9VcHBlckNhc2UoKSA6ICdBU1NJU1RBTlQnO1xuXG4gICAgLy8gQ2hlY2sgYW5kIHJlYWQgdGhlIEpTT04gZmlsZVxuICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTikpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGpzb25Db250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVuYW1lTWVzc2FnZUhpc3RvcnlKU09OKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBKU09OLnBhcnNlKGpzb25Db250ZW50KTtcblxuICAgICAgICAvLyBGaWx0ZXIgb3V0IG1lc3NhZ2VzIHN0YXJ0aW5nIHdpdGggJy8nLCBhbmQgdGhlIGFzc2lzdGFudCdzIHJlc3BvbnNlIGltbWVkaWF0ZWx5IGZvbGxvd2luZyBpdFxuICAgICAgICBsZXQgc2tpcE5leHQgPSBmYWxzZTtcbiAgICAgICAgbWFya2Rvd25Db250ZW50ICs9IG1lc3NhZ2VzXG4gICAgICAgICAgLmZpbHRlcigobWVzc2FnZTogeyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgfSwgaW5kZXg6IG51bWJlciwgYXJyYXk6IHN0cmluZyB8IGFueVtdKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2tpcE5leHQgJiYgbWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgICBza2lwTmV4dCA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50LnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgICAgICAgICAvLyBDaGVjayBpZiBuZXh0IG1lc3NhZ2UgaXMgYWxzbyBmcm9tIHVzZXIgYW5kIHN0YXJ0cyB3aXRoICcvJ1xuICAgICAgICAgICAgICBza2lwTmV4dCA9IGluZGV4ICsgMSA8IGFycmF5Lmxlbmd0aCAmJiBhcnJheVtpbmRleCArIDFdLnJvbGUgPT09ICdhc3Npc3RhbnQnO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5tYXAoKG1lc3NhZ2U6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGxldCByb2xlVGV4dCA9IG1lc3NhZ2Uucm9sZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgcm9sZVRleHQgPSByb2xlVGV4dCA9PT0gJ1VTRVInID8gdXNlck5hbWVUZXh0IDogcm9sZVRleHQ7XG4gICAgICAgICAgICByb2xlVGV4dCA9IHJvbGVUZXh0ID09PSAnQVNTSVNUQU5UJyA/IGNoYXRib3ROYW1lVGV4dCA6IHJvbGVUZXh0O1xuICAgICAgICAgICAgcmV0dXJuIGAjIyMjIyMgJHtyb2xlVGV4dH1cXG4ke21lc3NhZ2UuY29udGVudH1cXG5gO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmpvaW4oJ1xcbicpO1xuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBtZXNzYWdlIGhpc3Rvcnk6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBleGlzdGluZ0NvbnRlbnQgKyAnXFxuJyArIG1hcmtkb3duQ29udGVudDtcblxuICAgIC8vIFNhdmUgdGhlIHVwZGF0ZWQgY29udGVudCBiYWNrIHRvIHRoZSBhY3RpdmUgZmlsZVxuICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuICAgIG5ldyBOb3RpY2UoXCJBcHBlbmRlZCBjb252ZXJzYXRpb24uXCIpO1xuICB9XG4gIGVsc2Uge1xuICAgIG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgbm90ZSB0byBhcHBlbmQgdG8uXCIpO1xuICB9XG59XG5cblxuLy8gYC9zYXZlYCB0byBzYXZlIGN1cnJlbnQgY2hhdCBoaXN0b3J5IHRvIGEgbm90ZS5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21tYW5kU2F2ZShjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzKSB7XG4gIGxldCBmb2xkZXJOYW1lID0gY3VycmVudFNldHRpbmdzLmNoYXRIaXN0b3J5UGF0aDtcbiAgY29uc3QgYmFzZUZpbGVOYW1lID0gJ0NoYXQgSGlzdG9yeSc7XG4gIGNvbnN0IGZpbGVFeHRlbnNpb24gPSAnLm1kJztcblxuICBpZiAoZm9sZGVyTmFtZSAmJiAhZm9sZGVyTmFtZS5lbmRzV2l0aCgnLycpKSB7XG4gICAgZm9sZGVyTmFtZSArPSAnLyc7XG4gIH1cbiAgXG4gIC8vIENyZWF0ZSBhIGRhdGV0aW1lIHN0cmluZyB0byBhcHBlbmQgdG8gdGhlIGZpbGUgbmFtZVxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBkYXRlVGltZVN0YW1wID0gbm93LmdldEZ1bGxZZWFyKCkgKyBcIi1cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgKG5vdy5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgXCItXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICArIG5vdy5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgXCIgXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICArIG5vdy5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArIFwiLVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBub3cuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArIFwiLVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBub3cuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcblxuICB0cnkge1xuICAgIGxldCBtYXJrZG93bkNvbnRlbnQgPSAnJztcbiAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpOyAvLyBSZXRyaWV2ZSBhbGwgZmlsZXMgZnJvbSB0aGUgdmF1bHRcblxuICAgIC8vIFJldHJpZXZlIG1vZGVsIG5hbWVcbiAgICBjb25zdCBtb2RlbE5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGVsTmFtZScpIGFzIEhUTUxIZWFkaW5nRWxlbWVudDtcbiAgICBsZXQgbW9kZWxOYW1lID0gJ1Vua25vd24nOyAvLyBEZWZhdWx0IG1vZGVsIG5hbWVcbiAgICBpZiAobW9kZWxOYW1lRWxlbWVudCAmJiBtb2RlbE5hbWVFbGVtZW50LnRleHRDb250ZW50KSB7XG4gICAgICAgIG1vZGVsTmFtZSA9IG1vZGVsTmFtZUVsZW1lbnQudGV4dENvbnRlbnQucmVwbGFjZSgnTW9kZWw6ICcsICcnKS50b1VwcGVyQ2FzZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IGFsbEZpbGVzLmZpbmQoZmlsZSA9PiBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKSA9PT0gY3VycmVudFNldHRpbmdzLnRlbXBsYXRlRmlsZVBhdGgudG9Mb3dlckNhc2UoKSk7XG5cbiAgICBpZiAodGVtcGxhdGVGaWxlKSB7XG4gICAgICBsZXQgZmlsZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZCh0ZW1wbGF0ZUZpbGUpO1xuICBcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlIGNvbnRlbnQgaGFzIFlBTUwgZnJvbnQgbWF0dGVyXG4gICAgICBpZiAoL14tLS1cXHMqW1xcc1xcU10qPy0tLS8udGVzdChmaWxlQ29udGVudCkpIHtcbiAgICAgICAgICAvLyBJbnNlcnQgbW9kZWwgbmFtZSBpbnRvIGV4aXN0aW5nIGZyb250IG1hdHRlclxuICAgICAgICAgIGZpbGVDb250ZW50ID0gZmlsZUNvbnRlbnQucmVwbGFjZSgvXi0tLS8sIGAtLS1cXG5tb2RlbDogJHttb2RlbE5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFByZXBlbmQgbmV3IGZyb250IG1hdHRlclxuICAgICAgICAgIGZpbGVDb250ZW50ID0gYC0tLVxuICBtb2RlbDogJHttb2RlbE5hbWV9XG4tLS1cXG5gICsgZmlsZUNvbnRlbnQ7XG4gICAgICB9XG4gICAgICBtYXJrZG93bkNvbnRlbnQgKz0gZmlsZUNvbnRlbnQ7XG4gICAgICAvLyBjb25zb2xlLmxvZyhmaWxlQ29udGVudCk7XG4gIH0gZWxzZSB7XG4gICAgICAvLyBZQU1MIGZyb250IG1hdHRlclxuICAgICAgbWFya2Rvd25Db250ZW50ICs9IFxuICAgICAgYC0tLVxuICBtb2RlbDogJHttb2RlbE5hbWV9XG4tLS1cXG5gO1xuICB9XG5cbiAgICAvLyBSZXRyaWV2ZSB1c2VyIGFuZCBjaGF0Ym90IG5hbWVzXG4gICAgY29uc3QgdXNlck5hbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVzZXJOYW1lJykgYXMgTm9kZUxpc3RPZjxIVE1MSGVhZGluZ0VsZW1lbnQ+O1xuXG4gICAgbGV0IHVzZXJOYW1lVGV4dCA9ICdVU0VSJztcbiAgICBpZiAodXNlck5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdXNlck5hbWVOb2RlID0gdXNlck5hbWVzWzBdO1xuICAgICAgICBBcnJheS5mcm9tKHVzZXJOYW1lTm9kZS5jaGlsZE5vZGVzKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgbm9kZSBpcyBhIHRleHQgbm9kZSBhbmQgaXRzIHRleHRDb250ZW50IGlzIG5vdCBudWxsXG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUgJiYgbm9kZS50ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgICAgIHVzZXJOYW1lVGV4dCA9IG5vZGUudGV4dENvbnRlbnQudHJpbSgpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNvbnN0IGNoYXRib3ROYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNjaGF0Ym90TmFtZScpIGFzIE5vZGVMaXN0T2Y8SFRNTEhlYWRpbmdFbGVtZW50PjtcbiAgICBjb25zdCBjaGF0Ym90TmFtZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhdGJvdE5hbWUnKSBhcyBOb2RlTGlzdE9mPEhUTUxIZWFkaW5nRWxlbWVudD47XG4gICAgY29uc3QgY2hhdGJvdE5hbWVUZXh0ID0gY2hhdGJvdE5hbWVzLmxlbmd0aCA+IDAgJiYgY2hhdGJvdE5hbWVzWzBdLnRleHRDb250ZW50ID8gY2hhdGJvdE5hbWVzWzBdLnRleHRDb250ZW50LnRvVXBwZXJDYXNlKCkgOiAnQVNTSVNUQU5UJztcblxuICAgIC8vIENoZWNrIGFuZCByZWFkIHRoZSBKU09OIGZpbGVcbiAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04pKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBqc29uQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTik7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gSlNPTi5wYXJzZShqc29uQ29udGVudCk7XG5cbiAgICAgICAgLy8gRmlsdGVyIG91dCBtZXNzYWdlcyBzdGFydGluZyB3aXRoICcvJywgYW5kIHRoZSBhc3Npc3RhbnQncyByZXNwb25zZSBpbW1lZGlhdGVseSBmb2xsb3dpbmcgaXRcbiAgICAgICAgbGV0IHNraXBOZXh0ID0gZmFsc2U7XG4gICAgICAgIG1hcmtkb3duQ29udGVudCArPSBtZXNzYWdlc1xuICAgICAgICAgIC5maWx0ZXIoKG1lc3NhZ2U6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IH0sIGluZGV4OiBudW1iZXIsIGFycmF5OiBzdHJpbmcgfCBhbnlbXSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNraXBOZXh0ICYmIG1lc3NhZ2Uucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgICAgICAgc2tpcE5leHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29udGVudC5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbmV4dCBtZXNzYWdlIGlzIGFsc28gZnJvbSB1c2VyIGFuZCBzdGFydHMgd2l0aCAnLydcbiAgICAgICAgICAgICAgc2tpcE5leHQgPSBpbmRleCArIDEgPCBhcnJheS5sZW5ndGggJiYgYXJyYXlbaW5kZXggKyAxXS5yb2xlID09PSAnYXNzaXN0YW50JztcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAubWFwKChtZXNzYWdlOiB7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyB9KSA9PiB7XG4gICAgICAgICAgICBsZXQgcm9sZVRleHQgPSBtZXNzYWdlLnJvbGUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIHJvbGVUZXh0ID0gcm9sZVRleHQgPT09ICdVU0VSJyA/IHVzZXJOYW1lVGV4dCA6IHJvbGVUZXh0O1xuICAgICAgICAgICAgcm9sZVRleHQgPSByb2xlVGV4dCA9PT0gJ0FTU0lTVEFOVCcgPyBjaGF0Ym90TmFtZVRleHQgOiByb2xlVGV4dDtcbiAgICAgICAgICAgIHJldHVybiBgIyMjIyMjICR7cm9sZVRleHR9XFxuJHttZXNzYWdlLmNvbnRlbnR9XFxuYDtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5qb2luKCdcXG4nKTtcblxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgbWVzc2FnZSBoaXN0b3J5OlwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGZvbGRlciBleGlzdHMsIGNyZWF0ZSBpdCBpZiBub3RcbiAgICBpZiAoIWF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlck5hbWUpKSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyTmFtZSk7XG4gICAgfVxuXG4gICAgbGV0IGZpbGVOYW1lID0gJyc7XG5cbiAgICBpZiAoY3VycmVudFNldHRpbmdzLmFsbG93UmVuYW1lTm90ZVRpdGxlKSB7XG4gICAgICBsZXQgcmVmZXJlbmNlQ3VycmVudE5vdGUgPSAnJztcbiAgICAgIGxldCB1bmlxdWVOYW1lRm91bmQgPSBmYWxzZTtcbiAgICAgIGxldCBtb2RlbFJlbmFtZVRpdGxlO1xuXG4gICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblxuICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICBpZiAoY3VycmVudFNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlKSB7XG4gICAgICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlID0gYXdhaXQgZ2V0QWN0aXZlRmlsZUNvbnRlbnQoYWN0aXZlRmlsZSk7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBGdW5jdGlvbiB0byBjaGVjayBpZiBhIGZpbGUgbmFtZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgY29uc3QgZmlsZU5hbWVFeGlzdHMgPSAobmFtZTogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgICAgICAgIHJldHVybiBhbGxGaWxlcy5zb21lKChmaWxlKSA9PiBmaWxlLnBhdGggPT09IGZvbGRlck5hbWUgKyBuYW1lICsgZmlsZUV4dGVuc2lvbik7XG4gICAgICB9O1xuICAgIFxuICAgICAgd2hpbGUgKCF1bmlxdWVOYW1lRm91bmQpIHtcbiAgICAgICAgICBtb2RlbFJlbmFtZVRpdGxlID0gYXdhaXQgZmV0Y2hNb2RlbFJlbmFtZVRpdGxlKGN1cnJlbnRTZXR0aW5ncywgcmVmZXJlbmNlQ3VycmVudE5vdGUgKyBtYXJrZG93bkNvbnRlbnQpO1xuICAgICAgXG4gICAgICAgICAgaWYgKCFmaWxlTmFtZUV4aXN0cyhtb2RlbFJlbmFtZVRpdGxlKSkge1xuICAgICAgICAgICAgICB1bmlxdWVOYW1lRm91bmQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZmlsZU5hbWUgPSBmb2xkZXJOYW1lICsgbW9kZWxSZW5hbWVUaXRsZSArIGZpbGVFeHRlbnNpb247XG4gICAgICBcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBmaWxlTmFtZSA9IGZvbGRlck5hbWUgKyBiYXNlRmlsZU5hbWUgKyAnICcgKyBkYXRlVGltZVN0YW1wICsgZmlsZUV4dGVuc2lvbjtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIG5ldyBub3RlIHdpdGggZm9ybWF0dGVkIE1hcmtkb3duIGNvbnRlbnRcbiAgICBjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVOYW1lLCBtYXJrZG93bkNvbnRlbnQpO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnTm90ZSBjcmVhdGVkOiAnICsgZmlsZS5wYXRoKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJTYXZlZCBjb252ZXJzYXRpb24uXCIpO1xuXG4gICAgICAvLyBPcGVuIHRoZSBuZXdseSBjcmVhdGVkIG5vdGUgaW4gYSBuZXcgcGFuZVxuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlTmFtZSwgJycsIHRydWUsIHsgYWN0aXZlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIG5vdGU6JywgZXJyb3IpO1xuICB9XG59XG5cbi8vIGAvc3RvcGAgdG8gc3RvcCBmZXRjaGluZyByZXNwb25zZVxuZXhwb3J0IGZ1bmN0aW9uIGNvbW1hbmRTdG9wKCkge1xuICBjb25zdCBjb250cm9sbGVyID0gZ2V0QWJvcnRDb250cm9sbGVyKCk7XG4gIGlmIChjb250cm9sbGVyKSB7XG4gICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEJNT0dQVCBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgYWRkR2VuZXJhbFNldHRpbmdzIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzL0dlbmVyYWxTZXR0aW5ncyc7XG5pbXBvcnQgeyBhZGRBcHBlYXJhbmNlU2V0dGluZ3MgfSBmcm9tICcuL2NvbXBvbmVudHMvc2V0dGluZ3MvQXBwZWFyYW5jZVNldHRpbmdzJztcbmltcG9ydCB7IGFkZENoYXRIaXN0b3J5U2V0dGluZ3MgfSBmcm9tICcuL2NvbXBvbmVudHMvc2V0dGluZ3MvQ2hhdEhpc3RvcnlTZXR0aW5ncyc7XG5pbXBvcnQgeyBhZGRPbGxhbWFTZXR0aW5ncyB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5ncy9PbGxhbWFTZXR0aW5ncyc7XG5pbXBvcnQgeyBhZGRBZHZhbmNlZFNldHRpbmdzIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzL0FkdmFuY2VkU2V0dGluZ3MnO1xuaW1wb3J0IHsgZmV0Y2hMb2NhbEFJTW9kZWxzLCBmZXRjaE9sbGFtYU1vZGVscyB9IGZyb20gJy4vY29tcG9uZW50cy9GZXRjaE1vZGVsTGlzdCc7XG5cbmV4cG9ydCBjbGFzcyBCTU9TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogQk1PR1BUO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEJNT0dQVCkge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGFzeW5jIGRpc3BsYXkoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gxJywge3RleHQ6ICdCTU8gQ2hhdGJvdCBTZXR0aW5ncyd9KTtcblxuXHRcdGNvbnN0IGNoYW5nZUxvZ0xpbmsgPSBjb250YWluZXJFbC5jcmVhdGVFbChcImFcIiwge1xuXHRcdFx0dGV4dDogXCJDaGFuZ2Vsb2dcIixcblx0XHRcdGhyZWY6IFwiaHR0cHM6Ly9naXRodWIuY29tL2xvbmd5Mmsvb2JzaWRpYW4tYm1vLWNoYXRib3QvcmVsZWFzZXNcIixcblx0XHR9KTtcblxuXHRcdGNoYW5nZUxvZ0xpbmsuc3R5bGUuZm9udFNpemUgPSBcIjAuOHJlbVwiOyBcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywge3RleHQ6ICdUeXBlIGAvaGVscGAgaW4gY2hhdCBmb3IgY29tbWFuZHMuJ30pO1xuXG5cdFx0Ly8gRmV0Y2ggbW9kZWxzXG5cdFx0Y29uc3QgbG9jYWxBSU1vZGVscyA9IGF3YWl0IGZldGNoTG9jYWxBSU1vZGVscyh0aGlzLnBsdWdpbik7XG5cdFx0Y29uc3Qgb2xsYW1hTW9kZWxzID0gYXdhaXQgZmV0Y2hPbGxhbWFNb2RlbHModGhpcy5wbHVnaW4pO1xuXG5cdFx0Ly8gRGlzcGxheSBzZXR0aW5nc1xuXHRcdGFkZEdlbmVyYWxTZXR0aW5ncyh0aGlzLmNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbiwgdGhpcywgbG9jYWxBSU1vZGVscywgb2xsYW1hTW9kZWxzKTtcblx0XHRhZGRBcHBlYXJhbmNlU2V0dGluZ3ModGhpcy5jb250YWluZXJFbCwgdGhpcy5wbHVnaW4sIHRoaXMpO1x0XHRcblx0XHRhZGRDaGF0SGlzdG9yeVNldHRpbmdzKHRoaXMuY29udGFpbmVyRWwsIHRoaXMucGx1Z2luLCB0aGlzKTtcblx0XHRhZGRPbGxhbWFTZXR0aW5ncyh0aGlzLmNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbiwgdGhpcyk7XG5cdFx0YWRkQWR2YW5jZWRTZXR0aW5ncyh0aGlzLmNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbiwgdGhpcyk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBEcm9wZG93bkNvbXBvbmVudCwgTm90aWNlLCBTZXR0aW5nLCBTZXR0aW5nVGFiIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgQk1PR1BULCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwic3JjL21haW5cIjtcbmltcG9ydCB7IEFOVEhST1BJQ19NT0RFTFMsIE9QRU5BSV9NT0RFTFMgfSBmcm9tIFwic3JjL3ZpZXdcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEdlbmVyYWxTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQk1PR1BULCBTZXR0aW5nVGFiOiBTZXR0aW5nVGFiLCBsb2NhbEFJTW9kZWxzOiBzdHJpbmdbXSwgb2xsYW1hTW9kZWxzOiBzdHJpbmdbXSkge1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnR2VuZXJhbCd9KTtcbiAgICBcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnQVBJIEtleScpXG4gICAgLnNldERlc2MoJ0luc2VydCBBUEkgS2V5IGZyb20gT3BlbkFJIG9yIEFudGhyb3BpYy4nKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2luc2VydC1hcGkta2V5JylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgPyBgJHtwbHVnaW4uc2V0dGluZ3MuYXBpS2V5LnNsaWNlKDAsIDYpfS0uLi4ke3BsdWdpbi5zZXR0aW5ncy5hcGlLZXkuc2xpY2UoLTQpfWAgOiBcIlwiKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIC8vIEZ1bmN0aW9uIHRvIGFkZCBvcHRpb25zIHRvIGRyb3Bkb3duXG4gICAgY29uc3QgYWRkT3B0aW9uc1RvRHJvcGRvd24gPSAoZHJvcGRvd246IERyb3Bkb3duQ29tcG9uZW50LCBtb2RlbHM6IHN0cmluZ1tdKSA9PiB7XG4gICAgICAgIG1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsLCBtb2RlbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcbiAgICAgICAgLnNldERlc2MoJ0Nob29zZSBhIG1vZGVsLicpXG4gICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzID0gW107XG4gICAgICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFwaUtleSAmJiAhcGx1Z2luLnNldHRpbmdzLmFwaUtleS5zdGFydHNXaXRoKFwic2stYW50XCIpKSB7XG4gICAgICAgICAgICAgICAgYWRkT3B0aW9uc1RvRHJvcGRvd24oZHJvcGRvd24sIE9QRU5BSV9NT0RFTFMpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9kZWwgb2YgT1BFTkFJX01PREVMUykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy5hbGxNb2RlbHMuaW5jbHVkZXMobW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzLnB1c2gobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgJiYgcGx1Z2luLnNldHRpbmdzLmFwaUtleS5zdGFydHNXaXRoKFwic2stYW50XCIpKSB7XG4gICAgICAgICAgICAgICAgYWRkT3B0aW9uc1RvRHJvcGRvd24oZHJvcGRvd24sIEFOVEhST1BJQ19NT0RFTFMpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9kZWwgb2YgQU5USFJPUElDX01PREVMUykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy5hbGxNb2RlbHMuaW5jbHVkZXMobW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzLnB1c2gobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5vbGxhbWFSZXN0QVBJVXJsICYmIHBsdWdpbi5zZXR0aW5ncy5vbGxhbWFNb2RlbHMgJiYgcGx1Z2luLnNldHRpbmdzLm9sbGFtYU1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgb2xsYW1hTW9kZWxzLmZvckVhY2goKG1vZGVsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbCwgbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzLmluY2x1ZGVzKG1vZGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5hbGxNb2RlbHMucHVzaChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdPbGxhbWEgY29ubmVjdGlvbiBlcnJvci4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmxvY2FsQUlSZXN0QVBJVXJsICYmIGxvY2FsQUlNb2RlbHMgJiYgbG9jYWxBSU1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxBSU1vZGVscy5mb3JFYWNoKChtb2RlbDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLmFsbE1vZGVscy5pbmNsdWRlcyhtb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzLnB1c2gobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTG9jYWxBSSBjb25uZWN0aW9uIGVycm9yLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5tb2RlbCB8fCBERUZBVUxUX1NFVFRJTkdTLm1vZGVsKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLm1vZGVsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGVsTmFtZScpIGFzIEhUTUxIZWFkaW5nRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxOYW1lLnRleHRDb250ZW50ID0gJ01vZGVsOiAnICsgcGx1Z2luLnNldHRpbmdzLm1vZGVsLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnU3lzdGVtJylcbiAgICAgICAgLnNldERlc2MoJ1N5c3RlbSByb2xlIHByb21wdC4nKVxuICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nKVxuICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1fcm9sZSAhPT0gdW5kZWZpbmVkID8gcGx1Z2luLnNldHRpbmdzLnN5c3RlbV9yb2xlIDogXCJZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgd2hvIHJlc3BvbmRzIGluIG1hcmtkb3duLlwiKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1fcm9sZSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IERFRkFVTFRfU0VUVElOR1Muc3lzdGVtX3JvbGU7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnTWF4IFRva2VucycpXG4gICAgICAgIC5zZXREZXNjKGRlc2NMaW5rKCdUaGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zLCBvciB3b3JkcywgdGhhdCB0aGUgbW9kZWwgaXMgYWxsb3dlZCB0byBnZW5lcmF0ZSBpbiBpdHMgb3V0cHV0LicsICdodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vdG9rZW5pemVyJykpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCc0MDk2JylcbiAgICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MubWF4X3Rva2VucylcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MubWF4X3Rva2VucyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoJ1RlbXBlcmF0dXJlJylcbiAgICAgICAgLnNldERlc2MoJ1RlbXBlcmF0dXJlIGNvbnRyb2xzIGhvdyByYW5kb20gdGhlIGdlbmVyYXRlZCBvdXRwdXQgaXMuIExvd2VyIHZhbHVlcyBtYWtlIHRoZSB0ZXh0IG1vcmUgcHJlZGljdGFibGUsIHdoaWxlIGhpZ2hlciB2YWx1ZXMgbWFrZSBpdCBtb3JlIGNyZWF0aXZlIGFuZCB1bnByZWRpY3RhYmxlLicpXG4gICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgLnNldExpbWl0cygwLCAxLCAwLjA1KVxuICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSAhPT0gdW5kZWZpbmVkID8gcGx1Z2luLnNldHRpbmdzLnRlbXBlcmF0dXJlIDogREVGQVVMVF9TRVRUSU5HUy50ZW1wZXJhdHVyZSlcbiAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnRlbXBlcmF0dXJlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnQWxsb3cgUmVmZXJlbmNlIEN1cnJlbnQgTm90ZScpXG4gICAgICAgIC5zZXREZXNjKCdBbGxvdyBjaGF0Ym90IHRvIHJlZmVyZW5jZSBjdXJyZW50IGFjdGl2ZSBub3RlIGR1cmluZyBjb252ZXJzYXRpb24uJylcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZSkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZmVyZW5jZUN1cnJlbnROb3RlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIGZ1bmN0aW9uIGRlc2NMaW5rKHRleHQ6IHN0cmluZywgbGluazogc3RyaW5nKTogRG9jdW1lbnRGcmFnbWVudCB7XG4gICAgICAgIGNvbnN0IGZyYWcgPSBuZXcgRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBjb25zdCBkZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBkZXNjLmlubmVyVGV4dCA9IHRleHQgKyAnICc7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoZGVzYyk7XG5cbiAgICAgICAgY29uc3QgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICBhbmNob3IuaHJlZiA9IGxpbms7XG4gICAgICAgIGFuY2hvci50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgYW5jaG9yLnJlbCA9ICdub29wZW5lciBub3JlZmVycmVyJztcbiAgICAgICAgYW5jaG9yLmlubmVyVGV4dCA9ICcoaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL3Rva2VuaXplciknO1xuICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGFuY2hvcik7XG5cbiAgICAgICAgcmV0dXJuIGZyYWc7XG4gICAgfVxufSIsICJpbXBvcnQgeyBDb2xvckNvbXBvbmVudCwgU2V0dGluZywgU2V0dGluZ1RhYiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEJNT0dQVCwgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcInNyYy9tYWluXCI7XG5pbXBvcnQgeyBjb2xvclRvSGV4IH0gZnJvbSBcInNyYy91dGlscy9Db2xvckNvbnZlcnRlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkQXBwZWFyYW5jZVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBCTU9HUFQsIFNldHRpbmdUYWI6IFNldHRpbmdUYWIpIHtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ0FwcGVhcmFuY2UnfSk7XG4gICAgXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKCdVc2VyIE5hbWUnKVxuICAgICAgICAuc2V0RGVzYygnQ3JlYXRlIGEgdXNlcm5hbWUuJylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHVzZXIgbmFtZScpXG4gICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnVzZXJOYW1lIHx8IERFRkFVTFRfU0VUVElOR1MudXNlck5hbWUpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnVzZXJOYW1lID0gdmFsdWUgPyB2YWx1ZS50b1VwcGVyQ2FzZSgpIDogREVGQVVMVF9TRVRUSU5HUy51c2VyTmFtZTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwubWF4TGVuZ3RoID0gMzA7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJOYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51c2VyTmFtZScpIGFzIE5vZGVMaXN0T2Y8SFRNTEhlYWRpbmdFbGVtZW50PjtcbiAgICAgICAgICAgICAgICB1c2VyTmFtZXMuZm9yRWFjaCh1c2VyTmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lLnRleHRDb250ZW50ID0gcGx1Z2luLnNldHRpbmdzLnVzZXJOYW1lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnQ2hhdGJvdCBOYW1lJylcbiAgICAgICAgLnNldERlc2MoJ05hbWUgeW91ciBjaGF0Ym90LicpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciBjaGF0Ym90IG5hbWUnKVxuICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5jaGF0Ym90TmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLmNoYXRib3ROYW1lKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5jaGF0Ym90TmFtZSA9IHZhbHVlID8gdmFsdWUudG9VcHBlckNhc2UoKSA6IERFRkFVTFRfU0VUVElOR1MuY2hhdGJvdE5hbWU7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm1heExlbmd0aCA9IDMwO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGF0Ym90TmFtZUhlYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhdGJvdE5hbWVIZWFkaW5nJykgYXMgSFRNTEhlYWRpbmdFbGVtZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXRib3ROYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGF0Ym90TmFtZScpIGFzIE5vZGVMaXN0T2Y8SFRNTEhlYWRpbmdFbGVtZW50PjtcbiAgICAgICAgICAgICAgICBpZiAoY2hhdGJvdE5hbWVIZWFkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXRib3ROYW1lSGVhZGluZy50ZXh0Q29udGVudCA9IHBsdWdpbi5zZXR0aW5ncy5jaGF0Ym90TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hhdGJvdE5hbWVzLmZvckVhY2goY2hhdGJvdE5hbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjaGF0Ym90TmFtZS50ZXh0Q29udGVudCA9IHBsdWdpbi5zZXR0aW5ncy5jaGF0Ym90TmFtZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBsZXQgY29sb3JQaWNrZXIxOiBDb2xvckNvbXBvbmVudDtcbiAgICBjb25zdCBkZWZhdWx0VXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy51c2VyTWVzc2FnZUJhY2tncm91bmRDb2xvcikudHJpbSgpO1xuICAgIFxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnQmFja2dyb3VuZCBjb2xvciBmb3IgVXNlciBNZXNzYWdlcycpXG4gICAgICAgIC5zZXREZXNjKCdNb2RpZnkgdGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHVzZXJNZXNzYWdlIGVsZW1lbnQuJylcbiAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlJlc3RvcmUgRGVmYXVsdFwiKVxuICAgICAgICAgICAgLnNldEljb24oXCJyb3RhdGUtY3dcIilcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcImNsaWNrYWJsZS1pY29uXCIpXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gY29sb3JUb0hleChkZWZhdWx0VXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyMS5zZXRWYWx1ZShkZWZhdWx0VmFsdWUpO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnVzZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlcy5mb3JFYWNoKCh1c2VyTWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHVzZXJNZXNzYWdlIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICAuYWRkQ29sb3JQaWNrZXIoKGNvbG9yKSA9PiB7XG4gICAgICAgICAgICBjb2xvclBpY2tlcjEgPSBjb2xvcjtcblxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZSA9IHBsdWdpbi5zZXR0aW5ncy51c2VyTWVzc2FnZUJhY2tncm91bmRDb2xvcjtcblxuICAgICAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy51c2VyTWVzc2FnZUJhY2tncm91bmRDb2xvciA9PSBcIi0tYmFja2dyb3VuZC1wcmltYXJ5XCIpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWUgPSBjb2xvclRvSGV4KGRlZmF1bHRVc2VyTWVzc2FnZUJhY2tncm91bmRDb2xvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbG9yLnNldFZhbHVlKGRlZmF1bHRWYWx1ZSlcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZXhWYWx1ZSA9IGNvbG9yVG9IZXgodmFsdWUpO1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy51c2VyTWVzc2FnZUJhY2tncm91bmRDb2xvciA9IGhleFZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnVzZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlcy5mb3JFYWNoKCh1c2VyTWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHVzZXJNZXNzYWdlIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBoZXhWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgbGV0IGNvbG9yUGlja2VyMjogQ29sb3JDb21wb25lbnQ7XG4gICAgY29uc3QgZGVmYXVsdEJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoJ0JhY2tncm91bmQgY29sb3IgZm9yIEJvdCBNZXNzYWdlcycpXG4gICAgICAgIC5zZXREZXNjKCdNb2RpZnkgdGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIGJvdE1lc3NhZ2UgZWxlbWVudC4nKVxuICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiUmVzdG9yZSBEZWZhdWx0XCIpXG4gICAgICAgICAgICAuc2V0SWNvbihcInJvdGF0ZS1jd1wiKVxuICAgICAgICAgICAgLnNldENsYXNzKFwiY2xpY2thYmxlLWljb25cIilcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBjb2xvclRvSGV4KGRlZmF1bHRCb3RNZXNzYWdlQmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgICAgICAgICBjb2xvclBpY2tlcjIuc2V0VmFsdWUoZGVmYXVsdFZhbHVlKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmJvdE1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZXMuZm9yRWFjaCgoYm90TWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGJvdE1lc3NhZ2UgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIC5hZGRDb2xvclBpY2tlcigoY29sb3IpID0+IHtcbiAgICAgICAgICAgIGNvbG9yUGlja2VyMiA9IGNvbG9yO1xuXG4gICAgICAgICAgICBsZXQgZGVmYXVsdFZhbHVlID0gcGx1Z2luLnNldHRpbmdzLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3I7XG5cbiAgICAgICAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvciA9PSBcIi0tYmFja2dyb3VuZC1zZWNvbmRhcnlcIikge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9IGNvbG9yVG9IZXgoZGVmYXVsdEJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb2xvci5zZXRWYWx1ZShkZWZhdWx0VmFsdWUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZXhWYWx1ZSA9IGNvbG9yVG9IZXgodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvciA9IGhleFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYm90TWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZXMuZm9yRWFjaCgoYm90TWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBib3RNZXNzYWdlIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaGV4VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0iLCAiaW1wb3J0IHsgU2V0dGluZywgU2V0dGluZ1RhYiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEJNT0dQVCwgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcInNyYy9tYWluXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDaGF0SGlzdG9yeVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBCTU9HUFQsIFNldHRpbmdUYWI6IFNldHRpbmdUYWIpIHtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ0NoYXQgSGlzdG9yeSd9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnQ2hhdCBIaXN0b3J5IEZvbGRlciBQYXRoJylcbiAgICAgICAgLnNldERlc2MoJ1NhdmUgeW91ciBjaGF0IGhpc3RvcnkgaW4gYSBzcGVjaWZpZWQgZm9sZGVyLicpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdCTU8vJylcbiAgICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlQYXRoIHx8IERFRkFVTFRfU0VUVElOR1MuY2hhdEhpc3RvcnlQYXRoKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeVBhdGggPSB2YWx1ZSA/IHZhbHVlIDogREVGQVVMVF9TRVRUSU5HUy5jaGF0SGlzdG9yeVBhdGg7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnVGVtcGxhdGUgRmlsZSBQYXRoJylcbiAgICAgICAgLnNldERlc2MoJ0luc2VydCB5b3VyIHRlbXBsYXRlIGZpbGUgcGF0aC4nKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcigndGVtcGxhdGVzL2Jtby5tZCcpXG4gICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlRmlsZVBhdGggfHwgREVGQVVMVF9TRVRUSU5HUy50ZW1wbGF0ZUZpbGVQYXRoKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZUZpbGVQYXRoID0gdmFsdWUgPyB2YWx1ZSA6IERFRkFVTFRfU0VUVElOR1MudGVtcGxhdGVGaWxlUGF0aDtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHByb3ZpZGVkIGZpbGUgcGF0aCBlbmRzIHdpdGggJy5tZCcsIGlmIG5vdCwgYXBwZW5kIGl0XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlRmlsZVBhdGguZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVGaWxlUGF0aCArPSAnLm1kJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpOyAvLyBSZXRyaWV2ZSBhbGwgZmlsZXMgZnJvbSB0aGUgdmF1bHRcblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc3BlY2lmaWVkIGZpbGUgcGF0aCAoaW5jbHVkaW5nIGRpcmVjdG9yaWVzKSBleGlzdHMgaW4gdGhlIGFycmF5IG9mIGZpbGVzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVFeGlzdHMgPSBhbGxGaWxlcy5zb21lKGZpbGUgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKSA9PT0gcGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlRmlsZVBhdGgudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiRmlsZSBleGlzdHMgaW4gdmF1bHQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLmJvcmRlckNvbG9yID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiRmlsZSBkb2VzIG5vdCBleGlzdCBpbiB2YXVsdC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUuYm9yZGVyQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGlucHV0IGlzIGVtcHR5LCByZXNldCB0aGUgYm9yZGVyIGNvbG9yXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5ib3JkZXJDb2xvciA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZUZpbGVQYXRoID0gREVGQVVMVF9TRVRUSU5HUy50ZW1wbGF0ZUZpbGVQYXRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoJ0FsbG93IFJlbmFtZSBOb3RlIFRpdGxlJylcbiAgICAgICAgLnNldERlc2MoJ0FsbG93IG1vZGVsIHRvIHJlbmFtZSB0aGUgbm90ZSB0aXRsZSB3aGVuIHNhdmluZyBjaGF0IGhpc3RvcnkuJylcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5hbGxvd1JlbmFtZU5vdGVUaXRsZSkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmFsbG93UmVuYW1lTm90ZVRpdGxlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbn0iLCAiaW1wb3J0IHsgU2V0dGluZywgU2V0dGluZ1RhYiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEJNT0dQVCwgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcInNyYy9tYWluXCI7XG5pbXBvcnQgeyBhZGREZXNjcmlwdGlvbkxpbmsgfSBmcm9tIFwic3JjL3V0aWxzL0Rlc2NyaXB0aW9uTGlua1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkT2xsYW1hU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJNT0dQVCwgU2V0dGluZ1RhYjogU2V0dGluZ1RhYikge1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnT2xsYW1hIExvY2FsIExMTXMnfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKCdPTExBTUEgUkVTVCBBUEkgVVJMJylcbiAgICAgICAgLnNldERlc2MoYWRkRGVzY3JpcHRpb25MaW5rKCdFbnRlciB5b3VyIFJFU1QgQVBJIFVSTCB1c2luZycsICdodHRwczovL29sbGFtYS5haS8nLCAnJywgJ09sbGFtYScpKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cDovL2xvY2FsaG9zdDoxMTQzNCcpXG4gICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLm9sbGFtYVJlc3RBUElVcmwgfHwgREVGQVVMVF9TRVRUSU5HUy5vbGxhbWFSZXN0QVBJVXJsKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3Mub2xsYW1hUmVzdEFQSVVybCA9IHZhbHVlID8gdmFsdWUgOiBERUZBVUxUX1NFVFRJTkdTLm9sbGFtYVJlc3RBUElVcmw7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKCdBbGxvdyBTdHJlYW0nKVxuICAgICAgICAuc2V0RGVzYyhhZGREZXNjcmlwdGlvbkxpbmsoJ0FsbG93IE9sbGFtYSBtb2RlbHMgdG8gc3RyZWFtIHJlc3BvbnNlLiBBZGRpdGlvbmFsIHNldHVwIHJlcXVpcmVkOiAnLCAnaHR0cHM6Ly9naXRodWIuY29tL2xvbmd5Mmsvb2JzaWRpYW4tYm1vLWNoYXRib3Qvd2lraScsICcnLCAnW0luc3RydWN0aW9uc10nKSlcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5hbGxvd09sbGFtYVN0cmVhbSkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmFsbG93T2xsYW1hU3RyZWFtID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxufSIsICJleHBvcnQgZnVuY3Rpb24gYWRkRGVzY3JpcHRpb25MaW5rKHRleHQ6IHN0cmluZywgbGluazogc3RyaW5nLCBleHRyYVdvcmRzOiBzdHJpbmcsIGlubmVyVGV4dDogc3RyaW5nKTogRG9jdW1lbnRGcmFnbWVudCB7XG4gICAgY29uc3QgZnJhZyA9IG5ldyBEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgY29uc3QgZGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBkZXNjLmlubmVyVGV4dCA9IHRleHQgKyAnICc7XG4gICAgZnJhZy5hcHBlbmRDaGlsZChkZXNjKTtcblxuICAgIGNvbnN0IGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBhbmNob3IuaHJlZiA9IGxpbms7XG4gICAgYW5jaG9yLnRhcmdldCA9ICdfYmxhbmsnO1xuICAgIGFuY2hvci5yZWwgPSAnbm9vcGVuZXIgbm9yZWZlcnJlcic7XG4gICAgYW5jaG9yLmlubmVyVGV4dCA9IGlubmVyVGV4dDtcbiAgICBmcmFnLmFwcGVuZENoaWxkKGFuY2hvcik7XG5cbiAgICBjb25zdCBleHRyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBleHRyYS5pbm5lclRleHQgPSAnICcgKyBleHRyYVdvcmRzO1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQoZXh0cmEpO1xuXG4gICAgcmV0dXJuIGZyYWc7XG59IiwgImltcG9ydCB7IFNldHRpbmcsIFNldHRpbmdUYWIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBCTU9HUFQsIHsgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gXCJzcmMvbWFpblwiO1xuaW1wb3J0IHsgYWRkRGVzY3JpcHRpb25MaW5rIH0gZnJvbSBcInNyYy91dGlscy9EZXNjcmlwdGlvbkxpbmtcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJNT0dQVCwgU2V0dGluZ1RhYjogU2V0dGluZ1RhYikge1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnQWR2YW5jZWQnfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnT1BFTkFJIEJBU0UgVVJMJylcbiAgICAuc2V0RGVzYygnRW50ZXIgeW91ciBjdXN0b20gT3BlbkFJIGJhc2UgdXJsLicpXG4gICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KFwiUmVzdG9yZSBEZWZhdWx0XCIpXG4gICAgICAgIC5zZXRJY29uKFwicm90YXRlLWN3XCIpXG4gICAgICAgIC5zZXRDbGFzcyhcImNsaWNrYWJsZS1pY29uXCIpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5vcGVuQUlCYXNlVXJsID0gREVGQVVMVF9TRVRUSU5HUy5vcGVuQUlCYXNlVXJsO1xuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KVxuICAgIClcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxJylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5vcGVuQUlCYXNlVXJsIHx8IERFRkFVTFRfU0VUVElOR1Mub3BlbkFJQmFzZVVybClcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5vcGVuQUlCYXNlVXJsID0gdmFsdWUgPyB2YWx1ZSA6IERFRkFVTFRfU0VUVElOR1Mub3BlbkFJQmFzZVVybDtcbiAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIFNldHRpbmdUYWIuZGlzcGxheSgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnTE9DQUxBSSBSRVNUIEFQSSBVUkwnKVxuICAgIC5zZXREZXNjKGFkZERlc2NyaXB0aW9uTGluaygnRW50ZXIgeW91ciBSRVNUIEFQSSBVUkwgdXNpbmcnLCAnaHR0cHM6Ly9naXRodWIuY29tL2dvLXNreW5ldC9Mb2NhbEFJJywgJycsICdMb2NhbEFJJykpXG4gICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cDovL2xvY2FsaG9zdDo4MDgwJylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5sb2NhbEFJUmVzdEFQSVVybCB8fCBERUZBVUxUX1NFVFRJTkdTLmxvY2FsQUlSZXN0QVBJVXJsKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmxvY2FsQUlSZXN0QVBJVXJsID0gdmFsdWUgPyB2YWx1ZSA6IERFRkFVTFRfU0VUVElOR1MubG9jYWxBSVJlc3RBUElVcmw7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgfSlcbiAgICApO1xufSIsICJpbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgQk1PR1BUIGZyb20gXCJzcmMvbWFpblwiO1xuXG4vLyBGZXRjaCBPTExBTUEgbW9kZWxzIGZyb20gT0xMQU1BIFJFU1QgQVBJXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hPbGxhbWFNb2RlbHMocGx1Z2luOiBCTU9HUFQpIHtcblx0Y29uc3Qgb2xsYW1hUmVzdEFQSVVybCA9IHBsdWdpbi5zZXR0aW5ncy5vbGxhbWFSZXN0QVBJVXJsO1xuXG5cdC8vIGlmICghb2xsYW1hUmVzdEFQSVVybCkge1xuXHQvLyBcdHJldHVybjtcblx0Ly8gfVxuXG5cdHRyeSB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcblx0XHRcdHVybDogb2xsYW1hUmVzdEFQSVVybCArICcvYXBpL3RhZ3MnLFxuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBqc29uRGF0YSA9IHJlc3BvbnNlLmpzb247XG5cblx0XHRjb25zdCBtb2RlbHMgPSBqc29uRGF0YS5tb2RlbHMubWFwKChtb2RlbDogeyBuYW1lOiBzdHJpbmc7IH0pID0+IG1vZGVsLm5hbWUpO1xuXHRcdHBsdWdpbi5zZXR0aW5ncy5vbGxhbWFNb2RlbHMgPSBtb2RlbHM7ICBcblxuXHRcdHJldHVybiBtb2RlbHM7XG5cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG5cdH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTG9jYWxBSU1vZGVscyhwbHVnaW46IEJNT0dQVCkge1xuXHRjb25zdCBsb2NhbEFJUmVzdEFQSVVybCA9IHBsdWdpbi5zZXR0aW5ncy5sb2NhbEFJUmVzdEFQSVVybDtcblxuXHRpZiAoIWxvY2FsQUlSZXN0QVBJVXJsKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgdXJsID0gbG9jYWxBSVJlc3RBUElVcmwgKyAnL3YxL21vZGVscyc7XG5cblx0dHJ5IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuXHRcdFx0dXJsOiB1cmwsXG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGpzb25EYXRhID0gcmVzcG9uc2UuanNvbjtcblxuXHRcdGNvbnN0IG1vZGVscyA9IGpzb25EYXRhLmRhdGEubWFwKChtb2RlbDogeyBpZDogbnVtYmVyOyB9KSA9PiBtb2RlbC5pZCk7IFxuXG5cdFx0cGx1Z2luLnNldHRpbmdzLmxvY2FsQUlNb2RlbHMgPSBtb2RlbHM7ICBcblxuXHRcdHJldHVybiBtb2RlbHM7XG5cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG5cdH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQyxvQkFBdUI7OztBQ0F2QixJQUFBQyxtQkFBa0Y7OztBQ0MzRSxTQUFTLFdBQVcsWUFBNEI7QUFDbkQsTUFBSSxXQUFXLFdBQVcsS0FBSyxHQUFHO0FB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QixTQUFTLGNBQWMsbUJBQW1CO0FBQ25FLFFBQUksa0JBQWtCO0FBQ3JCLHVCQUFpQixPQUFPO0FBQUEsUUFDdkIsS0FBSyxpQkFBaUI7QUFBQSxRQUN0QixVQUFVO0FBQUEsTUFDWCxDQUFDO0FBQUEsSUFDRjtBQUFBLEVBQ0Q7QUFBQSxFQUdBLE1BQU0sZUFBZTtBQUNwQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzFFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbEM7QUFDRDsiLAogICJuYW1lcyI6IFsiQk1PR1BUIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaGV4IiwgIl9hIiwgIkZpbGUiLCAib3B0aW9ucyIsICJfYSIsICJvcHRzIiwgIlBhZ2UiLCAib3B0aW9ucyIsICJfYSIsICJvcHRpb25zIiwgIlBhZ2UiLCAiX2EiLCAib3B0aW9ucyIsICJfYSIsICJvcHRpb25zIiwgIlRyYW5zY3JpcHRpb25zIiwgIm9wdGlvbnMiLCAiVHJhbnNsYXRpb25zIiwgIkF1ZGlvIiwgIm9wdGlvbnMiLCAiX2EiLCAiQ2hhdCIsICJDb21wbGV0aW9ucyIsICJvcHRpb25zIiwgIl9hIiwgIm9wdGlvbnMiLCAiRW1iZWRkaW5ncyIsICJvcHRpb25zIiwgIkVkaXRzIiwgIm9wdGlvbnMiLCAib3B0aW9ucyIsICJfYSIsICJvcHRpb25zIiwgIkpvYnMiLCAiRmluZVR1bmluZyIsICJvcHRpb25zIiwgIkltYWdlcyIsICJvcHRpb25zIiwgIk1vZGVscyIsICJvcHRpb25zIiwgIk1vZGVyYXRpb25zIiwgIm9wdGlvbnMiLCAiQ29tcGxldGlvbnMiLCAiT3BlbkFJIiwgIm5vb3BUZXN0IiwgImxleGVyIiwgIm9wdGlvbnMiLCAidGV4dCIsICJtYW5nbGUiLCAic21hcnR5cGFudHMiLCAicGFyc2VyIiwgInNyYyIsICJhcmdzIiwgInJldCIsICJ3YWxrVG9rZW5zIiwgIl9hIiwgIm1lc3NhZ2UiLCAiX2IiLCAibWVzc2FnZUhpc3RvcnkiLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgImZpbGUiLCAiX2EiLCAibG9hZGluZ0VsIiwgInNwYWNlciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNldHRpbmdUYWIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNldHRpbmdUYWIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNldHRpbmdUYWIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNldHRpbmdUYWIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNldHRpbmdUYWIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJCTU9HUFQiXQp9Cg==
